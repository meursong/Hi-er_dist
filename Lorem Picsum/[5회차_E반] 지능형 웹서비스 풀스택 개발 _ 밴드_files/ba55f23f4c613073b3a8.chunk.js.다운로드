(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1214:function(e,t,n){var r;void 0===(r=function(e){var t=n(6),r=n(2),a=n(0),i=n(10),s=n(16),o=n(174),u=n(9),l=n(54),d=n(521),c=n(13),h="????",p="----",f="-",m="+",g=t.Model.extend({parse:function(e){var t={};return t.name=e.name,a.isEmpty(e.birthdate)||(t.birthdate=e.birthdate),t.country=e.country,a.isEmpty(e.gender)||(t.gender=e.gender),a.isEmpty(e.cellphone)||(t.phoneNumber=o.getPhoneNumberInfoFromFullNumber(e.cellphone)),a.isEmpty(e.email)||(t.email=e.email),t.isEmailVerified=e.is_email_verified,t.facebookUserId=e.facebook_user_id,t.naverId=e.naver_id,t.googleUserId=e.google_user_id,t.lineUserId=e.line_user_id,t.appleUserId=e.apple_user_id,t.isExistPassword=e.is_exist_password,t.whaleUserId=e.whale_user_id,t.personalInfoAgreements=e.personal_info_agreements,t}}),I={name:null,birthdate:null,birthday:{year:null,month:null,day:null,isLunar:!1},gender:null,isOtherGenderSelectable:!1,country:null,phoneNumber:{isValidNumber:!1,countryCode:null,regionCode:null,formatE164:null,formatLocal:null,internationalNumber:null,nationalNumber:null},email:null,userAccounts:{facebookId:null,naverId:null,googleId:null,lineId:null,appleId:null,whaleUserId:null},agreementsInfo:{birthday:!1,contacts:!1,email:!1,gender:!1,location:!1,phoneNumber:!1,profileImage:!1}},b=t.Model.extend({defaults:function(){return I},fetchUserProfile:function(){return l.getProfile().then(a.bind((function(e){return this.apiProfileData=new g(e,{parse:!0}),this._setUserData(),this}),this))},fetchUserProfileFromUserData:function(e){return this.apiProfileData=new g(e,{parse:!0}),this._setUserData(),this},_setUserData:function(){this._setName(),this._setBirthdate(),this._setGender(),this._setPersonalInfoAgreements(),this._setPhoneNumber(),this._setEmail(),this._setConnectedAccounts()},_setName:function(){this.set("name",this.apiProfileData.get("name"))},_setBirthdate:function(){var e=this.apiProfileData.get("birthdate");if(this.set("birthdate",e),e){var t={year:a.isFinite(e.substring(0,4))?e.substring(0,4):h,month:e.substring(4,6),day:e.substring(6,8),isLunar:e.substring(8,9)===f};this.set("birthday",t)}},_setGender:function(){this.set({gender:this.apiProfileData.get("gender")?this.apiProfileData.get("gender"):null,isOtherGenderSelectable:a.indexOf(["KR","JP","TW"],this.apiProfileData.get("country"))<0})},_setPhoneNumber:function(){var e=this.apiProfileData.get("phoneNumber");if(a.isEmpty(e))this.set("phoneNumber",I.phoneNumber);else{var t={isValidNumber:e.isValidNumber,countryCode:e.countryCode,regionCode:e.regionCode||this.apiProfileData.get("country"),formatE164:e.formatE164?e.formatE164:null,formatLocal:e.formatLocal?e.formatLocal:null,internationalNumber:e.formatInternational?e.formatInternational:null,nationalNumber:e.nationalNumber?e.nationalNumber:null};this.set("phoneNumber",t)}},_setEmail:function(){var e=this.apiProfileData.get("email");a.isEmpty(e)&&this.set("email",null),this.set("email",this.apiProfileData.get("email"))},_setConnectedAccounts:function(){var e={facebookId:this.apiProfileData.get("facebookUserId"),naverId:this.apiProfileData.get("naverId"),googleId:this.apiProfileData.get("googleUserId"),lineId:this.apiProfileData.get("lineUserId"),appleId:this.apiProfileData.get("appleUserId"),whaleUserId:this.apiProfileData.get("whaleUserId")};this.set("userAccounts",e)},_setPersonalInfoAgreements:function(){var e=this.apiProfileData.get("personalInfoAgreements"),t={birthday:e.birthday,contacts:e.contacts,email:e.email,gender:e.gender,location:e.location,phoneNumber:e.phone_number,profileImage:e.profile_image};this.set("agreementsInfo",t)},getBirthdayText:function(){var e=this.apiProfileData.get("birthdate");if(!e)return null;e.substring(0,4)!=h&&e.substring(0,4)!=p||(e="9999"+e.substring(4,9));var t=s(e.substring(0,8),"YYYYMMDDHHmmss");return t.add(9,"hour"),e.substring(8,9)===f&&"0229"===e.substring(4,8)?IM("setting.profile.birthday.full_format",{year:e.substring(0,4),month:e.substring(5,6),day:e.substring(6,8)}):u.format.date(t,"long").replace("9999",h)},isValidBirthday:function(){var e=this.apiProfileData.get("birthdate");return/\d{8}/.test(e+"")},getAccessibleBirthdayYear:function(){var e=u.spec.getBandAccessibleAge();return(new Date).getFullYear()-e},setUserProfile:function(e,t){var n,i=r.Deferred();try{if(n=this._parseUserProfileParams(e),a.isEmpty(n))return i.resolve();!1===t&&(n.check_guardianship=!1)}catch(e){return i.reject(e)}return l.setProfile(n).then(a.bind((function(){this.fetchUserProfile().then((function(){i.resolve()}))}),this),(function(e){e.params=n,i.reject(e)})),i.promise()},_parseUserProfileParams:function(e){var t={},n=i.trim(this._parseBirthDate(e)),r=i.trim(e.gender),a=[],s={year:this.get("birthday").year,month:this.get("birthday").month,day:this.get("birthday").day,isLunar:this.get("birthday").isLunar};return n&&n!==i.trim(this._parseBirthDate(s))&&(t.birthdate=n),r&&r!==i.trim(this.get("gender"))&&(t.gender=r),t.gender&&!this.get("agreementsInfo").gender&&a.push(d.AGREE_TARGET.GENDER),t.birthdate&&!this.get("agreementsInfo").birthday&&a.push(d.AGREE_TARGET.BIRTHDAY),a.length>0&&(t.personal_info_items=a.join(",")),t},_parseBirthDate:function(e){if(null==e.year||null==e.month||null==e.day)return null;var t=[],n=parseInt(e.year),r=parseInt(e.month),a=parseInt(e.day),i=!!e.isLunar;return r<=0||a<=0?null:(t.push(n>0?n:h),r<10&&t.push(0),t.push(r),a<10&&t.push(0),t.push(a),t.push(i?f:m),t.join(""))},checkConnectedUserAccount:function(){return!!(this.get("userAccounts").facebookId||this.get("email")||this.get("userAccounts").googleId||this.get("userAccounts").naverId||this.get("userAccounts").appleId)},checkConnectedGoogleId:function(){return!u.isKoreaCountryCode()&&!u.isJapanCountryCode()&&!u.isTaiwanCountryCode()&&!u.isThailandCountryCode()||this.get("userAccounts").googleId},checkConnectedNaverId:function(){return u.isKoreanLanguage()||u.isKoreaCountryCode()},checkConnectedLineId:function(){return u.isJapanLanguage()||u.isJapanCountryCode()||u.isTaiwanLanguage()||u.isTaiwanCountryCode()||u.isThailandLanguage()||u.isThailandCountryCode()},isEmailVerified:function(){return this.apiProfileData.get("isEmailVerified")},isWhaleConnected:function(){return!a.isEmpty(i.trim((this.get("userAccounts")||{}).whaleUserId))},isPasswordExist:function(){return this.apiProfileData.get("isExistPassword")},setUserAccounts:function(e,t){var n=a.clone(this.get("userAccounts"));switch(e){case t.NAVER:n.naverId="";break;case t.FACEBOOK:n.facebookId="";break;case t.LINE:n.lineId="";break;case t.GOOGLE:n.googleId="";break;case t.APPLE:n.appleId="";break;case t.WHALE:n.whaleUserId=""}this.set("userAccounts",n)},getPhoneNumber:function(){return this.get("phoneNumber")},canShowLinkedAccount:function(){return c.isNotKid()}});return b.GENDER={MALE:"male",FEMALE:"female",OTHER:"other"},b.build=function(){return new b},b}.call(t,n,t,e))||(e.exports=r)},535:function(e,t,n){var r;void 0===(r=function(e){var t=n(2),r=n(0),a=n(9),i=n(53),s=n(157),o=(n(44),n(153));n(184);var u="bandapp",l="bandappkids",d={IOS:"IOS",ANDROID:"ANDROID"},c={};c[d.ANDROID]={"zh-TW":"zh_tw","zh-CN":"zh_cn",id:"en"},c[d.IOS]={ko:"kr",ja:"jp","zh-CN":"cn","zh-TW":"tw",ms:"my",id:"id","es-ES":"es",vi:"vn",th:"th"};var h={};h[d.ANDROID]={NON_KID:"com.nhn.android.band",KID:"com.nhn.android.bandkids"},h[d.IOS]={NON_KID:"id542613198",KID:"id1527684503"};var p={};p[d.IOS]="https://itunes.apple.com/{lang}/app/{appId}?mt=8",p[d.ANDROID]="https://play.google.com/store/apps/details?id={appId}&hl={lang}";var f={isIOS:function(){return!!t.ua.platform.ios},isIPhone:function(){return t.ua.platform.ios&&t.ua.platform.mobile&&!t.ua.platform.tablet},isIPad:function(){return t.ua.platform.ios&&t.ua.platform.tablet},getIOSMajorVersion:function(){return this.getIOSVersion()[0]},getIOSVersion:function(){if(this.isIOS()){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return[0,0,0]},isAndroid:function(){return!!t.ua.platform.android},makeMarketUrl:function(e,t){t=t||this._getMarketType();var n=h[t][e?"KID":"NON_KID"],r=c[t][a.lang]||a.lang;return t===d.IOS&&"en"===r?"https://itunes.apple.com/app/"+n+"?mt=8":p[t].replace("{appId}",n).replace("{lang}",r)},openAppStoreUrl:function(e,t){var n=this.makeMarketUrl(e,t);f.isIOS()?window.open(n):window.location.href=n},openBandAppWithScheme:function(e,n,a){var i=this._getAppSchemeProtocol(a)+"://"+e;r.isEmpty(n)||(i+="?"+t.param(n));try{window.location.href=i}catch(e){this.isIOS()&&(window.location.href=this.makeMarketUrl(a,d.IOS))}},openBandApp:function(e,t,n,r){var a=this._getBandAppSchemePathByRouteInfo(e,t,n);a&&this.openBandAppWithScheme(a,null,r)},openBandAppByCurrentRouteInfo:function(e){var t=i.getCurrentRouteInfo(),n=t.routeInfo,r=t.pathVariables,a=t.params;this.openBandApp(n,r,a,e)},_getMarketType:function(){return this.isIOS()?d.IOS:this.isAndroid()?d.ANDROID:void 0},_getAppSchemeProtocol:function(e){return e?l:u},_getBandAppSchemePathByRouteInfo:function(e,t,n){var a=r.mapObject(t,(function(e){return encodeURIComponent(decodeURIComponent(e))}));switch(n=r.mapObject(n,(function(e){return encodeURIComponent(decodeURIComponent(e))})),e){case s.GLOBAL_HOME:return"band";case s.GLOBAL_SHARE_STICKER:return"shop/sticker/detail/"+a.sticker_id;case s.GLOBAL_MY_PROFILE:return"setting/profile/loginAccount";case o.GROUP_BAND_MISSION_MY_STATUS:return"band/"+t.band_no+"/mission/"+t.mission_id+"/detail-status/status";case o.GROUP_BAND_MISSION_MEMBERS:return"band/"+t.band_no+"/mission/"+t.mission_id+"/detail-members/members";case s.GLOBAL_BAND_CREATE:return"create/band";case s.GLOBAL_GROUP_BAND_CREATE:return"create/band/quick?usecase_name="+n.usecase+"&open_type="+n.open_type;case s.GLOBAL_OPEN_FEED:return"open/openfeed";default:return e.makePath(a,n)}}};return f.MARKET_TYPE=d,f}.call(t,n,t,e))||(e.exports=r)}}]);