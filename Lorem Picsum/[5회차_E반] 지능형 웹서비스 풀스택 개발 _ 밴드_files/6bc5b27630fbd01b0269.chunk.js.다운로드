/*! For license information please see 6bc5b27630fbd01b0269.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[104,22],{1e3:function(e,t,n){var i;void 0===(i=function(e){var t=n(0);function i(e){return function(t,n){return n<e&&n>=0}}return n(4).Behavior.extend({options:{firstRenderItemSize:10,renderItemSize:5,hasMoreItemFunction:"hasMoreItem",fetchNextItemFunction:"fetchNextItem",renderNextEvent:"intervalRender:renderNext"},initialize:function(){this._isFetching=!1,this._currentShowingItemCount=this.options.firstRenderItemSize,this.view.setFilter(i(this._currentShowingItemCount)),this._startToListenFetchingNextItem()},_startToListenFetchingNextItem:function(){this.listenTo(this.view,this.options.renderNextEvent,this._renderNext),this.view.startToTriggerFetchingNextItem()},_stopToListenFetchingNextItem:function(){this.view.stopToTriggerFetchingNextItem()},_renderNext:function(){if(this.view.children.length>=this.view.collection.length){if(this._isFetching)return;if(!this._hasMoreItem())return void this._stopToListenFetchingNextItem();this._isFetching=!0,this._fetchNextItem().always(t.bind((function(){this._isFetching=!1,this.view.children.length<this.view.collection.length&&this._renderMoreItem()}),this))}else this._renderMoreItem()},_renderMoreItem:function(){this._currentShowingItemCount=Math.min(this._currentShowingItemCount+this.options.renderItemSize,this.view.collection.length),this.view.setFilter(i(this._currentShowingItemCount))},_hasMoreItem:function(){var e=this.view.collection[this.options.hasMoreItemFunction];if(!t.isFunction(e))throw new Error('hasMoreItemFunction "'+this.options.hasMoreItemFunction+'()" is not function');return e.call(this.view.collection)},_fetchNextItem:function(){var e=this.view.collection[this.options.fetchNextItemFunction];if(!t.isFunction(e))throw new Error('fetchNextItemFunction "'+this.options.fetchNextItemFunction+'()" is not function');return e.call(this.view.collection)}})}.call(t,n,t,e))||(e.exports=i)},1001:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(520),a=n(176),o=n(517),l={POPULAR:"POPULAR",RECENT:"RECENT",COMMENT:"COMMENT"},r=i.Collection.extend({model:o,initialize:function(e,t){this._listOrderType=t.listOrderType||l.RECENT,this.bandNo=t.bandNo,this._hasMore=!0,this.onLoading=!1,this._initializeNextPageParams(),this._isShowPopularPostInPreview=t.isShowPopularPostInPreview},_initializeNextPageParams:function(){this.nextPageParams={band_no:this.bandNo,direction:"before",resolution_type:4},this._listOrderType===l.COMMENT&&(this.nextPageParams.order_by="commented_at_desc")},_startLoading:function(){this.onLoading=!0,this.trigger("startLoading")},_endLoading:function(){this.onLoading=!1,this.trigger("endLoading")},hasMore:function(){return this._hasMore},resetAsFirstPage:function(){return this._hasMore=!0,this.onLoading=!1,this._initializeNextPageParams(),this.reset([]),this.fetchNextPostList()},fetchNextPostList:function(){return this._startLoading(),a.fetchBandJoin().then(t.bind((function(){return this._listOrderType===l.POPULAR?s.getPopularPosts(this.nextPageParams):s.getPosts(this.nextPageParams)}),this)).then(t.bind((function(e){this._endLoading();var t=e.items;return this.nextPageParams=e.paging.next_params,t&&t.length>0&&this.set(t,{add:!0,merge:!1,remove:!1,parse:!0}),this.nextPageParams&&t&&0!=t.length||(this._hasMore=!1),this._listOrderType===l.POPULAR&&this._isShowPopularPostInPreview&&t&&t.length>10&&(this.nextPageParams=null,this._hasMore=!1,this.reset(this.first(10))),this}),this))}});return r.LIST_ORDER_TYPE=l,r.createPostListCollection=function(e,t,n){return new r([],{listOrderType:t,bandNo:e,isShowPopularPostInPreview:n||!1})},r}.call(t,n,t,e))||(e.exports=i)},1007:function(e,t,n){var i=n(2),s=n(0),a=n(52),o=n(6),l=n(1083),r=n(627),d="LIST",c="SEARCH",h="QUOTA",u=o.Collection.extend({model:l,modelId:function(e){return e.fileId||e.file_id},initialize:function(e,t){this._fetching=!1,this._total=0},enableFileListCheckable:function(){this._toggleCheckable(!0)},disableFileListCheckable:function(){this._toggleCheckable(!1)},_toggleCheckable:function(e){this.invoke("trigger","file:checkable",e),this.trigger("file-list:checkable",e)},clearFileListChecked:function(){this.invoke("trigger","file:checked",!1),this.trigger("file-list:checked")},removeFileList:function(e){var t=this.length;this.remove(e);var n=t-this.length;this._total&&(this._total=Math.max(this._total-n,this.length)),this.trigger("file-list:removed",n)},getCheckedFileCount:function(){return this.getCheckedFiles().length},getCheckedFiles:function(){return this.filter((function(e){return e.isCheckedFile()}))},isFetchingFiles:function(){return this._fetching},hasMoreFiles:function(){return!s.isEmpty(this._params)},getTotalFileCount:function(){return this._total},fetchFiles:function(e){return this._fetchFiles(d,e)},fetchMoreFiles:function(){this._fetching||s.isEmpty(this._params)||this._fetchFiles(d)},searchFiles:function(e){return this._fetchFiles(c,e)},searchMoreFiles:function(){this._fetching||s.isEmpty(this._params)||this._fetchFiles(c)},fetchFilesForQuota:function(e){return this._fetchFiles(h,e)},fetchMoreFilesForQuota:function(){if(!this._fetching&&!s.isEmpty(this._params))return this._fetchFiles(h)},_fetchFiles:function(e,t){return this._fetching=!0,t&&(this._params=a.decamelizeKeys(t),this.reset(),this._total=0),s.isEmpty(this._params)?(this._fetching=!1,i.when()):this._fetchFilesBy(e).then(s.bind((function(e){var t=e.paging||{};this.add(e.items,{parse:!0}),this._params=t.next_params,this._total=e.total||0}),this)).always(s.bind((function(){this._fetching=!1,this.trigger("fetched")}),this))},_fetchFilesBy:function(e){switch(e){case d:return r.getFiles(this._params);case c:return r.searchFiles(this._params);case h:return r.getFilesForQuota(this._params);default:return null}}});u.FILTER={ALL:"all",FOLDER:"folder",UNASSIGNED:"unassigned"},u.ORDER_BY={CREATED_AT_DESC:"created_at_desc",CREATED_AT_ASC:"created_at_asc"},u.QUOTA_ORDER_BY={CREATED_AT:"created_at",FILE_SIZE:"file_size"},u.build=function(e){return new u(e,{parse:!0})},e.exports=u},1010:function(e,t,n){var i=n(21),s={searchRegion:function(e){return i.getNoLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/search_region",data:e})},searchRegionByCoords:function(e,t,n){var s={coords:e+","+t};return n&&(s.band_no=n),i.getNoLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/search_region_by_coords",data:s})},getUserRegionSearchHistory:function(e){var t={};return e&&(t.band_no=e),i.getLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/get_user_region_search_history",data:t})},addUserRegionSearchHistory:function(e){return i.getLoginV1ClientWithoutErrorAlert().sendAndThenProcess({url:"https://api.band.us/v2.0.0/add_user_region_search_history",method:"POST",data:{rcode:e}})},removeUserRegionSearchHistory:function(e){return i.getLoginV1ClientWithoutErrorAlert().sendAndThenProcess({url:"https://api.band.us/v2.0.0/remove_user_region_search_history",method:"POST",data:{rcode:e}})},getRecommendBandSubscribers:function(e,t,n){return i.getNoLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/get_recommend_band_subscribers",data:{rcode:e,keyword_group:t,keyword:n}})},subscribeRecommendBand:function(e,t,n){return i.getLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/subscribe_recommend_band",method:"POST",data:{rcode:e,keyword:t,force:n}})},unsubscribeRecommendBand:function(e,t){return i.getLoginV1Client().sendAndThenProcess({url:"https://api.band.us/v2.0.0/unsubscribe_recommend_band",method:"POST",data:{rcode:e,keyword:t}})}};e.exports=s},1014:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(157),a=n(663),o=n(853),l=n(13),r=n(9),d=i.Model.extend({defaults:{region:null,regionLinkUrl:null,keyword:null,keywordLinkUrl:null,joinConditionLabel:null,showRegionAndKeyword:!1},initialize:function(e,t){this._bandData=t.bandData,this._localBandPermission=t.localBandPermission,this._initAttrs()},resetAttrs:function(){this._initAttrs()},_initAttrs:function(){var e={region:this._bandData.getRegion(),regionLinkUrl:this._getRegionLinkUrl(),keyword:this._getSelectedKeyword(),keywordLinkUrl:this.getLocalKeywordLinkUrl(),joinConditionLabel:this._getJoinConditionLabel(),showRegionAndKeyword:l.canAccessBandSearchForGuardianship()};this.set(e)},_getSelectedKeyword:function(){var e=this._bandData.getBandKeywordsWithKeywordGroups();return t.isEmpty(e)?null:{keywordGroup:e[0].keyword_groups[0],keyword:e[0].keyword}},_getRegionLinkUrl:function(){if(!this._localBandPermission.canDiscoverLocalBand())return null;var e=this._bandData.getRegion();return r.isKoreaCountryCode()?a.getLocalBandUrl(e.rcode):window.isMobile&&r.isUSACountryCode()?s.GLOBAL_DISCOVER_LOCATION.makeAccessibleUrl({location_id:e.rcode}):null},getLocalKeywordLinkUrl:function(){if(!this._localBandPermission.canDiscoverLocalBand())return null;var e=this._getSelectedKeyword(),t=e&&e.keywordGroup,n=e&&e.keyword;return r.isKoreaCountryCode()?a.getLocalBandUrl(null,t,n):r.isUSACountryCode()?s.GLOBAL_KEYWORD_GROUP.makeAccessibleUrl({group:encodeURIComponent(t),keyword:encodeURIComponent(n)}):null},_getJoinConditionLabel:function(){var e=this._bandData.getJoinOption();return e?{gender:o.getJoinOptionByAllowedGender(e.gender,!0),yearOfBirthday:o.getJoinOptionByAllowedYearOfBirth(e.minBirthYear,e.maxBirthYear,!0)}:null}});return d.build=function(e,t){return new d(null,{bandData:e,localBandPermission:t,parse:!0})},d}.call(t,n,t,e))||(e.exports=i)},1017:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(52),s=n(6),a=n(156),o=n(9),l=n(627);return s.Model.extend({defaults:{fileId:null,sosId:null,link:null,fileName:null,fileSize:null,uploadedAt:null,isDropboxFile:null,order:null,fileTypeIcon:null,fileSizeText:null,uploadedAtText:null},parse:function(e){var n;n=(e=i.camelizeKeys(e)).isDropboxFile?{isDropboxFile:!0,link:e.link,fileName:e.name,fileSize:e.size,order:e.order}:{isDropboxFile:!1,fileId:e.fileId,sosId:e.sosId,fileName:e.fileName,fileSize:e.fileSize,uploadedAt:e.uploadedAt,order:e.order};var s,l,r=a.getFileType(null,null,n.fileName);return n.isDropboxFile||(s=a.toStringFileSize(n.fileSize),l=o.format.date(n.uploadedAt,"year_month_day")),t.extend(n,{fileTypeIcon:r,fileSizeText:s,uploadedAtText:l}),n},getFileUrl:function(e){if(this.get("isDropboxFile"))return $.Deferred().resolve(this.get("link")).promise();var t=this.get("fileId");return t?l.getBandIntroFileUrl(e,t):$.Deferred().reject().promise()},toJSONForSave:function(){return this.get("isDropboxFile")?this._toDropboxFileJSONForSave():this._toBandFileJSONForSave()},_toBandFileJSONForSave:function(){var e,t=this.get("fileId");return e=t?{file_id:t}:{sos_id:this.get("sosId"),file_name:this.get("fileName"),file_size:this.get("fileSize")},this.collection&&(e.order=this.collection.indexOf(this)),e},_toDropboxFileJSONForSave:function(){var e={link:this.get("link"),name:this.get("fileName"),size:this.get("fileSize")};return this.collection&&(e.order=this.collection.indexOf(this)),e}})}.call(t,n,t,e))||(e.exports=i)},1021:function(e,t,n){var i;void 0===(i=function(e){return{SHORT_DESCRIPTION:{MAX_LENGTH:200},DESCRIPTION:{MAX_LENGTH:500},MEDIA:{TYPE:{IMAGE:"image",VIDEO:"video"},MAX_COUNT:4},FILE:{DESC_MAX_LENGTH:200,MAX_COUNT:10,MAX_SIZE_PER_FILE:104857600,MAX_SIZE_TOTAL:104857600}}}.call(t,n,t,e))||(e.exports=i)},1042:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(548),a=n(158),o=n(161),l=n(22),r=i.Model.extend({defaults:function(){return{is_valid:!0,inviter:{id:null,thumbnail:null,name:null,user_no:null},band:{cover:null,name:null,band_no:null,theme_color:null,band_id:null,is_schoolBand:null,is_universityBand:null,description:null,open_type:null,certified:!1,band_for_kids_enabled:!1},join_type:null,join_method:null,invitation_card_id:null,invitation_type:null,expired_at:null,member_count:null,member_thumbnail_list:[{thumbnail:null}],source_info:null,show_ad_agreement:!1}},parse:function(e){return e.source_info&&(e.source_info.band_info.name=a.escapeXML(e.source_info.band_info.name),e.source_info.inviter_profile.name=a.escapeXML(e.source_info.inviter_profile.name)),t.extend({},e)},deny:function(){var e=this.get("invitation_card_id");return s.deleteInvitationCard(e,!this.isApplication())},isApplication:function(){return"application"==this.get("join_method")},hasSourceInfo:function(){return null!=this.get("source_info")},isBandForKidsEnabled:function(){return this.get("band").band_for_kids_enabled},getBandCore:function(){var e=this.get("band");return o.createBandCore({type:l.BAND_TYPE.GROUP,isRecruiting:!1,bandNo:e.band_no,name:e.name,themeColor:e.theme_color,certified:e.certified})}});return r.ERROR_CODE={ALREADY_JOIN_BAND_CODE:1011,NOT_ACCEPTED_YET:1014},r.buildAsyncFromInvitationUrl=function(e){return s.makeInvitation(e).then((function(e){var t=new r;return t.set(t.parse(e)),t}))},r.buildAsyncFromInvitationCard=function(e){return s.getInvitationCardDetailInfo(e).then(t.bind((function(e){var t=new r;return t.set(t.parse(e)),t}),this))},r}.call(t,n,t,e))||(e.exports=i)},1046:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(493);return i.Collection.extend({fetchVirtualMemberCollection:function(e){return s.getVirtualMembers(e).then(t.bind((function(e){this.reset(e)}),this))}})}.call(t,n,t,e))||(e.exports=i)},1047:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1278),a=n(1800),o=n(512),l=n(786),r=n(1499),d=n(26),c=n(159),h=n(517),u=n(152),p=n(1e3),m=n(495),_=n(487),b=n(1595),g=n(167),f=n(166),v='<p class="uLoading _postLoading"><img src="'+window.resBaseUrl+'/images/common/loading.gif" width="32" height="32" alt="Loading..."></p>',A={LIST:"LIST",FEED:"FEED"},M=i.CollectionView.extend({className:function(){return"postWrap "+(this.options.viewType===A.LIST?"viewTypeListWrap":"")},attributes:{"data-viewname":"DPostListView"},behaviors:[c,_,{behaviorClass:p,hasMoreItemFunction:"hasMore",fetchNextItemFunction:"fetchNextPostList"},{behaviorClass:m,sceneId:m.SCENE.BAND_HOME_POST_LIST}],childView:function(){return this.options.viewType===A.LIST?a:s},childViewOptions:function(){return{postListType:this.options.postListType}},childViewEvents:{"post:showPostDetail":function(e,t){var n={bandNo:e.get("band").bandNo,postNo:e.get("postNo"),postCollection:this.collection,approachedPostListType:this.options.postListType,uncoverOnce:t};l.buildPostDetailAsLayer(n)},"post:clickLog":function(e){this._sendPostClickLog(e)}},collectionEvents:{startLoading:function(){this.$el.append(v)},endLoading:function(){this.$el.find("._postLoading").remove()}},initialize:function(e){e.emptyView&&(this.emptyView=e.emptyView),this._bandData=e.bandData,this.listenTo(d.getPostChannel(),d.EVENT.POST_DELETED,(function(e){this.collection.remove(h.makeModelId(e.bandNo,e.postNo))})),this.listenTo(d.getPostChannel(),d.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL,(function(){t.each(this.collection.models,(function(e){e.set("isItemSelected",!1)}))})),this.listenTo(d.getPostChannel(),d.EVENT.CANCEL_MISSION_CONFIRM,(function(e){this.options.postListType!=u.POST_LIST_TYPE.CONFIRM_POST_LIST_WITH_MISSION&&this.options.postListType!=u.POST_LIST_TYPE.BAND_USER_CONFIRM_POST_LIST?d.getPostChannel().trigger(d.EVENT.POST_UPDATED,e.postNo):this.collection.remove(h.makeModelId(e.bandNo,e.postNo))}))},startToTriggerFetchingNextItem:function(){this.listenTo(o,"window:scroll:bottom",(function(){this.trigger("intervalRender:renderNext")}))},stopToTriggerFetchingNextItem:function(){this.stopListening(o,"window:scroll:bottom"),this.trigger("lastPostFetched")},deletePosts:function(e){var n=IM("band.user.post.delete.alert.message",{count:e.length});confirm(n)&&this.collection.deletePosts(e).then(t.bind((function(){this.spawn(c.MSG.MEMBER_CONTENTS_MULTI_DELETE_COMPLETE)}),this))},_sendPostClickLog:function(e){if(this.options.postListType==u.POST_LIST_TYPE.BAND_POST_LIST&&e.get("contentLineage")){var t=this.collection.indexOf(e),n={global_card_offset:t,preceding_content_lineage:0==t?null:this.collection.at(t-1).get("contentLineage"),content_type:JSON.parse(e.get("contentLineage")).content_type,content_source:JSON.parse(e.get("contentLineage")).content_source,content_id:JSON.parse(e.get("contentLineage")).content_id,band_no:e.getBandCore().bandNo};this.jplClick(_.CLASSIFIER.POST_CARD,n)}}});function C(e,t){return t.fetchSearchWithAuthorPost().then((function(){return 0==t.length?null:new M({postListType:u.POST_LIST_TYPE.BAND_USER_POST_LIST,collection:t,bandData:e})}))}return M.buildSearchPostList=function(e,t){return new M({bandData:e,collection:t,postListType:u.POST_LIST_TYPE.BAND_SEARCH_POST_LIST,viewType:g.getCurrentUserEnvStorage().get([f.PostListViewType,e.getBandNo()])})},M.buildPeriodSearchPostListView=function(e,t){return new M({bandData:e,collection:t,postListType:u.POST_LIST_TYPE.BAND_SEARCH_POST_LIST,viewType:g.getCurrentUserEnvStorage().get([f.PostListViewType,e.getBandNo()])})},M.buildDBandPostListView=function(e,t,n){return new M({bandData:e,collection:t,emptyView:n,postListType:u.POST_LIST_TYPE.BAND_POST_LIST,viewType:g.getCurrentUserEnvStorage().get([f.PostListViewType,e.getBandNo()])})},M.buildMemberPostListView=function(e,t){var n=e.getBandCore().bandNo;return C(e,r.buildMemberPostSearchCollection(n,t))},M.buildPageBandManagerPostListView=function(e){var t=e.getBandCore().bandNo;return C(e,r.buildPageBandManagerPostSearchCollection(t))},M.buildMissionConfirmPostListWithMissionView=function(e,n){return new M({bandData:e,collection:n,emptyView:i.View.extend({template:t.template('<p style="height:450px" class="uEmpty gContentCardShadow"><span class="gFs14 gColorGr3"><%= IM("post.not_exist.msg") %></span></p>')}),postListType:u.POST_LIST_TYPE.CONFIRM_POST_LIST_WITH_MISSION})},M.buildMissionConfirmPostListWithAuthorView=function(e,n){var s=e.getBandCore().bandNo,a=b.buildConfirmPostsWithAuthor(s,n);return a.fetchMissionConfirmPostWithAuthor().then((function(){return new M({postListType:u.POST_LIST_TYPE.BAND_USER_CONFIRM_POST_LIST,collection:a,bandData:e,emptyView:i.View.extend({template:t.template('<p style="height:450px" class="uEmpty gContentCardShadow"><span class="gFs14 gColorGr3"><%= IM("post.not_exist.msg") %></span></p>')})})}))},M.buildScheduleAttachedPostListView=function(e,n){return new M({bandData:e,collection:n,emptyView:i.View.extend({template:t.template('<p style="height:450px" class="uEmpty gContentCardShadow"><span class="gFs14 gColorGr3"><%= IM("post.not_exist.msg") %></span></p>')}),postListType:u.POST_LIST_TYPE.SCHEDULE_ATTACHED_POST_LIST})},M.VIEW_MODES=A,M}.call(t,n,t,e))||(e.exports=i)},1076:function(e,t,n){var i;void 0===(i=function(){return{TYPE:{PAGE_BAND_HOME:"page_band_home",GROUP_BAND_HOME:"group_band_home",PAGE_BAND_POST:"page_band_post"},POST_EMPTY_BOARD:{GROUP_BAND:{NEED_JOIN:{actionClass:"_joinBtnArea",icon:"-join",titleColor:"",titleMessage:IM("board.no_member.hint"),descMessage:IM("board.no_member.hint.post")},NEED_NOT_JOIN:{actionClass:"_btnOpenWriteLayer",icon:"-first",titleColor:"",titleMessage:IM("board.write_first.title"),descMessage:IM("board.write_first.desc")},NO_RECENT_COMMENT:{actionClass:"",icon:"",titleColor:"",titleMessage:"",descMessage:IM("board.no_post.no_recent_comment")}},PAGE_BAND:{POSTING_PERMITTED:{actionClass:"_btnOpenWriteLayer",icon:"-first",titleColor:"gColorGr1",titleMessage:IM("page.board.write_post"),descMessage:""},NOT_POSTING_PERMITTED:{actionClass:"",icon:"-post",titleColor:"gColorGr1",titleMessage:IM("page.board.no.post"),descMessage:""}}}}}.call(t,n,t,e))||(e.exports=i)},1083:function(e,t,n){var i=n(0),s=n(52),a=n(6),o=n(529),l=n(1024),r=n(509),d=a.Model.extend({initialize:function(e,t){var n=e.author;n&&(this._author=o.buildContentAuthorModel(n));var a=e.folder;a&&(this._folder=l.build(a));var d=e.origin;if(d){var c=i.extend({contentType:d},s.camelizeKeys(e)),h=r.buildByAttributes(c),u=h.getContentType();u&&(this._contentKey=h,this._contentType=u)}},parse:function(e,t){return s.camelizeKeys(e)},setFileChecked:function(e){this._checked=e},isCheckedFile:function(){return!0===this._checked},unsetFileExpiresAt:function(){this.set("expiresAt",null),this.trigger("file:modified")},getContentKey:function(){return this._contentKey},getFileFolder:function(){return this._folder},setFileFolder:function(e){this._folder=e,this.trigger("file:modified")},getFileFolderName:function(){return this._folder?this._folder.getFolderName():null},isMyFile:function(){return!!this._author&&this._author.isContentAuthorMe()},getFileAuthorName:function(){return this._author?this._author.getContentAuthorName():null},isSosFile:function(){return"sos"===this.getFileProvider()},isDropboxFile:function(){return"dropbox_files"===this.getFileProvider()},isExternalFile:function(){return"external_file"===this.getFileProvider()},getFileCreatedAt:function(){return this.get("createdAt")},getFileExpiresAt:function(){return this.get("expiresAt")},getFileExtension:function(){return this.get("extension")},getFileId:function(){return this.get("fileId")},getFileLink:function(){return this.get("fileLink")},getFileName:function(){return this.get("fileName")},getFileProvider:function(){return this.get("fileProvider")},getFileSize:function(){return this.get("fileSize")},isRestrictedFile:function(){return this.get("isRestricted")},isPostFile:function(){return!!this._contentType&&(this._contentType.isPost()||this._contentType.isPostComment()||this._contentType.isPostCommentReply())},isPhotoFile:function(){return!!this._contentType&&(this._contentType.isPhotoComment()||this._contentType.isPhotoCommentReply())},isScheduleFile:function(){return!!this._contentType&&(this._contentType.isSchedule()||this._contentType.isScheduleComment()||this._contentType.isScheduleCommentReply())}});e.exports=d},1084:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(870),a=n(52),o=n(152);return i.Model.extend({defaults:{count:0,isCountless:!1,bandNotices:[],linkedPageNotices:[]},parse:function(e,n){return e=a.camelizeKeys(e),n=a.camelizeKeys(n),t.each(e.items,t.bind((function(e){var t=o.findPriorRestriction({isRestricted:e.isRestricted,isVisibleOnlyToAuthor:e.isVisibleOnlyToAuthor,isMutedAuthorPost:!!e.author&&e.author.isMuted});t&&(t===o.RESTRICTION_TYPE.HIDE_POST&&(e.title=IM("post.hidden_post.guide_message")),t===o.RESTRICTION_TYPE.MUTE_AUTHOR&&(e.title=IM("post.muted_author_post.guide_message")))}),this)),t.extend(this.defaults,{count:e.count,isCountless:e.isCountless,bandNotices:e.items||[],linkedPageNotices:n?n.slice(0,2):[]})},fetchBandNotices:function(e){return s.getBandNoticesForPreview(e).then(t.bind((function(e){this.set(this.parse(e))}),this))},fetchBandNoticeWithPageNotice:function(e){return $.when(s.getBandNoticesForPreview(e),s.getLinkedBandNotice(e)).then(t.bind((function(e,t){this.set(this.parse(e,t.linked_band_notices))}),this))}})}.call(t,n,t,e))||(e.exports=i)},1085:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(568)],void 0===(s=function(e,t,n,i){var s=n.Model.extend({idAttribute:"no",defaults:{isTotal:!1,covers:[]},isTotalView:function(){return 1==this.get("isTotal")},getUpdatedAt:function(){return this.get("updated_at")},isPhotoAttached:function(){return this.get("covers").length>0},getAlbumNo:function(){return this.get("no")}});return s.buildByAllPhotos=function(e,n){var a=new s;a.set("photo_count",e.total_count),a.set("isTotal",!0),a.set("name",IM("web.album.albumlist.txt.total_album")),a.set("no",i.TOTAL_ALBUM_NO);var o=t.first(e.photos);o&&(a.set("created_at",n||o.created_at),a.set("updated_at",o.created_at));var l=[];return t.each(e.photos,(function(e){l.push(e.photo_thumbnail)})),a.set("covers",l),a},s}.apply(t,i))||(e.exports=s)},1086:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(493),o=n(548),l=n(491),r=n(52),d=null,c="recently_joined",h="last_word",u="oldest_visited",p=s.Model.extend({idAttribute:"bandNo",defaults:{bandNo:null,bandData:null,invitations:null,members:null,memberCount:0,hasMoreMember:!1,hasMemberGroup:!1,searchResult:new s.Model,query:"",isMemberSelectableForChat:!1,isInviteChatEnabled:!1,latest:!1,sortOption:null},fetchBandMemberList:function(e){var n=this;return n._initBandData().then((function(i){var s=null;switch(e){case u:n.set("sortOption",u),s=n.fetchSortedMembersOnOldestVisited();break;case c:n.set("sortOption",c),s=n.fetchSortedMembersOnLatestOrder();break;case h:n.set("sortOption",h),s=n.fetchSortedMembersOnLastWordOrder();break;case d:default:n.set("sortOption",d),s=n.fetchSortedMembersOnNameOrder()}return t.when(s,n.fetchInvitations()).then((function(){return n.set("isInviteChatEnabled",i.isInviteChatEnabled()),n}))}))},_initBandData:function(){var e=t.Deferred();return l.getCachedBandData(this.getBandNo()).then(i.bind((function(t){this.set({bandData:t}),t.isAcceptApplicationPermitted()?o.getApplicationCount(this.getBandNo()).then(i.bind((function(n){this.set(r.camelizeKeys(n)),e.resolve(t)}),this)):e.resolve(t)}),this)),e},isAcceptableJoinQnARoomExist:function(){return!!this.getBandData().isAcceptApplicationPermitted()&&this.isApplicantJoinQnAExist()},isApplicantJoinQnAExist:function(){var e=this.getBandData().getApplicantCommentSetCountInfo();return null!=e.count&&e.count>0},getApplicantJoinQnARoomCountText:function(){if(!this.isApplicantJoinQnAExist())return"";var e=this.getBandData().getApplicantCommentSetCountInfo(),t=e.count+"";return e.countless&&(t+="+"),t},getBandData:function(){return this.get("bandData")},fetchSortedMembersOnNameOrder:function(){return this._fetchMembersOfBand(d)},fetchSortedMembersOnLatestOrder:function(){return this._fetchMembersOfBand(c)},fetchSortedMembersOnOldestVisited:function(){return this._fetchMembersOfBand(u)},fetchSortedMembersOnLastWordOrder:function(){return this._fetchMembersOfBand(h)},fetchMembersBy:function(e){var t=this.getBandNo(),n=this.get("query");this.set("query",e),e&&n!==e&&a.searchMember(e,t).then(i.bind((function(n){if(e===this.get("query")){var i=r.camelizeKeys(n);this.set({searchResult:new s.Model({members:i.members,memberCount:i.total,hasMoreMember:!1,hasMemberGroup:this.get("hasMemberGroup"),isMemberSelectableForChat:this.get("isMemberSelectableForChat"),isInviteChatEnabled:this.get("isInviteChatEnabled"),latest:!1,bandNo:t})}),this.trigger("update:search")}}),this))},removeMember:function(e){var t=this.get("members");t&&this.set("members",i.reject(t,(function(t){return t.userNo===e})));var n=this.get("searchResult");if(!n.isEmpty()){var s=n.get("members"),a=i.findWhere(s,{userNo:e});a&&(n.set("members",i.without(s,a)),n.set("memberCount",n.get("memberCount")-1)),n.trigger("remove:member",e)}this.set("memberCount",this.get("memberCount")-1),this.trigger("remove:member",e)},fetchInvitations:function(){var e=this.getBandNo();return o.getInvitationCards(e).then(i.bind((function(e){e=r.camelizeKeys(e),this.set({invitations:e.items})}),this))},getBandNo:function(){return this.get("bandNo")},_fetchMembersOfBand:function(e){return a.getMembersOfBand(this.getBandNo(),e).then(i.bind((function(t){var n=r.camelizeKeys(t);n.latest=e==c,this.set(n)}),this))}});return p.buildWithSortType=function(e,t){return new p({bandNo:e,sortOption:{name:d,join:c,last:h,oldest:u}[t]})},p}.call(t,n,t,e))||(e.exports=i)},1089:function(e,t,n){var i;void 0===(i=function(e){n(0),n(4);return{quotaRestInfo:function(e){if(e.getContentsQuota()){var t=e.getContentsQuota().total,n=e.getContentsQuota().candidate_sum,i=t-n,s=i/t*100,a=100-s,o=i/Math.pow(1024,3),l="-colorError",r=!1;return s>=10&&(l="-point"),n==t&&(r=!0),s<=0&&(s=0),a>=100&&(a=100),{gigabyte:o=o<1?o.toFixed(1).toString():Math.round(o).toString(),usePercent:a.toFixed(1).toString(),restPercent:s.toFixed(1).toString(),color:l,zero:r}}}}}.call(t,n,t,e))||(e.exports=i)},1100:function(e,t,n){var i=n(6),s=n(52),a=i.Model.extend({idAttribute:"rcode",parse:function(e){return s.camelizeKeys(e)},getRcode:function(){return this.get("rcode")},getName:function(){return this.get("name")},getFullAddress:function(){return this.get("fullAddress")},getShortAddress:function(){return this.get("shortAddress")}});e.exports=a},1102:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(26),a=n(155),o=n(52),l=n(547),r=n(158),d=i.Model.extend({idAttribute:"memberKey",parse:function(e,n){var i={};n&&n.bandNo&&(i={bandNo:n.bandNo});var s=t.extend(i,o.camelizeKeys(e));return s.joinQuestionAsHtml=r.nl2br(t.escape(s.joinQuestion)),s.joinAnswerAsHtml=r.nl2br(t.escape(s.joinAnswer)),s},getMemberKey:function(){return this.get("memberKey")},getBandNo:function(){return this.get("bandNo")},getApplicantName:function(){return this.get("applicantName")},getApplicantProfileImageUrl:function(){return this.get("applicantProfileImageUrl")},getCreatedAt:function(){return this.get("createdAt")},isThumbnailExist:function(){return!t.isEmpty(this.getApplicantProfileImageUrl())},isJoinQuestionExist:function(){return!t.isEmpty(this.getJoinQuestion())},getJoinQuestion:function(){return this.get("joinQuestion")},getJoinQuestionAsHtml:function(){return this.get("joinQuestionAsHtml")},getJoinAnswer:function(){return this.get("joinAnswer")},getJoinAnswerAsHtml:function(){return this.get("joinAnswerAsHtml")},getJoinAnswerImages:function(){return this.get("joinAnswerImages")},getFirstJoinAnswerImage:function(){return this.isJoinAnswerImagesExist()?this.getJoinAnswerImages()[0]:null},isJoinAnswerImagesExist:function(){return!t.isEmpty(this.getJoinAnswerImages())},isCurrentUserApplicant:function(){return 1==this.get("mine")},denyJoinApplication:function(){return l.denyApplication(this.getBandNo(),this.getMemberKey())},denyJoinApplicationWithRefresh:function(){return this.denyJoinApplication().then(t.bind((function(e){return e}),this),t.bind((function(){s.getDGlobalChannel().trigger(s.EVENT.JOIN_APPLICATION_ACCEPT_REJECT_FAILURE,this.getBandNo())}),this)).always(t.bind((function(){a.get(this.getBandNo()).fetchBandData()}),this))},acceptJoinApplication:function(){return l.acceptApplication(this.getBandNo(),this.getMemberKey())},acceptJoinApplicationWithRefresh:function(){return this.acceptJoinApplication().then(t.bind((function(){s.getDGlobalChannel().trigger(s.EVENT.MEMBER_ADDED,this.getBandNo())}),this),t.bind((function(){s.getDGlobalChannel().trigger(s.EVENT.JOIN_APPLICATION_ACCEPT_REJECT_FAILURE,this.getBandNo())}),this)).always(t.bind((function(){a.get(this.getBandNo()).fetchBandData()}),this))},setApplicationModelFromApi:function(e){this.set(this.parse(e))},isBandNoAndMemberKeySame:function(e,t){return this.getBandNo()==e&&this.getMemberKey()==t}});return d.buildBandApplicationModel=function(e,t){return new d({bandNo:e,memberKey:t})},d}.call(t,n,t,e))||(e.exports=i)},1105:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(4),s=n(26),a=n(1143),o=n(592);n(1532);var l=i.Behavior.extend({initialize:function(e,t){this._selector=e.selector||t.$el,this._containerSelector=e.containerSelector||a.SEL_CONTAINER,this._marginBottom=e.marginBottom||a.MARGIN_BOTTOM,this._namespace=e.namespace||t.attributes["data-viewname"]||null,this.listenTo(t,a.EVENT.ATTACH,this._onSticky),this.listenTo(t,a.EVENT.BEFORE_DETACH,this._stickyDestroy),this.listenTo(t,a.EVENT.RESTART,this._stickyRestart),this.listenTo(s.getDGlobalChannel(),s.EVENT.STICKY_RESTART,this._stickyRestart)},_onSticky:function(){this._stickySelector=this._getStickySelector(),t.each(this._stickySelector,_.bind((function(e,n){var i={containerSelector:this._containerSelector,additionalMarginTop:this._getOffsetTop(),additionalMarginBottom:this._getMarginBottom(e)};this._namespace&&(i.namespace=this._namespace),this._stickySidebar=t(n).theiaStickySidebar(i)}),this)),this._startDocumentHeightDetector()},_startDocumentHeightDetector:function(){var e=this._hasWindowScrollbar();this._stopDocumentHeightDetector(),this._documentHeightDetector=new o,this.listenTo(this._documentHeightDetector,o.EVENT.HEIGHT_CHANGED,_.bind((function(){e!==this._hasWindowScrollbar()&&this._stickyRestart()}),this)),this._documentHeightDetector.startDetecting(window.document,200,5)},_stopDocumentHeightDetector:function(){this._documentHeightDetector&&this.stopListening(this._documentHeightDetector)},_hasWindowScrollbar:function(){return t(window).height()<t("body").prop("scrollHeight")},_getStickySelector:function(){return this._selector&&_.isFunction(this._selector)?this._selector():this._selector?[this._selector]:[this.view.$el]},_getMarginBottom:function(e){return _.isArray(this._marginBottom)&&this._marginBottom[e]?this._marginBottom[e]:_.isArray(this._marginBottom)?0:this._marginBottom},_getOffsetTop:function(){return 0!=parseInt(t(this._containerSelector).css("margin-top"))?parseInt(t(this._containerSelector).css("margin-top")):parseInt(t(this._containerSelector).css("padding-top"))},_stickyDestroy:function(){this._stickySidebar.destroy(),this._stopDocumentHeightDetector(),this._stickySelector=null},_stickyRestart:function(){this._stickyDestroy(),setTimeout(_.bind((function(){this._onSticky()}),this),0)}});return l.restartDocumentSticky=function(){s.getDGlobalChannel().trigger(s.EVENT.STICKY_RESTART)},l}.call(t,n,t,e))||(e.exports=i)},1106:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(1817),o=n(486),l=n(1536),r=n(154),d=n(538),c=n(1237),h=n(26),u=n(155),p=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBusinessIdentificationInfoView"},template:t.template(a),ui:{closeButton:"._closeButton",menuBtn:"._menuBtn",menuBoxDiv:"._menuBoxDiv",updateBusinessIDInfoBtn:"._updateBusinessIDInfoBtn",deleteBusinessIDInfoBtn:"._deleteBusinessIDInfoBtn"},templateContext:function(){return{bandName:this._bandData.getBandName(),showOption:this._bandData.canManageBusinessRegistration(),showBandTermAsPage:this._bandData.getBandCore().showBandTermAsPage()}},events:{"click @ui.closeButton":function(){this.destroy()},"click @ui.menuBtn":function(){this.ui.menuBoxDiv.toggle()},"click @ui.deleteBusinessIDInfoBtn":function(){!this._updateProgress&&confirm("사업자 정보를 모두 삭제하시겠습니까?")&&(this.ui.menuBoxDiv.hide(),this._updateProgress=!0,r.wrapActivePromise(d.SETTING.unsetBandBusinessRegistration(this._bandNo),this).then(t.bind((function(){h.getDGlobalChannel().trigger(h.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED),this.destroy()}),this)).always(t.bind((function(){this._updateProgress=!1}),this)))},"click @ui.updateBusinessIDInfoBtn":function(){this.destroy(),c.openDBusinessIDInfoRegistrationLayer({bandNo:this._bandNo})}},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData}});return p.openDBusinessIdentificationInfoView=function(e){var n=l.buildBusinessIdentificationInfoModel({bandNo:e.bandNo}),s=u.get(e.bandNo);s.resetBandDataState();var a=i.when(s.loadBandData(),n.fetchBusinessIdentificationInfo()).then(t.bind((function(i){return function(e){return new p(e)}(t.extend({},e,{model:n,bandData:i}))}),this));return o.openPromiseView(a,!1,{width:450,height:518}),a},p}.call(t,n,t,e))||(e.exports=i)},1142:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(541),a=n(543),o=n(9),l=n(13);return i.Model.extend({fetchMemberConfig:function(e){return s.getMemberConfig(e).then(t.bind((function(e){this.set(e)}),this))},getUserName:function(){return this.get("member").name},getProfileImageUrl:function(){return this.get("member").profile_image_url},getBandOpenType:function(){return this.get("band").open_type},isOpenUserBirthday:function(){return this.get("member").is_open_birthday},isAllowChatInvitation:function(){return this.get("member").allow_chat_invitation},isAllowOtherBandInvitation:function(){return this.get("member").allow_other_band_invitation},getJoinInfo:function(){return this.get("member").join_info},getEmailNoti:function(){return this.get("member").email_noti},getPhotoEmailNoti:function(){return this.get("member").photo_email_noti},getPostEmailNotiLevel:function(){return this.get("levels_of_notifications").post_email_noti},getScheduleEmailNotiLevel:function(){return this.get("levels_of_notifications").schedule_email_noti},getPostEmailNoti:function(){return this.get("member").post_email_noti},getScheduleEmailNoti:function(){return this.get("member").schedule_email_noti},getOpenCellphoneRoles:function(){return this.get("member").open_cellphone_roles},isPermittedModifyOpenBirthday:function(){return t.contains(this.get("member").permitted_operation,"modify_open_birthday")},isPermittedModifyOpenCellphone:function(){return this.getModifyOpenCellphonePermittedOperations().length>0},getModifyOpenCellphonePermittedOperations:function(){return t.intersection(this.get("member").permitted_operation,["modify_open_cellphone_roles_anyone","modify_open_cellphone_roles_until_coleader","modify_open_cellphone_roles_only_leader"])},isPermittedModifyAllowChatInvitation:function(){return t.contains(this.get("member").permitted_operation,"modify_allow_chat_invitation")},isPermittedModifyAllowOtherBandInvitation:function(){return t.contains(this.get("member").permitted_operation,"modify_allow_other_band_invitation")},isPermittedReportBand:function(){return t.contains(this.get("member").permitted_operation,"report_band")},isEnableBandPhotoPrint:function(){return l.isNotKid()&&o.isKoreaCountryCode()&&this.getBandOpenType()===a.BAND_OPEN_TYPE.SECRET}})}.call(t,n,t,e))||(e.exports=i)},1143:function(e,t,n){var i;void 0===(i=function(){return{SEL_CONTAINER:"#container",MARGIN_BOTTOM:80,EVENT:{ATTACH:"attach",BEFORE_DETACH:"before:detach",RESTART:"restart"}}}.call(t,n,t,e))||(e.exports=i)},1165:function(e,t,n){var i=n(16),s=n(165),a=n(9),o=n(543),l=n(0),r={_isDoNotDisturbModeOn:function(e){return null!=e&&(!e||0!=e.enabled)},makeDoNotDisturbTimeMessage:function(e){if(this._isDoNotDisturbModeOn(e)){if(e.type==o.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE)return IM("do_not_disturb.all_day.message");var t=this._findDoNotDisturbDailyTypeInfo(e.data);if(t){var n=this.getFormattedTimeToString(t.start,t.end);return n=this._makeMessageWithTimezone(n,e.timezone_id),IM("do_not_disturb.everyday.time.message",{timeInfo:n})}}},_findDoNotDisturbDailyTypeInfo:function(e){return l.find(e,(function(e){return e.type==o.DO_NOT_DISTURB_INFO.DAILY.VALUE}))},getFormattedTimeToString:function(e,t){return a.format.time(i(e,"hh:mm"),"short")+" ~ "+a.format.time(i(t,"hh:mm"),"short")},_makeMessageWithTimezone:function(e,t){var n=s.getCurrentTimezone(),i=s.getTimezone(t);return i&&n.gmtString!=i.gmtString?e=e+" ("+i.gmtString+")":e},makeDoNotDisturbTimeMessageForSettingDescription:function(e){if(this._isDoNotDisturbModeOn(e)){if(e.type==o.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE)return IM("band.setting.do_not_disturb.days_of_week.status");var t=this._findDoNotDisturbDailyTypeInfo(e.data);if(t){var n=this.getFormattedTimeToString(t.start,t.end);return this._makeMessageWithTimezone(n,e.timezone_id)}}}};e.exports=r},1166:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(1231),a=n(486),o=n(180),l=i.View.extend({className:"url_layer",attributes:{"data-viewname":"DInviteByUrlView"},template:t.template(s),ui:{btnCopyUrl:"._btnCopyUrl",btnClose:"._btnClose",linkDescription:"[data-uiselector=linkDescription]"},events:{"click @ui.btnClose":function(e){this.destroy()}},onAttach:function(){this._initUrlCopyClipboard()},onBeforeDetach:function(){this._destroyUrlCopyClipboard()},_initUrlCopyClipboard:function(){o.isSupported()?this.$el&&0!=this.$el.find("._btnCopyUrl").length&&(this._destroyUrlCopyClipboard(),this.clipboard=new o("._btnCopyUrl"),this.clipboard.on("success",t.bind((function(e){alert(IM("copy_url.success")),this.destroy()}),this)),this.clipboard.on("error",t.bind((function(e){alert(IM("url_copy.fail")),this.destroy()}),this))):this.getUI("btnCopyUrl").click(t.bind((function(){alert(IM("url_copy.fail"))}),this))},_destroyUrlCopyClipboard:function(){this.clipboard&&this.clipboard.destroy()}});return l.openAsLayer=function(e){var t=new l({model:new Backbone.Model(e)});return a.open(t),t},l}.call(t,n,t,e))||(e.exports=i)},1167:function(e,t,n){var i;void 0===(i=function(){return{BAND:"m2_user_id",SMS:"sms"}}.call(t,n,t,e))||(e.exports=i)},1168:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1757),a=n(1438),o=n(486),l=n(1758),r=n(1010),d=n(555),c=n(1277),h=n(154),u=n(13),p=n(9),m={SELECTED:"SELECTED",CANCEL:"CANCEL",ATTACH:"ATTACH",SEARCH:"SEARCH"},_=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DRegionSelectView"},template:t.template(s),templateContext:function(){return{searchInputPlaceholderText:this._getSearchInputPlaceholderText(),emptySearchResultDesc:this._getEmptySearchResultDesc()}},ui:{btnClose:"._btnClose",btnSearch:"._btnSearch",inputRegionSearch:"#regionSearch",btnMyLocation:"._btnMyLocation",emptySearchResult:"._emptySearchResult",searchHistoryArea:"._searchHistoryArea",searchResultArea:"._searchResultArea"},regions:{searchResultListRegion:{el:"._searchResultListRegion",replaceElement:!0},searchHistoryListRegion:{el:"._searchHistoryListRegion",replaceElement:!0}},events:{"click @ui.btnClose":"destroy","click @ui.btnSearch":"_searchRegion","keydown @ui.inputRegionSearch":function(e){e.keyCode!==d.ENTER||(this._enterKeyDown=!0)},"keyup @ui.inputRegionSearch":function(e){if(this._enterKeyDown&&e.keyCode===d.ENTER)return this._enterKeyDown=!1,void this._searchRegion();this._toggleSearchButton(),0===this.getUI("inputRegionSearch").val().trim().length&&(this.getUI("emptySearchResult").hide(),this.getUI("searchResultArea").hide(),u.isLogedIn()&&this._toggleSearchHistoryArea())},"click @ui.btnMyLocation":"_selectRegionByMyLocation"},initialize:function(e){this._bandNo=e.bandNo,this._searchResultListCollection=a.build(e.bandNo),this._searchHistoryListCollection=a.build(e.bandNo),this.listenTo(this._searchHistoryListCollection,"update",(function(){this._toggleSearchHistoryArea()}))},onAttach:function(){this.trigger(m.ATTACH),u.isLogedIn()&&this._searchHistoryListCollection.fetchHistory().then(t.bind((function(){this._showSearchHistoryListView()}),this))},_getSearchInputPlaceholderText:function(){return"KR"===p.getCountryCode()?IM("region_selection.search_input.placeholder.kr"):"US"===p.getCountryCode()?IM("region_selection.search_input.placeholder.us"):""},_getEmptySearchResultDesc:function(){return"KR"===p.getCountryCode()?IM("region_selection.search_result.empty_desc.kr"):"US"===p.getCountryCode()?IM("region_selection.search_result.empty_desc.us"):""},_searchRegion:function(){this._query=this.getUI("inputRegionSearch").val(),this._searchResultListCollection.reset(),this._searchResultListCollection.search(this._query).then(t.bind((function(){this.trigger(m.SEARCH,{query:this._query,count:this._searchResultListCollection.length}),this.getUI("searchHistoryArea").hide(),this.getUI("searchResultArea").hide(),this.getUI("emptySearchResult").hide(),this._searchResultListCollection.isEmpty()?this.getUI("emptySearchResult").show():(this.getUI("searchResultArea").show(),this.getRegion("searchResultListRegion").hasView()||this._showSearchResultListView())}),this))},_toggleSearchButton:function(){this.getUI("inputRegionSearch").val().trim().length>0?this.getUI("btnSearch").addClass("-active").prop("disabled",!1):this.getUI("btnSearch").removeClass("-active").prop("disabled",!0)},_selectRegionByMyLocation:function(){h.wrapActivePromise(c.fetchRegion(this),this).then(t.bind(this._selectRegion,this))},_selectRegion:function(e){this.trigger(m.SELECTED,e),u.isLogedIn()&&r.addUserRegionSearchHistory(e.getRcode()),this.destroy()},_showSearchResultListView:function(){var e=new l({collection:this._searchResultListCollection,deletable:!1,highlightText:this._query});this.listenTo(e,l.EVENTS.SELECTED,this._selectRegion),this.showChildView("searchResultListRegion",e)},_showSearchHistoryListView:function(){var e=new l({collection:this._searchHistoryListCollection,deletable:!0,highlightText:null});this.listenTo(e,l.EVENTS.SELECTED,this._selectRegion),this.listenTo(e,l.EVENTS.DELETED,(function(e){var t=e.getRcode();r.removeUserRegionSearchHistory(t)})),this._toggleSearchHistoryArea(),this.showChildView("searchHistoryListRegion",e)},_toggleSearchHistoryArea:function(){this.getUI("searchHistoryArea").toggle(!this._searchHistoryListCollection.isEmpty())}});return _.EVENTS=m,_.openLayer=function(e){var t=new _({bandNo:e});return o.openWithoutHiding(t),t},_}.call(t,n,t,e))||(e.exports=i)},1171:function(e,t,n){var i;void 0===(i=function(e){n(22),n(90);var t=n(543),i=(t.PERMISSION_ROLES,t.OPTIONS.ROLES),s=t.OPTIONS.MEMBER_GROUP_IDS,a={ROLE:"role",MEMBER_GROUP:"memberGroup"},o={DISALLOW:{id:"DISALLOW",type:a.ROLE,name:IM("ui.label.disallow"),level:0},LEADER_ONLY:{id:"LEADER_ONLY",type:a.ROLE,name:IM("bandsetting.member_permission.only_leader"),level:1},LEADER_AND_COLEADER:{id:"LEADER_AND_COLEADER",type:a.ROLE,name:IM("bandsetting.member_permission.until_coleader"),level:2},LEADER_AND_MEMBER_GROUPS:{id:"LEADER_AND_MEMBER_GROUPS",type:a.MEMBER_GROUP,name:IM("bandsetting.member_permission.leader_and_member_group"),level:3},ALL_MEMBER:{id:"ALL_MEMBER",type:a.ROLE,name:IM("bandsetting.member_permission.anyone"),level:4}},l={EDIT_NAME_COVER:"EDIT_NAME_COVER",EDIT_NOTICE:"EDIT_NOTICE",VIEW_POST_READER:"VIEW_POST_READER",MANAGE_PINNED_HASHTAGS:"MANAGE_PINNED_HASHTAGS",MANAGE_BAND_DO_NOT_DISTURB:"MANAGE_BAND_DO_NOT_DISTURB",POST_CONTENTS:"POST_CONTENTS",POST_APPROVER:"POST_APPROVER",CREATE_RESERVED_POST:"CREATE_RESERVED_POST",COMMENT:"COMMENT",CREATE_LIVE:"CREATE_LIVE",UPLOAD_PHOTO_TO_ALBUM:"UPLOAD_PHOTO_TO_ALBUM",CREATE_ALBUM:"CREATE_ALBUM",REGISTER_SCHEDULE:"REGISTER_SCHEDULE",MODIFY_SCHEDULE:"MODIFY_SCHEDULE",REGISTER_CALENDAR:"REGISTER_CALENDAR",INVITE_CHAT:"INVITE_CHAT",CHAT_TO_MANAGER:"CHAT_TO_MANAGER",CREATE_OPEN_CHAT:"CREATE_OPEN_CHAT",DELETE_OPEN_CHAT:"DELETE_OPEN_CHAT",DISABLE_DEFAULT_CHAT:"DISABLE_DEFAULT_CHAT",INVITE_MEMBER:"INVITE_MEMBER",ACCEPT_APPLICATION:"ACCEPT_APPLICATION",MANAGE_POSTING_ON_BAND_JOIN:"MANAGE_POSTING_ON_BAND_JOIN",MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY:"MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY",MANAGE_JOIN:"MANAGE_JOIN",MANAGE_MEMBER_GROUP:"MANAGE_MEMBER_GROUP",DELETE_CONTENTS:"DELETE_CONTENTS",BAN_MEMBER:"BAN_MEMBER"},r={EDIT_NAME_COVER:{role:i.EDIT_NAME_COVER_ROLES,memberGroup:s.EDIT_NAME_COVER_MEMBER_GROUP_IDS},EDIT_NOTICE:{role:i.EDIT_NOTICE_ROLES,memberGroup:s.EDIT_NOTICE_MEMBER_GROUP_IDS},VIEW_POST_READER:{role:i.VIEW_POST_READER_ROLES,memberGroup:s.VIEW_POST_READER_MEMBER_GROUP_IDS},MANAGE_PINNED_HASHTAGS:{role:i.MANAGE_PINNED_HASHTAGS_ROLES,memberGroup:s.MANAGE_PINNED_HASHTAGS_MEMBER_GROUP_IDS},MANAGE_BAND_DO_NOT_DISTURB:{role:i.MANAGE_BAND_DO_NOT_DISTURB_ROLES,memberGroup:s.MANAGE_BAND_DO_NOT_DISTURB_MEMBER_GROUP_IDS},POST_CONTENTS:{role:i.POST_CONTENTS_ROLES,memberGroup:s.POST_CONTENTS_MEMBER_GROUP_IDS},POST_APPROVER:{role:i.POST_APPROVER_ROLES,memberGroup:s.POST_APPROVER_MEMBER_GROUP_IDS},CREATE_RESERVED_POST:{role:i.CREATE_RESERVED_POST_ROLES,memberGroup:s.CREATE_RESERVED_POST_MEMBER_GROUP_IDS},COMMENT:{role:i.COMMENT_ROLES,memberGroup:s.COMMENT_MEMBER_GROUP_IDS},CREATE_LIVE:{role:i.CREATE_LIVE_ROLES,memberGroup:s.CREATE_LIVE_MEMBER_GROUP_IDS},UPLOAD_PHOTO_TO_ALBUM:{role:i.UPLOAD_PHOTO_TO_ALBUM_ROLES,memberGroup:s.UPLOAD_PHOTO_TO_ALBUM_MEMBER_GROUP_IDS},CREATE_ALBUM:{role:i.CREATE_ALBUM_ROLES,memberGroup:s.CREATE_ALBUM_MEMBER_GROUP_IDS},REGISTER_SCHEDULE:{role:i.REGISTER_SCHEDULE_ROLES,memberGroup:s.REGISTER_SCHEDULE_MEMBER_GROUP_IDS},MODIFY_SCHEDULE:{role:i.MODIFY_SCHEDULE_ROLES,memberGroup:s.MODIFY_SCHEDULE_MEMBER_GROUP_IDS},REGISTER_CALENDAR:{role:i.REGISTER_CALENDAR_ROLES,memberGroup:s.REGISTER_CALENDAR_MEMBER_GROUP_IDS},INVITE_CHAT:{role:i.INVITE_CHAT_ROLES,memberGroup:s.INVITE_CHAT_MEMBER_GROUP_IDS},CHAT_TO_MANAGER:{role:t.OPTIONS.CHAT_TO_MANAGER},CREATE_OPEN_CHAT:{role:i.CREATE_OPEN_CHAT_ROLES,memberGroup:s.CREATE_OPEN_CHAT_MEMBER_GROUP_IDS},DELETE_OPEN_CHAT:{role:i.DELETE_OPEN_CHAT_ROLES,memberGroup:s.DELETE_OPEN_CHAT_MEMBER_GROUP_IDS},DISABLE_DEFAULT_CHAT:{role:i.DISABLE_DEFAULT_CHAT_ROLES,memberGroup:s.DISABLE_DEFAULT_CHAT_MEMBER_GROUP_IDS},INVITE_MEMBER:{role:i.INVITE_MEMBER_ROLES,memberGroup:s.INVITE_MEMBER_MEMBER_GROUP_IDS},ACCEPT_APPLICATION:{role:i.ACCEPT_APPLICATION_ROLES,memberGroup:s.ACCEPT_APPLICATION_MEMBER_GROUP_IDS},MANAGE_POSTING_ON_BAND_JOIN:{role:i.MANAGE_POSTING_ON_BAND_JOIN_ROLES,memberGroup:s.MANAGE_POSTING_ON_BAND_JOIN_MEMBER_GROUP_IDS},MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY:{role:i.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY_ROLES,memberGroup:s.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY_MEMBER_GROUP_IDS},MANAGE_JOIN:{role:i.MANAGE_JOIN_ROLES,memberGroup:s.MANAGE_JOIN_MEMBER_GROUP_IDS},MANAGE_MEMBER_GROUP:{role:i.MANAGE_MEMBER_GROUP_ROLES,memberGroup:s.MANAGE_MEMBER_GROUP_MEMBER_GROUP_IDS},DELETE_CONTENTS:{role:i.DELETE_CONTENTS_ROLES,memberGroup:s.DELETE_CONTENTS_MEMBER_GROUP_IDS},DELETE_COMMENT:{role:i.DELETE_COMMENT_ROLES,memberGroup:s.DELETE_COMMENT_MEMBER_GROUP_IDS},BAN_MEMBER:{role:i.BAN_MEMBER_ROLES,memberGroup:s.BAN_MEMBER_MEMBER_GROUP_IDS}},d={PERMISSION:{EDIT_NAME_COVER:{id:l.EDIT_NAME_COVER,title:IM("bandsetting.member_permission.txt.level_edit_name_cover"),permissionKey:r.EDIT_NAME_COVER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},EDIT_NOTICE:{id:l.EDIT_NOTICE,title:IM("bandsetting.member_permission.txt.level_edit_notice"),permissionKey:r.EDIT_NOTICE,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},VIEW_POST_READER:{id:l.VIEW_POST_READER,title:IM("bandsetting.member_permission.txt.level_view_post_reader"),permissionKey:r.VIEW_POST_READER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},MANAGE_PINNED_HASHTAGS:{id:l.MANAGE_PINNED_HASHTAGS,title:IM("bandsetting.member_permission.txt.level_manage_pinned_hashtags"),permissionKey:r.MANAGE_PINNED_HASHTAGS,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},MANAGE_BAND_DO_NOT_DISTURB:{id:l.MANAGE_BAND_DO_NOT_DISTURB,title:IM("band.setting.do_not_disturb.title"),permissionKey:r.MANAGE_BAND_DO_NOT_DISTURB,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},POST_CONTENTS:{id:l.POST_CONTENTS,title:IM("setting.post_contents.roles"),permissionKey:r.POST_CONTENTS,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},POST_APPROVER:{id:l.POST_APPROVER,title:IM("setting.post_approver.roles"),permissionKey:r.POST_APPROVER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},CREATE_RESERVED_POST:{id:l.CREATE_RESERVED_POST,title:IM("setting.create_reserved_post.roles"),permissionKey:r.CREATE_RESERVED_POST,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},COMMENT:{id:l.COMMENT,title:IM("bandsetting.member_permission.txt.level_comment_contents"),permissionKey:r.COMMENT,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},CREATE_LIVE:{id:l.CREATE_LIVE,title:IM("setting.member_permission.live"),permissionKey:r.CREATE_LIVE,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},UPLOAD_PHOTO_TO_ALBUM:{id:l.UPLOAD_PHOTO_TO_ALBUM,title:IM("bandsetting.member_permission.txt.level_upload_photo_to_album"),permissionKey:r.UPLOAD_PHOTO_TO_ALBUM,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},CREATE_ALBUM:{id:l.CREATE_ALBUM,title:IM("bandsetting.member_permission.txt.level_create_album_file_folder"),permissionKey:r.CREATE_ALBUM,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},REGISTER_SCHEDULE:{id:l.REGISTER_SCHEDULE,title:IM("bandsetting.member_permission.txt.level_register_schedule"),permissionKey:r.REGISTER_SCHEDULE,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},MODIFY_SCHEDULE:{id:l.MODIFY_SCHEDULE,title:IM("bandsetting.member_permission.txt.level_modify_schedule"),permissionKey:r.MODIFY_SCHEDULE,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},REGISTER_CALENDAR:{id:l.REGISTER_CALENDAR,title:IM("bandsetting.member_permission.txt.level_register_calendar"),desc:IM("bandsetting.member_permission.txt.level_register_calendar_desc"),permissionKey:r.REGISTER_CALENDAR,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},INVITE_CHAT:{id:l.INVITE_CHAT,title:IM("bandsetting.member_permission.txt.level_invite_chat"),desc:IM("bandsetting.member_permission.txt.level_invite_chat_desc"),permissionKey:r.INVITE_CHAT,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},CHAT_TO_MANAGER:{id:l.CHAT_TO_MANAGER,title:IM("bandsetting.member_permission.txt.level_chat_to_leader"),desc:IM("bandsetting.band_chat.chat_to_leader.description"),permissionKey:r.CHAT_TO_MANAGER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.DISALLOW]},CREATE_OPEN_CHAT:{id:l.CREATE_OPEN_CHAT,title:IM("bandsetting.member_permission.txt.level_create_open_chat"),permissionKey:r.CREATE_OPEN_CHAT,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},DELETE_OPEN_CHAT:{id:l.DELETE_OPEN_CHAT,title:IM("bandsetting.member_permission.txt.level_delete_open_chat"),permissionKey:r.DELETE_OPEN_CHAT,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},DISABLE_DEFAULT_CHAT:{id:l.DISABLE_DEFAULT_CHAT,title:IM("bandsetting.member_permission.txt.level_disable_default_chat"),permissionKey:r.DISABLE_DEFAULT_CHAT,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},INVITE_MEMBER:{id:l.INVITE_MEMBER,title:IM("bandsetting.member_permission.txt.level_invite_member"),permissionKey:r.INVITE_MEMBER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},ACCEPT_APPLICATION:{id:l.ACCEPT_APPLICATION,title:IM("bandsetting.member_permission.txt.level_accept_application"),permissionKey:r.ACCEPT_APPLICATION,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER,o.LEADER_AND_MEMBER_GROUPS,o.ALL_MEMBER]},MANAGE_POSTING_ON_BAND_JOIN:{id:l.MANAGE_POSTING_ON_BAND_JOIN,title:IM("bandsetting.member_permission.txt.level_manage_posting_on_band_join"),permissionKey:r.MANAGE_POSTING_ON_BAND_JOIN,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY:{id:l.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY,title:IM("bandsetting.member_permission.txt.level_manage_open_cellphone_and_birthday"),desc:IM("bandsetting.member_permission.txt.level_manage_open_cellphone_and_birthday_desc"),permissionKey:r.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},MANAGE_JOIN:{id:l.MANAGE_JOIN,title:IM("bandsetting.member_permission.txt.level_manage_join"),desc:IM("bandsetting.member_permission.txt.level_manage_join_desc"),permissionKey:r.MANAGE_JOIN,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},MANAGE_MEMBER_GROUP:{id:l.MANAGE_MEMBER_GROUP,title:IM("band.member.group.setting.menu_name"),permissionKey:r.MANAGE_MEMBER_GROUP,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},DELETE_CONTENTS:{id:l.DELETE_CONTENTS,title:IM("bandsetting.member_permission.txt.level_delete_post_comment"),permissionKey:r.DELETE_CONTENTS,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]},BAN_MEMBER:{id:l.BAN_MEMBER,title:IM("bandsetting.member_permission.txt.level_band_member"),permissionKey:r.BAN_MEMBER,permissionGroups:[o.LEADER_ONLY,o.LEADER_AND_COLEADER]}}};return d.PERMISSION_KEY_TYPE=a,d.PERMISSION_GROUP=o,d.PERMISSION_ID=l,d.PERMISSION_KEY=r,d}.call(t,n,t,e))||(e.exports=i)},1207:function(e,t,n){var i=n(1010),s=n(13),a=n(506),o=n(1100),l={fetchRegion:function(e,t){var n=e.coords;return i.searchRegionByCoords(n.longitude,n.latitude).then((function(e){return t&&s.isLogedIn()&&i.addUserRegionSearchHistory(e.rcode),new o(e,{parse:!0})}),(function(e){return a.get(e,"result_data.message")}))}};e.exports=l},1217:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(595),s=n(533),a=n(568),o=n(491),l={fetchAlbumListAndBand:function(e,n,i){return t.when(l.fetchAlbumList(e,n.API_PARAM,a.ALBUM_PAGE_SIZE,i),o.getCachedBandData(e))},fetchAlbumList:function(e,t,n,s){var a={band_no:e,all_cover_count:6,album_cover_count:s,album_count:n,is_with_all:!0,order_by:t.API_PARAM};return i.getPhotoAlbums(a).then(r)},fetchPhotoStatus:function(e){return s.getPhotoStatus(e)}},r=function(e){return{photo_albums:e.photo_albums,all_photos:e.all_photos,totalPhotoCount:e.all_photos.total_count,photoAlbumCount:e.photo_album_count}};return l}.call(t,n,t,e))||(e.exports=i)},1218:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(1085),n(568)],void 0===(s=function(e,t,n,i,s){var a=n.Collection.extend({model:i,setTotalPhotoCount:function(e){this.totalPhotoCount=e},isPhotoExist:function(){return this.totalPhotoCount>0},setPhotoAlbumCount:function(e){this.photoAlbumCount=e},isAlbumExist:function(){return this.photoAlbumCount>0},shouldOpenAlbumSelectView:function(){return!this.isAlbumExist()&&!this.isPhotoExist()},hasMore:function(){return this.photoAlbumCount>this.length},calculateNextFetchCount:function(){return Math.min(this.photoAlbumCount,this.length+s.ALBUM_PAGE_SIZE)}});return a.buildAlbumViewCollection=function(e){return new a(e)},a}.apply(t,i))||(e.exports=s)},1219:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(16),a=n(523),o=n(570),l=n(503),r=n(549),d=n(1003),c=n(1220);function h(e){return e.format("YYYYMMDD")}var u=i.Model.extend({defaults:{date:null,events:[]},initialize:function(){this._sortEvents()},_sortEvents:function(){var e=this.get("events");e=t.sortBy(e,t.bind((function(e){return this._getOrderRating(e)}),this)),this.set("events",e)},getDate:function(){return this.get("date")},_getOrderRating:function(e,t){if(this._isMoreThanOneDay(e)){var n=s(e.get("startAt")),i=s(e.get("endAt"));return n.isSame(t,"day")?1:i.isSame(t,"day")?2:3}return this._isAllDay(e)?4:5},_isMoreThanOneDay:function(e){if(!e.get("endAt"))return!1;var t=s(e.get("startAt"));return s(e.get("endAt")).isAfter(t,"day")},_isAllDay:function(e){return e.get("isAllDay")}}),p=i.Collection.extend({model:u,initialize:function(e,t){this._currentMonth=t.currentMonth,this._bandNo=t.bandNo,this._bandCalendarModel=t.bandCalendarModel},_parseResult:function(e,n,i){var l={};t.each(e,(function(e){var n={startAt:e.start_at,endAt:e.end_at};t.each(function(e){var t,n=s(e.startAt);return t=e.endAt?s(e.endAt):s(n),o.extractOccuredUnitInDateRange(n,t,"day")}(n),(function(t){var n=h(t);l[n]||(l[n]=[]),l[n].push(r.createScheduleModelByJSON(e))}))}));var d=[];return a.getCalendarRange(n,i).by("day",(function(e){var t=h(e);d.push({date:s(e).startOf("day"),events:l[t]||[]})})),d},fetchMonthDateCollection:function(e,n){return this._currentMonth=e,this._calendarCategories=n,d.getCachedStartDayNum().then(t.bind((function(n){var i=a.getCalendarRange(e,n),o=c.convertViewSelectionCategoryDataToApiData(this._calendarCategories);return function e(t,n){return n||(n=[]),l.getSchedules(t).then((function(i){if(n=n.concat(i.items),i.paging.next_params)return e({bandNo:t.bandNo,startAt:s(i.paging.next_params.start_at,"YYYYMMDD"),futureEndAt:s(i.paging.next_params.future_end_at,"YYYYMMDD"),calendars:t.calendars},n);var a=i.calendar_personal_notice?i.calendar_personal_notice:null;return{resultItems:n,calendarNotice:a}}))}({bandNo:this._bandNo,startAt:i.start,futureEndAt:i.end,calendars:o}).then(t.bind((function(t){var i=c.convertApiScheduleDataToViewData(t.resultItems,this._calendarCategories),s=this._parseResult(i,e,n);this.reset(s),this._currentMonth=e,this._calendarNotice=t.calendarNotice}),this))}),this))},fetchMonthDateCollectionMW:function(e,n,i){this._currentMonth=e,this._calendarCategories=i;var o=a.getCalendarRange(e,n),r=function(e,t){return t||(t=[]),l.getSchedules(e).then((function(n){if(t=t.concat(n.items),n.paging.next_params){var i={bandNo:e.bandNo,startAt:s(n.paging.next_params.start_at,"YYYYMMDD"),futureEndAt:s(n.paging.next_params.future_end_at,"YYYYMMDD"),calendars:e.calendars};return r(i,t)}return t}))},d=c.convertViewSelectionCategoryDataToApiData(this._calendarCategories),h={bandNo:this._bandNo,startAt:o.start,futureEndAt:o.end,calendars:d};return r(h).then(t.bind((function(t){this._currentMonth=e;var i=c.convertApiScheduleDataToViewData(t,this._calendarCategories),s=this._parseResult(i,e,n);this.reset(s),this.trigger("period:change")}),this))},getCurrentMonth:function(){return this._currentMonth},getBandNo:function(){return this._bandNo},getCalendarNotice:function(){return this._calendarNotice},setCalendarNotice:function(e){this._calendarNotice=e},getSelectedCalendarCategories:function(){return this._calendarCategories}});return p.build=function(e,t){return new p([],{currentMonth:t,bandNo:e})},p}.call(t,n,t,e))||(e.exports=i)},1220:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=["BIRTHDAY","HOLIDAY","BAND_OPEN"];return{convertApiScheduleDataToViewData:function(e,n){if(t.isEmpty(n))return e;var s=[],a=t.contains(n.internalCalendarCheckList,"default");t.each(n.internalCalendarCheckList,t.bind((function(e){"default"!==e&&s.push(e)}),this));var o=t.union(n.externalCalendarCheckList,s);return t.filter(e,(function(e){return!!t.contains(i,e.schedule_type)||(!(!e.subscribed_calendar||!t.contains(n.subscribedCalendarCheckList,e.subscribed_calendar.id))||(!(e.subscribed_calendar||!a||!e.calendar.is_default)||!(e.subscribed_calendar||!e.calendar||!t.contains(o,e.calendar.calendar_id))))}))},convertViewSelectionCategoryDataToApiData:function(e){if(t.isEmpty(e))return e;var n=[],i=t.contains(e.internalCalendarCheckList,"default");return(e.subscribedCalendarCheckList||i)&&n.push({is_default:!0}),t.each(e.internalCalendarCheckList,(function(e){"default"!==e&&n.push({is_default:!1,calendar_id:e})})),t.each(e.externalCalendarCheckList,(function(e){n.push({is_default:!1,calendar_id:e})})),n}}}.call(t,n,t,e))||(e.exports=i)},1221:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(53),a=n(153);return new(t.Object.extend({initialize:function(){this.resetBandCalendarCategorySelectionHolder()},bindResetSelectionIfOutOfCalendarRoute:function(){this._routeEventBinded||(this._routeEventBinded=!0,s.registerChangeListener([],(function(e){e.routeInfo!=a.GROUP_BAND_CALENDAR&&this.resetBandCalendarCategorySelectionHolder()}),this))},setSelectedCalendarCategories:function(e,t){this._selectedCalendarCategories[t]=e},getSelectedCalendarCategories:function(e){return i.has(this._selectedCalendarCategories,e)?this._selectedCalendarCategories[e]:null},resetBandCalendarCategorySelectionHolder:function(){this._selectedCalendarCategories={}}}))}.call(t,n,t,e))||(e.exports=i)},1226:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(6),a=n(520),o=n(1227),l=n(176);return s.Collection.extend({model:o,initialize:function(e,t){this.bandNo=t.bandNo},fetchSearchPost:function(e,n){if(!e||e.length<2)return this.nextParams=null,this.totalPostCount=0,this.reset(null,{silent:!0}),i.Deferred().resolve();var s={band_no:this.bandNo,query:e,include_comment:n,passage_length:220};return i.when(a.searchPostWithComment(s),l.fetchBandJoin()).then(t.bind((function(e){this.nextParams=e.paging.next_params,this.totalPostCount=e.post_total,this.reset(e.items,{parse:!0,silent:!0})}),this))},fetchNextPostList:function(){return a.searchPostWithComment(this.nextParams).then(t.bind((function(e){this.nextParams=e.paging.next_params,this.set(e.items,{add:!0,merge:!1,remove:!1,parse:!0})}),this))},hasMore:function(){return!!this.nextParams},getTotalPostCount:function(){return this.totalPostCount||0},fetchMyBandsForPosts:function(e){var n=this._fetched?this.nextParams:{query:e,passage_length:1024,limit:20};if(n&&!this._fetching)return this._fetching=!0,a.searchMyBandsForPosts(n).then(t.bind((function(e){this.nextParams=e.paging.next_params,this._fetched=!0,this.totalPostCount=e.total,this.add(e.items,{parse:!0}),this.trigger("fetched")}),this)).always(t.bind((function(){this._fetching=!1}),this))}})}.call(t,n,t,e))||(e.exports=i)},1227:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(504),s=n(520),a=n(517),o=n(13),l=n(490),r=n(161),d=n(152),c=t.Model.extend({parse:function(e,n){this.originResponse=e;var s=d.findPriorRestriction({isRestricted:e.isRestricted,isVisibleOnlyToAuthor:e.is_visible_only_to_author,isMutedAuthorPost:!!e.author&&!!e.author.is_muted});s&&(s===d.RESTRICTION_TYPE.HIDE_POST&&(e.content=IM("post.hidden_post.guide_message"),e.image=null,e.video_count=0,e.photo_count=0,e.is_photo_countless=!1),s===d.RESTRICTION_TYPE.MUTE_AUTHOR&&(e.content=IM("post.muted_author_post.guide_message"),e.image=null,e.video_count=0,e.photo_count=0,e.is_photo_countless=!1));var l={id:a.makeModelId(e.band.band_no,e.post_no),band:r.createBandCoreWithAction(e.band),author:new i(e.author,{parse:!0}),postNo:e.post_no,content:e.content,image:e.image,videoCount:e.video_count,photoCount:e.photo_count,isPhotoCountless:e.is_photo_countless||!1,emotionCount:e.emotion_count,commentCount:e.comment_count,isPlayButtonVisible:e.is_play_button_visible||!1,isSearchedCommentsCountless:e.is_searched_comments_countless||!1,isNotice:e.is_band_notice||!1,isShareable:e.is_shareable||!1,viewType:e.view_type||null,createdAt:e.created_at,isAuthor:!1,commonEmotionType:e.common_emotion_type,isVisibleOnlyToAuthor:e.is_visible_only_to_author,isRecoverableByViewer:e.is_recoverable_by_viewer};return l.isAuthor=o.getUserData().getUserNo()===l.author.get("userNo"),e.searched_comments?l.searchedComments=new t.Collection(e.searched_comments,{model:h,parse:!0}):l.searchedComments=new t.Collection,l},isMutedAuthorPost:function(){var e=this.getAuthor();return!!e&&e.isMutedAuthor()},getAuthor:function(){return this.get("author")},getBandCore:function(){return this.get("band")},getBandNo:function(){return this.getBandCore().bandNo},getBandName:function(){return this.getBandCore().name},getPostNo:function(){return this.get("postNo")},getPostImage:function(){return this.get("image")},getPostContent:function(){return this.get("content")},getPostCommentCount:function(){return this.get("commentCount")},getPostEmotionCount:function(){return this.get("emotionCount")},getPostPhotoCount:function(){return this.get("photoCount")},getPostVideoCount:function(){return this.get("videoCount")},getPostCreatedAt:function(){return this.get("createdAt")},getCommonEmotionType:function(){return this.get("commonEmotionType")},isPostPhotoCountless:function(){return this.get("isPhotoCountless")},destroyPost:function(){return s.deletePost(this.get("band").get("bandNo"),this.get("postNo"))},toJSON:function(){return l.toRecursiveJSON(this)},isAuthorProfileExist:function(){return this.get("viewType")!==d.VIEW_TYPE_ANNIVERSARY},createPostModel:function(){return new a(this.originResponse,{parse:!0})}}),h=t.Model.extend({parse:function(e,t){return e.author&&e.author.is_muted&&(e.body=IM("comment.muted_author_comment.guide_message")),{author:new i(e.author,{parse:!0}),body:e.body,createdAt:e.created_at,commentId:e.comment_id,originCommentId:e.origin_comment_id||null}},toJSON:function(){return l.toRecursiveJSON(this)}});return c}.call(t,n,t,e))||(e.exports=i)},1228:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(9),n(1498)],void 0===(s=function(e,t,n,i,s){var a=n.Collection.extend({model:s,getCheckedImageCount:function(){return this.extractCheckedCollection().length},extractCheckedCollection:function(){return this.filter((function(e){return e.isChecked()}))},removeTargetModels:function(e){if(!t.isEmpty(e)){var n=0;t.each(e,(function(e){var t=this.find((function(t){return t.getPhotoNo()==e}));t&&n++,this.remove(t)}),this),this._totalCount-=n}},setTotalCount:function(e){this._totalCount=e},getTotalCount:function(){return this._totalCount},setPaging:function(e){this._paging=e},getPaging:function(){return this._paging},isEmpty:function(){return 0==this.length},extractYearMonthTextArray:function(){var e=this.map((function(e){return e.getYearMonthText()}));return t.uniq(e)},containTargetPhotoNos:function(e){return!t.isEmpty(e)&&this.some((function(n){return t.contains(e,n.getPhotoNo())}))}});return a.buildPhotoCollection=function(e){var t=new a(e.items);return t.each((function(e){var t=i.format.date(e.getCreatedAt(),"year_month");e.setYearMonthText(t)})),t},a}.apply(t,i))||(e.exports=s)},1229:function(e,t,n){var i;void 0===(i=function(e){var t=n(21);return{_getApiClient:function(){return t.getLoginV1Client()},createApplicantComment:function(e,t,n,i){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/create_applicant_comment",data:{band_no:e,applicant_key:t,body:n,photos:i},method:"POST"})},createMyApplicationComment:function(e,t,n){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/create_my_application_comment",data:{band_no:e,body:t,photos:n},method:"POST"})},getApplicantComments:function(e){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/get_applicant_comments",data:e,method:"GET"})},getMyApplicationComments:function(e){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/get_my_application_comments",data:e,method:"GET"})},deleteApplicantComment:function(e,t,n){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.0.0/delete_applicant_comment",data:{band_no:e,applicant_key:t,comment_id:n},method:"GET"})},deleteMyApplicationComment:function(e,t){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.0.0/delete_my_application_comment",data:{band_no:e,comment_id:t},method:"GET"})},updateApplicantComment:function(e,t,n,i,s){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/update_applicant_comment",data:{band_no:e,applicant_key:t,comment_id:n,body:i,photos:s},method:"POST"})},updateMyApplicationComment:function(e,t,n,i){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/update_my_application_comment",data:{band_no:e,comment_id:t,body:n,photos:i},method:"POST"})},getApplicantCommentSet:function(e){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/get_applicant_comment_set",data:{band_no:e},method:"GET"})},readApplicantComment:function(e,t){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.0.0/read_applicant_comment",data:{band_no:e,applicant_key:t},method:"POST"})},getMyApplicationCommentSet:function(){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/get_my_application_comment_set",method:"GET"})},getApplicantCommentHistory:function(e){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v2.3.0/get_applicant_comment_history",data:e,method:"GET"})}}}.call(t,n,t,e))||(e.exports=i)},1230:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1042),a=n(1502),o=n(153),l=n(1503),r=n(798),d=n(514),c=n(26),h=n(82),u=n(9),p=n(486),m=n(1505),_=n(553),b=n(562),g=i.View.extend({options:{onBandJoinCompleted:function(e){e&&alert(e),_.home(this.bandCore).go()}},attributes:{"data-viewname":"DInvitationCardView"},template:t.template(a),templateContext:function(){var e=this.model.get("source_info");return{bandCoverUrl:h.makeMediumSquareCoverUrl(this.model.get("band").cover),showReportButton:u.spec.canReport(),bandSettingUrl:e?o.GROUP_BAND_SETTING.makeUrl({band_no:e.band_info.band_no}):"",isApplication:this.model.isApplication(),bandUrl:o.GROUP_BAND_HOME.makeUrl({band_no:this.model.get("band").band_no}),needCheckHelpMessageForKids:this._needCheckHelpMessageForKids}},initialize:function(e){this._needCheckHelpMessageForKids=e.needCheckHelpMessageForKids&&!this.model.isBandForKidsEnabled(),this.model.get("source_info")&&this.listenTo(c.getDGlobalChannel(),c.EVENT.HTML_CLICK,t.bind((function(e){$(e.target).closest(this.ui.blockBandInvitationInfo).length||$(e.target).hasClass(this.ui.btnSourceInfoHelp[0].className)||this.ui.blockBandInvitationInfo.hide()}),this))},ui:{btnClose:"._btnClose",btnDeny:"._btnDeny",btnAccept:"._btnAccept",btnReport:"._btnReport",btnSourceInfoHelp:"._btnSourceInfoHelp",blockBandInvitationInfo:"._blockBandInvitationInfo",btnHelp:"._btnHelp"},events:{"click @ui.btnAccept":"_doAccept","click @ui.btnDeny":"_doDeny","click @ui.btnSourceInfoHelp":"_toggleBlockBandInvitationInfo","click @ui.btnReport":"_reportInvitation","click @ui.btnHelp":"_showHelpLayer"},triggers:{"click @ui.btnClose":"DInvitationCardView:close"},_showHelpLayer:function(){b.openLayer({bodyTitle:IM("invitation.member_under_13.help_title"),bodyDesc:IM("invitation.member_under_13.help_desc"),withoutHiding:!0})},_toggleBlockBandInvitationInfo:function(e){$(e.currentTarget).parents().children("dd").toggle()},_doAccept:function(){var e=this;r.build({onBandJoinCompleted:this.options.onBandJoinCompleted,onRefreshPage:function(t){t&&alert(t),e.triggerMethod("DInvitationCardView:refresh")}}).startJoinFromInvitationCard(this.model.get("invitation_card_id"),this.model.getBandCore())},_doDeny:function(){var e=l.buildAsLayer(this.model);this.listenToOnce(e,"confirmDoDeny",(function(){this.model.deny().then(t.bind((function(){e.destroy(),this.triggerMethod("DInvitationCardView:refresh")}),this))}))},_reportInvitation:function(){d.openInvitationReportPopup({invitationCardId:this.model.get("invitation_card_id"),fnCallback:t.bind((function(){m.openLayer().once(m.EVENTS.CONFIRM,t.bind((function(e){e&&this.model.deny().then(t.bind((function(e){alert(e.message),this.triggerMethod("DInvitationCardView:refresh")}),this))}),this))}),this)})}});return g.buildDInvitationCardView=function(e,t,n){var i={model:e,needCheckHelpMessageForKids:n};return t&&(i.onBandJoinCompleted=t),new g(i)},g.buildAsLayerByInvitationCardId=function(e){return s.buildAsyncFromInvitationCard(e).then((function(e){var t=g.buildDInvitationCardView(e);return p.open(t),t}))},g}.call(t,n,t,e))||(e.exports=i)},1231:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%- IM("web.url_layer.title") %></h1>\n        </header>\n        <div class="main">\n            \x3c!-- alert 메시지 형태 --\x3e\n            <p class="p"><%= IM(\'web.url_layer.status_desc\') %></p>\n            <div class="p -tSpace">\n                <div class="uInput">\n                    <label class="gSrOnly" for="invitationLink">URL</label>\n                    <input type="text" id="invitationLink" readonly="readonly" value="<%- url%>">\n                    <span class="border"></span>\n                </div>\n            </div>\n        </div>\n        <footer class="footer">\n            <button type="button" class="uButton _btnCopyUrl" data-clipboard-target="#invitationLink"><%- IM(\'copy_url.label\') %></button>\n            <button type="button" class="btnLyClose uButton -iconClose _btnClose"><span class="gSrOnly"><%-IM("ui.label.close") %></span></button>\n        </footer>\n    </div>\n</section>'},1232:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(158),o=n(521),l=n(54),r=n(1518),d=n(1520),c=n(510),h=s.Object.extend({initialize:function(e){this.model=e.model,this.profileSettingModel=e.model.get("profileSettingModel"),this.agreementsInfo=o.buildPersonalInfoAgreementData()},openEmailView:function(e){var t=this.model.isEmailExist(),n=this.model.isEmailVerified(),s=this.model.isPasswordExist(),a=this.model.getEmail();this.newEmail=e,this.newEmail?!t||n?this.newEmail!==a&&l.getEmailStatus(this.newEmail).then(i.bind((function(e){"verified"==e.email_status?alert(IM("web.setting.account.same_email")):s?this._sendAuthEmail():this._showConfirmPasswordView()}),this)):this._sendAuthEmail():this._openEmailUseAgreementView()},_openEmailUseAgreementView:function(){if(!this.profileSettingModel.get("agreementsInfo").phoneNumber)return alert(IM("setting.account.email.service_use_agreement.disabled_notice")),!1;c.openLayer({bodyDesc:IM("setting.account.email.service_use_agreement.agree_description"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")}).once(c.EVENTS.CONFIRM,i.bind((function(){this.agreementsInfo.cancelPersonalInfoAgreements(o.AGREE_TARGET.EMAIL).then(i.bind((function(){this.trigger("updateEmail:denyAgreement")}),this),(function(){return alert(IM("error.wrong_request")),!1}))}),this))},_showConfirmPasswordView:function(){var e=d.buildAsLayer();this.listenTo(e,"emailChange:updateEmail",i.bind((function(e){this._sendAuthEmail(e)}),this))},_sendAuthEmail:function(e){var t=e||!1;return l.sendAuthEmail(this.newEmail,this.profileSettingModel.get("name")).then(i.bind((function(e){var n=r.buildAsLayer(this.newEmail,this.profileSettingModel.get("name"));this.listenTo(n,"emailVerify:changeEmail",i.bind((function(arguments){this._updateEmail(arguments.email,arguments.verificationToken,t)}),this))}),this))},_updateEmail:function(e,n,s){var a=[];this.model.isInfoAgreementsEmail()||a.push(this._setAgreementsEmail()),a.push(this._connectEmail(e,n,s)),t.when.apply(t,a).then(i.bind((function(){this.trigger("authorization:complete",this.profileSettingModel)}),this))},_setAgreementsEmail:function(){var e=o.AGREE_TARGET.EMAIL;return this.agreementsInfo.setPersonalInfoAgreements(e).then((function(e){return e}))},_connectEmail:function(e,n,i){return this.model.getEmail()===e?t.Deferred().resolve().promise():l.connectEmail(n,i).then((function(e){return e}))}});return h.Model=Backbone.Model.extend({getEmail:function(){return this.get("email")},isEmailExist:function(){return this.get("bEmailExist")},isEmailVerified:function(){return this.get("bEmailVerified")},isPasswordExist:function(){return this.get("bPasswordExist")},isInfoAgreementsEmail:function(){return this.get("bInfoAgreementsEmail")}}),h.Model.build=function(e){return new h.Model({profileSettingModel:e,email:e.get("email"),bEmailExist:!a.isEmpty(e.get("email")),bEmailVerified:e.isEmailVerified(),bPasswordExist:e.isPasswordExist(),bInfoAgreementsEmail:e.get("agreementsInfo").email})},h.buildController=function(e){var t=h.Model.build(e.profileSettingModel);return new h({model:t})},h}.call(t,n,t,e))||(e.exports=i)},1234:function(e,t,n){var i=n(2),s=n(0),a=n(10),o=n(4),l=n(1803),r=n(520),d=n(1804),c=n(153),h=n(162),u=n(26),p=n(1053),m=".-focus",_="._focusableItem",b=o.View.extend({initialize:function(e){this._bandData=e.bandData,this._band=this._bandData.getBandCore(),this._bandNo=this._band.bandNo,this._query=e.query},template:s.template(l),templateContext:function(){return{msgSearchTxt:s.bind((function(){return this._bandData.getBandCore().isSupportForPostAuthorSearch()?IM("web.board.search.placeholder"):IM("pageband.postsearch.search.placeholder")}),this)}},ui:{inputSearchWrap:"[data-uiselector=inputSearchWrap]",searchForm:"[data-uiselector=searchForm]",searchTxt:"[data-uiselector=searchTxt]",searchOldPosts:"[data-uiselector=searchOldPosts]",searchTagItem:"[data-uiselector=searchTagItem]",searchHint:"[data-uiselector=searchHint]",searchOldPostsLinkWrap:"._searchOldPostsLinkWrap",searchHashTags:"._searchHashTags"},events:{"submit @ui.searchForm":"_submitQuery","focus @ui.searchTxt":"_showSearchBtn","keyup @ui.searchTxt":"_toggleSearchHint","keydown @ui.searchTxt":"_selectHintByKeyboard","blur @ui.searchTxt":"_hideSearchBtnAndHint","click @ui.searchTagItem":function(e){return this._submitHashTagQuery(i(e.currentTarget).data("query")),!1},"click @ui.searchOldPosts":"_goPeriodSearchPage"},onRender:function(){this._bandData.canUsePeriodSearch()||this.ui.searchOldPostsLinkWrap.remove(),this._query&&this.ui.searchTxt.val(s.unescape(this._query))},onAttach:function(){this.listenTo(u.getSettingChannel(),u.EVENT.SETTING_TAG_UPDATED,s.bind((function(){this._fetchedHashTags=!1}),this))},_getSearchTagTitle:function(){return this._band.showPageBandTagListTitle()?IM("page_band.search.hashtag.title"):IM("web.board.search.hashtag.title")},_encodeQuery:function(e){return p.encodeQuery(e,!0)},_goPeriodSearchPage:function(){var e={band_no:this._bandNo};return this._bandData.getBandCore().goBandDForced(c.GROUP_BAND_PERIOD_SEARCH,h.PAGE_BAND_PERIOD_SEARCH,e),!1},_submitHashTagQuery:function(e){var t=e.search(/[&amp;|&lt;|&gt;]/)>0?s.unescape(e):e,n={band_no:this._bandNo,query:encodeURIComponent(t.replace(/^\#/,""))};this._bandData.getBandCore().goBandDForced(c.GROUP_BAND_HASHTAG,h.PAGE_BAND_HASHTAG,n)},_submitQuery:function(){if(a.trim(this.ui.searchTxt.val()).length<1)return alert(IM("web.help.header.placeholder.input_search")),!1;var e=encodeURIComponent(this._encodeQuery(this.ui.searchTxt.val())),t={band_no:this._bandNo,query:e};return this._bandData.getBandCore().goBandDForced(c.GROUP_BAND_SEARCH,h.PAGE_BAND_SEARCH,t),!1},_toggleSearchHint:function(){var e=this.ui.searchTxt.val();e?0===e.indexOf("#")?(clearTimeout(this.timeoutId),this.timeoutId=setTimeout(s.bind((function(){var t=this.$el.find("[data-uiselector=searchTagItem]");t.filter('[data-query^="'+this._encodeQuery(e)+'"]').length>0?(t.hide(),t.filter('[data-query^="'+this._encodeQuery(e)+'"]').show()):t.show(),this.isDestroyed()||this.ui.searchHint.addClass("-active")}),this),300)):(this.$el.find(_).removeClass("-focus"),this.ui.searchHint.removeClass("-active")):(this.$el.find("[data-uiselector=searchTagItem]").show(),this.ui.searchHint.addClass("-active")),1===this.getUI("searchHint").children().length&&this.getUI("searchHint").removeClass("-active")},_selectHintByKeyboard:function(e){if(this.ui.searchHint.hasClass("-active"))if(13===e.keyCode||38===e.keyCode||40===e.keyCode){var t=this.$el.find([_,":visible"].join("")),n=this.$el.find([_,m].join("")),i=t.length,s=t.index(n);if(n.length>0)return 38===e.keyCode&&s>0?(n.removeClass("-focus"),t.eq(s-1).addClass("-focus"),this.ui.searchHint.animate({scrollTop:(s-1)*n.height()},50)):40===e.keyCode&&s+1<i?(n.removeClass("-focus"),t.eq(s+1).addClass("-focus"),this.ui.searchHint.animate({scrollTop:(s+1)*n.height()},50)):13===e.keyCode&&(n.eq(0).is(this.ui.searchOldPostsLinkWrap)?this._goPeriodSearchPage():this._submitHashTagQuery(n.eq(0).data("query"))),!1;40===e.keyCode&&t.eq(0).addClass("-focus")}else this.ui.searchHint.scrollTop(0),this.$el.find(_).removeClass("-focus")},_showSearchBtn:function(){this.ui.inputSearchWrap.addClass("-active"),this._toggleSearchHint(),this._getHashTags()},_getHashTags:function(){var e="";this._bandData.isCardView()||this._fetchedHashTags||(e=s.template(d)({resBaseUrl:window.resBaseUrl,loading:!0}),this.getUI("searchHashTags").empty().append(e),r.getHashTagsWithPinned(this._bandNo).then(s.bind((function(t){this._fetchedHashTags=!0,this.getUI("searchHashTags").empty(),t&&t.length>0&&(this.isDestroyed()||(e=s.template(d)({title:this._getSearchTagTitle(),items:t,loading:!1}),this.getUI("searchHashTags").append(e)))}),this)))},_hideSearchBtnAndHint:function(){this.ui.searchHint.is(":hover")||(this.ui.searchTxt.val()||this.ui.inputSearchWrap.removeClass("-active"),this.$el.find(_).removeClass("-focus"),this.ui.searchHint.removeClass("-active"))}});b.createDBandPostSearchFormView=function(e,t){return new b({bandData:e,query:t})},e.exports=b},1235:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(486),a=n(1809),o=i.View.extend({attributes:{"data-viewname":"DConfirmModalWithCheckboxView"},className:"lyWrap",template:t.template(a),templateContext:function(){return{title:this.options.title,desc:this.options.desc,descTitle:this.options.descTitle,confirmLabel:this.options.confirm,cancelLabel:this.options.cancel,closeLabel:this.options.closeLayer,confirmCheckboxDescription:this.options.confirmCheckboxDescription}},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",btnClose:"._btnClose",confirmCheckbox:"._confirmCheckbox"},events:{"click @ui.confirmCheckbox":"_adaptButtonStyle","click @ui.btnConfirm":"_confirmAction","click @ui.btnCancel":"_cancelAction","click @ui.btnClose":"_cancelAction"},onRender:function(){this._adaptButtonStyle()},_adaptButtonStyle:function(){this.getUI("confirmCheckbox").is(":checked")?(this.getUI("btnConfirm").prop("disabled",!1),this.getUI("btnConfirm").removeClass("-disabled")):(this.getUI("btnConfirm").prop("disabled",!0),this.getUI("btnConfirm").addClass("-disabled"))},_confirmAction:function(){this.trigger("modal:confirm"),this.destroy()},_cancelAction:function(){this.trigger("modal:cancel"),this.destroy()}});return o.openAsLayer=function(e){e=t.extend({title:"",descTitle:"",desc:"",confirm:"",cancel:"",closeLayer:"",confirmCheckboxDescription:""},e);var n=new o(e);return s.open(n),n},o}.call(t,n,t,e))||(e.exports=i)},1236:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(181),a=n(83),o=n(616),l=i.Model.extend({idAttribute:"id",parse:function(e){var t={};return t.id=e.id,t.type=e.type,t.data=e.data,t}}),r=i.Collection.extend({model:l});return i.Model.extend({defaults:function(){return{description:null,content:null,mediaList:new r,location:null}},parse:function(e){var t=this.defaults();if(e.description&&(t.description=e.description),e.content&&(t.content=e.content),e.media_list&&(t.mediaList=new r(e.media_list,{parse:!0})),e.location){var n=new o(e.location,{parse:!0});n.isEmptyLocation()||(t.location=n)}return t},fetchPageIntro:function(e){return s.getPageIntro(e).then(t.bind((function(e){this.set(t.extend(this.defaults(),this.parse(e)))}),this))},setPageIntroInfo:function(e,t){var n={bandNo:e,description:t.pageDescription,content:t.pageContent,location:t.pageLocation,mediaList:t.pageMediaList};return a.setBandInfo(n)},removePageIntroInfo:function(e){return a.deleteBandInfo(e)},isExistPageIntro:function(){return!t.isEmpty(this.get("description"))},getPageMediaList:function(){return this.get("mediaList")?this.get("mediaList"):null},getPageLocation:function(){return this.get("location")?this.get("location"):null},setPageLocation:function(e){e?this.set("location",o.buildLocationModel(e)):this.unset("location")}})}.call(t,n,t,e))||(e.exports=i)},1237:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(2),a=n(4),o=n(1818),l=n(486),r=n(155),d=n(1536),c=n(538),h=n(154),u=n(26),p=n(1819),m=a.View.extend({tagName:"section",className:"lyWrap ",attributes:{"data-viewname":"DBusinessIdentificationInfoRegistrationView"},template:t.template(o),ui:{saveButton:"._saveButton",cancelButton:"._cancelButton",inputArea:"._inputArea",companyNameInput:"._companyNameInput",representativeNameInput:"._representativeNameInput",addressInput:"._addressInput",phoneInput:"._phoneInput",emailInput:"._emailInput",registrationNo:"._registrationNo",mailOrderSalesNoInput:"._mailOrderSalesNoInput",deleteBusinessIDInfoBtn:"._deleteBusinessIDInfoBtn",menuBoxDiv:"._menuBoxDiv",menuBtn:"._menuBtn"},templateContext:function(){return{title:this.model.isExistBusinessIDInfo()?"사업자 정보 변경":"사업자 정보 등록",showOption:this.model.isExistBusinessIDInfo(),showBandName:this._bandData.getBandCore().showBandTermAsPage(),bandName:this._bandData.getBandCore().name}},events:{"click @ui.cancelButton":"destroy","input @ui.inputArea":"_checkButtonActivation","click @ui.saveButton":"_submitBusinessIDInfo","input @ui.addressInput":"_adjustAddressByMaxLength","click @ui.deleteBusinessIDInfoBtn":"_deleteBusinessIDInfo","click @ui.menuBtn":function(){this.ui.menuBoxDiv.toggle()}},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData},onAttach:function(){this._checkButtonActivation(),this.model.isExistBusinessIDInfo()||h.wrapDeferPromise(this).then(t.bind((function(){var e=p.openDPersonalInfoCollectingForBusinessView({bandData:this._bandData});this.listenTo(e,p.CLOSE_COLLECTING_PERSONAL_INFO_EVENT,this.destroy)}),this))},_checkButtonActivation:function(){var e=t.find(this.ui.inputArea,(function(e){var n=s(e);return!n.hasClass("_mailOrderSalesNoInput")&&t.isEmpty(i.trim(n.val()))}));this.ui.saveButton.prop("disabled",null!=e)},_submitBusinessIDInfo:function(){this._updateProgress||(this.model.set({bandNo:this._bandNo,companyName:this.ui.companyNameInput.val(),representativeName:this.ui.representativeNameInput.val(),address:this.ui.addressInput.val(),phone:this.ui.phoneInput.val(),email:this.ui.emailInput.val(),registrationNo:this.ui.registrationNo.val(),mailOrderSalesNo:this.ui.mailOrderSalesNoInput.val()}),this._updateProgress=!0,h.wrapActivePromise(c.SETTING.setBandBusinessRegistration(this.model.toApiParam()),this).then(t.bind((function(){u.getDGlobalChannel().trigger(u.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED),this.destroy()}),this)).always(t.bind((function(){this._updateProgress=!1}),this)))},_adjustAddressByMaxLength:function(){h.wrapDeferPromise(this).then(t.bind((function(){var e=i.trim(this.ui.addressInput.val());e.length<=100||this.ui.addressInput.val(e.substring(0,100))}),this))},_deleteBusinessIDInfo:function(){!this._updateProgress&&confirm("사업자 정보를 모두 삭제하시겠습니까?")&&(this.ui.menuBoxDiv.hide(),this._updateProgress=!0,h.wrapActivePromise(c.SETTING.unsetBandBusinessRegistration(this._bandNo),this).then(t.bind((function(){u.getDGlobalChannel().trigger(u.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED),this.destroy()}),this)).always(t.bind((function(){this._updateProgress=!1}),this)))}});return m.openDBusinessIDInfoRegistrationLayer=function(e){var n=d.buildBusinessIdentificationInfoModel({bandNo:e.bandNo}),i=r.get(e.bandNo);i.resetBandDataState();var a=s.when(i.loadBandData(),n.fetchBusinessIdentificationInfo()).then(t.bind((function(i){return function(e){return new m(e)}(t.extend({},e,{model:n,bandData:i}))}),this));return l.openPromiseView(a,!1,{width:450,height:505}),a},m}.call(t,n,t,e))||(e.exports=i)},1238:function(e,t,n){var i;void 0===(i=function(e){n(0);var t=n(6),i=n(1537);return t.Collection.extend({model:i,initialize:function(e,t){this._updated=!1,this.listenTo(this,"update reset",(function(e,t){this._updated=!0}))},toJSONForSave:function(){return this.map((function(e){return e.toJSONForSave()}))},isUpdated:function(){return this._updated}})}.call(t,n,t,e))||(e.exports=i)},1239:function(e,t,n){var i=n(0),s=n(4),a=n(1843),o=n(167),l=n(166),r=n(1047),d={CHANGE:"CHANGE"},c=s.View.extend({options:{bandData:void 0},className:"postViewTypeButton",attributes:{"data-viewname":"DPostViewTypeSelectView"},getTemplate:function(){return this.options.bandData.canUsePostListType()?i.template(a):i.constant("")},ui:{btnListTypeFeed:"._btnListTypeFeed",btnListTypeList:"._btnListTypeList"},events:{"click @ui.btnListTypeFeed":function(){this._changePostListViewMode(r.VIEW_MODES.FEED)},"click @ui.btnListTypeList":function(){this._changePostListViewMode(r.VIEW_MODES.LIST)}},onRender:function(){var e=o.getCurrentUserEnvStorage().get([l.PostListViewType,this.options.bandData.getBandNo()]);this.getUI("btnListTypeList").toggleClass("-active",e===r.VIEW_MODES.LIST),this.getUI("btnListTypeFeed").toggleClass("-active",!e||e===r.VIEW_MODES.FEED)},_changePostListViewMode:function(e){o.getCurrentUserEnvStorage().set([l.PostListViewType,this.options.bandData.getBandNo()],e),this.render(),this.trigger(d.CHANGE,e)}});c.buildDPostViewTypeSelectView=function(e){return new c({bandData:e})},c.EVENT=d,e.exports=c},1273:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(548),o=n(1102),l=n(547);return s.Collection.extend({bandNo:0,initialize:function(e,t){this.bandNo=t.bandNo},model:o,fetchBandApplicationCollection:function(){return l.getApplicationOfBand(this.bandNo).then(i.bind((function(e){this.paging=e.paging,this.reset(e.items,{parse:!0,bandNo:this.bandNo})}),this))},fetchNext:function(){return this.paging.next_params?l.getApplicationOfBand(this.bandNo,this.paging.next_params).then(i.bind((function(e){return this.paging=e.paging,this.add(e.items,{parse:!0,bandNo:this.bandNo}),!0}),this)):t.Deferred().resolve(!1)},isNextParamExist:function(){return this.paging&&null!=this.paging.next_params},fetchApplicationCount:function(){return a.getApplicationCount(this.bandNo).then(i.bind((function(e){return this.applicationCount=e.application_count,this.applicationCount}),this))},remove:function(e,t){e.length?this.applicationCount=this.applicationCount-e.length:this.applicationCount=this.applicationCount-1,s.Collection.prototype.remove.call(this,e,t)},getApplicationCount:function(){return this.applicationCount}})}.call(t,n,t,e))||(e.exports=i)},1274:function(e,t,n){var i;void 0===(i=function(e){var t=n(1230),i=n(1507);return{showDInvitationLayerView:function(e){return t.buildAsLayerByInvitationCardId(e)},buildDInvitationTypeView:function(e){return new i({model:e})}}}.call(t,n,t,e))||(e.exports=i)},1276:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4);return i.Behavior.extend({initialize:function(e){if(!(this.view instanceof i.CollectionView))throw new Error("this behavior is only for CollectionView");this._lastObservee=null,this._intersectionObserver=new IntersectionObserver((function(n){t.each(n,(function(t){t.isIntersecting&&e.fetchMoreFunc()}),this)}),{threshold:[0]})},onAddChild:function(e,t){e.collection.indexOf(t.model)<e.collection.length-1||(this._lastObservee&&(this._intersectionObserver.unobserve(this._lastObservee.el),this.stopListening(this._lastObservee,"before:destroy")),this._intersectionObserver.observe(t.el),this.listenToOnce(t,"before:destroy",(function(){this._intersectionObserver.unobserve(t.el)})),this._lastObservee=t)},onDestroy:function(){this._lastObservee&&(this._intersectionObserver.unobserve(this._lastObservee.el),this.stopListening(this._lastObservee,"before:destroy")),this._intersectionObserver.disconnect()}})}.call(t,n,t,e))||(e.exports=i)},1277:function(e,t,n){var i=n(0),s=n(10),a=n(1319),o=n(1207),l=n(904),r=n(83),d=n(663),c=n(605),h=n(668),u=n(154);function p(e){var t='<em class="gFontEmphasizeGreen">'+e.getName()+"</em>",n={bodyTitle:IM("local_band.current_region_recruit_title",{region:t}),bodyDesc:IM("local_band.current_region_recruit_desc"),alignCenter:!0,confirm:IM("local_band.current_region_recruit_btn"),cancel:IM("ui.label.close"),withoutHiding:!0};h.openConfirm(n).confirm((function(){r.checkForCreatingRecruitingBand("local").then((function(){var t=d.getLocalBandLfgUrl(e.getRcode(),e.getName());d.goToUrl(t)}))}))}function m(e){s.isBlank(e)||h.openSimpleAlert(e)}function _(e,t){var n=function(e){return a.requestCurrentPositionWithAgreement().then((function(t){return o.fetchRegion(t,e)}))}(t||!1);return u.wrapActivePromise(n,e).then(null,m)}var b={fetchRegion:_,fetchFeedRegionBandList:function(e){return _(e,!0).then((function(t){var n=l.getFeedRegionBandList(t.getRcode());return u.wrapActivePromise(n,e).then((function(e){return i.isEmpty(e)||i.isEmpty(e.band_list)?(p(t),c.reject()):e}))}))},fetchDiscoverHomeLocalBand:function(e,t){return _(e,!0).then((function(n){var i=t.refreshLocalBandByRcode(n.getRcode());return u.wrapActivePromise(i,e).then(null,(function(e){switch(e.type){case e.EMPTY_RCODE_BAND:p(n);break;case e.API_FAILED:m(e.message)}}))}))}};e.exports=b},1279:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1822),a=n(486),o=n(510),l=n(1522),r=n(1756),d=n(1275),c=n(1593),h={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},u=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandKeywordSettingView"},template:t.template(s),templateContext:function(){return{guideTitle:this.options.guideTitle,hasSelectedKeyword:!this._selectedKeywordListCollection.isEmpty()}},ui:{btnCancel:"._btnCancel",btnConfirm:"._btnConfirm",btnAddKeywords:"._btnAddKeywords",btnAddMoreKeywords:"._btnAddMoreKeywords"},regions:{selectedKeywordListRegion:{el:"._selectedKeywordListRegion",replaceElement:!0}},events:{"click @ui.btnCancel":"destroy","click @ui.btnConfirm":function(){if(this._withoutSaving)return this.trigger(h.CONFIRM,this._selectedKeywordListCollection.toJSON()),void this.destroy();this._saveBandKeywords()},"click @ui.btnAddKeywords, @ui.btnAddMoreKeywords":function(e){var t=l.openLayer({bandNo:this._bandNo,showRecommendedKeywords:!0,isForLocalBand:!1,selectedKeywords:this._selectedKeywordListCollection.toJSON()});this.listenToOnce(t,l.EVENTS.CONFIRM,(function(e){this._selectedKeywordListCollection.reset(e)}))}},initialize:function(e){this._bandNo=e.bandNo,this._selectedKeywordListCollection=new d(e.selectedKeywords),this.listenTo(this._selectedKeywordListCollection,"update reset",(function(e,t){this._toggleBtnAddKeywords(),this.getUI("btnConfirm").prop("disabled",!this._isBandKeywordChanged())})),this._withoutSaving=e.withoutSaving},onAttach:function(){this._showSelectedKeywordListView()},_isBandKeywordChanged:function(){var e=t.map(this._selectedKeywordListCollection.toJSON(),(function(e){return JSON.stringify(e)})),n=t.map(this.options.selectedKeywords,(function(e){return JSON.stringify(e)}));return!t.isEmpty(t.difference(e,n))||!t.isEmpty(t.difference(n,e))},_toggleBtnAddKeywords:function(){var e=this.getUI("btnAddKeywords");e&&e.toggle(this._selectedKeywordListCollection.isEmpty())},_showSelectedKeywordListView:function(){this.showChildView("selectedKeywordListRegion",new c({collection:this._selectedKeywordListCollection}))},_saveBandKeywords:function(){o.openLayer({headerTitle:IM("bandsetting.keyword.save.confirm.title2"),bodyDesc:IM("bandsetting.keyword.save.confirm.desc2")}).once(o.EVENTS.CONFIRM,t.bind((function(){var e=this._selectedKeywordListCollection.pluck("keyword");r.setBandKeywords(this._bandNo,e).then(t.bind((function(){this.trigger(h.CONFIRM),this.destroy()}),this))}),this))}});return u.EVENTS=h,u.openLayer=function(e){var t=new u({bandNo:e.bandNo,selectedKeywords:e.selectedKeywords,withoutSaving:e.withoutSaving||!1,guideTitle:e.guideTitle});return a.open(t),t},u}.call(t,n,t,e))||(e.exports=i)},1280:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(543),s=n(1171),a=i.PERMISSION_ROLES,o=s.PERMISSION_GROUP,l=s.PERMISSION_KEY_TYPE;return{isSamePermissionValue:function(e,n){return t.sortBy(e.split(",")).join(",")===t.sortBy(n.split(",")).join(",")},getSelectedOption:function(e,n){var i=e.permissionKey[l.MEMBER_GROUP]&&n.getPermittedMemberGroupIds(e.permissionKey[l.MEMBER_GROUP]).join(",");if(i)return{permissionGroupId:o.LEADER_AND_MEMBER_GROUPS.id,permissionKey:e.permissionKey[l.MEMBER_GROUP],permissionValue:i};var s=n._getRole(e.permissionKey[l.ROLE]),r={permissionKey:e.permissionKey[l.ROLE],permissionValue:s.join(",")};switch(t.sortBy(s).join(",")){case"":r.permissionGroupId=o.DISALLOW.id;break;case a.LEADER:r.permissionGroupId=o.LEADER_ONLY.id;break;case t.sortBy([a.LEADER,a.COLEADER]).join(","):r.permissionGroupId=o.LEADER_AND_COLEADER.id;break;case t.sortBy([a.LEADER,a.COLEADER,a.MEMBER]).join(","):r.permissionGroupId=o.ALL_MEMBER.id}return r},hasPermissionValue:function(e,t){return!(!e.permissionKey[l.MEMBER_GROUP]||!t.getPermittedMemberGroupIds(e.permissionKey[l.MEMBER_GROUP]).join(","))||!!t._getRole(e.permissionKey[l.ROLE]).join(",")}}}.call(t,n,t,e))||(e.exports=i)},1281:function(e,t,n){var i=n(4),s=n(1905),a=i.CollectionView.extend({tagName:"ul",className:"cFile",attributes:{"data-viewname":"DBandFileListView"},childView:s,childViewOptions:function(){return{bandData:this._bandData,viewType:this._viewType,checkable:this._checkable,checkValidator:this._checkValidator}},childViewEvents:{"file:checked":function(e){this.trigger("file:checked",e),this.collection.trigger("file-list:checked")}},collectionEvents:{"file-list:checkable":function(e){this._checkable=e}},initialize:function(e){this._bandData=e.bandData,this._viewType=e.viewType,this._checkable=!0===e.checkable,this._checkValidator=e.checkValidator}});a.buildFileListView=function(e){return new a(e)},a.buildQuotaFileListView=function(e){return new a(_.extend({},e,{viewType:s.VIEW_TYPE.QUOTA_FILE}))},a.buildFolderFileListView=function(e){return new a(_.extend({},e,{viewType:s.VIEW_TYPE.FOLDER_FILE}))},e.exports=a},1438:function(e,t,n){var i=n(0),s=n(6),a=n(1100),o=n(1010),l=n(506),r=s.Collection.extend({model:a,initialize:function(e,t){this._bandNo=t.bandNo},search:function(e){return this._search(e)},searchMore:function(){this._fetching||i.isEmpty(this._params)||this._search()},getQuery:function(){return l.get(this._params,"query")},_search:function(e){return e&&(this._params={query:e,band_no:this._bandNo}),this._fetching=!0,o.searchRegion(this._params).then(i.bind((function(t){var n=t.items,s=t.paging.next_params;s?i.extend(this._params,s):this._params=null,e?this.reset(n,{parse:!0}):this.add(n,{parse:!0})}),this)).always(i.bind((function(){this._fetching=!1}),this))},fetchHistory:function(){return o.getUserRegionSearchHistory(this._bandNo).then(i.bind((function(e){this.reset(e.items,{parse:!0})}),this))}});r.build=function(e){return new r(null,{bandNo:e})},e.exports=r},1491:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(870),a=n(1492);return i.Collection.extend({model:a,initialize:function(e,t){this.bandNo=t.bandNo,this.fetching=!1,this.after=""},getBandNo:function(){return this.bandNo},fetchNotices:function(){return this.fetching=!0,s.getBandNotices(this.bandNo).then(t.bind((function(e){this.reset(e.items,{parse:!0}),this._afterFetch(e)}),this))},hasNextNotices:function(){return!!this.after},isReadyToFetchNotices:function(){return!this.fetching},fetchNextNotices:function(){if(!this.fetching&&this.after)return this.fetching=!0,s.getBandNotices(this.bandNo,this.after).then(t.bind((function(e){this.add(e.items,{parse:!0}),this._afterFetch(e)}),this))},_afterFetch:function(e){var t=e.paging,n=t?t.next_params:"";this.after=n?n.after:"",this.fetching=!1}})}.call(t,n,t,e))||(e.exports=i)},1492:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(504),a=n(490),o=n(870),l=n(152);return i.Model.extend({idAttribute:"postNo",parse:function(e,t){var n=l.findPriorRestriction({isRestricted:e.is_restricted,isVisibleOnlyToAuthor:e.is_visible_only_to_author,isMutedAuthorPost:!!e.author&&e.author.is_muted});return n&&(n===l.RESTRICTION_TYPE.HIDE_POST&&(e.title=IM("post.hidden_post.guide_message")),n===l.RESTRICTION_TYPE.MUTE_AUTHOR&&(e.title=IM("post.muted_author_post.guide_message"))),{postNo:e.post_no,title:e.title,thumbnail:e.thumbnail,isRead:e.is_read,isPlayButtonVisible:e.is_play_button_visible,isMajor:e.is_major,readCount:e.read_count,author:new s(e.author,{parse:!0}),isVisibleOnlyToAuthor:e.is_visible_only_to_author,unset_at:e.unset_at||null,time_zone_id:e.time_zone_id||null}},getBandNo:function(){if(this.collection)return this.collection.getBandNo()},getAuthor:function(){return this.get("author")},isMutedAuthorPost:function(){var e=this.getAuthor();return!!e&&e.isMutedAuthor()},toJSON:function(){return a.toRecursiveJSON(this)},fetchNoticeItem:function(){return o.getBandNoticesState(this.getBandNo(),this.get("postNo")).then(t.bind((function(e){this.set({unset_at:e.unset_at||null,time_zone_id:e.time_zone_id||null})}),this))}})}.call(t,n,t,e))||(e.exports=i)},1493:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(6),a=n(520),o=n(517),l=n(176);return s.Collection.extend({model:o,initialize:function(e,n){this.hashtag=n.hashtag.search(/[\\&|\\<|\\>]/)>0?t.escape(n.hashtag):n.hashtag,this.bandNo=n.bandNo,this.lastPostNo=null,this._hasMore=!0,this.onLoading=!1,this.paging=null},fetchPostList:function(){return i.when(a.searchPostsWithHashtag(this.bandNo,this.hashtag),l.fetchBandJoin()).then(t.bind((function(e){var t=e.items;this.paging=e.paging,t&&t.length>0?this.reset(t,{silent:!0,parse:!0}):this._hasMore=!1}),this))},fetchNextPostList:function(){return i.when(a.searchPostsWithHashtag(this.bandNo,this.hashtag,this.paging),l.fetchBandJoin()).then(t.bind((function(e){var t=e.items;return this.paging=e.paging,t&&t.length>0?this.set(t,{add:!0,merge:!1,remove:!1,parse:!0}):this._hasMore=!1,this}),this))},hasMore:function(){return this._hasMore}})}.call(t,n,t,e))||(e.exports=i)},1494:function(e,t,n){var i,s;i=[n(2),n(0),n(16),n(595),n(568),n(533),n(1495),n(1496),n(491)],void 0===(s=function(e,t,n,i,s,a,o,l,r){var d={fetchDetailAlbumData:function(t,n){return e.when(c(t,n),h(t,n),r.getCachedBandData(t)).then((function(e,t,n){return{detailModel:u(e,n),groupCollection:l.buildGroupCollection(n,t,s.ALBUM_DETAIL_SORT_TYPE.RECENT_PHOTO),bandData:n}}))},fetchPhotoList:function(e,t,n,i,o){return s.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(i)?a.getPhotosWithCreatedAt(e,t,n,o,40):h(e,n,o)},fetchGroupCollection:function(t,n,i,s){return e.when(r.getCachedBandData(t),d.fetchPhotoList(t,n,i,s)).then((function(e,t){return l.buildGroupCollection(e,t,s)}))}},c=function(t,n){return e.isNumeric(n)&&n!=s.TOTAL_ALBUM_NO?i.getPhotoAlbum(t,n):a.getPhotoStatus(t).then((function(e){return{photo_album:{name:IM("web.albumdetail.title.txt.total"),isTotal:!0,oldest_photo_created_at:e.oldest_photo_created_at,created_at:e.oldest_photo_created_at,photo_count:e.photo_count}}}))},h=function(e,t,n){return a.getPhotos(e,t,40,n)},u=function(e,t){var i=-1;return 1!=e.photo_album.isTotal&&(i=e.photo_album.owner.user_no),o.buildBandAlbumDetailModel({albumName:e.photo_album.name,albumNo:e.photo_album.no,bandName:t.getBandName(),bandNo:t.getBandNo(),isTotalAlbum:1==e.photo_album.isTotal,albumOwnerNo:i,firstPhotoTimeMillis:e.photo_album.oldest_photo_created_at||n("2012-08-01").valueOf(),createdAt:e.photo_album.created_at,photoCount:e.photo_album.photo_count})};return d}.apply(t,i))||(e.exports=s)},1495:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=(n(0),n(6)),s=n(13),a=i.Model.extend({getBandNo:function(){return this.get("bandNo")},isTotalAlbum:function(){return 1==this.get("isTotalAlbum")},getAlbumName:function(){return this.get("albumName")},getBandName:function(){return this.get("bandName")},setAlbumName:function(e){this.set("albumName",e)},getAlbumNo:function(){return this.get("albumNo")},isAlbumOwner:function(){return this.get("albumOwnerNo")==s.getUserData().getUserNo()},getFirstPhotoTimeMillis:function(){return this.get("firstPhotoTimeMillis")}});return a.buildBandAlbumDetailModel=function(e){return new a(t.extend({albumName:"",albumNo:0,bandName:"",bandNo:0,isTotalAlbum:!1},e))},a}.call(t,n,t,e))||(e.exports=i)},1496:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(568),a=n(1497),o=n(1228),l=n(13),r=i.Collection.extend({model:a,initialize:function(e,t){this._photoCollection=t.photoCollection,this._bandData=t.bandData,this._sortType=t.sortType},isEmpty:function(){return this._photoCollection.isEmpty()},hasMorePhoto:function(){return null!=this.getPaging().next_params},isMonthlyDateType:function(){return s.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(this._sortType)},setTotalCount:function(e){this._photoCollection.setTotalCount(e)},getCurrentCount:function(){return this._photoCollection.length},getTotalCount:function(){return this._photoCollection.getTotalCount()},setPaging:function(e){this._paging=e},getPaging:function(){return this._paging},getCheckedImageCount:function(){return this._photoCollection.getCheckedImageCount()},extractCheckedCollection:function(){return this._photoCollection.extractCheckedCollection()},extractDownloadablePhotos:function(){var e=l.getUserData().getUserNo();return this.extractCheckedCollection().filter(t.bind((function(t){return!t.isVideo()&&(!t.isRestricted()&&this._bandData.canSaveBandMedia(t.getAuthorUserNo()===e,t.getSavableState()))}),this)).map((function(e){return{photoNo:e.getPhotoNo(),photoUrl:e.getPhotoUrl()}}))},removeTargetModels:function(e){this._photoCollection.removeTargetModels(e)},containTargetPhotoNos:function(e){return this._photoCollection.containTargetPhotoNos(e)},extractPhotoDataForImageViewer:function(e){return{index:this._photoCollection.indexOf(e),result_data:{photos:this._photoCollection.toJSON(),total_count:this._photoCollection.getTotalCount()}}},addPhotoResultData:function(e){this.setPaging(e.paging),this.setTotalCount(e.total);var n=o.buildPhotoCollection(e);if(this._photoCollection.set(n.models,{add:!0,merge:!0,remove:!1}),this.isMonthlyDateType()){var i=this._photoCollection.extractYearMonthTextArray();t.each(i,(function(e){if(null==this.get(e)){var t=a.buildGroupModel(this._bandData,s.ALBUM_DETAIL_SORT_TYPE.MONTHLY_DATE,this._photoCollection,e);this.add(t)}}),this)}},findAdjacentPhotoNoArray:function(e,t){for(var n=this._photoCollection.findIndex((function(t){return t.getPhotoNo()==e})),i=this._photoCollection.findIndex((function(e){return e.getPhotoNo()==t})),s=Math.min(n,i),a=Math.max(n,i),o=[],l=s;l<=a;l++)o.push(this._photoCollection.at(l).getPhotoNo());return o},isTargetPhotosAllChecked:function(e){return this._photoCollection.chain().filter((function(n){return t.contains(e,n.getPhotoNo())})).every((function(e){return e.isChecked()})).value()}});r.buildGroupCollection=function(e,t,n){var i=o.buildPhotoCollection(t),a=null;return(a=s.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(n)?c(e,i):d(e,i)).setTotalCount(t.total),a.setPaging(t.paging),a};var d=function(e,t){var n=new r([],{photoCollection:t,bandData:e,sortType:s.ALBUM_DETAIL_SORT_TYPE.RECENT_PHOTO}),i=a.buildGroupModel(e,s.ALBUM_DETAIL_SORT_TYPE.RECENT_PHOTO,t);return n.add(i),n},c=function(e,n){var i=new r([],{photoCollection:n,bandData:e,sortType:s.ALBUM_DETAIL_SORT_TYPE.MONTHLY_DATE}),o=n.extractYearMonthTextArray();return t.each(o,(function(t){var o=a.buildGroupModel(e,s.ALBUM_DETAIL_SORT_TYPE.MONTHLY_DATE,n,t);i.add(o)})),i};return r}.call(t,n,t,e))||(e.exports=i)},1497:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(568)],void 0===(s=function(e,t,n,i){var s=n.Model.extend({idAttribute:"yearMonthText",getPhotoCollection:function(){return this.get("photoCollection")},getYearMonthText:function(){return this.get("yearMonthText")},isRecentPhotoType:function(){return this.get("recentPhotoType")},isMonthlyDateType:function(){return this.get("monthlyDateType")}});return s.buildGroupModel=function(e,t,n,a){return new s({bandData:e,recentPhotoType:i.ALBUM_DETAIL_SORT_TYPE.isRecentPhotoType(t),monthlyDateType:i.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(t),sortType:t,photoCollection:n,yearMonthText:a})},s}.apply(t,i))||(e.exports=s)},1498:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(156)],void 0===(s=function(e,t,n,i){return n.Model.extend({idAttributes:"photo_no",getCreatedAt:function(){return this.get("created_at")},initialize:function(){this.set("cid",this.cid),this.unCheck()},setCheck:function(e){this.set("check",e)},toggleCheck:function(){this.setCheck(!this.isChecked())},unCheck:function(){this.set("check",!1)},isChecked:function(){return 1==this.get("check")},isVideo:function(){return null!=this.get("video")},isGif:function(){return i.isGif(this.getPhotoUrl())},isVideoExpired:function(){return this.isVideo()&&i.isExpiredFile(this.get("video").expires_at)},getPhotoUrl:function(){return this.get("photo_url")},getPhotoNo:function(){return this.get("photo_no")},setYearMonthText:function(e){this.set("yearMonthText",e)},getYearMonthText:function(){return this.get("yearMonthText")},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")},isGifVideo:function(){return this.isVideo()&&this.get("video").is_gif},getSavableState:function(){return this.get("savable_state")},getAuthorUserNo:function(){return this.get("author").user_no},isRestricted:function(){return this.get("is_restricted")}})}.apply(t,i))||(e.exports=s)},1499:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(6),a=n(520),o=n(517),l=n(176),r="MEMBER_POST",d="PAGE_BAND_MANAGER_POST",c=s.Collection.extend({model:o,initialize:function(e,t){this._searchType=t.searchType,this._bandNo=t.bandNo,this._memberKey=t.memberKey},fetchSearchWithAuthorPost:function(){return this._fetchPosts().then(t.bind((function(e){return this._nextParams=e.paging.next_params,this._totalCount=e.total,this.reset(e.items,{parse:!0,silent:!0}),this}),this))},fetchNextPostList:function(){return this._fetchPosts().then(t.bind((function(e){return this._nextParams=e.paging.next_params,this._totalCount=e.total,this.set(e.items,{add:!0,merge:!1,remove:!1,parse:!0}),this}),this))},hasMore:function(){return this._totalCount>this.length},getTotalCount:function(){return this._totalCount||0},deletePosts:function(e){var n=[];return t.each(e,(function(e){n.push(e.get("postNo"))})),a.deletePosts(this._bandNo,n)},_fetchPosts:function(){return this._searchType==r?this._fetchGroupBandMemberPosts():this._searchType==d?this._fetchPageBandManagerPosts():i.Deferred().reject()},_fetchGroupBandMemberPosts:function(){var e=this._nextParams;return e||(e={band_no:this._bandNo,author_key:this._memberKey,count:10,resolution_type:4}),i.when(a.searchPostsWithAuthor(e),l.fetchBandJoin())},_fetchPageBandManagerPosts:function(){var e=this._nextParams;return e||(e={band_no:this._bandNo}),a.searchPostsWithPage(e)}});return c.buildMemberPostSearchCollection=function(e,t){return new c([],{searchType:r,bandNo:e,memberKey:t})},c.buildPageBandManagerPostSearchCollection=function(e){return new c([],{searchType:d,bandNo:e})},c}.call(t,n,t,e))||(e.exports=i)},1500:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(533),a=i.Collection.extend({model:i.Model,modelId:function(e){return e.photo_no},initialize:function(e,t){this._bandNo=t.bandNo,this._memberKey=t.memberKey,this._after=null,this._more=!0},fetchSearchPhotosWithAuthor:function(){return s.searchPhotosWithAuthor(this._bandNo,this._memberKey,this._after).then(t.bind((function(e){return this._after=t.property("after")(e.paging.next_params),this._more=null!=this._after&&this._after.length>0,this.add(e.items||[]),this}),this))},hasMore:function(){return this._more},deletePhotos:function(e){var n=[];return t.each(e,(function(e){n.push(e.get("photo_no"))})),s.deletePhotos(this._bandNo,n)}});return a.fetchSearchPhotosWithAuthor=function(e,t){return new a([],{bandNo:e,memberKey:t}).fetchSearchPhotosWithAuthor()},a}.call(t,n,t,e))||(e.exports=i)},1501:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(6),a=n(52),o=n(34),l=n(509),r=n(505),d="MEMBER_COMMENT",c="PAGE_BAND_MANAGER_COMMENT",h=s.Collection.extend({model:s.Model,modelId:function(e){return l.buildByAttributes(a.camelizeKeys(e)).toApiParams(!0)},initialize:function(e,t){this._searchType=t.searchType,this._bandNo=t.bandNo,this._memberKey=t.memberKey,this._after=null,this._more=!0},fetchSearchCommentsWithAuthor:function(){return this._fetchComments().then(t.bind((function(e){return this._after=t.property("after")(e.paging.next_params),this._more=null!=this._after&&this._after.length>0,this.add(e.items||[]),this}),this))},hasMore:function(){return this._more},deleteComments:function(e,t){return r.deleteComments(e,o.stringify(t))},removeComment:function(e){this.remove(e.toApiParams(!0))},_fetchComments:function(){return this._searchType==d?r.searchCommentsWithAuthor(this._bandNo,this._memberKey,this._after):this._searchType==c?r.searchForCommentsWithPage(this._bandNo,this._after):i.Deferred().reject()}});function u(e){return new h([],e).fetchSearchCommentsWithAuthor()}return h.buildMemberCommentSearchCollection=function(e,t){return u({searchType:d,bandNo:e,memberKey:t})},h.buildPageBandManagerCommentSearchCollection=function(e){return u({searchType:c,bandNo:e})},h}.call(t,n,t,e))||(e.exports=i)},1502:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="header">\n            <h1 class="title"><%- IM("web.invitation.title") %></h1>\n        </header>\n\n        <div class="main -spaceNone">\n            <div class="profileInfo">\n                <p class="roundCover">\n                    <a href="#" role="button" class="uCoverImage -w140 -circle -border">\n                        <span class="coverInner">\n                            <img src="<%- bandCoverUrl %>" width="140" height="140" class="coverImg" alt="<%-band.name%>">\n                        </span>\n                    </a>\n                </p>\n\n                <div class="userInfo">\n                    <h1 class="userName <% if (band.certified) { %> -official<% } %>">\n                        <% if (band.certified) { %>\n                            <span class="gSrOnly"><%= IM(\'ui.official_band\') %></span>\n                        <% } %>\n\n                        <%-band.name%>\n                    </h1>\n\n                    <p class="inviteInfo"><%= IM("invitation.inviting_your_description", {\'inviter\': _.escape(inviter.name)}) %></p>\n\n                    <% if (band.description) { %>\n                    <p class="desc"><%- band.description %></p>\n                    <% } else if (member_count > 1) { %>\n                    <p class="desc"><%= IM("desktop.invitation.label.with_members", {\'memberCount\': member_count}) %></p>\n                    <% } else { %>\n                    <p class="desc"><%= IM("web.invitation.with_us") %></p>\n                    <% } %>\n                    <% if (band.open_type == "public") { %>\n                    <p class="link"><a href="<%- bandUrl %>"><%- IM("invitation.message.preview") %></a></p>\n                    <% } %>\n                </div>\n            </div>\n        </div>\n\n        <footer class="footer">\n            <% if (isApplication) { %>\n            <button type="button" class="uButton -cancel -sizeL -lrSpace20 _btnDeny"><%= IM("web.invitation.btn.delete_invitation") %></button>\n            <button type="button" class="uButton -confirm -sizeL -lrSpace20 _btnAccept"><%= IM("web.invitation.btn.apply_join") %></button>\n            <% } else { %>\n            <button type="button" class="uButton -cancel -sizeL -lrSpace20 _btnDeny"><%= IM("web.invitation.btn.deny") %></button>\n            <button type="button" class="uButton -confirm -sizeL -lrSpace20 _btnAccept"><%= IM("web.invitation.btn.accept") %></button>\n            <% } %>\n\n            <% if (show_ad_agreement) { %>\n            \x3c!-- 비즈 밴드인 경우 안내문구 --\x3e\n            <p class="bizAdDesc"><%= IM(\'bandjoin.desc.ad_agreement.group_band\') %></p>\n            <% } %>\n\n            <% if (source_info) { %>\n            <div class="inviteInfo">\n                <%= IM("web.invitation.desktop_source_info", {\'sourceBandName\' : source_info.band_info.name, \'sourceInviterName\': source_info.inviter_profile.name}) %>\n\n                <dl class="uHelpGuide -small -fs13 -up -right">\n                    <dt><button type="button" class="_btnSourceInfoHelp"><span class="gSrOnly">help</span></button></dt>\n                    <dd class="_blockBandInvitationInfo" style="width:290px;">\n                        <%= IM("invitation.help.deny_invitation", {bandName: source_info.band_info.name}) %>\n                        <br>\n                        <a href="<%- bandSettingUrl %>" class="uButton -textUnderline gMat8"><%- IM("web.invitation.btn.go_setting") %></a>\n                    </dd>\n                </dl>\n            </div>\n            <% } %>\n            <% if (showReportButton) { %>\n            <button type="button" class="uButton -textUnderline btnReport _btnReport"><%= IM("web.invitation.btn.report") %></button>\n            <% } %>\n            <button type="button" class="uButton -iconClose btnLyClose _btnClose"><span class="gSrOnly"><%- IM("web.invitation.btn.close") %></span></button>\n\n            <% if (needCheckHelpMessageForKids) { %>\n            <div class="inviteInfo gMat20">\n                <span class="inviteInfoText"><%- IM(\'invitation.member_under_13.help_title\') %></span><button type="button" class="buttonHelp _btnHelp"><span class="iconQuestionMark"></span><span class="gSrOnly"><%- IM(\'ui.label.help\') %></span></button>\n            </div>\n            <% } %>\n        </footer>\n    </div>\n</section>'},1503:function(e,t,n){var i,s;i=[n(2),n(4),n(1504),n(486),n(185)],void 0===(s=function(e,t,n,i,s){var a=t.View.extend({template:_.template(n),templateContext:{},attributes:{"data-viewname":"DenyInvitationView"},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",checkInput:"._checkInput"},events:{"click @ui.btnConfirm":"_doDeny","click @ui.btnCancel":"destroy","change @ui.checkInput":"_toggleEnabled"},serializeData:function(){return e.extend(this.model.toJSON(),{hasSourceInfo:this.model.hasSourceInfo()})},_toggleEnabled:function(){this.ui.checkInput.is(":checked")?this.ui.btnConfirm.removeAttr("disabled"):this.ui.btnConfirm.attr("disabled",!0)},_doDeny:function(){(!this.model.hasSourceInfo()||this.model.hasSourceInfo()&&this.ui.checkInput.is(":checked"))&&this.triggerMethod("confirmDoDeny")}});return a.buildAsLayer=function(e){var t=new a({model:e});return i.open(t),t},a}.apply(t,i))||(e.exports=s)},1504:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent">\n        <% if (hasSourceInfo) { %>\n        <header class="header -noTitlebar">\n            <h1 class="title"><%= IM("web.invitation.confirm.check_deny.title") %></h1>\n        </header>\n\n        <div class="main">\n            <p class="p"><%= IM("deny_invitation.label.check_again") %></p>\n\n            <div class="selectArea">\n                <label for="checkbox" class="uCheck -checkbox ">\n                    <input type="checkbox" id="checkbox" class="checkInput _checkInput">\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"><%= IM("deny_invitation.label.checked") %></span>\n                    </span>\n                </label>\n            </div>\n        </div>\n        <% } else { %>\n        <div class="main">\n            <p class="p"><%= IM("web.invitation.confirm.check_deny.title") %></p>\n        </div>\n        <% } %>\n\n\n        <footer class="footer">\n            <button type="button" class="uButton -cancel _btnCancel"><%- IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" <% if (hasSourceInfo) { %> disabled="disabled" <% } %>><%- IM("deny_invitation.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},1505:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(486),a=n(1506),o={CONFIRM:"modal:confirm"},l=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DInvitationReportedAlertLayerView"},template:t.template(a),ui:{checkboxDeleteInvitation:"._checkboxDeleteInvitation",btnConfirm:"._btnConfirm"},events:{"click @ui.btnConfirm":function(){var e=this.getUI("checkboxDeleteInvitation").prop("checked");this.trigger(o.CONFIRM,e),this.destroy()}},onAttach:function(){this.ui.btnConfirm.focus()}});return l.EVENTS=o,l.openLayer=function(){var e=new l;return s.open(e),e},l}.call(t,n,t,e))||(e.exports=i)},1506:function(e,t){e.exports='<div class="lyContent">\n    <div class="modalBody">\n        <div class="headingMsg"><%= IM(\'report.req_done.message\') %></div>\n        <div class="msgWrap">\n            <p class="pText gMat12">\n                <label for="deleteCheckbox" class="uCheck -checkbox">\n                    <input type="checkbox" id="deleteCheckbox" class="checkInput _checkboxDeleteInvitation" value="quit">\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"><%= IM(\'report.req_done.option.label.invitation_deny\') %></span>\n                    </span>\n                </label>\n            </p>\n        </div>\n    </div>\n    <div class="modalFooter">\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM("ui.label.confirm") %></button>\n    </div>\n</div>'},1507:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1508),a=n(1509),o=n(1166),l=n(1511),r=n(1514),d=n(527),c=n(1516),h=n(581),u=n(13),p=n(1034),m=n(589),_=n(548),b=n(907),g=n(154),f=n(160),v=n(486),A=n(9),M=n(22),C=n(1097),I=n(1039),E=n(510),y=n(153);return i.View.extend({template:t.template(s),attributes:{"data-viewname":"DInvitationTypeView","aria-live":"polite"},ui:{btnCafe:"._btnCafe",btnBand:"._btnBand",btnLink:"._btnLink",btnInviteCode:"._btnInviteCode",btnQrCode:"._btnQrCode",usingLinkCount:"._usingLinkCount",contentsEmptyMsg:"._contentsEmptyMsg",linkDisplayCountOverMsg:"._linkDisplayCountOverMsg",btnAddUnder13:"._btnAddUnder13"},events:{"click @ui.btnCafe":"_inviteByCafe","click @ui.btnBand":"_inviteByBand","click @ui.btnLink":"_inviteByLink","click @ui.btnInviteCode":"_showInviteCode","click @ui.btnQrCode":"_inviteByQrCode","click @ui.btnAddUnder13":"_onClickBtnAddUnder13"},templateContext:function(){return{canCafeInvite:A.spec.canCafeInvite(),canShowEnableBandForKidsSuggestion:this.model.canShowEnableBandForKidsSuggestion()}},__makeInvitationMessage:function(e){return _.makeInvitationMessage(this.model.getBandNo(),e).always(t.bind((function(){this._renderUsingLinksCount()}),this))},_inviteByLink:function(){this.__makeInvitationMessage("url").then((function(e){o.openAsLayer(e)}))},_inviteByCafe:function(e){e.preventDefault(),this.__makeInvitationMessage("cafe_member").then((function(e){a.openAsLayer(e)}))},_inviteByQrCode:function(){var e=this.model.getBandNo();this.__makeInvitationMessage("qr_code").then((function(t){r.openAsLayer(e,t)}))},_inviteSelectedBandMembers:function(e,n){var i=t.map(n.selectedMembers,(function(e){return e.getUserNo()}));_.inviteByBandMembers(this.model.getBandNo(),i.join(","),e).then((function(){alert(IM("web.invitemember.alert.message_sent")),v.closeAll()}),(function(){v.closeAll()}))},_inviteByBand:function(){var e=C.openLayer({title:IM("web.inviteband.btn.choice_band"),selectionType:C.SELECTION_TYPE.SINGLE_SELECT,excludedBandNos:[this.model.getBandNo()],bandTypes:[M.BAND_TYPE.GROUP],groupBandFilters:[I.BAND_FILTER.INVITE_MEMBER],pageBandFilters:[]});this.listenTo(e,"singleBand:selected",(function(e){var n=b.openDMemberSelectionView(),i=d.buildBandMemberWithFilterDataCollection(e.bandNo,f.INVITE_MEMBER,100),s=d.buildBandMemberWithFilterDataCollection(e.bandNo,f.INVITE_MEMBER,100);g.wrapActivePromise(i.fetchBandMemberWithFilterDataCollection(),this).then(t.bind((function(){n.renderMemberListToSelect({memberModels:i.toMemberSelectionViewModels(),memberGroupSelectSupport:i.hasMemberGroup(),showSearchMoreMemberBtn:i.hasMoreMember()})}),this)),this.listenTo(n,b.EVENT.MEMBER_SELECTION_MEMBER_SELECT_CLICK,(function(e){n.selectMember(e.selectedMember)})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_MEMBER_DESELECT_CLICK,(function(e){n.deselectMember(e)})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_MEMBER_PROFILE_CLICK,(function(t){m.openMembershipProfileLayer({name:t.name,profileImageUrl:t.profileImageUrl,userNo:t.userNo,bandNo:e.bandNo})})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_SEARCH,(function(e){g.wrapActivePromise(s.searchBandMemberWithFilterDataCollection(e),this).then((function(){n.renderMemberListToSelect({memberModels:s.toMemberSelectionViewModels(),memberGroupSelectSupport:i.hasMemberGroup(),showSearchMoreMemberBtn:s.hasMoreMember()})}))})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_INPUT_EMPTY,(function(){n.renderMemberListToSelect({memberModels:i.toMemberSelectionViewModels(),memberGroupSelectSupport:i.hasMemberGroup(),showSearchMoreMemberBtn:i.hasMoreMember()})})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_COMPLETE,(function(t){this._inviteSelectedBandMembers(e.bandNo,t)})),this.listenTo(n,b.EVENT.MEMBER_SELECTION_MEMBER_GROUP_CLICK,(function(){var i=p.buildMemberGroupSelectView(e.bandNo);this.listenTo(i,"memberGroupView:selectedMemberGroups",(function(e){t.chain(e).filter((function(e){return!u.isMe(e.userNo)})).map((function(e){return h.buildMemberSelectionViewModel({userNo:e.userNo,userName:e.name,description:e.description,profileImageUrl:e.profileImageUrl,isKid:e.isKid})})).each((function(e){n.selectMember(e)})).value()}))}))}))},_showInviteCode:function(e){e.preventDefault(),c.openAsLayer({bandNo:this.model.getBandNo()})},onAttach:function(){if(!this.model.isInvitationPermitted())return alert(IM("invitation.message.authorized_member_only")),void history.back();this._initUsingLinksView(),this._renderUsingLinksCount()},_initUsingLinksView:function(){this.ui.linkDisplayCountOverMsg.hide(),this.ui.contentsEmptyMsg.hide(),this.ui.usingLinkCount.hide(),this.usingInvitationLinksView=l.build({el:"._linkListWrap",bandNo:this.model.getBandNo()}),this.usingInvitationLinksView.render(),this._invitationCollection=this.usingInvitationLinksView.collection,this.listenTo(this._invitationCollection,"remove",(function(){var e=this._invitationCollection.length;e>0?this.ui.usingLinkCount.text(e):(this.ui.usingLinkCount.hide(),this.ui.contentsEmptyMsg.show())})),this.listenTo(this._invitationCollection,"reset",(function(){this._invitationCollection.length>=100?this.ui.linkDisplayCountOverMsg.show():this.ui.linkDisplayCountOverMsg.hide()}))},_renderUsingLinksCount:function(){this.usingInvitationLinksView.draw().then(t.bind((function(){if(!this.isDestroyed()){var e=this._invitationCollection.length;this.ui.usingLinkCount.text(e),e>0?(this.ui.usingLinkCount.text(e),this.ui.usingLinkCount.show(),this.ui.contentsEmptyMsg.hide()):this.ui.contentsEmptyMsg.show()}}),this))},_onClickBtnAddUnder13:function(){E.openLayer({bodyDesc:IM("member_invite.add_under_13.ly_desc"),confirm:IM("web.invitation.btn.go_setting"),cancel:IM("ui.label.close")}).once(E.EVENTS.CONFIRM,t.bind((function(){y.GROUP_BAND_SETTING.goDForced({band_no:this.model.getBandNo()})}),this))}})}.call(t,n,t,e))||(e.exports=i)},1508:function(e,t){e.exports='<section class="sMemberInvite gBoxShadow">\n    <div class="uHeaderWrap ">\n        <header class="header">\n            <h1 class="title"><%- IM(\'web.memberinvite.title\') %></h1>\n        </header>\n    </div>\n    <div class="inviteKinds">\n        <a href="#" class="shareLink _btnLink">\n            <span class="iconRound -link"></span>\n            <span class="text">\n                <strong><%- IM(\'web.memberinvite.btn.link\') %></strong>\n                <span><%= IM(\'web.memberinvite.btn.link.desc\') %></span>\n            </span>\n        </a>\n        <ul class="list gMab50">\n            <% if (!!canCafeInvite) { %>\n            <li><a href="#" role="button" class="_btnCafe"><span class="iconRound -daumcafe"></span><%- IM(\'web.memberinvite.btn.cafe\') %></a></li>\n            <% } %>\n            <li><a href="#" role="button" class="_btnBand"><span class="iconRound -band"></span><%- IM(\'web.memberinvite.btn.band\') %></a></li>\n            <li><a href="#" role="button" class="_btnInviteCode"><span class="iconRound -code"></span><%- IM(\'web.memberinvite.btn.invite_code\') %></a></li>\n            <li><a href="#" role="button" class="_btnQrCode"><span class="iconRound -qrcode"></span><%- IM(\'web.memberinvite.btn.qr_code\') %></a></li>\n        </ul>\n\n        <% if (canShowEnableBandForKidsSuggestion) { %>\n        <div class="guideBox gMab14">\n            <a href="#" role="button" class="textLink -arrow _btnAddUnder13"><%= IM(\'member_invite.add_under_13.btn_label\') %></a>\n        </div>\n        <% } %>\n    </div>\n    <div class="inviteUseLink">\n        <h2 class="title"><%- IM(\'web.memberinvite.btn.using_invitie_url\') %><em class="sf_color _usingLinkCount"></em></h2>\n        <ul class="list _linkListWrap"></ul>\n        <p class="uEmpty _contentsEmptyMsg" style="height:145px"><span class="gColorGr3"><%- IM(\'ui.message.empty_conents\') %></span></p>\n        <p class="desc _linkDisplayCountOverMsg"><%- IM(\'web.memberinvite.invitation_url_list.display_count_over_msg\') %></p>\n    </div>\n</section>\n'},1509:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(1510),a=(n(513),n(535),n(486)),o=i.View.extend({className:"url_layer",attributes:{"data-viewname":"DInviteByCafeView"},template:t.template(s),ui:{btnClose:"[data-uiselector=btnClose]",inputInvitationLink:"#invitationLink"},events:{"click @ui.btnClose":"destroy"},onAttach:function(){this.ui.inputInvitationLink.focus().select()}});return o.openAsLayer=function(e){var t=new o({model:new Backbone.Model(e)});return a.open(t),t},o}.call(t,n,t,e))||(e.exports=i)},1510:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="header">\n            <h1 class="title"><%- IM("web.cafe_layer.title") %></h1>\n        </header>\n        <div class="main">\n            \x3c!-- alert 메시지 형태 --\x3e\n            <p class="p"><label for="shareCafe"><%= IM("web.cafe_layer.guide_desc") %></label></p>\n            <div class="uInput gMat10">\n                <input type="text" id="shareCafe" value="<%- url%>" readonly="">\n                <span class="border"></span>\n            </div>\n            <ul class="boxList -icon gMat20">\n                <li><a href="http://cafe.naver.com" target="_blank" class="btnShareNaverCafe"><%- IM("web.cafe_layer.btn_naver") %></a></li>\n                <li><a href="http://cafe.daum.net" target="_blank" class="btnShareDaumCafe"><%- IM("web.cafe_layer.btn_daum") %></a></li>\n            </ul>\n        </div>\n        <footer class="footer">\n            <button data-uiselector="btnClose" type="button" class="uButton -iconClose btnLyClose"><span class="gSrOnly"><%- IM("web.cafe_layer.btn_close") %></span></button>\n        </footer>\n    </div>\n</section>'},1511:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(9),a=n(1512),o=n(1513),l=n(548),r=n(510),d=n(16),c=(n(52),n(1167),i.View.extend({tagName:"li",attributes:function(){return{"data-viewname":"DUsingInvitationLinksView"}},template:t.template(a),templateContext:{dateFormat:function(e){return s.format.date(d(e),"date_time")},getLinkTypeName:function(e){switch(e){case"url":return IM("web.using_invitation_links.invitation_type.url")||"초대링크";case"user_email":return IM("web.using_invitation_links.invitation_type.user_email")||"이메일";case"cafe_member":return IM("web.using_invitation_links.invitation_type.cafe_member")||"카페멤버";case"qr_code":return IM("web.using_invitation_links.invitation_type.qr_code")||"QR초대";case"kakao":return IM("web.using_invitation_links.invitation_type.kakao")||"카카오톡";case"line_messenger":return IM("web.using_invitation_links.invitation_type.line_messenger")||"라인";case"facebook_messenger":return IM("web.using_invitation_links.invitation_type.facebook_messenger")||"페이스북";case"group_url":return IM("web.using_invitation_links.invitation_type.group_url")||"묶음 초대그룹"}}},ui:{btnDeleteLink:"._btnDeleteLink"},events:{"click @ui.btnDeleteLink":"_deleteLink"},_deleteLink:function(e){r.openLayer({headerTitle:IM("web.using_invitation_links.confirm.title"),bodyDesc:IM("web.using_invitation_links.confirm.desc"),confirm:IM("web.using_invitation_links.confirm.yes"),cancel:IM("web.using_invitation_links.confirm.no")}).once(r.EVENTS.CONFIRM,t.bind((function(){var e=this.model.get("invitationUrlId");l.deleteInvitationUrl(e).then(t.bind((function(){this.trigger("remove",this)}),this))}),this))}})),h=i.CollectionView.extend({tagName:"ul",attributes:{"data-viewname":"DUsingInvitationLinksCollectionView"},childView:c,childViewEvents:{remove:function(e){this.collection.remove(e.model.get("invitationUrlId"))}},draw:function(){return this.collection.fetchUsingLinks(this.getOption("bandNo"))}});return c.build=function(e){return new h(t.extend({collection:new o},e))},c}.call(t,n,t,e))||(e.exports=i)},1512:function(e,t){e.exports='<span class="text">\n    <strong><%- IM("web.memberinvite.using_invitation.host_name", {host_name: inviter.name}) %>(<%- getLinkTypeName(invitationType) %>)</strong>\n    <span>\n        <a href="<%- invitationUrl %>" class="sf_color"><%- invitationUrl %></a>\n        <%- IM("web.memberinvite.qr_code.layer.period", {expired_at: dateFormat(expiredAt)}) %>\n    </span>\n</span>\n<button type="button" class="btnDelete _btnDeleteLink"></button>\n'},1513:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=(n(1167),n(52)),s=n(548),a=t.Model.extend({idAttribute:"invitationUrlId"});return t.Collection.extend({model:a,fetchUsingLinks:function(e){return s.getInvitationUrls(e).then(_.bind((function(e){this.reset(i.camelizeKeys(e.items))}),this))}})}.call(t,n,t,e))||(e.exports=i)},1514:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(4),o=n(16),l=n(1126),r=n(9),d=(n(502),n(486)),c=n(82),h=n(495),u=n(487),p=n(491),m=n(1515),_=n(156),b=a.View.extend({attributes:{"data-viewname":"DInviteByQrCodeView"},className:"qrcode_layer",template:i.template(m),behaviors:[{behaviorClass:h,sceneId:h.SCENE.MEMBER_INVITE_SHARE_QRCODE},{behaviorClass:u}],ui:{btnClose:"._btnClose",btnSaveQrCode:"._btnSaveQrCode",btnSaveQrInvitation:"._btnSaveQrInvitation",QrCode:"._QrCode"},events:{"click @ui.btnClose":"destroy","click @ui.btnSaveQrInvitation":"_saveQrInvitationCardToImage","click @ui.btnSaveQrCode":"_saveQrCode"},initialize:function(e){this._bandData=e.bandData,this._model=e.model},serializeData:function(){return{bandName:this._bandData.getBandName(),bandCoverUrl:c.makeInvitationCardCoverUrl(this._bandData.getCoverUrl()),bandDescription:this._bandData.getDescription(),expiredAt:this._model.getExpiredAt(),imageQrCode:"http://qrmwig.naver.com/alcatraz_mig/m.jsp?brcolor=62c339&amp;cmd=4&amp;ver=20&amp;size=L&&amp;res_format=png&amp;refresh=0&only=n&amp;svccode=0051&amp;src="+this._model.getInvitationUrl()}},onAttach:function(){this.getUI("QrCode").setLoading()},_saveQrCode:function(){this._sendSaveQrCodeClickLog(),location.href="/download?path="+encodeURIComponent(this._model.getQrUrl())+"&name="+encodeURIComponent(this._bandData.getBandName())},_sendSaveQrCodeClickLog:function(){this.jplClick(u.CLASSIFIER.SAVE_QRCODE)},_saveQrInvitationCardToImage:function(){this._sendSaveInvitationClickLog();var e=t("#qrInvitationCard").get(0),n={width:e.offsetWidth,height:e.offsetHeight};return l(e,n).then(i.bind((function(e){!function(e,t,n){document.createElement("a");var i=e.toDataURL("image/png");n||(n="png"),_.saveAs(i,t,n)}(e,this._bandData.getBandName(),"png")}),this))},_sendSaveInvitationClickLog:function(){this.jplClick(u.CLASSIFIER.SAVE_INVITATION)}});return b.Model=s.Model.extend({parse:function(e){var t={};return t.url=e.url,t.expiredAt=e.expired_at,t.qrUrl=e.qr_url,t},getInvitationUrl:function(){return this.get("url")},getExpiredAt:function(){return r.format.date(o(this.get("expiredAt")),"date_time")},getQrUrl:function(){return this.get("qrUrl")}}),b.openAsLayer=function(e,t){var n=new b.Model(t,{parse:!0});p.getCachedBandData(e).then(i.bind((function(e){var t=new b({bandData:e,model:n});return d.open(t),t}),this))},b}.call(t,n,t,e))||(e.exports=i)},1515:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("member.invitation_card.qr_code.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <div class="bandInvitationArea gMat20">\n                    <% // 커버 이미지 %>\n                    <div class="bandImageBox">\n                        <div class="uCoverImage -w320">\n                            <div class="coverInner">\n                                <img class="coverImg" src="<%- bandCoverUrl %>" alt="">\n                            </div>\n                        </div>\n                    </div>\n                    <% // QR 코드 이미지 %>\n                    <div class="bandQrCodeBox gMat16">\n                        <div class="qrCode">\n                            <img src="<%= imageQrCode %>" class="_QrCode" width="110" height="110" alt="QR Code">\n                        </div>\n                    </div>\n                    <div class="bandInfoBox">\n                        <% // [TODO] 초대장 저장 버튼 클릭시에만 isSave 클래스 추가 %>\n                        <p class="bandName"><%- bandName %></p>\n                        <% if (bandDescription) { %>\n                        <p class="bandDesc gMat5"><%- bandDescription %></p>\n                        <% } else { %>\n                        <p class="bandDesc gMat5"><%= IM("member.invitation_card.qr_code.default_band_description") %></p>\n                        <% } %>\n                        <p class="gFs16 gFw7 gTaC gBandColor gMat11"><%= IM("member.invitation_card.qr_code.help_guide.short") %></p>\n                    </div>\n                </div>\n                <div class="qrFlexButtonBox gMat20 gMal10 gMar10">\n                    <%\n                    // http://bts.campmobile.com/browse/BAND-93026\n                    // canvas에서의 외부 도메인 이미지 호출 이슈로 초대장 저장하기는 해결 방법 확인 후 배포하기로 협의함\n                    %>\n                    \x3c!--<button type="button" class="uButton -active -sizeXL _btnSaveQrInvitation"><%= IM("member.invitation_card.qr_code.save_invitation_card") %></button>--\x3e\n                    <button type="button" class="uButton -active -sizeXL _btnSaveQrCode"><%= IM("member.invitation_card.qr_code.save_qr_code") %></button>\n                </div>\n                <p class="gFs14 gColorBk4 gTaC gMat19"><%= IM("member.invitation_card.qr_code.help_guide") %></p>\n                <p class="gFs13 gColorGr2 gTaC gMat9"><%- IM("web.memberinvite.qr_code.layer.period", {expired_at: expiredAt}) %></p>\n            </div>\n        </div>\n        <footer class="modalFooter gPat3">\n            <button type="button" class="uButton -iconClose btnLyClose _btnClose"><span class="gSrOnly"><%= IM("ui.label.close_layer") %></span></button>\n        </footer>\n    </div>\n</section>\n'},1516:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=(n(9),n(17),n(1517)),a=(n(502),n(158)),o=n(548),l=n(16),r=n(486),d=i.View.extend({attributes:{"data-viewname":"DInviteByCodeView"},template:t.template(s),ui:{btnBack:"._btnBack",btnGeneratePinCode:"._btnGeneratePinCode",remainTime:"._remainTime"},events:{"click @ui.btnBack":function(){this.destroy()},"click @ui.btnGeneratePinCode":"_generatePinCode"},_generatePinCode:function(){o.generatePinCode(this._bandNo,48).then(t.bind((function(e){this._code=e.code,this._expiredAt=e.expired_at,this.render()}),this))},initialize:function(e){this._bandNo=e.bandNo,this._code=e.code,this._expiredAt=e.expired_at},serializeData:function(){var e=this._code?this._code.split("-"):"";return{isValidInviteCode:!!this._code,inviteCode1:e[0],inviteCode2:e[1]}},onRender:function(){this.isAttached()&&this._attachRemainTimeHandler()},onAttach:function(){this.render()},_attachRemainTimeHandler:function(){if(this._expiredAt){var e=l(this._expiredAt),n=t.bind((function(){var t=l(),n=e.diff(t)/1e3;if(n>0){var i=a.zeropadWithParseInt(n%60,2),s=a.zeropadWithParseInt(n/60%60,2),o=a.zeropadWithParseInt(n/60/60,2);return this.ui.remainTime.text(o+":"+s+":"+i),!0}return!1}),this);n(),this._clearRemainTimeHandler(),this.remainTimeHandler=setInterval(t.bind((function(){n()||this.destroy()}),this),1e3)}},_clearRemainTimeHandler:function(){this.remainTimeHandler&&clearInterval(this.remainTimeHandler)},onBeforeDetach:function(){this._clearRemainTimeHandler()}});return d.openAsLayer=function(e){var n=e.bandNo,i=o.getPinCode(n).then((function(n){return new d(t.extend({},e,n))}));r.openPromiseView(i,!1,{width:380,height:231})},d}.call(t,n,t,e))||(e.exports=i)},1517:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="header">\n            <h1 class="title"><%- IM(\'web.invite_by_code.invite_code\') %></h1>\n        </header>\n        <div class="main">\n            \x3c!-- alert 메시지 형태 --\x3e\n            \x3c!--친구가 불러준 숫자와 영단어를 입력한 후<br>초대장 확인을 클릭해주세요.--\x3e\n            <p class="p"><%= IM("web.invite_by_code.guide_code_make") %></p>\n            <div class="flexList -tbSpaceNone -layoutFixed gMat10">\n                <div>\n                    <div class="uInput">\n                        <label class="gSrOnly" for="InviteCode1"><%- IM("web.invite_by_code.code_number") %></label>\n                        <input type="text" id="InviteCode1" value="<%- inviteCode1 %>" class="gTaC gFs16 gColorBk1" readonly="readonly">\n                        <span class="border"></span>\n                    </div>\n                </div>\n                <div class="gMal10">\n                    <div class="uInput">\n                        <label class="gSrOnly" for="InviteCode2"><%- IM("web.invite_by_code.code_word") %></label>\n                        <input type="text" id="InviteCode2" value="<%- inviteCode2 %>" class="gTaC gFs16 gColorBk1" readonly="readonly">\n                        <span class="border"></span>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- 보이는 경우만 처리 --\x3e\n            <% if (isValidInviteCode) { %>\n            <p class="inviteCodeTimer">\n\t\t\t\t<span>\n\t\t\t\t\t<%- IM("web.invite_by_code.valid_time") %>&nbsp;<strong class="point _remainTime">\x3c!--24:00:10--\x3e</strong>\n\t\t\t\t</span>\n            </p>\n\n            <p class="sDesc -fs13 gMat16"><span class="tip">TIP</span> <%- IM("invite_by_code.label.tip_title") %></p>\n            <p class="sDesc gFs13"><%= IM("invite_by_code.label.tip_desc") %></p>\n\n            <div class="inviteCodeTipImg">\n                <img src="<%-resBaseUrl%>/images/template/img_invite_guide.jpg" srcset="<%-resBaseUrl%>/images/template/img_invite_guide_2x.jpg 2x" alt="">\n\n                <ul class="menuTxt">\n                    <li><span><%- IM("dgnb.menu.label.my_page") %></span></li>\n                    <li><span class="strong"><strong><%- IM("more.menu.input_invitation_code") %></strong></span></li>\n                    <li><span><%- IM("ui.label.notice.title.plural") %></span></li>\n                    <li><span><%- IM("web.more.menu.settings") %></span></li>\n                    <li><span><%- IM("web.setting.home.txt.logout") %></span></li>\n                </ul>\n            </div>\n            <% } %>\n        </div>\n        <footer class="footer">\n            <% if (!isValidInviteCode) { %>\n            <button type="button" class="uButton -confirm -sizeL _btnGeneratePinCode"><%- IM("web.invite_by_code.btn_make_invite_code") %></button>\n            <% } %>\n            <button type="button" class="uButton -iconClose btnLyClose _btnBack"><span class="gSrOnly"><%- IM(\'web.invite_by_code.btn_back\') %></span></button>\n        </footer>\n    </div>\n</section>\n'},1518:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(54),o=n(486),l=n(1519),r=s.View.extend({attributes:{"data-viewname":"DEmailVerifyView"},template:i.template(l),ui:{inputVerificationCode:"._inputVerificationCode",btnConfirm:"._btnConfirm",btnResendVerifyEmail:"._btnResendVerifyEmail"},events:{"keyup @ui.inputVerificationCode":"_setButtonStyle","click @ui.btnResendVerifyEmail":"_resendVerifyEmail","click @ui.btnConfirm":"_confirmVerify","click ._btnCancel":function(e){0==t(e.target).parents("._lyContent:first").length&&this.destroy()}},initialize:function(e){this.email=e.email,this.userName=e.userName,this.verificationToken=""},serializeData:function(){return{email:this.email}},_setButtonStyle:function(){this.ui.inputVerificationCode.val().length>0?(this.ui.btnConfirm.removeClass("-disabled"),this.ui.btnConfirm.removeAttr("disabled")):(this.ui.btnConfirm.addClass("-disabled"),this.ui.btnConfirm.attr("disabled","disabled"))},_resendVerifyEmail:function(e){e.preventDefault(),a.sendAuthEmail(this.email,this.userName).then(i.bind((function(e){alert(IM("web.setting.account.alert.resend_completed"))}),this))},_confirmVerify:function(e){e.preventDefault();var t=this.ui.inputVerificationCode.val();return a.verifyEmail(this.email,t,!0).then(i.bind((function(e){this.verificationToken=e.verification_token,this.destroy(),this.trigger("emailVerify:changeEmail",{verificationToken:this.verificationToken,email:this.email})}),this),(function(e){alert(e.result_data.message)}))}});return r.buildAsLayer=function(e,t){var n=new r({email:e,userName:t});return o.open(n),n},r}.call(t,n,t,e))||(e.exports=i)},1519:function(e,t){e.exports='<section class="lyWrap ">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%= IM("web.setting.account.txt.email_title") %></h1>\n        </header>\n        <div class="main gTaC">\n            <p class="p">\n                <strong class="point"><%- email %></strong><br>\n                <%= IM("setting.account.email.verify.txt") %>\n            </p>\n            <div class="p -tSpace">\n                <div class="uInput">\n                    <label class="gSrOnly" for="inputVerify"><%= IM("setting.account.title.input_auth_code") %></label>\n                    <input type="text" id="inputVerify" class="_inputVerificationCode" placeholder="<%= IM("setting.account.title.input_auth_code") %>">\n                    <span class="border"></span>\n                </div>\n            </div>\n        </div>\n        <footer class="footer -tSpace10">\n            <button type="button" class="uButton -sizeL -confirm -wFull _btnConfirm" disabled=""><%= IM("ui.label.confirm") %></button>\n            <button type="button" class="btnLyClose uButton -iconClose _btnCancel"><span class="gSrOnly"><%= IM("ui.label.cancel") %></span></button>\n            <div class="gTaC gFs13 gColorBk3 gMat20">\n                <a href="#" class="_btnResendVerifyEmail"><%= IM("web.setting.account.btn.resend_mail") %></a>\n            </div>\n        </footer>\n    </div>\n</section>'},1520:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(931),a=n(486),o=n(1521),l=i.View.extend({attributes:{"data-viewname":"DEmailConfirmPasswordView"},template:t.template(o),ui:{inputPassword:"._inputPassword",inputPasswordConfirm:"._inputPasswordConfirm",btnConfirm:"._btnConfirm",btnClose:"._btnClose"},events:{"keyup @ui.inputPassword":"_setButtonStyle","keyup @ui.inputPasswordConfirm":"_setButtonStyle","click @ui.btnConfirm":"_updatePassword","click @ui.btnClose":"destroy"},_setButtonStyle:function(){var e=this.ui.inputPassword.val(),t=this.ui.inputPasswordConfirm.val();e.length>0&&t.length>0?this.ui.btnConfirm.removeClass("-disabled"):this.ui.btnConfirm.addClass("-disabled")},_updatePassword:function(e){if(e.preventDefault(),!this._validatePassword())return!1;var t=this.ui.inputPassword.val();this.destroy(),this.trigger("emailChange:updateEmail",t)},_validatePassword:function(){if(this.bPasswordExist)return!0;var e=this.ui.inputPassword.val(),t=this.ui.inputPasswordConfirm.val();switch(s.PASSWORD.validatePassword(e,t)){case s.PASSWORD.RESULT.TOO_SHORT_PASSWORD:case s.PASSWORD.RESULT.TOO_LONG_PASSWORD:case s.PASSWORD.RESULT.NONE_ALPHABET:case s.PASSWORD.RESULT.NONE_NUMBER:return alert(IM("web.setting.account.alert.wrong_password_length")),this.ui.inputPassword.focus(),!1;case s.PASSWORD.RESULT.UNMATCHED:return alert(IM("web.setting.account.unmatched_password")),this.ui.inputPasswordConfirm.focus(),!1}return!0}});return l.buildAsLayer=function(){var e=new l;return a.open(e),e},l}.call(t,n,t,e))||(e.exports=i)},1521:function(e,t){e.exports='<section class="lyWrap ">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%= IM("web.setting.account.txt.password_setting_title") %></h1>\n        </header>\n        <div class="main">\n            <div class="p -tSpace">\n                <div class="uInputWrap">\n                    <p class="p"><%= IM("web.setting.account.txt.password_description2") %></p>\n                    <p class="sDesc gMab10"><%= IM("web.setting.account.txt.password_description") %></p>\n                    <div class="uInput">\n                        <label class="gSrOnly" for="pw"><%= IM("setting.account.txt.input_password") %></label>\n                        <input type="password" id="pw" placeholder="<%= IM(\'setting.account.txt.input_password\') %>" class="_inputPassword">\n                    </div>\n                    <div class="uInput">\n                        <label class="gSrOnly" for="pw2"><%= IM("setting.account.txt.input_password_confirm") %></label>\n                        <input type="password" id="pw2" placeholder="<%= IM(\'setting.account.txt.input_password_confirm\') %>" class="_inputPasswordConfirm">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <footer class="footer">\n            <button type="button" class="uButton -confirm -disabled _btnConfirm"><%= IM("ui.label.confirm") %></button>\n            <button type="button" class="btnLyClose uButton -iconClose _btnClose"><span class="gSrOnly">등록 취소</span></button>\n        </footer>\n    </div>\n</section>'},1524:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(1525),a=n(82);return t.View.extend({attributes:{"data-viewname":"DBandMissionMediaListView"},className:"multiMediaList",tagName:"ul",template:i.template(s),initialize:function(e){this._bandMissionModel=e.bandMissionModel,this._exType=e.exType},ui:{mediaThumbnail:"._mediaThumbnail",deleteMedia:"._deleteMedia"},events:{"click @ui.deleteMedia":"_deleteMedia"},templateContext:function(){var e=this._bandMissionModel.getMissionGoodExamplePhotoOrVideo();return"bad"==this._exType&&(e=this._bandMissionModel.getMissionBadExamplePhotoOrVideo()),{mediaList:e,ThumbnailUtil:a,isManuallyEnded:this._bandMissionModel.getBandMissionIsManuallyEnded()}},onRender:function(){this.getUI("mediaThumbnail").setLoading({useLoading:!0,tag:'<div class="uLoadingAni"></div>'})},_deleteMedia:function(e){var t=$(e.currentTarget).data("media_index");"good"==this._exType?this._bandMissionModel.removeMissionGoodExamplePhotoOrVideo(t):this._bandMissionModel.removeMissionBadExamplePhotoOrVideo(t)}})}.call(t,n,t,e))||(e.exports=i)},1525:function(e,t){e.exports='<% _.each(mediaList, function(item, index){ %>\n<li class="multiMediaItem <% if(item.isVideo || item.sosId) { %>-iconPlay<% } %>"><img class="_mediaThumbnail" src="<%- ThumbnailUtil.makePostSnippetThumbnailUrl(\'type1\', item.url) %>">\n    <% if(!isManuallyEnded) { %><button type="button" class="deletePhoto _deleteMedia" data-media_index="<%- index %>"><%- IM("ui.label.delete") %></button><% } %>\n</li>\n<% }) %>'},1531:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(562),o=n(510),l=n(800),r=n(904),d=n(158),c=n(543),h=n(83),u=n(162),p=n(157),m=n(155);return s.Behavior.extend({initialize:function(){this.view.leavePageBand=t.bind(this._leavePageBand,this),this.view.leavePageBandWithoutConfirmAndPageMove=t.bind(this._leavePageBandWithoutConfirmAndPageMove,this)},_leavePageBandWithoutConfirmAndPageMove:function(e){this._bandNo=e;var n=i.Deferred();return this._leaveBandWithoutForce().then(t.bind(n.resolve,this),t.bind((function(e){var s=null;switch(e.result_code){case c.LEAVE_STATE_CODE.PAGE_BAND_REQUIRE_DELEGATE:s=i.Deferred().reject(),this._alertForUnLeavableLeader();break;case c.LEAVE_STATE_CODE.LEADER_CAN_LEAVE:s=this._confirmForLeavableLeader();break;case c.LEAVE_STATE_CODE.COLEADER_CAN_LEAVE:s=this._confirmForColeader();break;case c.LEAVE_STATE_CODE.MEMBER_CAN_LEAVE:s=i.Deferred().resolve()}s.then(t.bind(this._forceLeave,this)).then((function(){n.resolve()}))}),this)),n},_leavePageBand:function(e){this._bandNo=e;var n=i.Deferred();return this._confirmWantLeaveBand().then(t.bind(this._leaveBandWithoutForce,this)).then(n.resolve,t.bind((function(e){switch(e.result_code){case c.LEAVE_STATE_CODE.PAGE_BAND_REQUIRE_DELEGATE:this._alertForUnLeavableLeader();break;case c.LEAVE_STATE_CODE.LEADER_CAN_LEAVE:this._confirmForLeavableLeader().then(t.bind(this._forceLeave,this)).then(t.bind(this._goToGlobalHome,this));break;case c.LEAVE_STATE_CODE.COLEADER_CAN_LEAVE:this._confirmForColeader().then(t.bind(this._forceLeave,this)).then(t.bind(this._goToPageHome,this));break;case c.LEAVE_STATE_CODE.MEMBER_CAN_LEAVE:this._forceLeave().then(t.bind(this._goToPageHome,this))}}),this)),n},_confirmWantLeaveBand:function(){return i.Deferred(t.bind((function(e){var t=l.openAsLayer({title:IM("pageband.band_setting.release_subscription_confirm.title"),confirm:IM("ui.label.confirm"),cancel:IM("ui.label.cancel"),description:d.nl2br(IM("pageband.band_setting.release_subscription_confirm.desc")),radioItems:[{label:IM("pageband.band_setting.release_subscription_confirm.menu.hide_from_feed"),value:"hide_from_feed"},{label:IM("pageband.band_setting.release_subscription_confirm.menu.release_subscription"),value:"release_subscription"}],initialCheckedValue:"hide_from_feed"});this.listenTo(t,"modal:confirm",(function(t){"hide_from_feed"===t?r.hideBandFromFeed(this._bandNo):e.resolve()}))}),this)).promise()},_leaveBandWithoutForce:function(){return h.leaveBand(this._bandNo,!1)},_alertForUnLeavableLeader:function(){a.openLayer({bodyTitle:d.nl2br(IM("pageband.band_setting.leave.alert.leader_leave_rejected"))})},_confirmForLeavableLeader:function(){return i.Deferred(t.bind((function(e){o.openLayer({bodyDesc:d.nl2br(IM("pageband.band_setting.leave.confirm.leader_leave"))}).once(o.EVENTS.CONFIRM,t.bind((function(){e.resolve()}),this))}),this)).promise()},_confirmForColeader:function(){return i.Deferred(t.bind((function(e){o.openLayer({bodyDesc:d.nl2br(IM("pageband.band_setting.leave.confirm.coleader_leave")),confirm:IM("pageband.band_setting.leave.confirm.coleader_leave.btn.confirm")}).once(o.EVENTS.CONFIRM,t.bind((function(){e.resolve()}),this))}),this)).promise()},_forceLeave:function(){return h.leaveBand(this._bandNo,!0).then(t.bind((function(){m.get(this._bandNo).resetBandDataState()}),this))},_goToPageHome:function(){u.PAGE_BAND_HOME.goDForced({band_no:this._bandNo})},_goToGlobalHome:function(){p.GLOBAL_HOME.goDForced()}})}.call(t,n,t,e))||(e.exports=i)},1532:function(e,t){!function(e){e.fn.theiaStickySidebar=function(t){var n={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS",className:"theiaStickySidebar"};(t=e.extend(n,t)).additionalMarginTop=parseInt(t.additionalMarginTop)||0,t.additionalMarginBottom=parseInt(t.additionalMarginBottom)||0;var i=this.oldStyle=[];function s(t,i){return!0===t.initialized||!(e("body").width()<t.minWidth)&&(function(t,i){t.initialized=!0,0===e("#theia-sticky-sidebar-stylesheet-"+t.namespace).length&&e("head").append(e('<style id="theia-sticky-sidebar-stylesheet-'+t.namespace+'">.'+n.className+':after {content: ""; display: table; clear: both;}</style>'));i.each((function(){var i={};if(i.sidebar=e(this),i.options=t||{},i.container=e(i.options.containerSelector),0==i.container.length&&(i.container=i.sidebar.parent()),i.sidebar.parents().css("-webkit-transform","none"),i.sidebar.css({position:i.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),i.stickySidebar=i.sidebar.find("."+n.className),0==i.stickySidebar.length){var s=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;i.sidebar.find("script").filter((function(e,t){return 0===t.type.length||t.type.match(s)})).remove(),i.stickySidebar=e("<div>").addClass(n.className).append(i.sidebar.children()),i.sidebar.append(i.stickySidebar)}i.marginBottom=parseInt(i.sidebar.css("margin-bottom")),i.paddingTop=parseInt(i.sidebar.css("padding-top")),i.paddingBottom=parseInt(i.sidebar.css("padding-bottom"));var o=i.stickySidebar.offset().top,l=i.stickySidebar.outerHeight();function r(){i.fixedScrollTop=0,i.sidebar.css({"min-height":"1px"}),i.stickySidebar.css({position:"static",width:"",transform:"none"})}i.stickySidebar.css("padding-top",1),i.stickySidebar.css("padding-bottom",1),o-=i.stickySidebar.offset().top,l=i.stickySidebar.outerHeight()-l-o,0==o?(i.stickySidebar.css("padding-top",0),i.stickySidebarPaddingTop=0):i.stickySidebarPaddingTop=1,0==l?(i.stickySidebar.css("padding-bottom",0),i.stickySidebarPaddingBottom=0):i.stickySidebarPaddingBottom=1,i.previousScrollTop=null,i.fixedScrollTop=0,r(),i.onScroll=function(n){if(n.stickySidebar.is(":visible"))if(e("body").width()<n.options.minWidth)r();else{if(n.options.disableOnResponsiveLayouts)if(n.sidebar.outerWidth("none"==n.sidebar.css("float"))+50>n.container.width())return void r();var i,s,o=e(document).scrollTop(),l="static";if(o>=n.sidebar.offset().top+(n.paddingTop-n.options.additionalMarginTop)){var d,c=n.paddingTop+t.additionalMarginTop,h=n.paddingBottom+n.marginBottom+t.additionalMarginBottom,u=n.sidebar.offset().top,p=n.sidebar.offset().top+(i=n.container,s=i.height(),i.children().each((function(){s=Math.max(s,e(this).height())})),s),m=0+t.additionalMarginTop;d=n.stickySidebar.outerHeight()+c+h<e(window).height()?m+n.stickySidebar.outerHeight():e(window).height()-n.marginBottom-n.paddingBottom-t.additionalMarginBottom;var _=u-o+n.paddingTop,b=p-o-n.paddingBottom-n.marginBottom,g=n.stickySidebar.offset().top-o,f=n.previousScrollTop-o;"fixed"==n.stickySidebar.css("position")&&"modern"==n.options.sidebarBehavior&&(g+=f),"stick-to-top"==n.options.sidebarBehavior&&(g=t.additionalMarginTop),"stick-to-bottom"==n.options.sidebarBehavior&&(g=d-n.stickySidebar.outerHeight()),g=f>0?Math.min(g,m):Math.max(g,d-n.stickySidebar.outerHeight()),g=Math.max(g,_),g=Math.min(g,b-n.stickySidebar.outerHeight());var v=n.container.height()==n.stickySidebar.outerHeight();l=(v||g!=m)&&(v||g!=d-n.stickySidebar.outerHeight())?o+g-n.sidebar.offset().top-n.paddingTop<=t.additionalMarginTop?"static":"absolute":"fixed"}if("fixed"==l){var A=e(document).scrollLeft();n.stickySidebar.css({position:"fixed",width:a(n.stickySidebar)+"px",transform:"translateY("+g+"px)",left:n.sidebar.offset().left+parseInt(n.sidebar.css("padding-left"))-A+"px",top:"0px"})}else if("absolute"==l){var M={};"absolute"!=n.stickySidebar.css("position")&&(M.position="absolute",M.transform="translateY("+(o+g-n.sidebar.offset().top-n.stickySidebarPaddingTop-n.stickySidebarPaddingBottom)+"px)",M.top="0px"),M.width=a(n.stickySidebar)+"px",M.left="",n.stickySidebar.css(M)}else"static"==l&&r();"static"!=l&&1==n.options.updateSidebarHeight&&n.sidebar.css({"min-height":n.stickySidebar.outerHeight()+n.stickySidebar.offset().top-n.sidebar.offset().top+n.paddingBottom}),n.previousScrollTop=o}},i.onScroll(i),e(document).on("scroll."+i.options.namespace,function(e){return function(){e.onScroll(e)}}(i)),e(window).on("resize."+i.options.namespace,function(e){return function(){e.stickySidebar.css({position:"static"}),e.onScroll(e)}}(i)),"undefined"!=typeof ResizeSensor&&new ResizeSensor(i.stickySidebar[0],function(e){return function(){e.onScroll(e)}}(i))}))}(t,i),!0)}function a(e){var t;try{t=e[0].getBoundingClientRect().width}catch(e){}return void 0===t&&(t=e.width()),t}return this.each((function(){i.push(e(this).attr("style"))})),function(t,n){s(t,n)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),e(document).on("scroll."+t.namespace,function(t,n){return function(i){s(t,n)&&e(this).unbind(i)}}(t,n)),e(window).on("resize."+t.namespace,function(t,n){return function(i){s(t,n)&&e(this).unbind(i)}}(t,n)))}(t,this),this.destroy=function(){e(document).off("scroll."+t.namespace),e(window).off("resize."+t.namespace);var i=this.oldStyle;this.each((function(t,s){e(this).attr("style",i[t]||"");var a=e(this).find("."+n.className),o=a.children();e(this).append(o),a.remove()}))},this}}(jQuery)},1533:function(e,t,n){var i=n(0),s=n(4),a=n(1802),o=n(888),l=n(1013),r=n(13),d=n(509),c=n(1640),h=s.View.extend({behaviors:[c],options:{bandNo:void 0,contentKey:void 0,clickable:!0},className:"reactionItem",attributes:{"data-viewname":"DEmotionCountSelectView"},initialize:function(){if(!this.options.bandNo||!this.options.contentKey)throw new Error("bandNo, contentKey required")},template:i.template(a),templateContext:function(){return{emotionClickable:r.canSetEmotion()&&this.options.clickable,showEmptyEmotion:!this.model.get("emotionCount")}},ui:{btnEmotionCount:"._btnEmotionCount"},events:{"click @ui.btnEmotionCount":"_toggleSelectView"},regions:{emotionCountRegion:{el:"._emotionCountRegion",replaceElement:!0},emoticonSelectRegion:{el:"._emoticonSelectRegion",replaceElement:!0}},childViewEvents:{"DEmotionSelectView:changeEmotion":function(e){this._closeSelectView(),this.model.set(e),this.render()}},onRender:function(){var e=this.model.get("commonEmotionType"),t=this.model.get("emotionCount"),n=this.model.get("emotionTypeByViewer");t>0?this.showChildView("emotionCountRegion",o.buildPostEmotionCountView(e,t,n,!1)):this.getRegion("emotionCountRegion").empty()},_toggleSelectView:function(){this.getRegion("emoticonSelectRegion").hasView()?this._closeSelectView():this._openSelectView()},_openSelectView:function(){r.canSetEmotion()&&!this.model.get("isRestricted")&&(this._contentKey=d.buildPostKey(this._postNo),this.showChildView("emoticonSelectRegion",l.buildDEmotionSelectViewByContentKey({bandNo:this.options.bandNo,contentKey:this.options.contentKey,emotionTypeByViewer:this.model.get("emotionTypeByViewer")})),this.clickOutsideRegister(i.bind(this._closeSelectView,this)))},_closeSelectView:function(){this.getRegion("emoticonSelectRegion").empty()}});h.buildDEmotionCountSelectView=function(e){return new h({model:e.model,bandNo:e.bandNo,contentKey:e.contentKey,clickable:!i.isBoolean(e.clickable)||e.clickable})},e.exports=h},1534:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(16),a=n(1813),o=n(486),l=n(9),r=n(562),d=n(83),c=n(510),h=n(157),u={CONFIRM:"CONFIRM",END_OF_HOLD_PERIOD:"END_OF_HOLD_PERIOD"},p=function(e){return s().isAfter(e)},m=i.View.extend({attributes:{"data-viewname":"DBandDeleteReservationCancelView"},template:t.template(a),templateContext:function(){return{closureTimeText:this._getFormattedReservedClosureAtText()}},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",closureTimeText:"._closureTimeText"},events:{"click @ui.btnConfirm":"_onClickConfirm","click @ui.btnCancel":"destroy"},initialize:function(e){this.bandData=e.bandData,this.useCancelConfirm=e.useCancelConfirm,this.reservedClosureAt=this.bandData.getReservedClosureAt()},_getFormattedReservedClosureAtText:function(){var e=null;return e=this.reservedClosureAt.isSame(s(),"day")?l.format.time(this.reservedClosureAt,"hour_minute"):l.format.date(this.reservedClosureAt,"month_day_time"),IM("bandsetting.band_delete.reservation_cancel.desc1",{time:e})},_onClickConfirm:function(){p(this.reservedClosureAt)?this._goGlobalHome():this.useCancelConfirm?this._openCancelConfirmView():this._cancelBandClosure()},_openCancelConfirmView:function(){c.openLayer({bodyTitle:IM("bandsetting.band_delete.reservation_cancel.confirm_msg"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no"),withoutHiding:!1}).once(c.EVENTS.CONFIRM,t.bind((function(){this.$el.hide(),p(this.reservedClosureAt)?this._goGlobalHome():this._cancelBandClosure()}),this))},_cancelBandClosure:function(){d.cancelBandClosure(this.bandData.getBandNo()).then(t.bind((function(){this._refreshBandDataAndDestroy(u.CONFIRM)}),this),t.bind((function(){this.$el.show()}),this))},_refreshBandDataAndDestroy:function(e){this.bandData.resetBandDataState(),this.bandData.loadBandData().then(t.bind((function(){this.trigger(e),this.destroy()}),this))},_goGlobalHome:function(){h.GLOBAL_HOME.goDForced()}});return m.EVENT=u,m.openAsLayer=function(e,t){var n=null;return n=p(e.getReservedClosureAt())?r.openLayer({bodyTitle:IM("bandsetting.can_not_change_settings.text")}):new m({bandData:e,useCancelConfirm:t}),o.open(n),n},m}.call(t,n,t,e))||(e.exports=i)},1535:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1654),a=n(1655),o=n(1185),l=n(1656),r=n(611),d=n(516),c=n(697),h=n(486),u=n(1236),p=i.CollectionView.extend({options:{bandNo:null,photos:[],collageType:"square",maxCollageItemCount:4,total_count:void 0},tagName:"ul",attributes:function(){var e={"data-viewname":"DBandIntroAttachedMediaCollageView"},t=Math.min(this.options.total_count,this.options.maxCollageItemCount);return t>1&&(e["data-collage"]=t),e},className:function(){var e="uCollage "+{1:"-horizontal",2:"-square",3:"lineType",4:"lineType"}[this.options.photos.length];return this.options.wrapperClassNames?this.options.wrapperClassNames+" "+e:e},onDomRefresh:function(){this._childrenIndexes={};var e=Math.min(this.options.photos.length,this.options.maxCollageItemCount),n=m.itemScales[e],i=this.options.bandNo;t.each(n,(function(e,t){var n,o=this.options.photos[t];if("dynamic"===e[0])if(o.video){var r=o.video.videoId;n=new s({photoUrl:o.photo_url,width:o.width,height:o.height,isGifVideo:o.is_gif,videoPlayerModel:c.createVideoPlayerModel({videoId:r,sources:function(){return d.getVideoUrlByBandMediaId(i,r)}})})}else n=l.buildPostCardDynamicItemView({photoUrl:o.photo_url,width:o.width,height:o.height,isGifVideo:o.is_gif});else n=a.buildDPhotoCollageImageItemView({photoUrl:o.photo_url,width:o.width,height:o.height,video:!!o.video,thumbnailScale:e[0],playerIconScale:e[1],isGifVideo:o.is_gif});this._childrenIndexes[n.cid]=t,this.addChildView(n,this.options.maxCollageItemCount)}),this)},childViewEvents:function(){var e={};return e[o.OPEN_MEDIA]=function(e){this._openMediaWithImageViewer(this._childrenIndexes[e.cid])},e},_openMediaWithImageViewer:function(e){var t={result_data:{photos:this.options.photos,total_count:this.options.total_count},bandNo:this.options.bandNo,openIndex:e},n=r.buildImageViewer(t);this.listenTo(n,r.EVENT.FETCH_VIDEO_URL,(function(e,t){d.getVideoUrlByBandMediaId(this.options.bandNo,t).then((function(t){n.setVideoUrlFromAPI(t,e)}))})),h.open(n)}}),m={itemScales:{1:[["dynamic","big"]],2:[["1:1","big"],["1:1","big"]],3:[["1:1","big"],["1:1","big"],["1:1","big"]],4:[["1:1","middle"],["1:1","middle"],["1:1","middle"],["1:1","middle"]]}};return p.show=function(e,n){var i;if(i=n.bandIntroModel instanceof u?n.bandIntroModel.getPageMediaList().toJSON():n.bandIntroModel.getBandMediaList(),t.isEmpty(i))return null;if(!e)return null;e.hasView()&&e.empty();var s=new p(function(e,n,i){return{wrapperClassNames:i,bandNo:e,photos:t.map(n,(function(e){var t={height:e.data.height,width:e.data.width,photo_url:e.data.url,is_gif:e.data.isGif};return"video"===e.type&&(t.video={videoId:e.id,is_gif:e.data.isGif}),t})),total_count:n.length}}(n.bandNo,i,n.wrapperClassNames));return e.show(s),s},p}.call(t,n,t,e))||(e.exports=i)},1536:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(52),s=n(541),a=Backbone.Model.extend({defaults:function(){return{bandNo:null,companyName:null,representativeName:null,address:null,phone:null,email:null,registrationNo:null,mailOrderSalesNo:null}},initialize:function(e){this.set("bandNo",e.bandNo)},parse:function(e){return i.camelizeKeys(e)},isExistBusinessIDInfo:function(){return null!=this.get("registrationNo")},toApiParam:function(){return i.decamelizeKeys(this.attributes)},fetchBusinessIdentificationInfo:function(){var e=this.get("bandNo");return s.getBandBusinessRegistration(e).then(t.bind((function(n){var i=n.business_registration||{};return this.set(this.parse(t.extend({band_no:e},i))),this}),this))}});return a.buildBusinessIdentificationInfoModel=function(e){return new a(e)},a}.call(t,n,t,e))||(e.exports=i)},1537:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(52),s=n(6),a=(n(543),n(1021)),o=s.Model.extend({parse:function(e){if(t.isEmpty(e))return{};var n={type:(e=i.camelizeKeys(e)).type};e.id&&(n.id=e.id);var s=e.data;return t.isEmpty(s)&&(n.data={url:s.url,width:s.width,height:s.height},e.type===a.MEDIA.TYPE.VIDEO&&(n.data.sosId=s.sosId,n.data.isGif=s.isGif)),n},toJSONForSave:function(){var e={type:this.get("type")};if(this.get("id"))return e.id=this.get("id"),e;var t=this.get("data");return e.data={url:t.url,width:t.width,height:t.height},this.get("type")===a.MEDIA.TYPE.VIDEO&&(e.data.sos_id=t.sosId,e.data.is_gif=t.isGif),e}});return o.parseFromUploadResult=function(e){var t={};return e.isVideo||e.isGifVideo?t.type=a.MEDIA.TYPE.VIDEO:t.type=a.MEDIA.TYPE.IMAGE,t.data={url:e.url,width:e.width,height:e.height},(e.isVideo||e.isGifVideo)&&(t.data.sosId=e.id,t.data.isGif=e.isGifVideo),t},o}.call(t,n,t,e))||(e.exports=i)},1538:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1823),a=n(600),o=n(537),l=(n(1238),n(1537)),r=n(507),d=n(1021),c=n(1824),h=n(590),u=i.View.extend({tagName:"div",className:function(){return this.options.wrapperClassNames},attributes:{"data-viewname":"DBandIntroEditMediaListView"},template:t.template(s),templateContext:function(){return{subTitle:this.options.subTitle}},ui:{mediaUploader:"._mediaUploader"},regions:{mediaListRegion:{el:"._mediaListRegion",replaceElement:!0}},childViewEvents:{upload:function(){h.isContentCreationPunished()||this.getUI("mediaUploader").find('input[type="file"]').click()}},initialize:function(e){this._bandNo=e.bandNo,this._mediaListCollection=e.mediaListCollection},onAttach:function(){this._showMediaList(),this._loadMediaUploader()},onBeforeDetach:function(){this._mediaUploader&&this._mediaUploader.destroy()},_showMediaList:function(){this.showChildView("mediaListRegion",new c({collection:this._mediaListCollection}))},_loadMediaUploader:function(){this._mediaUploader&&this._mediaUploader.destroy(),this._mediaUploader=a.createPageIntroMediaUploader(this.getUI("mediaUploader")),this.listenTo(this._mediaUploader,r.BEFORE_VALIDATE,t.bind((function(){var e=this._mediaListCollection.length;this._mediaUploader.setValidators([t.partial(o.PHOTO_OR_VIDEO_VALIDATOR,t,e,d.MEDIA.MAX_COUNT)])}),this)),this.listenTo(this._mediaUploader,r.UPLOAD_COMPLETE,t.bind((function(e){if(!t.isEmpty(e)&&!t.isEmpty(e.resultList)){var n=e.resultList[0];this._mediaListCollection.add(l.parseFromUploadResult(n))}}),this))}});return u.show=function(e,t){if(e){e.hasView()&&e.empty();var n=new u({bandNo:t.bandNo,mediaListCollection:t.mediaListCollection,wrapperClassNames:t.wrapperClassNames,subTitle:t.subTitle});return e.show(n),n}},u}.call(t,n,t,e))||(e.exports=i)},1539:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(1826),o=n(158),l=n(637),r=n(17),d=n(499),c=n(498),h=n(13),u=n(538),p=n(157),m=n(153),_=n(544),b=n(169),g=n(1106),f=n(26),v=n(487),A=n(495),M=n(155),C=n(514),I=n(180),E=n(1540),y=n(83),T=n(939),N=n(938),D=n(82),S=n(1535),w=n(486),B=(n(611),n(516),n(697),n(627),n(181)),L=n(162),P=n(798),O=n(1531),R=n(9),x=n(16),k=n(1541),V=n(1829),U=n(53),F=n(1831),G=n(685),W=n(154),z={MODIFY_INTRO:"MODIFY_INTRO"},H=s.View.extend({attributes:{"data-viewname":"DGroupBandIntroView"},className:function(){return this._isHeaderRequired()?"sBandInfo gContentCardShadow":"gContentCardShadow"},getTemplate:function(){return this._fetched?t.template(a):t.template(c)},templateContext:function(){return this._fetched?{showHeader:this.showHeader,isSummaryView:this.isSummaryView,showMoreOptionMenu:this.showMoreOptionMenu,isPermittedManageDescription:this.bandOptionModel&&this.bandOptionModel.isPermittedManageDescription(),introDescription:this._getIntroDescription(this.bandIntroModel.getBandDescription()),bandKeywordsWithKeywordGroups:this._getBandKeywordsWithKeywordGroups(),canOpenKeywordGroup:this._canOpenKeywordGroup(),bandLocation:this._getLocation(),canShowBusinessIdentificationInfo:this.bandData.canShowBusinessIdentificationInfo(),businessRegistrationNo:this.bandIntroModel.getBandBusinessRegistrationNo(),canShowGroupBandIntroDescriptionAndDoAction:this.bandData.canShowGroupBandIntroDescriptionAndDoAction(),canShowGroupIntro:this._canShowGroupBandIntro(),getSchoolInfo:this.bandIntroModel.getBandSchoolInfo(),canReportBand:this.bandData.canReportBand(),isRecruiting:this.bandIntroModel.isRecruiting(),bandWebUrl:this.bandData.getBandWebUrl(),bandIntroUrl:r.appendCurrentDomainOnPathUrl(m.GROUP_BAND_INTRO.makeUrl({band_no:this.bandNo})),connectedPageBandList:this._getConnectedPageBandList(),bandHistory:this._activityBandSummaryHistory(),activityByDaySummaryTxt:this._activityByDaySummaryTxt(),canShowGroupBandMainActivitySummary:this.bandData.canShowGroupBandMainActivitySummary(),showLocalBandInfo:this.localBandPermission.canShowLocalBandInfo(),hasRegion:!!this.bandData.getRegion(),isRecruitingBand:this.bandData.getBandCore().isRecruiting}:{_loading_size:d.Size.MEDIUM}},ui:{btnBandKeyword:"._btnBandKeyword",bandLocation:"._bandLocation",btnMore:"._btnMore",moreMenuLayer:"._moreMenuLayer",btnModifyIntro:"._btnModifyIntro",showBusinessIDInfoButton:"._showBusinessIDInfoButton",reportBand:"._reportBand",btnCopyBandUrl:"._btnCopyBandUrl",btnCopyBandIntroUrl:"._btnCopyBandIntroUrl",bandIntroChart:"._bandIntroChart",bandIntroMediaListRegion:"._bandIntroMediaListRegion",goBandIntro:"._goBandIntro",subscribePage:"._subscribePage",unsubscribePage:"._unsubscribePage"},events:{"click @ui.btnBandKeyword":"_openKeywordGroup","click @ui.bandLocation":"_openMap","click @ui.btnMore":"_toggleMoreMenuLayer","click @ui.btnModifyIntro":"_moveToModifyIntro","click @ui.showBusinessIDInfoButton":"_showBusinessIDInfo","click @ui.reportBand":"_reportBand","click @ui.goBandIntro":function(){m.GROUP_BAND_INTRO.goDForced({band_no:this.bandNo})},"click @ui.subscribePage":"_subscribePage","click @ui.unsubscribePage":"_unsubscribePage"},regions:{bandIntroMediaListRegion:{el:"@ui.bandIntroMediaListRegion",replaceElement:!0},localBandInfoRegion:{el:"._localBandInfoRegion",replaceElement:!0},upcomingLocalMeetupScheduleListRegion:{el:"._upcomingLocalMeetupScheduleListRegion",replaceElement:!0},attachedFileListRegion:{el:"._attachedFileListRegion",replaceElement:!0}},behaviors:function(){var e=[v,O];return this.options.jplSceneId&&e.push({behaviorClass:A,sceneId:this.options.jplSceneId}),e},initialize:function(e){this._fetched=!1,this.bandData=e.bandData,this.bandNo=e.bandData.getBandCore().bandNo,this.localBandPermission=G.build(this.bandData),this.showHeader=this._isHeaderRequired(),this.isSummaryView=e.isSummaryView,this.showMoreOptionMenu=e.showMoreOptionMenu},onRender:function(){this._fetched&&this._canShowGroupBandIntro()&&(this._showLocalBandInfo(),this._showMediaList(),this._showUpcomingLocalMeetupScheduleList(),this._showAttachedFileListView(),this.activityBandSummary&&!t.isEmpty(this.activityBandSummary[0])&&this.activityBandSummary[0].weekly_activity_map&&this._generateChartForBandDayStats())},onAttach:function(){return h.isLogedIn()&&this.bandData.canShowGroupBandIntroDescriptionAndDoAction()?W.wrapActivePromise(i.when(u.getBandOption(this.bandNo),y.getBand_({band_no:this.bandNo,fields:"band_no,type,is_recruiting,description,school_info,location,keyword,business_registration_no,media_list,band_files"}),B.getConnectedPageBandList(this.bandNo),y.activityBandSummary(this.bandNo)),this).then(t.bind((function(e,t,n,i){this._fetched=!0,this.bandOptionModel=e,this.bandIntroModel=new T,this.bandIntroModel.setAttributes(t),this.connectedPageBandList=n,this.activityBandSummary=i,this.render();var s=[M.UPDATE_EVENT.PROFILE,M.UPDATE_EVENT.MEMBER,M.UPDATE_EVENT.BAND,M.UPDATE_EVENT.LINK].join(" ");this.listenTo(this.bandData,s,(function(){this.render()})),this.listenTo(f.getDGlobalChannel(),f.EVENT.BAND_SHORTCUT_SETUP,(function(){this._refreshBandData()})),this.listenTo(f.getDGlobalChannel(),f.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED,(function(){this._refreshBandData()}))}),this)):W.wrapActivePromise(i.when(y.getBand_({band_no:this.bandNo,fields:"band_no,type,is_recruiting,description,school_info,location,keyword,business_registration_no,media_list,band_files"}),B.getConnectedPageBandList(this.bandNo),y.activityBandSummary(this.bandNo)),this).then(t.bind((function(e,t,n){this._fetched=!0,this.bandIntroModel=new T,this.bandIntroModel.setAttributes(e),this.connectedPageBandList=t,this.activityBandSummary=n,this.render()}),this))},_canShowGroupBandIntro:function(){return this.bandIntroModel.canShowGroupBandIntro()||this.localBandPermission.canShowLocalBandInfo()},_isBandIntroPage:function(){return U.getCurrentRouteInfo().routeInfo===m.GROUP_BAND_INTRO},_isHeaderRequired:function(){return!!this._isBandIntroPage()||!(U.getCurrentRouteInfo().routeInfo!==_.LFG_BAND_HOME||!this.options.bandData.getSchoolInfo())},_getDayOfWeek:function(){var e=this.activityBandSummary[0].weekly_activity_map,n="en"==R.getLang()?"ddd":"dd";return t.map(e,(function(e,t){return t})).map((function(e,t){return x().day(t+1).format(n)}))},_getDayOfWeekActivity:function(){var e=this.activityBandSummary[0].weekly_activity_map;return t.map(e,(function(e){return e.visitor_count}))},_activityBandSummaryHistory:function(){return!(!this.activityBandSummary[0]||t.isEmpty(this.activityBandSummary[0])||!this.activityBandSummary[0].band_history)&&{created_date:R.format.date(this.activityBandSummary[0].band_history.created_date,"year_month"),last7days_post_count:this.activityBandSummary[0].band_history.last7days_post_count,last7days_join_member_count:this.activityBandSummary[0].band_history.last7days_join_member_count}},_activityByDaySummaryTxt:function(){if(!this.activityBandSummary[0]||t.isEmpty(this.activityBandSummary[0])||!this.activityBandSummary[0].weekly_activity_map)return"";var e=this.activityBandSummary[0].weekly_activity_map,n=t.max(e,(function(e){return e.visitor_count})).visitor_count,i=t.map(e,(function(e,t){return{visitor_count:e.visitor_count,day:t}})).filter((function(e,t){return e.dayActivityText="<strong>"+x().day(t+1).format("dddd")+"</strong>",e.visitor_count>=n}));if(0===i.length)return"";var s=t.pluck(i,"dayActivityText");return IM("band_intro.activity.summary_txt",{info:s.join(", ")})},_generateChartForBandDayStats:function(){N.bb.generate({bindto:this.getUI("bandIntroChart").selector,size:{width:496,height:225},grid:{y:{show:!0}},axis:{x:{type:"category",tick:{outer:!1},categories:this._getDayOfWeek()},y:{tick:{count:6},show:!1}},legend:{hide:!0},tooltip:{position:function(e,t,n,s){var a=i(this.mainCircle.selectAll()._parents[e[0].index]),o=a.get(0).getBoundingClientRect();return{left:parseInt(a.attr("x"))+o.width/2,top:parseInt(a.attr("y"))-23}}},point:{focus:{expand:{enabled:!1}},pattern:['<g fill="none" fill-rule="evenodd" xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="6" fill="#ff8758"/><circle cx="6" cy="6" r="3" fill="#fff"/></g>']},data:{type:"line",columns:[["cmember"].concat(this._getDayOfWeekActivity(this.activityBandSummary[0].weekly_activity_map))]},line:{classes:["line-chart"]},onrendered:function(){this.main.selectAll(".line-chart").style("stroke-width",2),this.main.selectAll(".line-chart").style("stroke","#ff8758"),this.main.selectAll(".bb-shape").style("stroke","#ff8758"),this.main.selectAll(".bb-axis-x line").style("opacity",0),this.main.selectAll(".bb-axis-x text").style("fill","#888").style("font-size","12px"),this.main.selectAll(".bb-axis-x .domain").style("stroke","#eee"),this.main.selectAll(".bb-ygrids .bb-ygrid").style("stroke-dasharray",0),this.main.selectAll(".bb-ygrids .bb-ygrid").style("stroke","#eee"),this.main.selectAll(".bb-event-rects .bb-event-rect").style("stroke","transparent"),this.main.selectAll(".bb-xgrid-focus").style("display","none")}})},_getConnectedPageBandList:function(){return!this.connectedPageBandList||this.connectedPageBandList.length<=0?[]:t.map(this.connectedPageBandList,t.bind((function(e){return{profileImage:D.makeProfileMiddleThumbnailUrl(e.band.profile_image),bandNo:e.band.band_no,memberCount:e.band.member_count,description:e.band.description,pageBandName:e.band.name,pageBandUrl:L.PAGE_BAND_HOME.makeUrl({band_no:e.band.band_no}),isMember:e.member.is_member,isMemberStateText:e.member.is_member?IM("page_band.label.subscribed"):IM("page_band.label.subscribe_short")}}),this))},_subscribePage:function(e){var n=i(e.target).data("bandno"),s=P.build({onBandJoinCompleted:t.bind((function(){i(e.target).removeClass("_subscribePage").addClass("-disabled _unsubscribePage").text(IM("page_band.label.subscribed"))}),this)});s.startJoinFromBand(n),s.destroy()},_unsubscribePage:function(e){var n=i(e.target).data("bandno");this.leavePageBandWithoutConfirmAndPageMove(n).then(t.bind((function(){i(e.target).removeClass("_unsubscribePage").addClass("-disabled _subscribePage").text(IM("page_band.label.subscribe_short"))}),this))},_showLocalBandInfo:function(){var e=this.getRegion("localBandInfoRegion");k.show(e,{bandData:this.bandData,className:"introOptionBox"})},_showUpcomingLocalMeetupScheduleList:function(){var e=this.getRegion("upcomingLocalMeetupScheduleListRegion");V.show(e,{bandData:this.bandData,isSummaryView:this.isSummaryView})},_showAttachedFileListView:function(){var e=this.getRegion("attachedFileListRegion");F.show(e,{bandData:this.bandData,bandIntroModel:this.bandIntroModel,isSummaryView:this.isSummaryView})},_showMediaList:function(){var e=this.getRegion("bandIntroMediaListRegion");S.show(e,{bandNo:this.bandNo,bandIntroModel:this.bandIntroModel,wrapperClassNames:"introPhoto gMat22 gPal2"})},_getIntroDescription:function(e){var n=o.nl2br(t.escape(e));return n=n.replace(/(<br>)+/g,"<br>"),t.isEmpty(n)||(n=o.linkTextReplace(n,b.OUTER_LINK)),n},_getBandKeywordsWithKeywordGroups:function(){var e=this.bandIntroModel.getBandKeywordsWithKeywordGroups(),n=[];return t.each(e,(function(e){n.push({keyword:e.keyword,group:e.keywordGroups[0]})})),n},_getLocation:function(){var e=this.bandData.getLocation();return e?e.name?e.name:e.address:""},_openKeywordGroup:function(e){if(!this._canOpenKeywordGroup())return!1;var t=i(e.currentTarget),n=t.data("group"),s=t.data("keyword"),a=p.GLOBAL_KEYWORD_GROUP.makeUrl({group:encodeURIComponent(n),keyword:encodeURIComponent(s)});this.jplClick(v.CLASSIFIER.KEYWORD_ITEM,{band_no:this.bandNo,keyword_id:s,keyword_group_id:n}),window.open(a,"_blank")},_canOpenKeywordGroup:function(){return h.canAccessBandSearchForGuardianship()&&h.canSearchQualificationByAge()},_openMap:function(){var e=this.bandData.getLocation(),t=e.latitude,n=e.longitude,i=l.getLargeMapUrl(t,n);return window.open(i,"_blank"),!1},_toggleMoreMenuLayer:function(){this.getUI("moreMenuLayer").toggle(),this._initCopyUrl()},_moveToModifyIntro:function(){this.trigger(z.MODIFY_INTRO)},_showBusinessIDInfo:function(){g.openDBusinessIdentificationInfoView({bandNo:this.bandNo})},_refreshBandData:function(){this.bandData.resetBandDataState(),this.bandData.loadBandData()},_reportBand:function(){C.openBandReportPopup(this.bandNo)},_initCopyUrl:function(){if(!this._bandUrlClipboard&&!this._bandIntroUrlClipboard){this._bandUrlClipboard=new I(this.getUI("btnCopyBandUrl")[0]);var e=this.bandData.getBandWebUrl();if(this._bandUrlClipboard.on("success",(function(e){alert(IM("copy_url.success"))})),this._bandUrlClipboard.on("error",(function(t){w.open(E.buildDBandAddressView(e))})),!this.bandIntroModel.isRecruiting()){this._bandIntroUrlClipboard=new I(this.getUI("btnCopyBandIntroUrl")[0]);var t=r.appendCurrentDomainOnPathUrl(m.GROUP_BAND_INTRO.makeUrl({band_no:this.bandNo}));this._bandIntroUrlClipboard.on("success",(function(e){alert(IM("copy_url.success"))})),this._bandIntroUrlClipboard.on("error",(function(e){w.open(E.buildDBandAddressView(t))}))}}}});return H.EVENT=z,H.build=function(e){return new H({bandData:e.bandData,isSummaryView:e.isSummaryView,showMoreOptionMenu:e.showMoreOptionMenu,jplSceneId:e.jplSceneId||null})},H}.call(t,n,t,e))||(e.exports=i)},1540:function(e,t,n){var i,s;i=[n(0),n(4),n(1827)],void 0===(s=function(e,t,n){var i=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandAddressView"},template:e.template(n),ui:{btnClose:"._btnClose",btnDoNotClose:"._btnDoNotClose",bandAddressInput:"#bandAddressInput"},events:{"click @ui.btnClose":"destroy","click @ui.btnDoNotClose":function(){return!1}},serializeData:function(){return{bandUrl:this.options.bandUrl}},onAttach:function(){this.ui.bandAddressInput.focus().select()}});return i.buildDBandAddressView=function(e){return new i({bandUrl:e})},i}.apply(t,i))||(e.exports=s)},1541:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1828),a=n(1014),o=n(685),l=n(155),r=i.View.extend({tagName:"div",className:function(){return this.options.className||""},attributes:{"data-viewname":"DGroupBandLocalBandInfoView"},template:t.template(s),modelEvents:{change:"render"},events:{"click ._btnLocalKeyword":function(e){var t=this.model.getLocalKeywordLinkUrl();this.model.get("keywordLinkUrl")!==t&&(e.preventDefault(),PageUtil.go(t))}},initialize:function(e){this.listenTo(e.bandData,l.UPDATE_EVENT.ANY,(function(){this.model.resetAttrs()}))}});return r.show=function(e,t){var n=o.build(t.bandData);if(n.canShowLocalBandInfo()&&e){e.hasView()&&e.empty();var i=new r({model:a.build(t.bandData,n),bandData:t.bandData,className:t.className});return e.show(i),i}},r}.call(t,n,t,e))||(e.exports=i)},1542:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1833),a=n(590);return i.View.extend({tagName:"li",className:function(){var e="uFlexItem -grayBox";return this.options.isEditMode||(e+=" gMat9"),e},attributes:{"data-viewname":"DBandIntroFileListItemView"},template:t.template(s),templateContext:function(){return{isEditMode:this._isEditMode}},events:{"click ._btnDownload":function(e){e.preventDefault(),this.model.getFileUrl(this._bandNo).then(t.bind((function(e){e&&(this.model.get("isDropboxFile")?window.open(e,"_blank"):location.href=e)}),this))},"click ._btnDelete":function(e){a.isContentCreationPunished()||this.model.collection.remove(this.model)}},initialize:function(e){this._bandNo=e.bandNo,this._isEditMode=e.isEditMode}})}.call(t,n,t,e))||(e.exports=i)},1543:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(1544),o=n(26),l=n(852),r=n(1569),d=n(1545),c=n(618),h=n(158),u=n(13),p=[r.LIVE_MORE_OPTION.COPY_LIVE_URL,r.LIVE_MORE_OPTION.SHARE_LIVE,r.LIVE_MORE_OPTION.REPORT_LIVE,r.LIVE_MORE_OPTION.OFF_LIVE_FORCIBLY],m=[r.LIVE_MORE_OPTION.COPY_LIVE_URL,r.LIVE_MORE_OPTION.SHARE_LIVE,r.LIVE_MORE_OPTION.HIDE_BAND_FROM_FEED,r.LIVE_MORE_OPTION.REPORT_LIVE,r.LIVE_MORE_OPTION.OFF_LIVE_FORCIBLY],_="-ellipsis",b=114,g=s.View.extend({tagName:"div",className:"gBoxShadow",attributes:{"data-viewname":"DLiveCardView"},template:t.template(a),templateContext:function(){return{formattedViewerCount:i.numberFormat(this.model.getViewerCount(),0),convertedDescription:this._convertLiveDescription()}},behaviors:function(){return[{behaviorClass:r,moreOptionListRegionName:"moreOptionListRegion"}]},ui:{textDescription:"._textDescription",btnDescriptionFoldUnfold:"._btnDescriptionFoldUnfold",moreButton:"._moreButton"},regions:{moreOptionListRegion:{el:"._moreOptionListRegion",replaceElement:!0},liveCreatorProfileRegion:{el:"._liveCreatorProfileRegion",replaceElement:!0},liveCardVideoPlayRegion:{el:"._liveCardVideoPlayRegion",replaceElement:!0},feedLiveCardVideoPlayRegion:{el:"._feedLiveCardVideoPlayRegion",replaceElement:!0}},events:{"click @ui.btnDescriptionFoldUnfold":function(e){var t,n=this.getUI("textDescription");n.toggleClass(_),t=n.hasClass(_)?"..."+IM("ui.label.more.long"):IM("ui.label.collapse"),this.getUI("btnDescriptionFoldUnfold").text(t)},"click @ui.moreButton":function(e){e.stopPropagation(),this.getRegion("moreOptionListRegion").hasView()?this._hideMoreOptionList():(o.getDGlobalChannel().trigger(o.EVENT.HTML_CLICK),this._showMoreOptionList())}},serializeData:function(){return this.model.toJSON()},initialize:function(e){this._isFeedLiveCard=e.isFeedLiveCard,this._isFeedLiveCard||this.listenTo(o.getLiveChannel(),o.EVENT.LIVE_CLOSED,(function(e){this.model.getLiveBandNo()==e.bandNo&&this.model.getLiveId()==e.liveId&&this.destroy()}))},onAttach:function(){this._showLiveCardVideoPlayView(),this._showLiveCreatorProfileView(),this._initDescriptionArea(),this.listenTo(o.getDGlobalChannel(),o.EVENT.HTML_CLICK,this._hideAllLayer)},_initDescriptionArea:function(){if(this.model.getLiveDescription()){var e=this.getUI("textDescription"),t=this.getUI("btnDescriptionFoldUnfold");e.height()>b?(e.addClass(_),t.show()):(e.removeClass(_),t.hide())}},_convertLiveDescription:function(){var e=this.model.getLiveDescription();if(i.isBlank(e))return"";var n=e.replace(/^\s*[\r\n]/gm,"");return h.nl2br(t.escape(n))},_hideAllLayer:function(){this._hideMoreOptionList()},_showLiveCardVideoPlayView:function(){this._getLiveCardVideoPlayRegion().show(d.buildLiveCardVideoPlayView(this.model))},_getLiveCardVideoPlayRegion:function(){return this._isFeedLiveCard?this.getRegion("feedLiveCardVideoPlayRegion"):this.getRegion("liveCardVideoPlayRegion")},_showLiveCreatorProfileView:function(){var e=this.model.getLiveCreator();this.showChildView("liveCreatorProfileRegion",c.buildContentCreatorProfileImageView({memberProfile:e.getMemberProfile(),userNoOrMemberKey:e.getUserNo()||e.getContentAuthorMemberKey(),bandCore:this.model.getBandCore(),role:e.getRole().name}))},_showMoreOptionList:function(){var e=!this.model.getLiveMe()&&this.model.fetchLive();$.when(e).then(t.bind((function(){this.trigger(r.LISTENING_EVENTS.OPTION_LIST_OPEN,{liveModel:this.model,moreOptionList:this._isFeedLiveCard?m:p})}),this))},_hideMoreOptionList:function(){this.trigger(r.LISTENING_EVENTS.OPTION_LIST_CLOSE)}});return g.showBandLiveCardView=function(e,t,n){e&&n&&u.isLogedIn()&&(e.empty(),l.buildEmptyLiveModel(t.bandNo,n).fetchLive().then((function(t){e.show(new g({isFeedLiveCard:!1,model:t}))})))},g.buildFeedLiveCardView=function(e){return new g({isFeedLiveCard:!0,model:e})},g}.call(t,n,t,e))||(e.exports=i)},1544:function(e,t){e.exports='<div class="cContentsCard" style="margin-bottom: 11px;">\n    <div class="liveCard">\n\n        <% // 개별밴드 홈에서 라이브 비디오 영역 %>\n        <div class="_liveCardVideoPlayRegion"></div>\n\n        <% // 라이브 인트로 영역 %>\n        <div class="liveIntroArea">\n            <div class="profileBox gPat11">\n                <div class="profileThumb">\n                    <% // live creator 프로필 영역 %>\n                    <span class="_liveCreatorProfileRegion"></span>\n                </div>\n                <div class="profileInfoBox gMat2">\n                    <span class="nameInfo">\n                        <%= IM(\'live.viewer_title\', {name: _.escape(creator.name)}) %>\n                    </span>\n                    <% if (viewerCount > 0) { %>\n                    <div class="etcInfo gMat1">\n                        <span class="viewCountInfo"><%= IM(\'live.viewer_count\', {viewerCount: formattedViewerCount}) %></span>\n                    </div>\n                    <% } %>\n                </div>\n            </div>\n            <% // description 영역 - 최대 6줄 나머진 더보기 %>\n            <% if (!!convertedDescription) { %>\n            <div class="explainBox gMat12">\n                <div class="explainText _textDescription"><%= convertedDescription %></div>\n                <button class="btnExplainMore _btnDescriptionFoldUnfold" style="display:none;"><%= \'...\' + IM(\'ui.label.more.long\') %></button>\n            </div>\n            <% } %>\n            <% // 더보기 옵션 영역 %>\n            <div class="moreFunctionBox">\n                <button class="btnMoreFunctionView _moreButton"><%= IM(\'ui.label.more.short\') %></button>\n                <div class="_moreOptionListRegion"></div>\n            </div>\n        </div>\n\n        <% // 피드에서 라이브 비디오 영역 %>\n        <div class="_feedLiveCardVideoPlayRegion"></div>\n\n    </div>\n</div>'},1545:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(1546),o=n(1054),l=n(1570),r=n(1123),d=n(1572),c=n(1547),h=n(1573),u=n(13),p=n(82),m=s.View.extend({behaviors:[{behaviorClass:d,regionName:"livePlayTime",playController:"playController"},{behaviorClass:c,regionName:"bigPlay",playController:"playController"},{behaviorClass:h,regionName:"mutedUI"}],options:{noplay:!1,autoPlay:!0},tagName:"div",className:"videoSection",attributes:{"data-viewname":"DLiveCardVideoPlayView"},initialize:function(){this.playController=void 0},template:t.template(a),templateContext:function(){var e=this.model.getLiveResolution();return{thumbnail:p.make(this.options.model.getLiveThumbnail(),p.TYPE.w520),horizontal:e.width>=e.height}},ui:{video:"video",bigPlay:"._bigPlay",mutedUI:"._mutedUI",livePlayTime:"._livePlayTime",liveMessage:"._liveMessage",videoArea:"._videoArea"},events:{click:function(){o.openOnAirLiveViewerLayer(this.model.getLiveBandNo(),this.model.getLiveId())}},regions:{livePlayTime:{el:"@ui.livePlayTime",replaceElement:!0},bigPlay:{el:"@ui.bigPlay",replaceElement:!0},mutedUI:{el:"@ui.mutedUI",replaceElement:!0}},onRender:function(){this._canPlay()&&(this.playController=new l({video:this.getUI("video")[0],source:t.bind((function(){return this.model.fetchLive().then(t.bind((function(){try{return this.model.getLivePlayInfo().hls.adaptivePlaybackInfo.url}catch(e){return i.Deferred().reject().promise()}}),this))}),this)}),this.listenTo(this.playController,l.EVENT.COMPLETED_PLAYING,(function(){this.getUI("liveMessage").show()})))},onAttach:function(){this._canPlay()&&r.register(this,{autoplay:this._canPlay(),playingType:"video"})},onBeforeDetach:function(){this._canPlay()&&(r.unregister(this),this.playController&&this.playController.destroy())},_canPlay:function(){return!this.getOption("noplay")&&this.getOption("autoPlay")},getLiveModel:function(){return this.model},isPlayReserved:function(){if(this._canPlay())return this.playController.isPlaying()},play:function(){this._canPlay()&&this.playController.play()},pause:function(){this._canPlay()&&this.playController.pause()}});return m.buildLiveCardVideoPlayView=function(e){return new m({model:e,autoPlay:u.getUserConfig().isVideoAutoPlay()})},m}.call(t,n,t,e))||(e.exports=i)},1546:function(e,t){e.exports='<div class="videoArea gMat18 _videoArea">\n    <div class="videoBox">\n        <div class="gaussianblur" style="background-image:url(<%- thumbnail %>);"></div>\n        <div class="liveState _livePlayTime"></div>\n        <div class="_bigPlay"></div>\n        <div class="liveControlBox"></div>\n        <div class="liveVideo">\n            <video muted poster="<%- thumbnail %>"></video>\n        </div>\n        \x3c!-- [D] 종료된 라이브 방송 화면에 안내문구 노출 --\x3e\n        <div class="liveMessageBox _liveMessage" style="display: none;">\n            <div class="liveMessageText"><%-IM("live.status_ended")%></div>\n        </div>\n    </div>\n    <div class="_mutedUI"></div>\n</div>'},1547:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(1184),s=n(1407);return t.Behavior.extend({options:{regionName:"",playController:"playController"},onRender:function(){this.view.showChildView(this.options.regionName,new s),this.listenTo(this._getPlayController(),i.CHANGE_PLAYING,(function(){this._getControlView().toggleBtnDisplay(this._shouldShowBigPlayButton())})),this._getControlView().toggleBtnDisplay(this._shouldShowBigPlayButton())},_shouldShowBigPlayButton:function(){return!(this._getPlayController()&&this._getPlayController().isPlaying())},_getControlView:function(){return this.view.getChildView(this.options.regionName)},_getPlayController:function(){return this.view[this.options.playController]}})}.call(t,n,t,e))||(e.exports=i)},1548:function(e,t,n){var i=n(0),s=n(4),a=n(1844),o=n(1845),l=n(153),r=n(1053),d=n(26),c=n(725),h=n(154),u=n(1598),p="-disabled",m="all",_="popularPost",b="setting",g=s.View.extend({attributes:{"data-viewname":"DBandBoardTagMenuView"},className:"postClassTagSwipe",initialize:function(){this.listenTo(d.getSettingChannel(),d.EVENT.SETTING_TAG_UPDATED,i.bind((function(){this._renderBandHashtag()}),this))},template:i.template(a),ui:{btnSlidePrev:"._btnSlidePrev",btnSlideNext:"._btnSlideNext"},regions:{tagSwipe:{el:"._tagSwipe",replaceElement:!0}},events:{"click @ui.btnSlideNext":"_onClickSlideNext","click @ui.btnSlidePrev":"_onClickSlidePrev"},onRender:function(){this._renderTagSwipe()},onAttach:function(){this._renderBandHashtag()},_renderTagSwipe:function(){var e=this._generateSwipeItems();if(i.some(e,(function(e){return e.id!==b&&e.id!==m}))){this.$el.css("display","");var t=o.buildDBandBoardTagSwipeView(e);this.showChildView("tagSwipe",t),this.listenTo(t,o.EVENT.SLIDE_CHANGED,(function(e){this.getUI("btnSlidePrev").toggleClass(p,e.isBeginning),this.getUI("btnSlideNext").toggleClass(p,e.isEnd)})),this.listenTo(t,o.EVENT.ITEM_CLICKED,(function(e){switch(e){case m:return;case _:return this._goPopularPost();case b:return this._onClickBtnTagSetting();default:return this._onClickBtnTagName(e)}}))}else this.$el.css("display","none")},_renderBandHashtag:function(){h.wrapActivePromise(this._fetchBandTags(),this).then(i.bind((function(){this.render()}),this))},_fetchBandTags:function(){return this.model.fetchBandTagsWithPinned(this.options.bandData.getBandNo())},_generateSwipeItems:function(){var e=i.where(this.model.get("bandTags"),{is_pinned:!0}),t=[];return this.options.isAllPost&&t.push({id:m,active:this.options.isAllPost,label:IM("web.common.total_posts")}),this.options.bandData.canAccessPopularPost()&&t.push({id:_,active:this.options.isPopularPost,label:IM("band.popular_post.title")}),t=t.concat(i.map(e,(function(e){return{id:e.hashtag,active:e.hashtag===this.options.tag,label:e.hashtag}}),this)),this.options.bandData.canManagePinnedHashTag()&&t.push({id:b,active:!1,label:IM("band.taglist.setting.label"),anchorClass:"-setting "}),t},_onClickSlidePrev:function(){this.getUI("btnSlidePrev").hasClass(p)||this.getChildView("tagSwipe").slidePrev()},_onClickSlideNext:function(){this.getUI("btnSlideNext").hasClass(p)||this.getChildView("tagSwipe").slideNext()},_onClickBtnTagName:function(e){var t=encodeURIComponent(r.decodeQuery(e).replace(/^\#/,""));l.GROUP_BAND_HASHTAG.goDForced({band_no:this.options.bandData.getBandNo(),query:t})},_onClickBtnTagSetting:function(){u.buildAsLayer(this.options.bandData.getBandNo(),this.options.bandData)},_goPopularPost:function(){l.GROUP_BAND_POPULAR.goDForced({band_no:this.options.bandData.getBandNo()})}});g.buildDBandBoardTagMenuView=function(e,t){var n=new c;return new g({tag:t.tag,isPopularPost:t.isPopularPost,isAllPost:t.isAllPost,model:n,bandData:e})},e.exports=g},1549:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(26),s=n(1248);return{openScheduleEditAsLayerForCreation:function(e,n){var i=s.openScheduleEditLayer(e);return n.listenTo(i,s.EVENT.SCHEDULE_EDIT_COMPLETE,t.bind((function(e){this._handleSubmit({editLayer:i,scheduleEditModel:e.scheduleEditModel,bandNo:e.bandNo,announceable:e.announceable})}),this)),i},_handleSubmit:function(e){var t=e.scheduleEditModel.toScheduleModel(e.bandNo),n=e.announceable,s=e.editLayer;t.createSchedule(n).then((function(){i.getDGlobalChannel().trigger(i.EVENT.SCHEDULE_UPDATED,{bandNo:e.bandNo,scheduleId:t.getScheduleId()}),s.destroy()})).fail((function(){s.stopSubmitPending()}))}}}.call(t,n,t,e))||(e.exports=i)},1550:function(e,t,n){var i=n(0),s=n(4),a=n(83),o=n(510),l=n(1235),r=n(157),d=n(543),c=n(1884),h=n(1534),u=n(1886),p=n(53),m=n(553),_=s.Behavior.extend({initialize:function(){this.view.deleteGroupBand=i.bind(this._deleteGroupBand,this),this.view.openDeleteReservationCancelView=i.bind(this._openDeleteReservationCancelView,this)},_deleteGroupBand:function(e,t){a.leaveBand(e.getBandCore().bandNo).then((function(e){console.error(e)}),i.bind((function(n){switch(n.result_code){case d.LEAVE_STATE_CODE.LEADER_CAN_LEAVE:this._confirmAndForceDelete(e,t);break;case d.LEAVE_STATE_CODE.GROUP_BAND_LEADER_REQUIRE_DELEGATE:if(p.getCurrentRouteInfo().routeInfo.isLfgBandRoutingAreaRouteInfo())return void this._confirmAndGoMemberWithdrawal(e);this._openDeleteSelectView(e,t);break;case d.LEAVE_STATE_CODE.COLEADER_CAN_LEAVE:case d.LEAVE_STATE_CODE.COLEADER_REQUIRE_DELEGATE:case d.LEAVE_STATE_CODE.MEMBER_CAN_LEAVE:case d.LEAVE_STATE_CODE.PAGE_BAND_REQUIRE_DELEGATE:default:alert(n.result_data.message)}}),this))},_confirmAndForceDelete:function(e,t){var n=o.openLayer({headerTitle:IM("bandsetting.band_delete.title"),bodyDesc:IM("bandsetting.band_delete.txt.description"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")});this.listenTo(n,o.EVENTS.CONFIRM,(function(){if(t){var n=this._confirmLostBoughtQuotaView();this.listenTo(n,"modal:confirm",(function(){this._completeBandDeleting(e)}))}else this._completeBandDeleting(e)}))},_confirmLostBoughtQuotaView:function(){return l.openAsLayer({title:IM("bandsetting.band_delete.title"),desc:IM("band_delete.confirm.no_refund"),closeLayer:IM("ui.label.close_layer"),confirm:IM("ui.label.confirm"),confirmCheckboxDescription:IM("band_leave.confirm.checked")})},_completeBandDeleting:function(e){return a.leaveBand(e.getBandCore().bandNo,!0).then((function(){e.resetBandDataState(),r.GLOBAL_HOME.goDForced()}))},_confirmAndGoMemberWithdrawal:function(e){var t=o.openLayer({headerTitle:IM("bandsetting.band_delete.title"),bodyDesc:IM("bandsetting.band_delete_impossible.confirm.desc"),confirm:IM("bandsetting.label.manage_member")});this.listenTo(t,o.EVENTS.CONFIRM,(function(){m.memberWithdrawal(e.getBandCore()).go()}))},_openDeleteSelectView:function(e,t){var n=c.openAsLayer(e);this.listenTo(n,c.EVENT.DELETE_RESERVED,i.bind((function(){if(t){var n=this._confirmLostBoughtQuotaView();this.listenTo(n,"modal:confirm",(function(){this._openBandDeleteReservationView(e)}))}else this._openBandDeleteReservationView(e)}),this))},_openBandDeleteReservationView:function(e){var t=u.openAsLayer(e.getBandNo());this.listenTo(t,u.EVENT.CONFIRM,i.bind((function(){this._refreshBandDatAndRender(e)}),this))},_openDeleteReservationCancelView:function(e){var t=h.openAsLayer(e,!0);this.listenTo(t,h.EVENT.CONFIRM,i.bind((function(){this._refreshBandDatAndRender(e)}),this))},_refreshBandDatAndRender:function(e){e.resetBandDataState(),e.loadBandData().then(i.bind((function(){this.view.render()}),this))}});e.exports=_},1551:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3420),a=n(3421),o=n(1171),l=o.PERMISSION_GROUP,r=o.PERMISSION,d=o.PERMISSION_ID,c={CHANGED:"CHANGED"},h=i.View.extend({tagName:"li",className:"sSettingItem",attributes:{"data-viewname":"DMemberPermissionSettingItemView"},template:t.template(s),templateContext:function(){return{desc:this.model.get("desc"),selectedPermissionGroupName:l[this.options.selectedOption.permissionGroupId].name}},ui:{txtSelectedPermissionGroupName:"._txtSelectedPermissionGroupName",btnChange:"._btnChange"},events:{"click @ui.btnChange":function(e){var n=this._selectedOption;a.openLayerAsync({bandNo:this._bandNo,bandOptionModel:this._bandOptionModel,permissionId:this.model.get("id"),selectedOption:n}).then(t.bind((function(e){this.listenToOnce(e,a.EVENTS.CONFIRM,(function(e){this._selectedOption=e;var t=l[this._selectedOption.permissionGroupId];this.getUI("txtSelectedPermissionGroupName").text(t.name),this._toggleChatToManagerPermissionSettingItemView(),this.trigger(c.CHANGED,this._selectedOption)}))}),this))}},initialize:function(e){this._bandNo=e.bandNo,this._bandOptionModel=e.bandOptionModel,this._selectedOption=e.selectedOption,this._index=e.index},onAttach:function(){this._toggleChatToManagerPermissionSettingItemView()},getSelectedPermissionOption:function(){return this._selectedOption},_toggleChatToManagerPermissionSettingItemView:function(){this.model.get("id")===d.INVITE_CHAT&&(l[this._selectedOption.permissionGroupId].level<=l.LEADER_AND_MEMBER_GROUPS.level?this.model.collection.add(r.CHAT_TO_MANAGER,{at:this._index+1}):this.model.collection.remove(r.CHAT_TO_MANAGER))}});return h.EVENTS=c,h.build=function(e){return new h({model:new Backbone.Model(e.permission),bandNo:e.bandNo,bandOptionModel:e.bandOptionModel,selectedOption:e.selectedOption})},h}.call(t,n,t,e))||(e.exports=i)},1552:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(16),o=n(52),l=n(486),r=n(600),d=n(507),c=n(537),h=n(153),u=n(804),p=n(782),m=n(554),_=n(1116),b=n(165),g=n(1146),f=n(739),v=n(1524),A=n(1925),M=n(1926),C=n(177),I=n(154),E=n(158),y=n(935),T=s.View.extend({attributes:{"data-viewname":"DBandMissionEditView"},tag:"section",className:"lyWrap",ui:{missionName:"._missionName",btnLoadMission:"._btnLoadMission",missionStartAtInputRegion:"._missionStartAtInputRegion",missionCreateTimezoneRegion:"._missionCreateTimezoneRegion",goodMissionExAttacheMediaRegion:"._goodMissionExAttacheMediaRegion",badMissionExAttacheMediaRegion:"._badMissionExAttacheMediaRegion",btnSetTimezone:"._btnSetTimezone",selectMissionDuration:"._selectMissionDuration",selectMissionFrequency:"._selectMissionFrequency",missionDescription:"._missionDescription",goodMissionExUploader:"._goodMissionExUploader",goodMissionExFakeUploader:"._goodMissionExFakeUploader",badMissionExUploader:"._badMissionExUploader",badMissionExFakeUploader:"._badMissionExFakeUploader",goodMissionExContents:"._goodMissionExContents",badMissionExContents:"._badMissionExContents",btnClose:"._btnClose",btnConfirmCreateMission:"._btnConfirmCreateMission",btnMissionDelete:"._btnMissionDelete",btnMissionEnd:"._btnMissionEnd",goodUploadArea:"._goodUploadArea",badUploadArea:"._badUploadArea"},regions:{missionStartAtInputRegion:{el:"@ui.missionStartAtInputRegion",replaceElement:!0},missionCreateTimezoneRegion:{el:"@ui.missionCreateTimezoneRegion",replaceElement:!1},goodMissionExAttacheMediaRegion:{el:"@ui.goodMissionExAttacheMediaRegion",replaceElement:!0},badMissionExAttacheMediaRegion:{el:"@ui.badMissionExAttacheMediaRegion",replaceElement:!0}},events:{"click @ui.btnLoadMission":"_getMyMission","click @ui.missionStartAt":"_toggleMissionStartAt","click @ui.btnSetTimezone":"_showTimezone","click @ui.btnClose":function(){(!this._isChangeContents()||this._isChangeContents()&&window.confirm(IM("my_profiles.confirm.cancel")))&&this.destroy()},"click @ui.btnConfirmCreateMission":"_editConfirmMission","click @ui.btnMissionDelete":"_missionDelete","click @ui.btnMissionEnd":"_missionEnd","click @ui.goodMissionExFakeUploader":"_fakeGoodMissionExUploaderClick","click @ui.badMissionExFakeUploader":"_fakeBadMissionExUploaderClick","input @ui.missionName":"_toggleSubmitButton","change @ui.selectMissionDuration":"_changeDuration","change @ui.selectMissionFrequency":"_toggleSubmitButton","input @ui.missionDescription":"_toggleSubmitButton","input @ui.goodMissionExContents":"_toggleSubmitButton","input @ui.badMissionExContents":"_toggleSubmitButton"},template:t.template(A),templateContext:function(){return{missionDurations:this._getDurationOptions(),missionFrequency:t.map(m.MISSION_FREQUENCY,(function(e){return{confirmFrequency:e,label:f.getBandMissionConfirmFrequencyText(e)}})),isPossibleMissionDelete:this.model.isPossibleMissionDelete(),isPossibleMissionEnd:this.model.isPossibleMissionEnd(),isGoingMission:this._isGoingMission,nowDurationDays:f.getBandMissionDurationText(this.model.getBandMissionDuration()),missionWillEndDate:IM("bandsetting.mission.will.end.date",{dateTime:f.getBandMissionManualEndDateText(this.model)}),settingDuration:this.model.getBandMissionDuration(),settingFrequency:this.model.getBandMissionConfirmFrequency(),isRecruitingBand:this._isRecruitingBand,nl2br:E.nl2br}},initialize:function(e){this._bandNo=e.bandNo,this._isModelChange=!1,this._timezoneId=this.model.getMissionId()?this.model.getBandMissionTimeZoneId():b.getCurrentTimezoneId(),this._missionStartAt=this.model.getMissionId()?a.tz(this.model.getBandMissionStartAt(),this._timezoneId).valueOf():a.tz(this._timezoneId).add({days:1}).startOf("day").valueOf(),e.isRecruitingBand&&(this._isRecruitingBand=e.isRecruitingBand,this._missionStartAt=null),this._isGoingMission=(this.model.isPossibleMissionEnd()||this.model.isPossibleMissionCancelEnd())&&!this._isRecruitingBand,this.listenTo(this.model,"remove:good:example:media",this._showDisabledGoodUploader),this.listenTo(this.model,"remove:bad:example:media",this._showDisabledBadUploader),this._currentUploadedGoodMediaCount=0,this._currentUploadedBadMediaCount=0,this._attachedGoodFile=this.model.getMissionId()?this.model.getMissionGoodExamplePhotoOrVideo():[],this._attachedBadFile=this.model.getMissionId()?this.model.getMissionBadExamplePhotoOrVideo():[],this._onGoingMissionChangeDuration=!1,this._timezoneSelectView=null,this._setDirectInput=!1},onAttach:function(){this.getUI("missionDescription").elastic(),this.getUI("goodMissionExContents").elastic(),this.getUI("badMissionExContents").elastic(),this._toggleSubmitButton(),this._initManuallyEnded(),this.model.getMissionId()&&this._showTimezone()},onRender:function(){this._toggleMissionStartAt(),this._showExMediaList(),this._createGoodMissionExUploader(),this._createBadMissionExUploader(),this._directCertificationDurationSetting()},_initManuallyEnded:function(){this.model.getBandMissionIsManuallyEnded()&&(this.getUI("missionName").attr("disabled",!0),this.getUI("missionDescription").attr("disabled",!0),this.getUI("goodMissionExContents").attr("disabled",!0),this.getUI("goodMissionExFakeUploader").parent(".iconBtn").addClass("-disabled"),this.getUI("goodMissionExFakeUploader").attr("disabled",!0),this.getUI("goodMissionExUploader").attr("disabled",!0).hide(),this.getUI("badMissionExContents").attr("disabled",!0),this.getUI("badMissionExFakeUploader").parent(".iconBtn").addClass("-disabled"),this.getUI("badMissionExFakeUploader").attr("disabled",!0),this.getUI("badMissionExUploader").attr("disabled",!0).hide())},_getDurationOptions:function(){var e=this.model.getBandMissionStartAt(),n=e?Date.now()-e:0,i=t.filter(m.MISSION_DURATIONS,(function(e){return e>n}));return t.map(i,t.bind((function(e){return{duration:e,label:f.getBandMissionDurationText(e)}}),this))},_directCertificationDurationSetting:function(){var e=this.model.getBandMissionDuration(),n=this.getUI("selectMissionDuration");t.some(this._getDurationOptions(),(function(t){return e==t.duration}))?n.append(new Option(IM("setting.direct_period_setting"))):(this._setDirectInput=!0,n.append(new Option(IM("setting.direct_period_setting.count",{day:e/m.DAY_MS}),e)),n.children().last().attr("selected",!0))},_toggleSubmitButton:function(){this._isChangeContents()&&this._validateMission()?this.getUI("btnConfirmCreateMission").removeClass("-disabled").attr("disabled",!1):this.getUI("btnConfirmCreateMission").addClass("-disabled").attr("disabled",!0)},_toggleGoodUploadArea:function(){this.getUI("goodUploadArea").toggleClass("-on",this.model.hasGoodExample())},_toggleBadUploadArea:function(){this.getUI("badUploadArea").toggleClass("-on",this.model.hasBadExample())},_isChangeContents:function(){return!this._compareWithMissionModel()||this._isModelChange},_toggleMissionStartAt:function(){this._isRecruitingBand||(this._missionStartAtDateInputView=_.buildDDateInputView({date:a.tz(this._missionStartAt,this._timezoneId).format("YYYY-MM-DD"),canTextEdit:!1,disable:this._isGoingMission,dateValidator:{isValid:t.bind(this._isValidDate,this),getMinDate:t.bind((function(){return a.tz(this._timezoneId).add(-1,"days")}),this),getMaxDate:t.bind((function(){return a.tz(this._timezoneId).add(89,"days")}),this)}}),this.getRegion("missionStartAtInputRegion").show(this._missionStartAtDateInputView),this.listenTo(this._missionStartAtDateInputView,_.EVENT.DATE_CHANGED,t.bind((function(){var e=a.tz(this.getChildView("missionStartAtInputRegion").getValue(),this._timezoneId);this._missionStartAt=e.valueOf(),this._toggleSubmitButton()}),this)))},_isValidDate:function(e){var t=this._timezoneId,n=a.tz(t).add(89,"d").startOf("day"),i=a.tz(t).add(0,"d").startOf("day"),s=a.tz(e.format("YYYY-MM-DD"),t);return n.diff(s)<0?(alert(IM("band_mission.start_at.limit.maximum_days")),!1):!(s.diff(i)<0)||(alert(IM("postwrite.attach.poll.alert_invalid_ended_at")),!1)},_isValidTimezoneChangeDate:function(e){var t=this._timezoneId,n=a.tz(t).add(89,"d").startOf("day"),i=a.tz(t).add(0,"d").startOf("day"),s=a.tz(e.format("YYYY-MM-DD"),t);return n.diff(s)<0?(this._missionStartAt=n.valueOf(),!1):!(s.diff(i)<0)||(this._missionStartAt=i.valueOf(),!1)},_showTimezone:function(){this._timezoneSelectView||(this._timezoneSelectView=new g({timezoneId:this._timezoneId}),this.getRegion("missionCreateTimezoneRegion").show(this._timezoneSelectView),this.getUI("missionCreateTimezoneRegion").show(),this._isGoingMission&&(this._timezoneSelectView.getUI("countrySelect").attr("disabled",!0),this._timezoneSelectView.getUI("timezoneSelect").attr("disabled",!0)),this.listenTo(this._timezoneSelectView,g.EVENT.TIMEZONE_CHANGED,t.bind((function(e){this._timezoneId=e;var t=a.tz(this.getChildView("missionStartAtInputRegion").getValue(),e).startOf("day");this._missionStartAt=t.valueOf(),this._isValidTimezoneChangeDate(t)||(this._missionStartAtDateInputView.destroy(),this._toggleMissionStartAt()),this._toggleSubmitButton()}),this)))},_changeDuration:function(){if(this.getUI("selectMissionDuration").children("option:selected").text()===this.getUI("selectMissionDuration").children().last().text()){var e=this._missionStartAt,t=Date.now()>e?Date.now()-e:0,n=parseInt(t/m.DAY_MS),s=n+1,a=y.openDPromptModalView({title:IM("setting.direct_period_setting"),desc:IM("mission_setting.direct_period_setting.modify.guide_desc",{day:s.toString()}),maxlength:m.MISSION_SETTING.DIRECT_PERIOD_MAX_LENGTH,validation:function(e){if(i.isNumeric(e)){var t=parseInt(e.replace(/^0+/,""));return t>n&&t<366}return!1}});return this.listenTo(a,"modal:confirm",(function(e){this._validNumber=parseInt(e.replace(/^0+/,"")),this._setDirectInput=!0,this._changeDurationConfirm()})),!1}this._setDirectInput=!1,this._changeDurationConfirm()},_changeDurationConfirm:function(){if(!this._isRecruitingBand&&this.model.isPossibleMissionEnd()&&this.model.getBandMissionDuration()!==parseInt(this.getUI("selectMissionDuration").val())){if(!this._onGoingMissionChangeDuration&&!window.confirm(IM("band_mission.update.before.msg")))return this.getUI("selectMissionDuration").val(this.model.getBandMissionDuration()).attr("selected","selected"),!1;this._onGoingMissionChangeDuration=!0}this._setDirectInput?this._directDurationOptionChange():this._directDurationOptionInit(),this._toggleSubmitButton()},_directDurationOptionInit:function(){this.getUI("selectMissionDuration").children().last().remove(),this.getUI("selectMissionDuration").append(new Option(IM("setting.direct_period_setting")))},_directDurationOptionChange:function(){this.getUI("selectMissionDuration").children().attr("selected",!1),this.getUI("selectMissionDuration").children().last().remove(),this.getUI("selectMissionDuration").append(new Option(IM("setting.direct_period_setting.count",{day:this._validNumber}),864e5*this._validNumber)),this.getUI("selectMissionDuration").children().last().attr("selected",!0)},_showExMediaList:function(){this._hideDisabledGoodUploader(),this._hideDisabledBadUploader(),this.getRegion("goodMissionExAttacheMediaRegion").show(new v({bandMissionModel:this.model,exType:"good"})),this.getRegion("badMissionExAttacheMediaRegion").show(new v({bandMissionModel:this.model,exType:"bad"}))},_createGoodMissionExUploader:function(){this._destroyGoodMissionExUploader(),this._currentUploadedGoodMediaCount=this.model.getMissionGoodExamplePhotoOrVideo().length,this._goodMissionExUploader=r.createPhotoOrVideoUploader(this.getUI("goodMissionExUploader"),{showProgress:!0,duplicate:!0,autoUpload:!0,data:{maxRunningSecs:C.VIDEO.MAX_RUNNING_SECS.BAND_MISSION}}),this.listenTo(this._goodMissionExUploader,d.BEFORE_VALIDATE,t.bind((function(){var e={mediaCount:this._currentUploadedGoodMediaCount,maxMediaCount:3};this._goodMissionExUploader.setValidators([t.partial(c.MISSION_PHOTO_OR_VIDEO_VALIDATOR,t,e)])}),this)),this.listenTo(this._goodMissionExUploader,d.UPLOAD_COMPLETE,t.bind((function(e){e.cancelled||(this._currentUploadedGoodMediaCount=this._currentUploadedGoodMediaCount+e.resultList.length,this._addGoodPhotoList(e))}),this))},_fakeGoodMissionExUploaderClick:function(){this.getUI("goodMissionExUploader").find('input[type="file"]').click()},_destroyGoodMissionExUploader:function(){this._goodMissionExUploader&&(this._goodMissionExUploader.destroy(),this._goodMissionExUploader=null)},_createBadMissionExUploader:function(){this._destroyBadMissionExUploader(),this._currentUploadedBadMediaCount=this.model.getMissionBadExamplePhotoOrVideo().length,this._badMissionExUploader=r.createPhotoOrVideoUploader(this.getUI("badMissionExUploader"),{showProgress:!0,duplicate:!0,autoUpload:!0,data:{maxRunningSecs:C.VIDEO.MAX_RUNNING_SECS.BAND_MISSION}}),this.listenTo(this._badMissionExUploader,d.BEFORE_VALIDATE,t.bind((function(){var e={mediaCount:this._currentUploadedBadMediaCount,maxMediaCount:3};this._badMissionExUploader.setValidators([t.partial(c.MISSION_PHOTO_OR_VIDEO_VALIDATOR,t,e)])}),this)),this.listenTo(this._badMissionExUploader,d.UPLOAD_COMPLETE,t.bind((function(e){e.cancelled||(this._currentUploadedBadMediaCount=this._currentUploadedBadMediaCount+e.resultList.length,this._addBadPhotoList(e))}),this))},_fakeBadMissionExUploaderClick:function(){this.getUI("badMissionExUploader").find('input[type="file"]').click()},_destroyBadMissionExUploader:function(){this._badMissionExUploader&&(this._badMissionExUploader.destroy(),this._badMissionExUploader=null)},_addGoodPhotoList:function(e){this._isModelChange=!0,this.model.setMissionGoodExamplePhotoOrVideo(e.resultList),this._hideDisabledGoodUploader("hide"),this.getChildView("goodMissionExAttacheMediaRegion").render()},_addBadPhotoList:function(e){this._isModelChange=!0,this.model.setMissionBadExamplePhotoOrVideo(e.resultList),this._hideDisabledBadUploader(),this.getChildView("badMissionExAttacheMediaRegion").render()},_hideDisabledGoodUploader:function(){3===this.model.getMissionGoodExamplePhotoOrVideo().length&&(this.getUI("goodMissionExFakeUploader").parent(".iconBtn").addClass("-disabled"),this.getUI("goodMissionExFakeUploader").attr("disabled",!0),this.getUI("goodMissionExUploader").hide()),this._toggleSubmitButton(),this._toggleGoodUploadArea()},_showDisabledGoodUploader:function(){this.getUI("goodMissionExFakeUploader").parent(".iconBtn").removeClass("-disabled"),this.getUI("goodMissionExFakeUploader").attr("disabled",!1),this.getUI("goodMissionExUploader").show(),this.getChildView("goodMissionExAttacheMediaRegion").render(),this._currentUploadedGoodMediaCount=this._currentUploadedGoodMediaCount-1,this._toggleSubmitButton(),this._toggleGoodUploadArea()},_hideDisabledBadUploader:function(){3===this.model.getMissionBadExamplePhotoOrVideo().length&&(this.getUI("badMissionExFakeUploader").parent(".iconBtn").addClass("-disabled"),this.getUI("badMissionExFakeUploader").attr("disabled",!0),this.getUI("badMissionExUploader").hide()),this._toggleSubmitButton(),this._toggleBadUploadArea()},_showDisabledBadUploader:function(){this.getUI("badMissionExFakeUploader").parent(".iconBtn").removeClass("-disabled"),this.getUI("badMissionExFakeUploader").attr("disabled",!1),this.getUI("badMissionExUploader").show(),this.getChildView("badMissionExAttacheMediaRegion").render(),this._currentUploadedBadMediaCount=this._currentUploadedBadMediaCount-1,this._toggleSubmitButton(),this._toggleBadUploadArea()},_compareWithMissionModel:function(){var e=this.model.getBandMissionTitle()===this.getUI("missionName").val(),n=this.model.getBandMissionStartAt()===this._missionStartAt,i=this.model.getBandMissionTimeZoneId()===this._timezoneId,s=this.model.getBandMissionDuration()===parseInt(this.getUI("selectMissionDuration").val()),a=this.model.getBandMissionConfirmFrequency()===this.getUI("selectMissionFrequency").val(),o=this.model.getBandMissionDescription()===this.getUI("missionDescription").val(),l=this.model.getMissionGoodExampleContent()===this.getUI("goodMissionExContents").val(),r=this.model.getMissionBadExampleContent()===this.getUI("badMissionExContents").val(),d=t.isEqual(this.model.getMissionGoodExamplePhotoOrVideo(),this._attachedGoodFile),c=t.isEqual(this.model.getMissionBadExamplePhotoOrVideo(),this._attachedBadFile);return e&&n&&i&&s&&a&&o&&l&&r&&d&&c},_validateMission:function(){var e=this.getUI("missionName").val(),n=parseInt(this.getUI("selectMissionDuration").val()),i=this.getUI("selectMissionFrequency").val();return!t.isEmpty(e.trim())&&(!!this._setDirectInput||!(!this.model.getBandMissionIsManuallyEnded()&&!t.contains(m.MISSION_DURATIONS,n))&&!!t.contains(m.MISSION_FREQUENCY,i))},_editConfirmMission:function(){if(this.model.getBandMissionStartAt()&&!this.model.getBandMissionIsManuallyEnded()){var e=this._timezoneId,n=a.tz(this.getChildView("missionStartAtInputRegion").getValue(),e).startOf("day"),i=a.tz(n.format("YYYY-MM-DD"),e),s=a.tz(this._timezoneId).add(0,"d").startOf("day");if(0===i.diff(s)&&!this.model.isOngoingMission()){if(!confirm(IM("band_mission.start.before.confirm_msg")))return!1;this._missionStartAt=i.startOf("day").valueOf()}}if(this._validateMission()){var l={title:this.getUI("missionName").val(),start_at:this._missionStartAt,time_zone_id:this._timezoneId,duration:this.getUI("selectMissionDuration").val(),confirm_frequency:this.getUI("selectMissionFrequency").val(),description:this.getUI("missionDescription").val(),good_example:{content:this.getUI("goodMissionExContents").val(),photo_or_video:o.decamelizeKeys(this.model.getMissionGoodExamplePhotoOrVideo())},bad_example:{content:this.getUI("badMissionExContents").val(),photo_or_video:o.decamelizeKeys(this.model.getMissionBadExamplePhotoOrVideo())}};this._attachedGoodFile=l.good_example.photo_or_video,this._attachedBadFile=l.bad_example.photo_or_video,this._isRecruitingBand?u.updateMissionForRecruitingBand(t.extend(l,{start_at:null}),this._bandNo).then(t.bind((function(e){e.mission&&(this.trigger("editConfirmMission"),this.destroy())}),this)):this.model.getMissionId()?u.updateMission(t.extend(l,{mission_id:this.model.getMissionId()}),this._bandNo).then(t.bind((function(e){e.mission&&(this.trigger("editConfirmMission"),this.destroy())}),this)):u.createMission(l,this._bandNo).then(t.bind((function(e){e.mission&&(this.trigger("editConfirmMission"),this.destroy())}),this))}},_missionDelete:function(){window.confirm(IM("band_mission.delete.before.msg"))&&I.wrapActivePromise(this.model.deleteBandMission(),this).then(t.bind((function(){h.GROUP_BAND_SETTING_MISSION.goDForced({band_no:this._bandNo})}),this))},_missionEnd:function(){var e=this._timezoneId,n=a.tz(this.getChildView("missionStartAtInputRegion").getValue(),e).startOf("day"),i=a.tz(e).startOf("day"),s=a.tz(n.format("YYYY-MM-DD"),e);return 0===i.diff(s,"day")?(alert(IM("band_mission.today.can_not_start")),!1):a.tz(a().format("YYYY-MM-DD"),e).diff(s,"day")>0?(window.confirm(IM("band_mission.end.before.confirm_msg"))&&I.wrapActivePromise(this.model.endBandMissionManually(),this).then(t.bind((function(){h.GROUP_BAND_SETTING_MISSION.goDForced({band_no:this._bandNo})}),this)),!1):void 0},_getMyMission:function(){var e=M.openAsLayer(this._bandNo);this.listenTo(e,M.EVENT.BAND_MISSION_SELECTED,(function(e){if(!this._isChangeContents()||window.confirm(IM("band_mission.import.my_mission.before.msg"))){var t={title:e.get("title"),description:e.get("description"),timeZoneId:e.get("timeZoneId"),confirmFrequency:e.get("confirmFrequency"),duration:e.get("duration"),goodExample:e.get("goodExample"),badExample:e.get("badExample")};this.model.setMyMission(t),this._isModelChange=!0,this.render()}}))}});function N(e,n,i){var s=new T(t.extend({bandNo:e,model:n},i));return l.open(s),s}return T.buildLayerMissionCreate=function(e){return N(e,new p)},T.buildLayerMissionModify=function(e,t,n){return p.fetchBandMission(e,t,n).then((function(t){return N(e,t)}))},T.buildLayerRecruitingBandMissionModify=function(e,t){return p.fetchRecruitingBandMission(e,t).then((function(t){return t?N(e,t,{isRecruitingBand:!0}):i.Deferred().reject()}))},T}.call(t,n,t,e))||(e.exports=i)},1553:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(167),s=n(166);return new(t.Object.extend({initialize:function(){this._showShiftGuideInCurrentPage=!0},canShowShiftGuide:function(){return!!this._showShiftGuideInCurrentPage&&!i.getCurrentUserEnvStorage().get([s.AlbumShiftSelectionGuide])},hideShiftGuideInCurrentPage:function(){this._showShiftGuideInCurrentPage=!1},resetShiftGuideInCurrentPage:function(){this._showShiftGuideInCurrentPage=!0},hideShiftGuidePermanently:function(){this._showShiftGuideInCurrentPage=!1,i.getCurrentUserEnvStorage().set([s.AlbumShiftSelectionGuide],!0)}}))}.call(t,n,t,e))||(e.exports=i)},1554:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(486),o=n(931),l=n(543),r=(n(541),n(83)),d=n(1938),c=n(510),h=s.View.extend({attributes:{"data-viewname":"DBandUrlSetView"},template:i.template(d),ui:{inputShortcut:"._inputShortcut",textBandUrl:"._textBandUrl",btnConfirm:"._btnConfirm",btnClose:"._btnClose"},events:{"keyup @ui.inputShortcut":function(){this.ui.inputShortcut.val().trim().length>=this.minLength?this.ui.btnConfirm.removeClass("-disabled"):this.ui.btnConfirm.addClass("-disabled")},"click @ui.btnConfirm":"_btnConfirmClicked","click @ui.btnClose":"destroy"},initialize:function(e){this.bandNo=e.bandNo,this.notSaveNow=e.notSaveNow,this.urlDomain=l.BAND_SHORTCUT_URL_DOMAIN,this.maxLength=l.BAND_TYPE_CONDITION.BAND_SHORTCUT_MAX_LENGTH,this.minLength=l.BAND_TYPE_CONDITION.BAND_SHORTCUT_MIN_LENGTH},templateContext:function(){return{URL_DOMAIN:this.urlDomain,maxLengthBandShortcut:this.maxLength}},_btnConfirmClicked:function(){if(this._validateBandShortcut()){var e=t.trim(this.ui.inputShortcut.val());this.ui.textBandUrl.text(this.urlDomain+e),c.openLayer({bodyTitle:IM("bandsetting.band_shortcut.txt.description.confirm"),bodyDesc:IM("bandsetting.band_shortcut.txt.description.confirm_notice")}).once(c.EVENTS.CONFIRM,i.bind((function(){this._setBandShortcut(e)}),this))}},_setBandShortcut:function(e){if(this.notSaveNow)return this.trigger("bandUrlCreated",e),void this.destroy();r.setBandInfo({bandNo:this.bandNo,shortcut:e}).then(i.bind((function(){this.trigger("bandUrlCreated"),this.destroy()}),this)).fail(i.bind((function(t){1033==t.result_code&&confirm(t.result_data.message)&&r.setBandInfo({bandNo:this.bandNo,shortcut:e,shortcutByForce:!0}).then(i.bind((function(){this.trigger("bandUrlCreated"),this.destroy()}),this))}),this))},_validateBandShortcut:function(){var e=t.trim(this.ui.inputShortcut.val()),n=o.BAND_URL_SHORTCUT.validateBandShortcut(e);return n==o.BAND_URL_SHORTCUT.RESULT.TOO_LONG_SHORTCUT||n==o.BAND_URL_SHORTCUT.RESULT.TOO_SHORT_SHORTCUT?(alert(IM("bandsetting.band_shortcut.txt.notice2").replace("<br>","")),this.ui.inputShortcut.val(e.replace(/\s/gi,"")).focus(),!1):n!=o.BAND_URL_SHORTCUT.RESULT.WRONG_FORM||(alert(IM("bandsetting.band_shortcut.txt.notice2").replace("<br>","")),this.ui.inputShortcut.val(e.replace(/\s/gi,"")).focus(),!1)}});return h.buildAsLayer=function(e){var t=new h({bandNo:e.bandNo,notSaveNow:e.notSaveNow});return a.open(t),t},h}.call(t,n,t,e))||(e.exports=i)},1595:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(1403),s=n(517),a=n(520),o="MISSION",l="AUTHOR",r=t.Collection.extend({model:s,initialize:function(e,t){this.bandNo=t.bandNo,this._hasMore=!0,this.onLoading=!1,this._basedOnTarget=t.basedOnTarget?t.basedOnTarget:o,this._missionId=t.missionId,this._authorNo=t.authorNo},hasMore:function(){return this._hasMore},_checkHasMore:function(){this.nextPageParams?this._hasMore=!0:this._hasMore=!1},fetchConfirmPostWithMission:function(){var e={band_no:this.bandNo,mission_id:this._missionId};return this.nextPageParams&&(e.after=this.nextPageParams.after),i.getMissionConfirmPostsWithMission(e).then(_.bind((function(e){return this._handleDataAfterFetch(e),this}),this))},fetchMissionConfirmPostWithAuthor:function(){var e={band_no:this.bandNo,author_key:this._authorNo};return this.nextPageParams&&(e.after=this.nextPageParams.after),i.getMissionConfirmPostsWithAuthor(e).then(_.bind((function(e){return this._handleDataAfterFetch(e),this}),this))},fetchNextPostList:function(){if(this._hasMore)return this._basedOnTarget==o?this.fetchConfirmPostWithMission():this._basedOnTarget==l?this.fetchMissionConfirmPostWithAuthor():void 0},_handleDataAfterFetch:function(e){var t=e.result_data.items;this.nextPageParams?this.add(t,{parse:!0}):this.reset(t,{parse:!0}),this.nextPageParams=e.result_data.paging&&e.result_data.paging.next_params,this._checkHasMore()},deletePosts:function(e){var t=[];return _.each(e,(function(e){t.push(e.get("postNo"))})),a.deletePosts(this.bandNo,t)}});return r.buildConfirmPostsWithMission=function(e,t){return new r([],{bandNo:e,basedOnTarget:o,missionId:t})},r.buildConfirmPostsWithAuthor=function(e,t){return new r([],{bandNo:e,basedOnTarget:l,authorNo:t})},r}.call(t,n,t,e))||(e.exports=i)},1596:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(16),a=n(155),o=n(1235),l=n(510),r=n(538),d=n(1810),c=i.Object.extend({initialize:function(e){this.bandNo=e.bandNo,this.reservedClosureAt=e.reservedClosureAt,this.hasBoughtQuota=e.hasBoughtQuota},formattedReservedClosureDuration:function(e){var t={isReserved:!1,isToday:!1,closureDayDiff:null};if(!e)return t;var n=s(),i=Math.ceil(s.duration(e.diff(n)).asDays());return t.isReserved=!0,t.closureDayDiff=i,i>1||n.date()===e.date()&&(t.isToday=!0),t},openMessageLayer:function(){this.bandData=a.get(this.bandNo),this.bandData.resetBandDataState(),this.bandData.loadBandData().then(t.bind((function(){this._checkMessageLayerOpenCondition()}),this))},openConfirmForCancelMessageLayer:function(e){this._openConfirmForCancelMessageLayer(e)},_checkMessageLayerOpenCondition:function(){var e=this.bandData.getReservedClosureAt();if(e)this._openConfirmForCancelMessageLayer(e);else if(this.hasBoughtQuota){var n=o.openAsLayer({title:IM("pageband.band_setting.main.item_title.close_page"),desc:IM("pageband.page_setting.close_page.confirm_message.quota.description.no_refund"),closeLayer:IM("ui.label.close_layer"),confirm:IM("ui.label.confirm"),confirmCheckboxDescription:IM("band_leave.confirm.checked")});this.listenTo(n,"modal:confirm",t.bind((function(){this._openDeleteMessageLayer()}),this))}else this._openDeleteMessageLayer()},_openDeleteMessageLayer:function(){this.bandData.getMemberCount()>1?this._openCheckboxConfirmForDeleteMessageLayer():this._openConfirmForDeleteMessageLayer()},_openCheckboxConfirmForDeleteMessageLayer:function(){var e=d.openAsLayer();this.listenTo(e,d.EVENT.CONFIRM,t.bind((function(){return r.SETTING.closePage(this.bandNo).then(t.bind((function(e){this.trigger("closePageBand:suspendPage")}),this))}),this))},_openConfirmForDeleteMessageLayer:function(){l.openLayer({bodyTitle:IM("pageband.delete_page_alert_message")}).once(l.EVENTS.CONFIRM,t.bind((function(){return r.SETTING.closePage(this.bandNo).then(t.bind((function(){this.trigger("closePageBand:deletePage")}),this))}),this))},_openConfirmForCancelMessageLayer:function(e){var n="",i=this.formattedReservedClosureDuration(e);i.isReserved&&(n=i.isToday?IM("pageband.page_setting.page_delete.alert_msg.today"):IM("pageband.page_setting.page_delete.alert_msg",{duration:i.closureDayDiff})),n='<span class="pText">'+n+"</span><br>",n+='<span class="pText -smallFont gMat9 gDpIb">'+IM("pageband.page_setting.page_delete.alert_msg2")+"</span>",l.openLayer({width:380,headerTitle:IM("pageband.page_setting.delete_page"),bodyDesc:n,confirm:IM("ui.label.delete_cancel"),cancel:IM("ui.label.close")}).once(l.EVENTS.CONFIRM,t.bind((function(){return r.SETTING.cancelPageClosure(this.bandNo).then(t.bind((function(){this.bandData=a.get(this.bandNo),this.bandData.resetBandDataState(),this.bandData.loadBandData().then(t.bind((function(){this.trigger("closePageBand:cancelPageDeletion")}),this))}),this))}),this))}});return c.build=function(e,t){return new c({bandNo:e,reservedClosureAt:t.reservedClosureAt,hasBoughtQuota:t.hasBoughtQuota})},c}.call(t,n,t,e))||(e.exports=i)},1597:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(10),a=n(4),o=n(486),l=n(543),r=n(1236),d=n(1177),c=n(1821),h=n(155),u=n(538),p=n(1106),m=n(1237),_=n(26),b=n(154),g=n(1279),f=n(1238),v=n(1538),A=n(1021);n(194);var M={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},C=a.View.extend({tagName:"div",attributes:{"data-viewname":"DPageBandEditIntroView"},template:i.template(c),ui:{pageDescription:"._pageDescription",pageContent:"._pageContent",keywordList:"._keywordList",keywordBtn:"._keywordBtn",keywordChangeBtn:"._keywordChangeBtn",locationGuideBtn:"._locationGuideBtn",locationText:"._locationText",locationRemoveBtn:"._locationRemoveBtn",locationChangeBtn:"._locationChangeBtn",businessWrap:"._businessWrap",businessNo:"._businessNo",businessDetailBtn:"._businessDetailBtn",businessChangeBtn:"._businessChangeBtn",btnConfirm:"._btnConfirm",btnClose:"._btnClose"},regions:{mediaListRegion:{el:"._mediaListRegion",replaceElement:!0}},events:{"input @ui.pageDescription":"_adjustUIButton","input @ui.pageContent":"_adjustUIButton","click @ui.btnClose":"_closeLayer","click @ui.btnConfirm":"_setPageIntroInfo","click @ui.keywordBtn":"_openKeywordManageLayer","click @ui.keywordChangeBtn":"_openKeywordManageLayer","click @ui.locationGuideBtn":"_openSelectLocationLayer","click @ui.locationRemoveBtn":"_removeLocation","click @ui.locationChangeBtn":"_openSelectLocationLayer","click @ui.businessDetailBtn":"_openBusinessInfoLayer","click @ui.businessChangeBtn":"_openBusinessRegistrationLayer"},initialize:function(e){this._bandData=e.bandData,this._bandOptionModel=e.bandOptionModel,this._bandNo=this._bandData.getBandCore().bandNo},serializeData:function(){return{descriptionMaxLength:A.SHORT_DESCRIPTION.MAX_LENGTH,contentMaxLength:A.DESCRIPTION.MAX_LENGTH,pageDescription:this.model.get("description"),pageContent:this.model.get("content"),isKeywordManagePermitted:this._bandOptionModel.isPermittedManageKeyword(),keywordCount:l.BAND_KEYWORD.KEYWORD_MAX_COUNT,businessRegistrationNo:this._getBusinessRegistrationNo()}},onRender:function(){this._renderKeywordList(),this._renderLocation(),this._showMediaList(),this._adjustUIButton()},onAttach:function(){this.getUI("pageDescription").elastic(),this.getUI("pageContent").elastic(),this.listenTo(_.getDGlobalChannel(),_.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED,this._refreshBusinessRegistrationNo)},onBeforeDetach:function(){this.getUI("pageDescription").destroyElastic(),this.getUI("pageContent").destroyElastic(),this.stopListening(_.getDGlobalChannel())},_adjustUIButton:function(){var e=s.isBlank(this.getUI("pageDescription").val());this.getUI("btnConfirm").prop("disabled",e).toggleClass("-disabled",e)},_renderLocation:function(){var e=this.model.getPageLocation(),t=!!e,n=t?e.get("name")||e.get("address"):"";this.ui.locationGuideBtn.css("display",t?"none":""),this.ui.locationText.text(n).css("display",t?"":"none"),this.ui.locationRemoveBtn.css("display",t?"":"none")},_openSelectLocationLayer:function(){b.wrapActivePromise(d.asyncOpenDSelectLocationLayer(),this).then(i.bind((function(e){e&&this.listenTo(e,"locationSelected",(function(t){this.model.setPageLocation(t),e.destroy(),this._renderLocation(),this._adjustUIButton()}))}),this))},_removeLocation:function(){this.model.setPageLocation(null),this._renderLocation(),this._adjustUIButton()},_showMediaList:function(){var e=this.model.getPageMediaList().toJSON();this._mediaListCollection=new f(e),this.listenTo(this._mediaListCollection,"add remove",this._adjustUIButton);var t=this.getRegion("mediaListRegion");v.show(t,{bandNo:this._bandNo,mediaListCollection:this._mediaListCollection,wrapperClassNames:"introPhoto -tLine gMat15 gPat15",subTitle:IM("pageband.page_setting.manage_intro_info.attached_media.guide_message")})},_closeLayer:function(){if(s.isBlank(this.getUI("pageDescription").val())&&s.isBlank(this.getUI("pageContent").val())&&i.isEmpty(this.model.getPageLocation())&&!this._mediaListCollection.isUpdated())return this.trigger(M.CANCEL),void this.destroy();confirm(IM("pageband.page_setting.manage_intro_info.cancel_confirm"))&&(this.trigger(M.CANCEL),this.destroy())},_setPageIntroInfo:function(){var e={},t=this.getUI("pageDescription").val(),n=this.getUI("pageContent").val();i.isEmpty(t.trim())||(e.pageDescription=t),i.isEmpty(n.trim())||(e.pageContent=n);var s=this.model.getPageLocation();return i.isEmpty(s)||(e.pageLocation=s),this._mediaListCollection.isUpdated()&&(e.pageMediaList=this._mediaListCollection.toJSONForSave()),this.model.setPageIntroInfo(this._bandNo,e).then(i.bind((function(){_.getBandChannel(this._bandNo).trigger(_.EVENT.PAGE_BAND_INTRO_INFO_CHANGED),this.trigger(M.CONFIRM),this.destroy()}),this))},_renderKeywordList:function(){i.each(this.ui.keywordList,(function(e,n){var i=this.keywordList[n];t(e).toggleClass("-selectedItem",!!i).find("._keywordBtn").text(i||this.defaultKeyword)}),{keywordList:this._keywordList||this._bandData.getKeywords()||[],defaultKeyword:IM("groupband.band_intro_description.help_guide.input_keyword")})},_openKeywordManageLayer:function(){this._selectedKeywords=this._selectedKeywords||[],i.isEmpty(this._selectedKeywords)&&i.each(this._bandData.getBandKeywordsWithKeywordGroups(),(function(e){i.each(e.keyword_groups,(function(t){this._selectedKeywords.push({keywordGroup:t,keyword:e.keyword})}),this)}),this);var e=g.openLayer({bandNo:this._bandNo,selectedKeywords:this._selectedKeywords,withoutSaving:!1,guideTitle:IM("bandsetting.keyword.guide_title.page_band")});this.listenToOnce(e,g.EVENTS.CONFIRM,(function(e){this._selectedKeywords=e,this._keywordList=i.pluck(e,"keyword"),this._renderKeywordList(),this._reloadBandData()}))},_getBusinessRegistrationNo:function(){return this._bandData.canShowBusinessIdentificationInfo()&&this._bandData.canManageBusinessRegistration()?this._bandData.getBusinessRegistrationNo():null},_reloadBandData:function(){return this._bandData.resetBandDataState(),this._bandData.loadBandData()},_refreshBusinessRegistrationNo:function(){b.wrapActivePromise(this._reloadBandData(),this).then(i.bind((function(){var e=this._getBusinessRegistrationNo();e?this.ui.businessNo.text(e):this.ui.businessWrap.remove()}),this))},_openBusinessInfoLayer:function(){p.openDBusinessIdentificationInfoView({bandNo:this._bandNo})},_openBusinessRegistrationLayer:function(){m.openDBusinessIDInfoRegistrationLayer({bandNo:this._bandNo})}});return C.openPageBandEditIntroLayer=function(e){var n=new r,i=h.get(e),s=t.when(n.fetchPageIntro(e),i.loadBandData(),u.getBandOption(e)).then((function(e,e,t){return new C({bandData:i,bandOptionModel:t,model:n})}));return o.openPromiseView(s,!1,{width:480,height:580})},C.EVENTS=M,C}.call(t,n,t,e))||(e.exports=i)},1598:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1847),o=n(725),l=n(486),r=n(520),d=n(197),c=n(562),h=n(538),u=n(26),p=n(1053);n(185);var m="-focus",_="._tagSearchHintItem",b="._tagSearchHintItem.-focus",g="._tagListLi",f=s.View.extend({attributes:{"data-viewname":"DBandHashtagSettingView"},template:i.template(a),templateContext:function(){return{maxPinnedTagCount:30,isPinnedHashtagsRequiredOnPost:this._isPinnedHashtagsRequiredOnPost,isEnableAppendHashtag:this._isEnableAppendHashtag,canUseSetHashtagConfig:this._canUseSetHashtagConfig}},ui:{btnCancel:"._btnCancel",tagSettingForm:"._tagSettingForm",inputTagName:"._inputTagName",btnAddTag:"._btnAddTag",tagListUl:"._tagListUl",tagListLi:"._tagListLi",btnSaveTag:"._btnSaveTag",btnRemoveTag:"._btnRemoveTag",tagSearchHint:"._tagSearchHint",tagSearchHintItem:"._tagSearchHintItem",uNotification:"._uNotification",emptyList:"._emptyList",tagListWrap:"._tagListWrap",postHashtagCheckInput:"._postHashtagCheckInput"},events:{"click @ui.btnCancel":"_onBtnClose","submit @ui.tagSettingForm":"onSubmit","click @ui.btnSaveTag":"_onClickBtnSaveTag","click @ui.btnRemoveTag":"_onClickBtnRemoveTag","click @ui.tagSearchHintItem":"_onClickTagSearchHintItem","focus @ui.inputTagName":"_showSearchTagHint","blur @ui.inputTagName":"_hideSearchTagHint","keyup @ui.inputTagName":"_showSearchTagHint","keydown @ui.inputTagName":"_selectTagHintByKeyboard","mouseleave @ui.tagSearchHint":"_onMouseleaveTagSearchHint","change @ui.postHashtagCheckInput":function(){this._onChangePostHashtagCheck(!1)}},initialize:function(e){this._bandData=e.bandData,this._bandNo=e.bandNo,this._isEnableAppendHashtag=!0,this._isPinnedHashtagsRequiredOnPost=this._bandData.isPinnedHashtagsRequiredOnPost(),this._isChangedRequiredUseTag=!1,this._canUseSetHashtagConfig=!1},onAttach:function(){this._fetchData()},onBeforeDetach:function(){this._sortable&&this._sortable.destroy()},_fetchData:function(){t.when(h.getBandOption(this._bandNo),this.model.fetchBandTags(this._bandNo)).then(i.bind((function(e,t){this.bandOption=e,this.model.get("isPinnedCount")>=30&&(this._isEnableAppendHashtag=!1),this._canUseSetHashtagConfig=!i.isUndefined(this.bandOption.isPinnedHashtagsRequiredOnPost()),this.render(),this._sortable=this._createSortableList()}),this))},_showSearchTagHint:function(){if(this._isEnableAppendHashtag){this._changeStatusAddTagElements();var e=this.ui.inputTagName.val();""===e&&this.ui.inputTagName.val("#"),""===e||"#"===e?(clearTimeout(this.timeoutId),this.$el.find(_+":not([data-pinned=true])").length?this.ui.tagSearchHint.show():this.ui.tagSearchHint.hide(),this.ui.tagSearchHint.attr("data-status","true"),this.ui.tagSearchHintItem.show()):(clearTimeout(this.timeoutId),this.timeoutId=setTimeout(i.bind((function(){if(!this.isDestroyed()){this.ui.tagSearchHint.show();var t=this.$el.find(_+":visible");t.filter('[data-tagname^="'+p.encodeQuery(e)+'"]').length>0?(t.hide(),t.filter('[data-tagname^="'+p.encodeQuery(e)+'"]').show()):this.ui.tagSearchHint.hide(),this.ui.tagSearchHint.attr("data-status","true")}}),this),300))}},_hideSearchTagHint:function(e){this.ui.tagSearchHint.is(":hover")&&"focusout"===e.type||(this.ui.tagSearchHintItem.removeClass(m),this.ui.tagSearchHint.removeAttr("data-status").hide()),"#"===this.ui.inputTagName.val()&&this.ui.inputTagName.val("")},_selectTagHintByKeyboard:function(e){if(this.ui.tagSearchHint.attr("data-status"))if(13===e.keyCode||38===e.keyCode||40===e.keyCode){var t=this.$el.find(_+":visible"),n=this.$el.find(b),i=t.length,s=t.index(n);if(n.length>0)return 38===e.keyCode&&s>0?(n.removeClass(m),t.eq(s-1).addClass(m),this.ui.tagSearchHint.animate({scrollTop:(s-1)*n.height()},50)):40===e.keyCode&&s+1<i?(n.removeClass(m),t.eq(s+1).addClass(m),this.ui.tagSearchHint.animate({scrollTop:(s+1)*n.height()},50)):13===e.keyCode&&(this.ui.inputTagName.val(p.decodeQuery(n.eq(0).data("tagname"))),this.onSubmit(e)),!1;40===e.keyCode&&t.eq(0).addClass(m)}else this.ui.tagSearchHint.scrollTop(0),this.ui.tagSearchHintItem.removeClass(m)},_createSortableList:function(){return this._sortable&&this._sortable.destroy(),t.browser.msie&&t.browser.versionNumber<=8?(this.ui.tagListUl.sortable({items:"li",cursor:"move",handle:".btnDrag"}),null):d.create(this.ui.tagListUl[0],{handle:"._dragBtn",onUpdate:i.bind((function(){this._changeStatusButtonElements()}),this),setData:null})},_onChangePostHashtagCheck:function(e){this._isChangedRequiredUseTag=!(this._isCheckedPostHashtag()===this._isPinnedHashtagsRequiredOnPost),e||this._changeStatusButtonElements(!0)},_isCheckedPostHashtag:function(){return this.getUI("postHashtagCheckInput").is(":checked")},_showCheckPostHashtagErrorMsg:function(e){c.openLayer({bodyTitle:e,withoutHiding:!0})},_changeStatusButtonElements:function(e){var t=this._getAddedHashtagCount();t||(this.getUI("tagListWrap").hide(),this.getUI("emptyList").show(),this._isCheckedPostHashtag()&&(e&&this._showCheckPostHashtagErrorMsg(IM("bandsetting.tag_setting.post_hashtag.set_error_msg")),this.getUI("postHashtagCheckInput").prop("checked",!1),this._onChangePostHashtagCheck(!0)));var n=this._hasChangedTags()||this._isChangedRequiredUseTag;this._changeStatusSaveTagButton(!n),this._changeStatusAddTagElements(),t>30?(this._changeStatusSaveTagButton(t>30),this._isEnableAppendHashtag=!1):this._isEnableAppendHashtag=!0},_hasChangedTags:function(){return this._pinnedBandTags||(this._pinnedBandTags=i.chain(this.model.get("bandTags")).filter((function(e){return e.is_pinned})).pluck("hashtag").value()),!i.isEqual(this._getAddedHashTags(),this._pinnedBandTags)},_getAddedHashtagCount:function(){return this.getUI("tagListUl").children("li").length},_changeStatusAddTagElements:function(){var e=this.getUI("inputTagName").val(),t=this._getAddedHashtagCount(),n=t>=30||(""===e||"#"===e),i=t>=30;this.getUI("btnAddTag").attr("disabled",n).toggleClass("-active",!n),this.getUI("inputTagName").attr("disabled",i)},_onClickTagSearchHintItem:function(e){var n=t(e.currentTarget),i=p.decodeQuery(n.data("tagname"));return n.addClass(m),this.ui.inputTagName.val(i),this._hideSearchTagHint(!0),this._changeStatusButtonElements(),!1},_vaildation:function(e){return""!==e&&"#"!==e&&(e.match(/^#/)?!this.$el.find(g).filter('[data-tagname="'+p.encodeQuery(e)+'"]').length||(this._showError(IM("bandsetting.tag_setting.error.duplicate")),!1):(this._showError(IM("bandsetting.tag_setting.error.txt")),!1))},onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),!this._isEnableAppendHashtag)return this._showError(IM("bandsetting.tag_setting.pinned_tag_max_count",{max:30})),!1;var t=this.getUI("inputTagName").val().replace(/\s/g,"");if(!this._vaildation(t))return!1;var n='<li class="flexList -h52 bLine _tagListLi" data-tagname="'+p.encodeQuery(t)+'">    <span class="text -ellipsis _hashtag">'+p.encodeQuery(t)+'</span>    <span class="etc">        <button class="uButton -iconListRemove _btnRemoveTag"><span class="gSrOnly">'+IM("bandsetting.tag_setting.delete_tag")+'</span></button>    </span>    <span class="etc">        <a href="#" role="button" class="uButton -iconListMove _dragBtn"><span class="gSrOnly">'+IM("bandsetting.tag_setting.order_change")+"</span></a>    </span></li>";this.getUI("tagListUl").append(n),this.getUI("tagListWrap").show(),this.getUI("emptyList").hide(),this._hideSelectHintItemList(),this._hideSearchTagHint(!0),this._changeStatusButtonElements()},_showError:function(e){this.ui.uNotification.text(e),this.ui.uNotification.slideDown("fast",(function(){setTimeout(i.bind((function(){t(this).slideUp("fast")}),this),3e3)})),this._hideSelectHintItemList(),this._hideSearchTagHint(!0),this._changeStatusButtonElements(),this.ui.inputTagName.val("").blur()},_getAddedHashTags:function(){var e=[];return this.getUI("tagListUl").find("li ._hashtag").each(i.bind((function(n,i){e.push(p.encodeQuery(t(i).text()).replace(/&quot;/g,'"'))}),this)),e},_changeStatusSaveTagButton:function(e){this.getUI("btnSaveTag").attr("disabled",e)},_setIsPinnedHashtagsRequiredOnPost:function(){return this._isChangedRequiredUseTag?h.SETTING.setIsPinnedHashtagsRequiredOnPost(this._bandNo,this._isCheckedPostHashtag()).then(i.bind((function(){this._bandData.resetBandDataState(),this._bandData.loadBandData()}),this)).fail(i.bind((function(){this._changeStatusSaveTagButton(!1)}),this)):t.Deferred().resolve().promise()},_setPinnedHashtags:function(){return this._hasChangedTags()?r.setPinnedHashtags(this._bandNo,this._getAddedHashTags().join(",")).then((function(){u.getSettingChannel().trigger(u.EVENT.SETTING_TAG_UPDATED)})).fail(i.bind((function(e){if(1e3===e.result_code)return this._showCheckPostHashtagErrorMsg(e.result_data.message),this._dataRefetchAndRender(),u.getSettingChannel().trigger(u.EVENT.SETTING_TAG_UPDATED),void(this._pinnedBandTags=null);this._changeStatusSaveTagButton(!1)}),this)):t.Deferred().resolve().promise()},_dataRefetchAndRender:function(){this.model.fetchBandTags(this._bandNo).then(i.bind((function(){this.render()}),this))},_onClickBtnSaveTag:function(){(this._hasChangedTags()||this._isChangedRequiredUseTag)&&(!this._canUseSetHashtagConfig&&this._isPinnedHashtagsRequiredOnPost&&i.isEmpty(this._getAddedHashTags())?this._showCheckPostHashtagErrorMsg(IM("bandsetting.tag_setting.post_hashtag.set_error_msg2")):(this._changeStatusSaveTagButton(!0),this._isCheckedPostHashtag()?this._setPinnedHashtags().then(i.bind((function(){this._setIsPinnedHashtagsRequiredOnPost().then(i.bind((function(){this.destroy()}),this))}),this)):this._setIsPinnedHashtagsRequiredOnPost().then(i.bind((function(){this._setPinnedHashtags().then(i.bind((function(){this.destroy()}),this))}),this))))},_onClickBtnRemoveTag:function(e){var n=t(e.currentTarget).closest("li"),i=n.data("tagname");this.$el.find(_).filter('[data-tagname="'+p.encodeQuery(i)+'"]').attr("data-pinned","false"),n.remove(),this._changeStatusButtonElements()},_hideSelectHintItemList:function(){var e=this.$el.find(b+":eq(0)");e.length||(e=this.$el.find(_).filter('[data-tagname="'+p.encodeQuery(this.ui.inputTagName.val())+'"]')),e.attr("data-pinned","true"),this.ui.inputTagName.val("").blur()},_onMouseleaveTagSearchHint:function(){this.ui.inputTagName.is(":focus")||this._hideSearchTagHint()},_onBtnClose:function(){this._hasChangedTags()?!0===confirm(IM("bandsetting.tag_setting.cancel.txt"))&&this.destroy():this.destroy()}});return f.buildAsLayer=function(e,t){var n=new o,i=new f({model:n,bandNo:e,bandData:t});return l.open(i),i},f}.call(t,n,t,e))||(e.exports=i)},1599:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1872),a=n(26),o=n(158),l=i.View.extend({options:{height:500,title:void 0,description:void 0,onClick:void 0,icon:void 0},tagName:"div",className:"uEmpty",attributes:function(){return{"data-viewname":"DEmptyContentView",style:this._getStyle()}},template:t.template(s),ui:{link:"._link"},events:{"click @ui.link":function(e){e.preventDefault(),t.isFunction(this.options.onClick)&&this.options.onClick()}},serializeData:function(){return{icon:this.options.icon,titleText:this.options.title,descHtml:this.options.description,clickable:!!this.options.onClick}},_getStyle:function(){if(this.options.height)return"height:"+this.options.height+"px"}});return l.buildGroupBandGuestView=function(e){return new l({icon:"-join",title:IM("ui.message.only_members_can_view_this"),description:o.nl2br(IM("board.no_member.hint.post")),height:547,className:"uEmpty gBoxShadow",onClick:function(){a.getBandChannel(e.bandNo).trigger(a.EVENT.START_BAND_JOIN)}})},l.buildGroupBandHashtagPostView=function(){return new l({description:IM("ui.message.no_search_result"),height:500})},l.buildGroupBandPopularPostView=function(e){return new l({icon:"-first",description:IM("band.popular.empty.text1")+"<br>"+IM("band.popular.empty.text2"),height:500,onClick:function(){e.isPostingPermitted()?a.getPostChannel().trigger(a.EVENT.NEW_POST,{bandData:e}):alert(IM("web.postwrite.placeholder.noPermission"))}})},l}.call(t,n,t,e))||(e.exports=i)},1600:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1882),a=n(154),o=n(181),l=n(486),r=n(2);return new(i.Object.extend({openDeregisterView:function(e,n){var i=s.buildDAdpostDeregisterView(),d=r.Deferred();return n.listenTo(i,s.DEREGISTER_CONFIRMED,(function(){a.wrapActivePromise(o.setPageAdpost(e,null),n).then(t.bind((function(){d.resolve()}),this)).always(t.bind((function(){i.destroy()}),this))})),l.open(i),d}}))}.call(t,n,t,e))||(e.exports=i)},1601:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(1552),a=n(3451),o=n(512),l={SCROLL_BOTTOM:"SCROLL_BOTTOM",UPDATE_DATA:"UPDATE_DATA"},r=t.CollectionView.extend({attributes:{"data-viewname":"DBandMissionListView"},tagName:"ul",className:function(){return this.options.isMissionsList?"sSettingList sMissionList":"sSettingList"},childView:a,childViewOptions:function(){return{bandNo:this.bandNo,isViewPurposeDetail:this.viewPurpose,isMissionsList:this.isMissionsList}},childViewEvents:{"mission:modify":"_missionModify"},initialize:function(e){this.bandNo=e.bandNo,this.viewPurpose=e.isViewPurposeDetail,this.isMissionsList=e.isMissionsList||!1},onAttach:function(){this.listenTo(o,"window:scroll:bottom",(function(){this.trigger(l.SCROLL_BOTTOM)}))},onBeforeDetach:function(){this.stopListening(o)},_missionModify:function(e){s.buildLayerMissionModify(this.bandNo,e.model.get("missionId"),!0).then(i.bind((function(e){this.listenTo(e,"editConfirmMission",(function(){this.trigger(l.UPDATE_DATA)}))}),this))}});return r.EVENT=l,r.buildDBandMissionListViewForManage=function(e){return new r(e)},r.buildDBandMissionListViewForDetail=function(e){return new r(i.extend(e,{isViewPurposeDetail:!0}))},r.buildDBandMissionListViewForMissionsDetail=function(e){return new r(i.extend(e,{isViewPurposeDetail:!0,isMissionsList:!0}))},r}.call(t,n,t,e))||(e.exports=i)},1602:function(e,t,n){var i;void 0===(i=function(){return{CAPTURE_AREA:{ALL:"all",CALENDAR:"calendar",GRAPH:"graph"},CAPTURE_EVENT:{CLICK_SHARE_MY_STATUS:"clickShareMyStatus"}}}.call(t,n,t,e))||(e.exports=i)},1748:function(e,t,n){var i=n(0),s=n(4),a=n(1749),o=n(153),l=n(1165),r=n(165),d=n(567),c=n(543),h=s.View.extend({tagName:"section",className:"lyWrap",initialize:function(e){this._bandData=e.bandData,this._bandDoNotDisturbInfo=this._bandData.getBandDoNotDisturb(),this._manageDoNotDisturbEnabled=this._bandData.canManageBandDoNotDisturb(),this._timezoneId=this._bandDoNotDisturbInfo.timezone_id,this._fromChattingRoom=this.options.fromChattingRoom},template:i.template(a),templateContext:function(){var e=r.getCurrentTimezone(),t=r.getTimezone(this._timezoneId),n=t&&e.gmtString!=t.gmtString;return{timezoneDesc:n?IM("do_not_disturb.modal.timezone.message",{timezone:t.gmtString}):"",manageDoNotDisturbEnabled:this._manageDoNotDisturbEnabled,needShowTimeZoneDesc:n,filteredDoNotDisturbInfo:this._getFilteredDoNotDisturbDataByType(),makeTimeInfoToText:i.bind((function(e){return this._bandDoNotDisturbInfo.type==c.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE&&e.all_day?IM("band.setting.do_not_disturb.day.all_day"):this._bandDoNotDisturbInfo.type!=c.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE||e.enabled?l.getFormattedTimeToString(e.start,e.end):IM("do_not_disturb.each_day.off")}),this),getLabelText:function(e){return e.type==c.DO_NOT_DISTURB_INFO.DAILY.VALUE?IM("band.setting.do_not_disturb.daily"):i.find(d.getAllDaysOfWeek(),(function(t){return t.getApiValue().toLowerCase()==e.type.toLowerCase()})).getLocalizedText()}}},ui:{settingBtn:"._settingBtn",closeBtn:"._closeBtn",doNotDisturbWrap:"._doNotDisturbWrap"},events:{"click @ui.closeBtn":function(){this.destroy()},"click @ui.settingBtn":function(){if(this._fromChattingRoom){var e=o.GROUP_BAND_SETTING_DO_NOT_DISTURB.makeUrl({band_no:this._bandData.getBandCore().bandNo});window.open(e)}else o.GROUP_BAND_SETTING_DO_NOT_DISTURB.goDForced({band_no:this._bandData.getBandCore().bandNo})}},onAttach:function(){this._fromChattingRoom||this.ui.doNotDisturbWrap.addClass("-w360")},_getFilteredDoNotDisturbDataByType:function(){return i.filter(this._bandDoNotDisturbInfo.data,i.bind((function(e){return this._bandDoNotDisturbInfo.type==c.DO_NOT_DISTURB_INFO.DAILY.VALUE?e.type==c.DO_NOT_DISTURB_INFO.DAILY.VALUE:this._bandDoNotDisturbInfo.type==c.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE?e.type!=c.DO_NOT_DISTURB_INFO.DAILY.VALUE&&1==e.enabled:void 0}),this))}});h.buildDBandDoNotDisturbInfoModalView=function(e,t){return new h({bandData:e,fromChattingRoom:t})},e.exports=h},1749:function(e,t){e.exports='<div class="lyContent _doNotDisturbWrap">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM("do_not_disturb.modal.title") %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="alarmTopBox">\n            <div class="alarmTopTitle"><%= IM("do_not_disturb.modal.desc1") %></div>\n            <div class="alarmTopDesc gMat5"><%= IM("do_not_disturb.modal.desc2") %></div>\n        </div>\n        <div class="msgWrap">\n            \x3c!--그냥 텍스트 br strong link /-pointColor클래스를 넣어주면 텍스트 컬러 적용됨 --\x3e\n            <p class="pText gFs13 gMat-2"><%= IM("do_not_disturb.modal.detail.desc") %></p>\n\n            \x3c!--메시지가 목록일 경우--\x3e\n            <ul class="msgList -pushAlarm gMat10">\n                <% _.each(filteredDoNotDisturbInfo, function(filteredItem) {%>\n                <li class="msgListItem">\n                    <strong><%= getLabelText(filteredItem) %></strong><%= makeTimeInfoToText(filteredItem) %>\n                </li>\n                <% }) %>\n            </ul>\n        </div>\n\n        <% if (needShowTimeZoneDesc) { %>\n        <div class="alarmBottomBox gMat16"><%= timezoneDesc %></div>\n        <% } %>\n    </div>\n\n    <footer class="modalFooter gPat26 gPab30">\n        <% if (manageDoNotDisturbEnabled) { %>\n        <button type="button" class="uButton -cancel _closeBtn"><%= IM("ui.label.cancel") %></button>\n        <button type="button" class="uButton -confirm _settingBtn"><%= IM("do_not_disturb.modal.setting.button") %></button>\n        <% } else { %>\n        <button type="button" class="uButton -confirm _closeBtn"><%= IM("ui.label.confirm") %></button>\n        <% } %>\n    </footer>\n</div>'},1753:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(931),o=n(486),l=n(1232),r=n(1754),d=s.View.extend({attributes:{"data-viewname":"DEmailRegistrationView"},template:i.template(r),ui:{inputEmail:"._inputEmail",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"keyup @ui.inputEmail":"_setButtonStyle","click @ui.btnConfirm":"_registrationEmail","click @ui.btnCancel":"_layerClose"},initialize:function(e){this.profileSettingModel=e.profileSettingModel},_layerClose:function(){this.destroy()},_setButtonStyle:function(){this.ui.inputEmail.val().length>0?this.ui.btnConfirm.removeClass("-disabled"):this.ui.btnConfirm.addClass("-disabled")},_registrationEmail:function(){if(!this._validateEmail())return!1;var e=t.trim(this.ui.inputEmail.val()),n=l.buildController({profileSettingModel:this.profileSettingModel});n.openEmailView(e),this.listenTo(n,"authorization:complete",i.bind((function(){this.trigger("emailRegistration:complete"),this.destroy()}),this))},_validateEmail:function(){var e=this.ui.inputEmail.val(),t=a.EMAIL.validateEmail(e);return t==a.EMAIL.RESULT.EMPTY_EMAIL?(alert(IM("setting.account.email.alert.input_email")),this.ui.inputEmail.focus(),!1):t!=a.EMAIL.RESULT.WRONG_FORM||(alert(IM("web.setting.account.alert.invalid_email")),this.ui.inputEmail.focus(),!1)}});return d.buildAsLayer=function(e){var t=new d({profileSettingModel:e.profileSettingModel});return o.open(t),t},d}.call(t,n,t,e))||(e.exports=i)},1754:function(e,t){e.exports='<section class="lyWrap ">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%= IM("web.setting.account.txt.email_title") %></h1>\n        </header>\n\n        <div class="main">\n            <div class="p -tSpace">\n                <div class="uInputWrap">\n                    <div class="uInput">\n                        <input type="email" id="email" value="" class="_inputEmail" placeholder="<%= IM("setting.account.txt.input_email") %>">\n                        <span class="border"></span>\n                    </div>\n\n                    <p class="sDesc gMat10"><%= IM("setting.profile.txt.notice.personal_info_agreement.email") %></p>\n                </div>\n            </div>\n        </div>\n\n        <footer class="footer">\n            <button type="button" class="uButton -disabled _btnConfirm"><%= IM("ui.label.confirm") %></button>\n            <button type="button" class="btnLyClose uButton -iconClose _btnCancel"><span class="gSrOnly"><%= IM("ui.label.registration_cancel") %></span></button>\n        </footer>\n    </div>\n</section>'},1757:function(e,t){e.exports='<div class="lyContent" style="width: 440px">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM(\'region_selection.title\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="searchWrap">\n            <label for="regionSearch" class="searchIcon"><span class="gSrOnly"><%= IM(\'region_selection.label.search_region\') %></span></label>\n            <span class="inputWrap">\n                <input type="text" id="regionSearch" class="inputSearch" placeholder="<%= searchInputPlaceholderText %>">\n            </span>\n            <button type="submit" class="btnSearch uButton -sizeS -default _btnSearch" disabled><%= IM(\'ui.label.search\') %></button>\n        </div>\n        <div class="regionalSearchArea">\n            <div class="myLocation">\n                <button type="button" class="buttonLocation _btnMyLocation">\n                    <span class="iconLocation"></span><%= IM(\'region_selection.label.my_location\') %>\n                </button>\n            </div>\n            <div class="uEmpty _emptySearchResult" style="display:none;">\n                <span class="text">\n                    <%- IM(\'region_selection.search_result.empty_title\') %><br>\n                    <%= emptySearchResultDesc %>\n                </span>\n            </div>\n            <div class="searchResultsBox _searchResultArea" style="display:none;">\n                <em class="searchResultsBoxTitle"><%= IM(\'ui.label.search_result\') %></em>\n                <div class="_searchResultListRegion"></div>\n            </div>\n            <div class="searchResultsBox _searchHistoryArea" style="display:none">\n                <em class="searchResultsBoxTitle"><%= IM(\'region_selection.search_history.title\') %></em>\n                <div class="_searchHistoryListRegion"></div>\n            </div>\n        </div>\n    </div>\n    <footer class="modalFooter gPa0">\n        <button type="button" class="uButton -iconClose btnLyClose _btnClose"><%= IM(\'ui.label.close\')%></button>\n    </footer>\n</div>'},1758:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1276),a={SELECTED:"SELECTED",DELETED:"DELETED"},o=i.View.extend({tagName:"li",className:"searchResultsItem",template:t.template('<button type="button" class="buttonText _btnSelect"><%= regionAddress %></button>\n<% if (deletable) { %>\n<button type="button" class="buttonDelete _btnDelete">\n   <span class="gSrOnly"><%= IM("region_selection.search_history.delete") %></span>\n</button>\n<% } %>'),templateContext:function(){return{cid:this.model.cid,deletable:this.options.deletable,regionAddress:this._getRegionAddress()}},events:{"click ._btnSelect":function(e){this.trigger(a.SELECTED,this.model)},"click ._btnDelete":function(e){this.trigger(a.DELETED,this.model),this.model.collection.remove(this.model)}},_getRegionAddress:function(){var e=this.options.highlightText;return e?this.model.get("fullAddress").replace(e,'<em class="keyword">'+e+"</em>"):this.model.get("shortAddress")}}),l=i.CollectionView.extend({tagName:"ul",className:"searchResultsList",attributes:{"data-viewname":"DSelectableRegionListView"},behaviors:function(){var e=[];return this.options.collection.getQuery()&&e.push({behaviorClass:s,fetchMoreFunc:t.bind((function(){this.collection.searchMore()}),this)}),e},childView:o,childViewOptions:function(e,n){return{deletable:!!t.isBoolean(this.options.deletable)&&this.options.deletable,highlightText:this.options.highlightText}},childViewTriggers:function(){var e={};return e[a.SELECTED]=a.SELECTED,e[a.DELETED]=a.DELETED,e}});return l.EVENTS=a,l}.call(t,n,t,e))||(e.exports=i)},1788:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1789),o=n(82),l=n(153),r=n(162),d=n(611),c=n(533),h=n(1228),u=n(487),p=n(26),m=n(190),_=n(833),b=s.View.extend({tagName:"section",attributes:{"data-viewname":"DBandSummaryPhotoListView"},className:"photo gBoxShadow",behaviors:[u],template:i.template(a),templateContext:function(){return{transThumbnailUrlForPhoto:function(e){return o.make(e.getPhotoUrl(),o.TYPE.s150)},albumUrl:this.options.bandCore.makeBandRouteUrl(l.GROUP_BAND_ALBUM,r.PAGE_BAND_MEDIA,{band_no:this.options.bandCore.bandNo})}},serializeData:function(){return{photos:this.collection,photosDisplayCnt:6}},ui:{eachPhotoBtn:"._eachPhotoBtn",moreBtn:"._moreBtn"},events:{"click @ui.eachPhotoBtn":function(e){return this._openImageViewer(t(e.currentTarget).data("index")),!1},"click @ui.moreBtn":function(){this.jplClick(u.CLASSIFIER.PAGE_RECENT_PHOTOS,{band_no:this.options.bandCore.bandNo})}},collectionEvents:{reset:"render"},onRender:function(){this.$el.toggle(!this.collection.isEmpty())},refreshData:function(){c.getPhotos(this.options.bandCore.bandNo,0,6).then(i.bind((function(e){this.collection.reset(e.items)}),this))},_openImageViewer:function(e){var t={result_data:{photos:this.collection.toJSON(),total_count:this.collection.size()},openIndex:e,bandNo:this.options.bandCore.bandNo,goPostSupport:!1,profileViewSupport:!0,showUserInfo:!0,moreOptionList:[_.MEDIA_MORE_OPTION.SHOW_VIDEO_VIEWER_LIST,_.MEDIA_MORE_OPTION.COPY_URL,_.MEDIA_MORE_OPTION.DELETE,_.MEDIA_MORE_OPTION.REPORT,_.MEDIA_MORE_OPTION.MEDIA_DOWNLOAD_SETTING]},n=d.openDPhotoVideoImageViewer(t);this.listenTo(n,_.TRIGGERING_EVENTS.MEDIA_DELETED,(function(e){this.refreshData(),n.destroy(),p.getAlbumChannel().trigger(p.EVENT.ALBUM_PHOTO_DELETED,this.options.bandCore.bandNo,[e])})),this.listenTo(n,d.EVENT.SHOW_POST,i.bind((function(e){n.destroy(),this.options.bandCore.goBandDForced(l.GROUP_BAND_POST_DETAIL,r.PAGE_BAND_POST_DETAIL,{band_no:this.options.bandCore.bandNo,post_no:e})}),this)),this.listenTo(n,d.EVENT.GO_ALBUM,i.bind((function(e){n.destroy(),e?l.GROUP_BAND_ALBUM_DETAIL.goDForced({band_no:this.options.bandCore.bandNo,album_no:e||m.TOTAL_ALBUM_NO}):l.GROUP_BAND_ALBUM.goDForced({band_no:this.options.bandCore.bandNo})}),this))}});return b.buildDBandSummaryPhotoListView=function(e){var t=new b({collection:new h,bandCore:e});return t.refreshData(),t},b}.call(t,n,t,e))||(e.exports=i)},1789:function(e,t){e.exports='<h2 class="tit"><%= IM(\'photo.recent\') %></h2>\n<div class="body">\n    <div class="list">\n        <%\n        photos.forEach(function(eachPhoto, idx) {\n        var classFileType = "";\n        if(eachPhoto.isGif() || eachPhoto.isGifVideo()) { classFileType = "gif" } else if(!eachPhoto.isVideoExpired() && eachPhoto.isVideo()) { classFileType = "play" };\n        %>\n        <a href="<%- eachPhoto.getPhotoUrl() %>" data-index="<%= idx %>" class="<%= classFileType %> _eachPhotoBtn">\n            <% if(eachPhoto.isVideoExpired()){ %>\n            <div class="uVideoExpired -size30"><span class="cont"><i></i><span><%= IM("storage_period.video.expired.msg") %></span></span></div>\n            <% } %>\n            <img src="<%- transThumbnailUrlForPhoto(eachPhoto) %>" alt="" width="73" height="73">\n        </a>\n        <% }); %>\n\n        <% _.times(photosDisplayCnt - photos.size(), function() { %>\n        <span class="noImg"></span>\n        <% }); %>\n    </div>\n</div>\n<a href="<%- albumUrl %>" class="more _moreBtn"><%- IM(\'ui.label.more.short\') %></a>\n'},1790:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1791),o=n(1001),l=n(1792),r=n(1794),d=n(1084),c=n(1047),h=n(1234),u=n(26),p=n(1103),m=n(783),_=n(495),b=n(908),g=n(159),f=n(487),v=n(153),A=n(162),M=n(53),C=n(1805),I=n(1807),E=n(1808),y=n(1812),T=n(1814),N=n(1539),D=n(1834),S=n(1076),w=n(154),B=n(583),L=n(787),P=n(22),O=n(1543),R=n(155),x=n(510),k=n(1835),V=n(1839),U=n(659),F=n(1176),G=n(1841),W=n(553),z=n(1239),H=n(1548),Y=n(1848),K=n(1850),j=s.View.extend({options:{bandData:null,firstActOption:{bandMediaInfo:null,writeLayerOpened:!1}},tagName:"section",className:"boardList",attributes:{"data-viewname":"DBandBoardLayoutView"},template:i.template(a),templateContext:function(){var e=this.bandData;return{msgSearchTxt:i.bind((function(){return e.getBandCore().isSupportForPostAuthorSearch()?IM("web.board.search.placeholder"):IM("pageband.postsearch.search.placeholder")}),this),msg_showHeader:M.getCurrentRouteInfo().routeInfo==A.PAGE_BAND_POST}},behaviors:function(){var e;switch(this.options.boardType){case S.TYPE.PAGE_BAND_POST:e=_.SCENE.PAGE_NEW_POST;break;case S.TYPE.PAGE_BAND_HOME:e=_.SCENE.PAGE_HOME;break;case S.TYPE.GROUP_BAND_HOME:e=_.SCENE.BAND_HOME}return[{behaviorClass:b,bandNo:this.options.bandData.getBandNo()},g,{behaviorClass:_,sceneId:e},f]},regions:{postWriteRegion:"[data-uiselector=postWriteRegion]",postSearchFormRegion:{el:"._postSearchFormRegion",replaceElement:!0},bandNoticeRegion:"[data-uiselector=bandNoticeRegion]",missionListCardRegion:{el:"._missionListCardRegion",replaceElement:!0},groupBandLiveCardRegion:{el:"._groupBandLiveCardRegion",replaceElement:!0},pageBandLiveCardRegion:{el:"._pageBandLiveCardRegion",replaceElement:!0},popularPostListRegion:{el:"@ui.popularPostListRegion",replaceElement:!0},recentPostListRegion:{el:"@ui.recentPostListRegion",replaceElement:!0},previewPostListRegion:{el:"._previewPostListRegion",replaceElement:!0},sortPostMenu:{el:"._sortPostMenu",replaceElement:!0},postViewType:{el:"._postViewType",replaceElement:!0},tagMenu:{el:"._tagMenu",replaceElement:!0},bandReservedClosureRegion:{el:"@ui.bandReservedClosureRegion",replaceElement:!0},bandIntroRegion:"@ui.bandIntroRegion",loadingBarRegion:{el:"._loadingBarRegion",replaceElement:!0},notPostedLiveCount:{el:"@ui.notPostedLiveCount",replaceElement:!0},bandServiceGuideRegion:{el:"._bandServiceGuideRegion",replaceElement:!0}},ui:{inputSearchWrap:"[data-uiselector=inputSearchWrap]",categoryHeader:"._categoryHeader",commentGuide:"._commentGuide",popularPostListTitle:"._popularPostListTitle",popularPostListRegion:"._popularPostListRegion",recentPostListTitle:"._recentPostListTitle",recentPostListRegion:"._recentPostListRegion",reservedPostInfoWrap:"[data-uiselector=reservedPostInfoWrap]",btnOpenWriteLayer:"._btnOpenWriteLayer",joinBtnArea:"._joinBtnArea",pageReservedClosureRegion:"._pageReservedClosureRegion",bandReservedClosureRegion:"._bandReservedClosureRegion",bandIntroRegion:"._bandIntroRegion",approvablePostInfoWrap:"[data-uiselector=approvablePostInfoWrap]",notPostedLiveCount:"._notPostedLiveCount",btnBandDeleteCancel:"._btnBandDeleteCancel"},events:{"click @ui.reservedPostInfoWrap":"_gotoReservedPostList","click @ui.btnOpenWriteLayer":function(){this._boardType!=S.TYPE.PAGE_BAND_HOME&&this._boardType!=S.TYPE.PAGE_BAND_POST||this.jplClick(f.CLASSIFIER.PAGE_POST_WRITE,{band_no:this.bandData.getBandNo(),position:this._boardType==S.TYPE.PAGE_BAND_HOME?"page_home_no_post":"page_recent_posts_no_post"}),this._openWriteLayer()},"click @ui.approvablePostInfoWrap":function(){this.bandData.touchContentAccess(P.CONTENT_TYPE.POST_APPROVAL),this.bandData.canAccessApprovablePost()?v.GROUP_BAND_APPROVABLE_POST.goDForced({band_no:this.bandData.getBandCore().bandNo}):v.GROUP_BAND_MY_APPROVABLE_POST.goDForced({band_no:this.bandData.getBandCore().bandNo})}},triggers:{"click @ui.joinBtnArea":"DBandMainLayoutView:startBandJoin"},childViewTriggers:{"DBandMainLayoutView:startBandJoin":"DBandMainLayoutView:startBandJoin"},initialize:function(e){this.bandData=e.bandData,this._firstActOption=e.firstActOption||{},this._bandMediaInfo=this._firstActOption.bandMediaInfo,this._boardType=e.boardType,this._postSortOrder=o.LIST_ORDER_TYPE.RECENT,this.listenTo(u.getPostChannel(),u.EVENT.POST_ADDED,this._showChildViews),this.listenTo(u.getPostChannel(),u.EVENT.RESERVED_POST_ADDED,(function(e){M.getCurrentRouteInfo().routeInfo==A.PAGE_BAND_HOME&&x.openLayer({bodyDesc:IM("web.postwrite.reserved.alert.message")}).once(x.EVENTS.CONFIRM,i.bind((function(){A.PAGE_BAND_POST.goDForced({band_no:e.bandNo})}),this)),this._showReservedPostInfo()})),this.listenTo(u.getPostChannel(),u.EVENT.MY_APPROVABLE_POST_ADDED,this._showApprovalPostInfo),this.listenTo(this.bandData,R.UPDATE_EVENT.ANY,(function(e){(e[R.UPDATE_EVENT.PROFILE]||e[R.UPDATE_EVENT.MEMBER]||e[R.UPDATE_EVENT.BAND])&&this._showChildViews()}))},onAttach:function(){this._showChildViews(),this._firstActOption.writeLayerOpened&&this._openWriteLayer(),M.getCurrentRouteInfo().routeInfo===v.GROUP_BAND_REVERIFY_EMAIL&&this._openEmailReverificationLayerView(),i.isEmpty(this._bandMediaInfo)||p.openSingleImageViewer(this,this.bandData.getBandNo(),this._bandMediaInfo.photoNo,this._bandMediaInfo.initCommentId,this._bandMediaInfo.initCommentReplyId,!!this._bandMediaInfo.goPostSupport,!!this._bandMediaInfo.goAlbumSupport),this._sendJplSceneLog()},_showChildViews:function(){if(!this.isDestroyed()){if(this._showBandServiceGuideView(),this._showMissionListCardView(),this._showPostList(),this.bandData.isCardView()){var e=N.build({bandData:this.bandData,isSummaryView:!0,showMoreOptionMenu:!1});return this.showChildView("bandIntroRegion",e),void this.getRegion("postSearchFormRegion").empty()}this.showChildView("postSearchFormRegion",h.createDBandPostSearchFormView(this.bandData)),this._showFakeEditor(),this._showReservedPostInfo(),this._showApprovalPostInfo(),this._renderCategoryHeader(),this._renderTags(),this._renderBandIntro(),this._renderBandNotices(),this._renderBandReservedClosureNotice(),this._showLiveCardView(),this._renderNotPostedLiveCount()}},_sendJplSceneLog:function(){var e,t={band_no:this.options.bandData.getBandNo(),is_preview:this.options.bandData.isPreviewForJplExtra()};switch(this.options.boardType){case S.TYPE.PAGE_BAND_POST:e=f.CLASSIFIER.PAGE_NEW_POST;break;case S.TYPE.PAGE_BAND_HOME:e=f.CLASSIFIER.PAGE_HOME;break;case S.TYPE.GROUP_BAND_HOME:e=f.CLASSIFIER.BAND_HOME}e===f.CLASSIFIER.PAGE_NEW_POST&&delete t.is_preview,e&&this.jplSceneEnter(e,t)},_gotoReservedPostList:function(){this.bandData.getBandCore().goBandDForced(v.GROUP_BAND_RESERVED_POST,A.PAGE_BAND_RESERVED,{band_no:this.bandData.getBandNo()})},_getEmptyTemplateInCase:function(){return i.template(D)(this.bandData.showEmptyPostGroupBandMode()?this.bandData.canJoin()?S.POST_EMPTY_BOARD.GROUP_BAND.NEED_JOIN:this._postSortOrder===o.LIST_ORDER_TYPE.RECENT?S.POST_EMPTY_BOARD.GROUP_BAND.NEED_NOT_JOIN:S.POST_EMPTY_BOARD.GROUP_BAND.NO_RECENT_COMMENT:this.bandData.isPostingPermitted()?S.POST_EMPTY_BOARD.PAGE_BAND.POSTING_PERMITTED:S.POST_EMPTY_BOARD.PAGE_BAND.NOT_POSTING_PERMITTED)},_showLoadingBar:function(){this.getRegion("loadingBarRegion").show(B.buildListBottomMediumLoadingBar())},_hideLoadingBar:function(){this.getRegion("loadingBarRegion").empty()},_showPreviewPostList:function(){var e=this.getRegion("previewPostListRegion"),t=this.bandData.getBandNo(),n=s.View.extend({template:this._getEmptyTemplateInCase()});K.show(e,t,n)},_showPostList:function(){this.bandData.canShowRecentPost()?this._showPreviewPostList():this.bandData.canAccessPost()?(this._showLoadingBar(),(this.bandData.isShowPopularPostInPreview()?this._showPopularAndRecentPostList():this._showRecentPostList()).done(i.bind((function(){this._hideLoadingBar()}),this))):this.showChildView("recentPostListRegion",this._getEmptyTemplateInCase())},_showPopularAndRecentPostList:function(){var e=o.createPostListCollection(this.bandData.getBandNo(),o.LIST_ORDER_TYPE.POPULAR,this.bandData.isShowPopularPostInPreview());return w.wrapActivePromise(e.fetchNextPostList(),this).then(i.bind((function(e){if(this._popularPostListCollection=e,this._popularPostListCollection.isEmpty())return this._showRecentPostList();var t=c.buildDBandPostListView(this.bandData,this._popularPostListCollection,null);this.listenTo(t,"lastPostFetched",(function(){this._showRecentPostList()})),this.getUI("popularPostListTitle").show(),this.showChildView("popularPostListRegion",t)}),this))},_showRecentPostList:function(){var e=o.createPostListCollection(this.bandData.getBandNo(),this._postSortOrder);return w.wrapActivePromise(e.fetchNextPostList(),this).then(i.bind((function(e){this._recentPostListCollection=e,this._renderCommentGuide();var t=c.buildDBandPostListView(this.bandData,this._recentPostListCollection,s.View.extend({template:this._getEmptyTemplateInCase()}));this._popularPostListCollection&&!this._popularPostListCollection.isEmpty()&&this.getUI("recentPostListTitle").show(),this.showChildView("recentPostListRegion",t)}),this))},_showReservedPostInfo:function(){this.bandData.isCreateReservedPostPermitted()&&m.getReservedPostCount(this.bandData.getBandNo()).then(i.bind((function(e){if(!(this.isDestroyed()||e<=0)){var t=i.template('<div class="cPostReserve"><a href="#" class="tit"><%= IM("web.post.reserved_post") %><span class="total"><%= msg_reservedPostCount %></span></a></div>');this.ui.reservedPostInfoWrap.html(t({msg_reservedPostCount:e}))}}),this))},_showApprovalPostInfo:function(){this.bandData.isPostingPermitted()&&(this.bandData.canAccessMyApprovablePost()||this.bandData.canAccessApprovablePost())&&(this.bandData.canAccessApprovablePost()?L.getApprovablePostCount:L.getMyApprovablePostCount)(this.bandData.getBandNo()).then(i.bind((function(e){if(!(this.isDestroyed()||e<=0)){e=e>999?"999+":e;var n=i.template('<div class="cPostReserve"><a href="#" class="tit"><span class="gNewIcon _approvableNewIcon">new</span><%=IM("approve.post.list.label")%><span class="total"><%= approvablePostCount %></span></a></div>');this.ui.approvablePostInfoWrap.html(n({approvablePostCount:e})),this.bandData.hasUpdatedContent(P.CONTENT_TYPE.POST_APPROVAL)?t("._approvableNewIcon").show():t("._approvableNewIcon").hide()}}),this))},_showFakeEditor:function(){if(this.bandData.isPostingPermitted()){var e=l.buildDPostFakeEditorView(this.bandData,this._boardType);this.getRegion("postWriteRegion").show(e)}},_renderBandIntro:function(){w.wrapActivePromise(this._getBandIntroViewPromise(),this).then(i.bind((function(e){e&&(this.showChildView("bandIntroRegion",e),this.listenTo(e,N.EVENT.MODIFY_INTRO,(function(){W.settingBandIntro(this.bandData.getBandCore()).go()})))}),this))},_getBandIntroViewPromise:function(){return this._boardType==S.TYPE.PAGE_BAND_HOME?T.buildPageBandIntroView(this.bandData):this._boardType!=S.TYPE.GROUP_BAND_HOME||this.bandData.canShowGroupBandIntroDescriptionAndDoAction()?t.Deferred().reject().promise():t.Deferred().resolve(N.build({bandData:this.bandData,isSummaryView:!0,showMoreOptionMenu:!1})).promise()},_renderBandReservedClosureNotice:function(){if(this.bandData.canShowPageReservedDeletionInfo()&&this.bandData.getReservedClosureAt()){var e=E.build({bandNo:this.bandData.getBandNo(),showCancelBtn:this.bandData.canCancelReservedClosing(),reservedClosureAt:this.bandData.getReservedClosureAt()});this.showChildView("bandReservedClosureRegion",e)}else if(this.bandData.getReservedClosureAt()&&this._boardType==S.TYPE.GROUP_BAND_HOME){e=y.build({bandData:this.bandData});this.showChildView("bandReservedClosureRegion",e)}},_renderBandNotices:function(){if(this._boardType!=S.TYPE.PAGE_BAND_HOME){var e=new d,t=this.bandData.getBandCore().supportNoticePostFromLinkedPage()?e.fetchBandNoticeWithPageNotice(this.bandData.getBandNo()):e.fetchBandNotices(this.bandData.getBandNo());return w.wrapActivePromise(t,this).then(i.bind((function(){this.getRegion("bandNoticeRegion").show(r.buildDBandBoardNoticeView(this.bandData,e))}),this))}var n=new I;w.wrapActivePromise(n.fetchPageBandHomeNoticeList(this.bandData.getBandNo()),this).then(i.bind((function(){this.getRegion("bandNoticeRegion").show(C.buildDPageBandHomeNoticeView(this.bandData,n))}),this))},_showMissionListCardView:function(){var e=this.getRegion("missionListCardRegion");k.showMissionListCardView(this.bandData,e)},_showLiveCardView:function(){var e;e=this._boardType==S.TYPE.PAGE_BAND_HOME||this._boardType==S.TYPE.PAGE_BAND_POST?this.getRegion("pageBandLiveCardRegion"):this.getRegion("groupBandLiveCardRegion"),O.showBandLiveCardView(e,this.bandData.getBandCore(),this.bandData.getOnAirLiveId())},_openWriteLayer:function(){return this.bandData.isPostingPermitted()?u.getPostChannel().trigger(u.EVENT.NEW_POST,{bandData:this.bandData}):alert(IM("web.postwrite.placeholder.noPermission")),!1},_openEmailReverificationLayerView:function(){var e=this.bandData.getBandNo();if(this.bandData.canJoin())v.GROUP_BAND_HOME.goDForced({band_no:e});else{var t=F.openAsLayer(e);this.listenToOnce(t,"apply:next",(function(t){U.verifyMemberEmail(e,t).then((function(){v.GROUP_BAND_HOME.goDForced({band_no:e})}))})),this.listenToOnce(t,"cancel",(function(){v.GROUP_BAND_HOME.goDForced({band_no:e})}))}},_renderTags:function(){this.options.boardType===S.TYPE.GROUP_BAND_HOME&&(this._postSortOrder===o.LIST_ORDER_TYPE.RECENT?this.showChildView("tagMenu",H.buildDBandBoardTagMenuView(this.bandData,{isAllPost:!0})):this.getRegion("tagMenu").empty())},_renderCategoryHeader:function(){if(this.options.boardType===S.TYPE.GROUP_BAND_HOME&&this.bandData.canUsePostListType()){this.getUI("categoryHeader").css("display","");var e=Y.buildDBandHomeSortPostMenuView(this._postSortOrder);if(this.showChildView("sortPostMenu",e),this.listenTo(e,Y.EVENT.CHANGE_POST_SORT_ORDER,(function(e){this._postSortOrder=e,this._renderTags(),this._showPostList()})),this.bandData.canUsePostListType()){var t=z.buildDPostViewTypeSelectView(this.bandData);this.showChildView("postViewType",t),this.listenTo(t,z.EVENT.CHANGE,this._showPostList)}}else this.getUI("categoryHeader").css("display","none")},_renderCommentGuide:function(){this.options.boardType!==S.TYPE.GROUP_BAND_HOME||this._postSortOrder!==o.LIST_ORDER_TYPE.COMMENT||this._recentPostListCollection.isEmpty()?this.getUI("commentGuide").css("display","none"):this.getUI("commentGuide").css("display","")},_renderNotPostedLiveCount:function(){var e=V.asyncBuildNotPostedLiveCountView(this.bandData);w.wrapActivePromise(e,this).then(i.bind((function(e){this.showChildView("notPostedLiveCount",e)}),this))},_showBandServiceGuideView:function(){G.showDBandServiceGuideView(this.getRegion("bandServiceGuideRegion"),this.bandData)}});return j.buildDBandBoardLayoutView=function(e){return new j({bandData:e.bandData,firstActOption:e.firstActOption,boardType:e.boardType})},j}.call(t,n,t,e))||(e.exports=i)},1791:function(e,t){e.exports='\x3c!-- 서비스 안내영역 --\x3e\n<div class="_bandServiceGuideRegion"></div>\n\n\x3c!-- 게시글 검색 Form  --\x3e\n<div class="_postSearchFormRegion"></div>\n\n\x3c!--  글쓰기 영역 --\x3e\n<div class="writeWrap" data-uiselector="postWriteRegion"></div>\n\n\x3c!-- 밴드 삭제 예정 --\x3e\n<div class="_bandReservedClosureRegion"></div>\n\n\x3c!-- 승인 대기 계시글 정보 영역 --\x3e\n<div class="reserveWrap gContentCardShadow" data-uiselector="approvablePostInfoWrap"></div>\n\n\x3c!-- 예약된 계시글 정보 영역 --\x3e\n<div class="reserveWrap gContentCardShadow" data-uiselector="reservedPostInfoWrap"></div>\n\n<% /* 임시 저장된 라이브 카운트 영역 */ %>\n<div class="_notPostedLiveCount" style="display:none"></div>\n\n\x3c!-- [페이지 밴드] 밴드 소개 영역 --\x3e\n<div class="moduleBox _bandIntroRegion"></div>\n\n\x3c!-- [페이지 밴드] 라이브 카드 영역 --\x3e\n<div class="_pageBandLiveCardRegion"></div>\n\n\x3c!-- [그룹 밴드] 미션 목록 카드 영역 --\x3e\n<div class="_missionListCardRegion"></div>\n\n\x3c!-- 공지사항 영역 --\x3e\n<div data-uiselector="bandNoticeRegion"></div>\n\n\x3c!-- [그룹 밴드] 라이브 카드 영역 --\x3e\n<div class="_groupBandLiveCardRegion"></div>\n\n\x3c!-- 대표태그 영역 --\x3e\n<div class="postViewTypeTagBox">\n    <div class="header _categoryHeader">\n        <div class="_sortPostMenu"></div>\n        \x3c!-- 게시글 뷰 타입 버튼--\x3e\n        <div class="_postViewType"></div>\n    </div>\n\n    <div class="_tagMenu"></div>\n\n    <p class="lastCommentGuide _commentGuide" style="display: none;"><%-IM("board.post_sort.by_comment_desc.desc")%></p>\n</div>\n\n\x3c!-- 게시글 목록 영역 --\x3e\n<h2 class="gSrOnly"><%- IM(\'band.post_list.title\') %></h2>\n\n<div class="_previewPostListRegion"></div>\n\n<div class="moduleBox">\n    <% if (msg_showHeader) { %>\n    <div class="uHeaderWrap -h50">\n        <header class="header">\n            <h1 class="title"><%- IM(\'pageband.main.page_menu.post\') %></h1>\n        </header>\n    </div>\n    <% } %>\n    <div class="postWrap">\n        <h2 class="postWrapTitle _popularPostListTitle" style="display:none;"><%= IM(\'band.popular_post_list.title\') %></h2>\n        <div class="_popularPostListRegion"></div>\n    </div>\n    <div class="postWrap">\n        <h2 class="postWrapTitle _recentPostListTitle" style="display:none;"><%= IM(\'band.recent_post_list.title\') %></h2>\n        <div class="_recentPostListRegion"></div>\n    </div>\n    \x3c!-- 로딩바 영역 --\x3e\n    <div class="_loadingBarRegion"></div>\n</div>\n'},1792:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(153),o=n(162),l=n(1793),r=n(1012),d=n(154),c=n(851),h=n(1561),u=n(26),p=n(487),m=n(1560),_=n(201),b=n(930),g=n(1076),f=n(554),v=n(167),A=n(166),M=n(1636),C=n(590),I=s.View.extend({className:"cPostWrite gContentCardShadow",attributes:{"data-viewname":"DPostFakeEditorView"},template:i.template(l),templateContext:function(){if(!this._dataFetched)return{};var e=this._allowedAddonCollection.findAllowedAddonModelByType(h.MARKDOWN),t=new M(this.bandData);return{msg_isPostingPermitted:this.bandData.isPostingPermitted(),msg_placeholder:this._makePlaceholderText(),markdownName:e?e.getLocaleName():"",toolbars:t.getMainToolbar(),mores:t.getMore(),showMore:t.needShowMore()}},getTemplate:function(){return this._dataFetched?i.template(l):i.template('<div class="_loadingRegion"></div>')},ui:{btnOpenWriteLayer:"._btnOpenWriteLayer",loadingRegion:"._loadingRegion",btnPopupOpenShortly:"._popupOpenShortly",btnCreateLive:"._btnCreateLive",wrapMoreMenus:"._wrapMoreMenus",btnMore:"._btnMore"},regions:{loadingRegion:"@ui.loadingRegion"},events:{"click @ui.btnOpenWriteLayer":"_openWriteLayer","click @ui.btnPopupOpenShortly":"_openWriteLayer","focus @ui.btnPopupOpenShortly":function(e){var n=t(e.currentTarget);n.hasClass("-active")||n.addClass("-active")},"blur @ui.btnPopupOpenShortly":function(e){t(e.currentTarget).removeClass("-active")},"mouseover @ui.btnPopupOpenShortly":function(){this.ui.btnPopupOpenShortly.removeClass("-active")},"click @ui.btnCreateLive":function(){if(C.isContentCreationPunished())return!1;if(!_.isSupported())return alert(IM("live.not_support_browser")),!1;var e=this.bandData.getBandCore().makeBandRouteUrl(a.GROUP_BAND_CREATE_LIVE,o.PAGE_BAND_CREATE_LIVE,{band_no:this.bandData.getBandNo()});return window.open(e,"_blank"),!1},"click @ui.btnMore":function(e){this.getUI("wrapMoreMenus").toggle(),e.stopPropagation()}},behaviors:[p],initialize:function(e){this.bandData=e.bandData,this._boardType=e.boardType,this._dataFetched=!1,this.listenTo(u.getDGlobalChannel(),u.EVENT.HTML_CLICK,(function(){this.getUI("wrapMoreMenus").hide()}))},onDomRefresh:function(){this.getUI("wrapMoreMenus").hide(),this._dataFetched||this.showChildView("loadingRegion",r.view({loadingSize:r.Size.MEDIUM,middleClass:r.MiddleClass.AREA_VERTICAL_MIDDLE,className:"-h84"}))},onAttach:function(){d.wrapActivePromise(c.getCachedAllowedAddonCollection(),this).then(i.bind((function(e){this._allowedAddonCollection=e,this._dataFetched=!0,this.render()}),this))},_openWriteLayer:function(e){if(e.stopPropagation(),!this.bandData.isPostingPermitted())return alert(IM("web.postwrite.placeholder.noPermission")),!1;var n=t(e.currentTarget).data("attachment");return this._boardType==g.TYPE.PAGE_BAND_HOME||this._boardType==g.TYPE.PAGE_BAND_POST?(this.jplClick(p.CLASSIFIER.PAGE_POST_WRITE,{band_no:this.bandData.getBandNo(),position:this._boardType==g.TYPE.PAGE_BAND_HOME?"page_home_write":"page_recent_write"}),u.getPostChannel().trigger(u.EVENT.NEW_POST,{bandData:this.bandData,attachment:n}),!1):v.getCurrentUserEnvStorage().get(A.FakeEditorConfirmPostWriteAlert)?(u.getPostChannel().trigger(u.EVENT.NEW_POST,{bandData:this.bandData,attachment:n}),!1):(this._checkHaveMissionInfoAndShowEditor(n),!1)},_makePlaceholderText:function(){return this.bandData.isPostingPermitted()?m.makePlaceholderByBandOpenType(this.bandData.isShowMessagePublicBandContentAccessByAnyone()):IM("web.postwrite.placeholder.noPermission")},_checkHaveMissionInfoAndShowEditor:function(e){var t=v.getCurrentUserEnvStorage(),n=new b;n.fetchOnGoingMissions(this.bandData.getBandNo()).then(i.bind((function(){if(n.find((function(e){return e.get("confirmStatus")==f.CONFIRM_STATUS.NOT_YET_CONFIRMED})))return alert(IM("create.confirm_post.alert.msg")),void t.set(A.FakeEditorConfirmPostWriteAlert,!0);u.getPostChannel().trigger(u.EVENT.NEW_POST,{bandData:this.bandData,attachment:e})}),this)).fail(i.bind((function(){u.getPostChannel().trigger(u.EVENT.NEW_POST,{bandData:this.bandData,attachment:e})}),this))}});return I.buildDPostFakeEditorView=function(e,t){return new I({bandData:e,boardType:t})},I}.call(t,n,t,e))||(e.exports=i)},1793:function(e,t){e.exports='<% if (msg_isPostingPermitted) { %>\n<h3 class="gSrOnly"><%-IM(\'web.postwrite.title.new_post\')%></h3>\n<button type="button" class="cPostWriteEventWrapper _btnOpenWriteLayer"><span class="gSrOnly"><%- IM(\'web.bandboard.btn.write\') %></span></button>\n<div class="postWriteForm -standby">\n    <div class="contentEditor">\n        <%= msg_placeholder %>\n    </div>\n</div>\n<div class="buttonArea _btnOpenWriteLayer">\n    <ul class="toolbarList">\n        <% if (toolbars.photo) { %>\n        <li class="toolbarListItem">\n            <label class="photo _popupOpenShortly" data-attachment="photo">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.photo\')%></span>\n                <span class="icon"></span>\n            </label>\n        </li>\n        <% } %>\n        <% if (toolbars.sticker) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="sticker _popupOpenShortly" data-attachment="sticker">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.sticker\')%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n        <% if (toolbars.video) { %>\n        <li class="toolbarListItem">\n            <label class="movie _popupOpenShortly" data-attachment="video">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.video\')%></span>\n                <span class="icon"></span>\n            </label>\n        </li>\n        <% } %>\n\n        <% if (toolbars.live) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="live _btnCreateLive" data-attachment="live">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%- IM("band.live") %></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.poll) { %>\n        <li class="toolbarListItem dividLine">\n            <button type="button" class="vote _popupOpenShortly" data-attachment="poll">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.poll\')%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n        <% if (toolbars.file) { %>\n        <li class="toolbarListItem">\n            <label class="file _popupOpenShortly" data-attachment="file">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.file\')%></span>\n                <span class="icon"></span>\n            </label>\n        </li>\n        <% } %>\n\n        <% if (toolbars.schedule) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="calendar _popupOpenShortly" data-attachment="schedule">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.schedule\')%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.todo) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="todo _popupOpenShortly" data-attachment="todo">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.todo\')%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n        <% if (toolbars.signup) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="signup _popupOpenShortly" data-attachment="signup">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%- IM(\'signup.type_name\') %></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.attendance) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="attendance _popupOpenShortly" data-attachment="attendance">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%- IM(\'web.postwrite.btn.attach.attendance_check\') %></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.quiz) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="quiz _popupOpenShortly" data-attachment="quiz">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM("quiz.editor.form.title")%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.survey) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="survey _popupOpenShortly" data-attachment="survey">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM("survey.editor.form.title")%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.location) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="map _popupOpenShortly" data-attachment="location">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM("web.postwrite.btn.attach.location") %></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.billsplit) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="n _popupOpenShortly" data-attachment="billsplit">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM(\'web.postwrite.btn.attach.billsplit\')%></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (toolbars.markdown) { %>\n        <li class="toolbarListItem">\n            <button type="button" class="markdown _popupOpenShortly" data-attachment="markdown">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%- markdownName %></span>\n                <span class="icon"></span>\n            </button>\n        </li>\n        <% } %>\n\n        <% if (showMore) { %>\n\n        <li class="toolbarListItem">\n            <button type="button" class="btnMoreAttach _btnMore" data-attachment="more">\n                <span class="tooltip sf_tBg sf_tBorderAfter"><%-IM("ui.label.more.short")%></span>\n                <span class="icon"></span>\n            </button>\n\n            <ul class="moreAttachList _wrapMoreMenus" >\n                <% if (mores.location) { %>\n                <li class="moreAttachItem">\n                    <button type="button" class="map _popupOpenShortly" data-attachment="location">\n                        <span class="icon"></span>\n                        <span class="label"><%-IM("web.postwrite.btn.attach.location") %></span>\n                    </button>\n                </li>\n                <% } %>\n\n                <% if (mores.billsplit) { %>\n                <li class="moreAttachItem">\n                    <button type="button" class="n _popupOpenShortly" data-attachment="billsplit">\n                        <span class="icon"></span>\n                        <span class="label"><%-IM(\'web.postwrite.btn.attach.billsplit\')%></span>\n                    </button>\n                </li>\n                <% } %>\n\n                <% if (mores.markdown) { %>\n                <li class="moreAttachItem">\n                    <button type="button" class="markdown _popupOpenShortly" data-attachment="markdown">\n                        <span class="icon"></span>\n                        <span class="label"><%- markdownName %></span>\n                    </button>\n                </li>\n                <% } %>\n            </ul>\n        </li>\n\n        <% } %>\n\n    </ul>\n</div>\n<% } %>'},1794:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(1795),a=n(786),o=n(26),l=n(153),r=n(162),d=n(53),c=n(487),h=n(1796),u=n(1798),p=i.CollectionView.extend({tagName:"ul",className:"notice",childViewTriggers:{openNoticePostDetail:"openNoticePostDetail"}});p.buildDBandBoardNoticeCollectionView=function(e,n){var i=new p;return t.each(e.get("linkedPageNotices"),(function(e){i.addChildView(u.buildDBandBoardPageNoticeItemView(e))})),t.each(e.get("bandNotices"),(function(e){i.addChildView(h.buildDBandBoardGroupBandNoticeItemView(e,n))})),i};var m=i.View.extend({className:"cNoticeWrap gContentCardShadow",attributes:{"data-viewname":"DBandBoardNoticeView"},template:t.template(s),templateContext:function(){return{hasNotice:this._hasNotice}},behaviors:[c],ui:{noticeNav:"._noticeNav"},events:{"click @ui.noticeNav":"_gotoNoticeList"},regions:{bandNoticesRegion:{el:"._bandNoticesRegion",replaceElement:!0}},childViewEvents:{openNoticePostDetail:function(e){this._openNoticePostDetail(e.options.notice)}},initialize:function(e){this._bandData=e.bandData,this._hasNotice=this.model.get("bandNotices").length>0||this.model.get("linkedPageNotices").length>0,this.listenTo(o.getPostChannel(),o.EVENT.UPDATE_BAND_NOTICE,t.bind((function(){(this._bandData.getBandCore().supportNoticePostFromLinkedPage()?this.model.fetchBandNoticeWithPageNotice(this._bandData.getBandNo()):this.model.fetchBandNotices(this._bandData.getBandNo())).then(t.bind((function(){this.render()}),this))}),this)),this.listenTo(o.getPostChannel(),o.EVENT.POST_DELETED,(function(e){var n=this.model.get("bandNotices");for(var i in n)if(n[i].postNo==e.postNo){(this._bandData.getBandCore().supportNoticePostFromLinkedPage()?this.model.fetchBandNoticeWithPageNotice(this._bandData.getBandNo()):this.model.fetchBandNotices(this._bandData.getBandNo())).then(t.bind((function(){this.render()}),this));break}})),this.listenTo(o.getPostChannel(),o.EVENT.POST_DETAIL_LAYER_OPEN,(function(e){if(this._bandData.getBandNo()===e.bandNo){var n=t.find(this.model.get("bandNotices"),(function(e){return!1===e.isRead&&e.postNo===this.postNo}),e);null!=n&&(n.isRead=!0,this.render())}}))},onRender:function(){this._hasNotice?(this.showChildView("bandNoticesRegion",p.buildDBandBoardNoticeCollectionView(this.model,this._bandData)),this.$el.show()):this.$el.hide()},_gotoNoticeList:function(){return this._bandData.getBandCore().goBandDForced(l.GROUP_BAND_NOTICES,r.PAGE_BAND_NOTICE,{band_no:this._bandData.getBandNo()}),!1},_openNoticePostDetail:function(e){var t=e.postNo,n={bandNo:this._bandData.getBandNo(),postNo:t,postNoList:[]};return a.buildPostDetailAsLayer(n),d.getCurrentRouteInfo().routeInfo==r.PAGE_BAND_POST&&this.jplClick(c.CLASSIFIER.NOTICES_LIST,{band_no:this._bandData.getBandNo()}),!1}});return m.buildDBandBoardNoticeView=function(e,t){return new m({model:t,bandData:e})},m}.call(t,n,t,e))||(e.exports=i)},1795:function(e,t){e.exports='<% if (hasNotice) { %>\n<h2 class="title">\n    <%= IM(\'ui.label.notice.title.singular\') %>\n\n<% if ( count > 3 ) { %>\n    <a href="#" class="moreLink _noticeNav<% if(isCountless) { %> isCountless<% } %>"><%- count %></a>\n<% }  %>\n</h2>\n<ul class="_bandNoticesRegion"></ul>\n</ul>\n<% } %>\n'},1796:function(e,t,n){var i=n(0),s=n(4),a=n(1797),o=n(152),l=s.View.extend({options:{bandData:void 0},tagName:"LI",className:"noticeItem",attributes:{"data-viewname":"DBandBoardGroupBandNoticeItemView"},template:i.template(a),templateContext:function(){return{notice:this.options.notice,dimmed:this._isDimRequired(),canShowUnReadMark:this.options.bandData.canShowUnReadMark()}},ui:{link:"._link"},triggers:{"click @ui.link":"openNoticePostDetail"},onRender:function(){this._isDimRequired()&&this.$el.css("position","relative")},_isDimRequired:function(){var e=this.options.notice;return o.isDimRequired({isRestricted:!1,isMutedAuthorPost:e.author&&e.author.isMuted,isVisibleOnlyToAuthor:e.isVisibleOnlyToAuthor})}});l.buildDBandBoardGroupBandNoticeItemView=function(e,t){return new l({notice:e,bandData:t})},e.exports=l},1797:function(e,t){e.exports='<% if (canShowUnReadMark && !notice.isRead) { %>\n<span class="gNewIcon"><%= IM(\'web.more.menu.notice.new\') %></span>\n<% } %>\n<a href="#" class="noticeItemLink _link" style="<%= dimmed ? \'text-decoration:none;\' : \'\' %>">\n  <% if (dimmed) { %>\n  <div class="gDimmed"></div>\n  <% } %>\n  <% if (!dimmed && notice.isMajor) { %>\n  <strong class="sf_color">[<%= IM(\'band.noticelist.major.label\') %>]</strong>\n  <% } %>\n  <%- notice.title %>\n</a>\n'},1798:function(e,t,n){var i=n(0),s=n(4),a=n(1799),o=n(162),l=s.View.extend({tagName:"LI",className:"noticeItem",attributes:{"data-viewname":"DBandBoardPageNoticeItemView"},template:i.template(a),templateContext:function(){var e=this.options.notice;return{notice:e,postUrl:o.PAGE_BAND_POST_DETAIL.makeUrl({band_no:e.band.bandNo,post_no:e.postNo})}}});l.buildDBandBoardPageNoticeItemView=function(e){return new l({notice:e})},e.exports=l},1799:function(e,t){e.exports='<span class="noticeFromPageIcon"><em class="gSrOnly"><%- IM("web.page.notice.label")%></em></span>\n<a href="<%- postUrl %>" class="noticeItemLink linkedPageNoticeItem" target="_blank">\n  <% if (notice.isMajor) { %>\n  <strong class="sf_color">[<%= IM(\'band.noticelist.major.label\') %>]</strong>\n  <% } %>\n  <%- notice.title %>\n</a>\n'},1800:function(e,t,n){var i=n(0),s=n(10),a=n(4),o=n(1801),l=n(1110),r=n(158),d=n(1247),c=n(1061),h=n(578),u=n(553),p=n(1048),m=n(17),_=n(1040),b=n(82),g=n(152),f=n(1155),v=n(26),A=n(1533),M=n(509),C=n(9),I=n(52),E=n(1041),y=n(656),T="post:showPostDetail",N=a.View.extend({behaviors:[c,E.withUI("dimArea","clickDim")],attributes:{"data-viewname":"DPostListItemListTypeView"},className:"cCard gContentCardShadow",initialize:function(){this._orderedExistingAttachmentTypes=this._getOrderedExistingAttachmentTypes(),this.listenTo(v.getPostChannel(),v.EVENT.POST_UPDATED,(function(e){this.model.getPostNo()===e&&(this._orderedExistingAttachmentTypes=this._getOrderedExistingAttachmentTypes(),this._refreshData())})),this.listenTo(v.getPostChannel(),v.EVENT.POST_EMOTION_CHANGED,(function(e){this.model.getBandNo()===e.get("band").bandNo&&this.model.getPostNo()===e.get("postNo")&&this._refreshData()})),this.listenTo(v.getPostChannel(),v.EVENT.POST_COMMENT_COUNT_CHANGED,(function(e){this.model.getBandNo()===e.bandNo&&this.model.getPostNo()===e.postNo&&this.model.set("commentCount",e.count)})),this.listenTo(this,"clickDim",this._onClickPostItem)},template:i.template(o),templateContext:function(){var e,t=this.model.getMissionInfoForPost(),n=t?t.getPostMissionConfirmCompleteText():null;return y.hasRestriction(this.model)&&(n=void 0),e=s.isBlank(this.model.get("content"))?this._getNonContentText():r.convertPostText(this.model.get("content")).replace(/(<br>)+/g," "),{postDetailUrl:u.postDetail(this.model.getBandCore(),this.model.getPostNo()).url,prefixAttachmentText:this._getPrefixAttachmentText(),content:e,commentCountText:h.numberWithCommas(this.model.get("commentCount")||0),sharedCountText:h.numberWithCommas(this.model.get("sharedCount")||0),readCountText:h.numberWithCommas(this.model.get("readCount")||0),media:this._getPresentMedia(),missionTitle:n}},ui:{dimArea:"._dimArea",postMainWrap:"._postMainWrap",postAuthorRegion:"._postAuthorRegion",missionInfo:"._missionInfo",btnMedia:"._btnMedia",btnSetEmotion:"._btnSetEmotion",btnShare:"._btnShare",postText:"._postText",textBody:"._textBody",moreWrap:"._moreWrap",linkComment:"._linkComment",moreOptionListRegion:"._moreOptionListRegion"},events:{"click @ui.missionInfo":"_onClickPostItem","click @ui.postText":"_onClickPostItem","click @ui.btnMedia":"_onClickPostItem","click @ui.linkComment":function(e){e.preventDefault(),this._onClickPostItem()},"click @ui.btnShare":"_togglePostShareOptionListView"},regions:{postAuthorRegion:{el:"@ui.postAuthorRegion",replaceElement:!0},stickerRegion:{el:"._stickerRegion",replaceElement:!0},emotionCountSelectRegion:{el:"._emotionCountSelectRegion",replaceElement:!0},sharePostLayerRegion:{el:"._sharePostLayerRegion",replaceElement:!0},moreOptionListRegion:{el:"@ui.moreOptionListRegion",replaceElement:!0}},childViewEvents:{"author:showPostDetailLayer":"_onClickPostItem"},onRender:function(){if(E.renderDimOfView(this,i.bind((function(e){this.getUI("postMainWrap").toggleClass("-blockUserPost",e)}),this)),this.getRegion("postAuthorRegion").show(l.build(this.model,{bPostDetail:!1})),this._renderMoreOptionList(),this._renderEmotionCountView(),s.isBlank(this.model.get("content"))&&this._orderedExistingAttachmentTypes[0]===g.POST_ATTACHMENT_TYPE.STICKER){var e=this.model.getAttachment(g.POST_ATTACHMENT_TYPE.STICKER).at(0);this.showChildView("stickerRegion",f.build({model:e}))}},onDomRefresh:function(){this.getUI("moreWrap").toggle(this.getUI("textBody").prop("scrollHeight")>this.getUI("textBody").prop("clientHeight"))},_renderMoreOptionList:function(){var e=d.buildOptionList(this.model.getBandNo(),this.model.getPostNo(),null);this.listenTo(e,"postMoreOptionList:clickMenu",this.triggerMethod),this.model.get("isRestricted")||y.hideAllMoreOption(this.model)?this.ui.moreOptionListRegion.hide():this.getRegion("moreOptionListRegion").show(e)},_renderEmotionCountView:function(){this.showChildView("emotionCountSelectRegion",A.buildDEmotionCountSelectView({model:this.model,bandNo:this.model.getBandNo(),contentKey:M.buildPostKey(this.model.getPostNo())}))},_getOrderedExistingAttachmentTypes:function(){var e=[];return i.each(g.ATTACHMENT_ORDER,(function(t){t===g.POST_ATTACHMENT_TYPE.PHOTO&&this.model.hasMediaAll()&&i.each(g.MEDIA_ATTACHMENT_TYPES,(function(t){this.model.hasAttachment(t)&&e.push(t)}),this),this.model.hasAttachment(t)&&e.push(t)}),this),e},_getPrefixAttachmentText:function(){var e=[g.POST_ATTACHMENT_TYPE.PHOTO_ALBUM,g.POST_ATTACHMENT_TYPE.VIDEO,g.POST_ATTACHMENT_TYPE.PROMOTION_PHOTO,g.POST_ATTACHMENT_TYPE.PHOTO,g.POST_ATTACHMENT_TYPE.SHARED_POST_SNIPPET,g.POST_ATTACHMENT_TYPE.SHARED_PAGE_POST_SNIPPET,g.POST_ATTACHMENT_TYPE.SNIPPET,g.POST_ATTACHMENT_TYPE.SUBPOST,g.POST_ATTACHMENT_TYPE.STICKER],t=i.find(this._orderedExistingAttachmentTypes,(function(t){return!(i.contains(e,t)||!g.ATTACHMENT_TEXT[t].TITLE)&&t}),this);return t?t===g.POST_ATTACHMENT_TYPE.ADDON?this.model.getAddon().at(0).getAddonSummaryModel().getNameMap()[I.camelize(C.lang)]:g.ATTACHMENT_TEXT[t]&&g.ATTACHMENT_TEXT[t].TITLE:""},_getNonContentText:function(){var e=this._orderedExistingAttachmentTypes[0];if(e===g.POST_ATTACHMENT_TYPE.VIDEO){var t=this._getPresentMedia();if(t&&t.isGif)return IM("post.gif.msg.attached");if(t&&t.isLive)return IM("post.live.msg.attached")}return e===g.POST_ATTACHMENT_TYPE.PROMOTION_PHOTO&&(e=g.POST_ATTACHMENT_TYPE.PHOTO),g.ATTACHMENT_TEXT[e]&&g.ATTACHMENT_TEXT[e].ATTACHED_FOR_NO_CONTENT||IM("post.msg.created")},_getPresentMedia:function(){var e=_.generateSortedMediasFromPostListItemModel(this.model);if(e[0])return{thumbnail:b.make(e[0].photo_url,b.TYPE.s480),totalCountText:e.length>9?"9+":e.length>1?e.length:"",isGif:e[0].video&&e[0].video.is_gif,isVideo:e[0].video&&!e[0].video.is_gif,isLive:e[0].video&&e[0].video.is_live}},_refreshData:function(){this.model.fetchPostListItem().then(i.bind((function(){this.render()}),this))},_togglePostShareOptionListView:function(){var e=this.getRegion("sharePostLayerRegion");e.hasView()||i.defer(i.bind((function(){var t=u.postDetail(this.model.getBandCore(),this.model.getPostNo()).url;e.show(p.buildUrlShareView({shareUrl:m.appendCurrentDomainOnPathUrl(t),message:"",excludedBandNos:[this.model.getBandNo()],isSingleSelectionOnMoreBandSelection:!1}))}),this))},_onClickPostItem:function(){y.isStateDimCovered(this.model)?this.trigger(c.POST_MORE_ACTIONS.UNCOVER_DIMMED_POST):this.trigger(T,this.model)},openPostDetailLayerWithUncoverOnce:function(){this.trigger(T,this.model,!0)}});e.exports=N},1801:function(e,t){e.exports='<% //TODO 차단된 사용자의 글 표시하기 위해 \'-blockUserPost\' 클래스 추가  %>\n<div class="cContentsCard _postMainWrap">\n    <% //TODO 차단된 사용자의 글을 딤드하는 태그 %>\n    <div class="_dimArea"></div>\n\n    <% // 작성자와 글 정보 영역 %>\n    <div class="_postAuthorRegion"></div>\n\n    <div class="postMain">\n        <% if(missionTitle) {%>\n        <div class="missionCertification _missionInfo">\n            <span class="missonName -pointColor"><span class="iconMisson"></span><%- missionTitle %></span>\n        </div>\n        <% } %>\n        <div class="postBody <% if (media) { %>-flexible<% } %>">\n            <div class="dPostTextView">\n                <div class="postText _postText" tabindex="-1">\n                    <p class="txtBody _textBody"><% if (prefixAttachmentText) { %><span class="attachmentTypeText">[<%-prefixAttachmentText%>]</span> <% } %><%= content %></p>\n                    <span class="seeMore _moreWrap" style="display: none;">\n                        <button type="button" class="">...<%= IM(\'ui.label.more.long\') %></button>\n                    </span>\n                </div>\n                <div class="_stickerRegion"></div>\n            </div>\n            <% if (media) { %>\n            <div class="uWidget">\n                <ul class="uCollage -vertical">\n                    <li class="collageItem <%-media.isVideo && \'player\' %> <%-media.isGif && \'gif\' %> -size50">\n                        <button type="button" class="collageImage _btnMedia">\n                            <img src="<%-media.thumbnail %>" alt="">\n                            <% if (media.totalCountText) { %>\n                            <span class="number"><%-media.totalCountText%></span>\n                            <% } %>\n                        </button>\n                    </li>\n                </ul>\n            </div>\n            <% } %>\n        </div>\n    </div>\n\n    <div class="postReaction">\n        <div class="reactionItemBox">\n            <div class="reactionItem _emotionCountSelectRegion"></div>\n            <div class="reactionItem">\n                <a href="<%=postDetailUrl%>" class="reactionButton _linkComment"><span class="iconComment"></span><span class="count"><%-commentCountText%></span></a>\n            </div>\n            <% if (isShareable) { %>\n            <div class="reactionItem">\n                <button type="button" class="reactionButton _btnShare"><span class="iconShare"></span><span class="count"><%-sharedCountText%></span></button>\n                <span class="_sharePostLayerRegion"></span>\n            </div>\n            <% } %>\n        </div>\n\n        <% if (readCount) { %>\n        <div class="readCountBox">\n            <span class="read"><span class="gSrOnly"><%-IM(\'post.label.read\')%></span><span class="count"><%-readCountText%></span></span>\n        </div>\n        <% } %>\n    </div>\n\n    <% // 더보기 옵션 메뉴 버튼과 레이어 %>\n    <div class="_moreOptionListRegion"></div>\n</div>\n'},1802:function(e,t){e.exports='<% if (emotionClickable) { %>\n<button type="button" class="reactionButton _btnEmotionCount">\n<% } else { %>\n<span type="button" class="reactionButton">\n<% } %>\n    <% if (showEmptyEmotion) { %>\n    <div class="uEmotionView -s ">\n        <span class="emotionWrap">\n            <span class="icon"><span class="uFaceIcon -defaultFace"></span></span>\n        </span>\n        <span class="count ">0</span>\n    </div>\n    <% } else { %>\n    <div class="_emotionCountRegion"></div>\n    <% } %>\n<% if (!emotionClickable) { %>\n</span>\n<% } else { %>\n</button>\n<% } %>\n\n<div class="_emoticonSelectRegion"></div>\n'},1803:function(e,t){e.exports='<div class="searchWrap gContentCardShadow" data-uiselector="postSearchWrap">\n    <form data-uiselector="searchForm" autocomplete="off">\n        <h2 class="gSrOnly"><%-IM(\'web.board.search_form.title\')%></h2>\n        <div class="uInputSearch -noBorder" data-uiselector="inputSearchWrap">\n            <label class="gSrOnly" for="input_search"><%-IM(\'web.board.search.placeholder\')%></label>\n            <input type="text" id="input_search" placeholder="<%-msgSearchTxt()%>" maxlength="200" autocomplete="off" data-uiselector="searchTxt">\n            <button type="submit" class="search"><span class="gSrOnly"><%-IM(\'web.board.search.label\')%></span></button>\n        </div>\n    </form>\n    \x3c!-- [D] 활성화 .-active --\x3e\n    <div class="searchHint" data-uiselector="searchHint">\n        <h3 class="gSrOnly"><%-IM(\'web.board.search_hint.title\')%></h3>\n        <p class="old _focusableItem _searchOldPostsLinkWrap"><a href="#" data-uiselector="searchOldPosts"><%-IM(\'web.post.period_search\')%></a></p>\n        <div class="searchHashTags _searchHashTags"></div>\n    </div>\n</div>'},1804:function(e,t){e.exports='<% if (loading) { %>\n<p class="uLoading"><img src="<%- resBaseUrl %>/images/common/loading.gif" width="32" height="32" alt="loading"></p>\n<% } else { %>\n<h4 class="tit"><%-title%></h4>\n<ul class="searchTagList" data-uiselector="searchTagList">\n    <% _.each(items, function(item) { %>\n    <li class="_focusableItem" data-uiselector="searchTagItem" data-query="<%-item.hashtag%>"><a href="#"><span><%=item.hashtag%></span> <% if(item.is_pinned) { %><em class="tag sf_tBorderOpacity sf_color"><%-IM(\'web.board.search.hashtag.label.pinned\')%></em><% } else { %><em><%-IM(\'web.board.search.hashtag.label.count\', {count: item.count})%></em><% } %></a></li>\n    <% }); %>\n</ul>\n<% } %>\n\n'},1805:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(1806),a=n(152),o=n(1563),l=n(1155),r=n(1652),d=n(1568),c=n(1653),h=n(1657),u=n(1658),p=n(1263),m=n(1575),_=n(1576),b=n(1264),g=n(1578),f=n(1577),v=n(162),A=n(786),M=n(158),C=n(26),I=n(487),E=t.View.extend({attributes:{"data-viewname":"DPageBandHomeNoticeView"},template:i.template(s),templateContext:function(){return{orderedExistingAttachmentTypes:this._orderedExistingAttachmentTypes,canShowUnReadMark:this._bandData.canShowUnReadMark(),foldedNoticeList:this.model.getNoticeList().slice(1)}},behaviors:[I],serializeData:function(){return{noticeWithRichPost:this.model.getNoticeWithRichPost().toJSON(),needShowMoreBtn:this.model.getCount()>3,noticeList:this.model.getNoticeList(),isCountless:this.model.getIsCountless(),needShowMoreBtnMsg:i.bind((function(){return this.model.getCount()>10?"10":this.model.get("count")}),this)()}},ui:{textRegion:"._textRegion",moreBtn:"._more",noticeItem:".noticeItem",noticeItemLink:".noticeItemLink"},regions:{textRegion:"@ui.textRegion"},events:{"click @ui.moreBtn":function(){v.PAGE_BAND_NOTICE.goDForced({band_no:this._bandData.getBandNo()})},"click @ui.noticeItem":function(e){var t=e.currentTarget.getAttribute("data-post-no");t||(t=this.model.getNoticeWithRichPost().getPostNo()),this._showPostDetailLayer(t),this.jplClick(I.CLASSIFIER.NOTICES_LIST,{band_no:this._bandData.getBandNo()})}},initialize:function(e){this._bandData=e.bandData,this._orderedExistingAttachmentTypes=this._getOrderedExistingAttachmentTypes(),this.listenTo(C.getPostChannel(),C.EVENT.UPDATE_BAND_NOTICE,i.bind((function(){this._updateNoticeList()}),this)),this.listenTo(C.getPostChannel(),C.EVENT.POST_DELETED,(function(e){var t=this.model.getNoticeList();for(var n in t)if(t[n].postNo==e.postNo){this._updateNoticeList();break}}))},onRender:function(){0!=this.model.getCount()?this._renderAttachments():this.$el.hide()},_renderAttachments:function(){this._showTextContent(),this._addAttachmentRegions(),this._showSticker(),this._showAttachmentPoll(),this._showAttachmentTodo(),this._showAttachmentSignup(),this._showAttachmentPhotoList(),this._showAttachmentSharedPostSnippet(),this._showAttachmentSharedPagePostSnippet(),this._showAttachmentPostSnippet(),this._showAttachmentFile(),this._showAttachmentLocation(),this._showAttachmentSubpost(),this._showAttachmentAddon()},_addAttachmentRegions:function(){var e={};i.each(this._orderedExistingAttachmentTypes,(function(t){e[t]={el:"._"+t,replaceElement:!0}}),this),this.addRegions(e)},_getOrderedExistingAttachmentTypes:function(){var e=this.model.getNoticeWithRichPost();return i.filter(a.ATTACHMENT_ORDER,(function(t){return t===a.POST_ATTACHMENT_TYPE.PHOTO?e.hasMediaAll():e.hasAttachment(t)}),this)},_updateNoticeList:function(){this.model.fetchPageBandHomeNoticeList(this._bandData.getBandNo()).then(i.bind((function(){this.render()}),this)).fail(i.bind((function(){this.model&&0==this.model.getCount()?this.destroy():this.render()}),this))},_showPostDetailLayer:function(e){e||(e=this.model.getNoticeWithRichPost().getPostNo());var t={bandNo:this._bandData.getBandNo(),postNo:parseInt(e)};if(C.getDGlobalChannel().trigger(C.EVENT.PAUSE_VIDEO),A.buildFeedPostDetailAsLayer(t),this._bandData.canShowUnReadMark()){var n=i.find(this.model.getNoticeList(),(function(e){return!1===e.isRead&&e.postNo===this.postNo}),{postNo:parseInt(e)});n&&this._turnOffUnReadMark(n,n.postNo==this.model.getNoticeWithRichPost().getPostNo())}},_turnOffUnReadMark:function(e,t){t?this.model.getNoticeWithRichPost().set("isRead",!0):e.isRead=!0,this.render()},_showTextContent:function(){var e=M.removeAttachmentTag(this.model.getNoticeWithRichPost().get("content"));if(e&&""!=e&&"\n"!=e){var t=o.build({bandNo:this.model.getNoticeWithRichPost().getBandNo(),postNo:this.model.getNoticeWithRichPost().getPostNo(),guideBand:this.model.getNoticeWithRichPost().getBand().isGuide,textContent:e,hasAttachment:this.model.getNoticeWithRichPost().hasAttachment(),preventMentionAnchor:!0});this.getRegion("textRegion").show(t)}else this.ui.textRegion.hide()},_showSticker:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.STICKER);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.STICKER).at(0);if(t&&this.model.getNoticeWithRichPost().countOccupatingAttachmentType()<1){var n=l.build({model:t});e.show(n)}else e.empty()}},_showAttachmentTodo:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.TODO_V2);if(e){var t=this.model.getNoticeWithRichPost().getTodoAll().at(0);if(t){var n=d.buildListItemView({model:t,postModel:this.model.getNoticeWithRichPost()});e.show(n),this.listenTo(n,"attachmentTodo:showPostDetailLayer",(function(){this._showPostDetailLayer()}))}else e.empty()}},_showAttachmentPoll:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.POLL_V2);if(e){var t=this.model.getNoticeWithRichPost().getPollAll().at(0);if(t){var n=this.model.getNoticeWithRichPost().countOccupatingAttachmentType()>1||this.model.getNoticeWithRichPost().get("pollAllCount")>1?a.ATTACHMENT_DISPLAY_TYPE.HEADER:a.ATTACHMENT_DISPLAY_TYPE.PREVIEW,i=r.buildDPostPollListItemAttachmentView(t,this.model.getNoticeWithRichPost(),n);e.show(i),this.listenTo(i,"attachmentPoll:showPostDetailLayer",(function(){this._showPostDetailLayer()}))}else e.empty()}},_showAttachmentAddon:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.ADDON);if(e){var t=this.model.getNoticeWithRichPost().getAddon().at(0);if(t){var n=f.buildListItemView({model:t,postModel:this.model.getNoticeWithRichPost(),attachmentDisplayType:this.model.getNoticeWithRichPost().countOccupatingAttachmentType()>1||this.model.getNoticeWithRichPost().get("addonCount")>1?a.ATTACHMENT_DISPLAY_TYPE.HEADER:a.ATTACHMENT_DISPLAY_TYPE.PREVIEW});e.show(n)}else e.empty()}},_showAttachmentPhotoList:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.PHOTO);if(e){var t=this.model.getNoticeWithRichPost();if(t.hasVideo()||t.hasPhoto()||t.hasMediaAll()){var n=c.build({postListItemModel:t,renderSharedPostMode:this.renderSharedPostMode});e.show(n)}else e.empty()}},_showAttachmentFile:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.FILE);if(e){var t=this.model.getNoticeWithRichPost().getFileAll();if(t&&t.length>0){var n=m.build({collection:t});e.show(n),this.listenTo(n,"attachmentFile:showPostDetailLayer",(function(){this._showPostDetailLayer()}))}else e.empty()}},_showAttachmentLocation:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.LOCATION);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.LOCATION).at(0);if(t){var n=_.build({model:t,attachmentDisplayType:a.ATTACHMENT_DISPLAY_TYPE.HEADER});e.show(n),this.listenTo(n,"attachmentLocation:showPostDetailLayer",(function(){this._showPostDetailLayer()}))}else e.empty()}},_showAttachmentSharedPostSnippet:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.SHARED_POST_SNIPPET);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.SHARED_POST_SNIPPET);if(t){var n=h.build({model:t,attachmentDisplayType:this.model.getNoticeWithRichPost().countOccupatingAttachmentType()>1?a.ATTACHMENT_DISPLAY_TYPE.HEADER:a.ATTACHMENT_DISPLAY_TYPE.DETAIL});e.show(n),this.listenTo(n,"sharedPostSnippet:showPostDetailLayer",(function(){this._showPostDetailLayer()}))}else e.empty()}},_showAttachmentSharedPagePostSnippet:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.SHARED_PAGE_POST_SNIPPET);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.SHARED_PAGE_POST_SNIPPET);if(t){var n=u.build({model:t,attachmentDisplayType:this.model.getNoticeWithRichPost().countOccupatingAttachmentType()>1?a.ATTACHMENT_DISPLAY_TYPE.HEADER:a.ATTACHMENT_DISPLAY_TYPE.DETAIL});e.show(n)}else e.empty()}},_showAttachmentPostSnippet:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.SNIPPET);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.SNIPPET).at(0);if(t){var n=p.build({bandNo:this.model.getNoticeWithRichPost().getBandNo(),postNo:this.model.getNoticeWithRichPost().getPostNo(),model:t,attachmentDisplayType:this.model.getNoticeWithRichPost().countOccupatingAttachmentType()>1?a.ATTACHMENT_DISPLAY_TYPE.HEADER:a.ATTACHMENT_DISPLAY_TYPE.DETAIL});e.show(n)}else e.hide()}},_showAttachmentSubpost:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.SUBPOST);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.SUBPOST);if(t){var n=b.build({model:t,bandNo:this.model.getNoticeWithRichPost().getBandNo(),postNo:this.model.getNoticeWithRichPost().getPostNo()});e.show(n)}else e.empty()}},_showAttachmentSignup:function(){var e=this.getRegion(a.POST_ATTACHMENT_TYPE.SIGNUP);if(e){var t=this.model.getNoticeWithRichPost().getAttachment(a.POST_ATTACHMENT_TYPE.SIGNUP).at(0);t?e.show(g.build({model:t,postModel:this.model.getNoticeWithRichPost()})):e.empty()}}});return E.buildDPageBandHomeNoticeView=function(e,t){return new E({bandData:e,model:t})},E}.call(t,n,t,e))||(e.exports=i)},1806:function(e,t){e.exports='<div class="moduleBox gMat13">\n    <div class="cNoticeWrap gBoxShadow ">\n        <h2 class="title"><%= IM("ui.label.notice.title.plural") %>\n            <% if (needShowMoreBtn) {%>\n                <a href="#" class="moreLink _more<% if(isCountless) { %> isCountless<% } %>"><%= needShowMoreBtnMsg %></a>\n            <% } %>\n        </h2>\n        <ul class="notice">\n            \x3c!-- [D] 페이지 첫번째 공지글 펼쳐서 노출 --\x3e\n            <li class="noticeItem unfoldedItems">\n                <% if (canShowUnReadMark && !noticeWithRichPost.isRead) { %>\n                <span class="gNewIcon"><%= IM("new.notice.post") %></span>\n                <% } %>\n\n                <a href="#" class="noticeItemLink">\n                    <% if (noticeWithRichPost.isMajorNotice) { %>\n                    <strong class="sf_color">[<%= IM("band.noticelist.major.label") %>]</strong>\n                    <% } %>\n\n                    \x3c!-- 텍스트 --\x3e\n                    <div class="noticeTxtWrap _textRegion"></div>\n\n                    <% _.each(orderedExistingAttachmentTypes, function(attachmentType) { %>\n                    <div class="<%= \'_\' + attachmentType %>"></div>\n                    <% }); %>\n                </a>\n            </li>\n\n            <% _.each(foldedNoticeList, function(noticeItem, index) { %>\n            <li class="noticeItem" data-post-no="<%= noticeItem.postNo %>">\n                <% if (canShowUnReadMark && !noticeItem.isRead) { %>\n                <span class="gNewIcon"><%= IM("new.notice.post") %></span>\n                <% } %>\n                <a href="#" class="noticeItemLink">\n                    <% if (noticeItem.isMajor) { %>\n                    <strong class="sf_color">[<%= IM("band.noticelist.major.label") %>]</strong>\n                    <% } %>\n\n                    <%= noticeItem.title%>\n                </a>\n            </li>\n            <% }) %>\n\n        </ul>\n    </div>\n</div>'},1807:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=(n(870),n(556),n(1084)),a=n(517);return i.Model.extend({defaults:{count:0,isCountless:!1,noticeWithRichPost:null,noticeList:[]},getNoticeWithRichPost:function(){return this.get("noticeWithRichPost")},getNoticeList:function(){return this.get("noticeList")},getCount:function(){return this.get("count")},getIsCountless:function(){return this.get("isCountless")},parse:function(e,n){return t.extend(this.defaults,{count:n.get("count")||0,isCountless:n.get("isCountless")||!1,noticeWithRichPost:function(){if(0==n.get("count"))return e;var i=!1,s=e.get("content");return n.get("bandNotices")&&n.get("bandNotices")[0]&&(i=n.get("bandNotices")[0].isRead,s=t.isEmpty(s)?n.get("bandNotices")[0].title:s),e.set("isRead",i),e.set("content",s),e}(),noticeList:n&&0!=n.length?n.get("bandNotices"):[]})},fetchPageBandHomeNoticeList:function(e){var n=new a,i=new s;return $.when(i.fetchBandNotices(e),n.fetchPostWithoutPostNo(e)).then(t.bind((function(){return this.set(this.parse(n,i)),this}),this)).fail(t.bind((function(e){if(1e3===e.result_code)return this.set(this.parse(n,i)),this}),this))}})}.call(t,n,t,e))||(e.exports=i)},1808:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1596),a=i.View.extend({attributes:{"data-viewname":"DPageBandReservedClosureNoticeView"},className:"deleteNoticeBox gBoxShadow",template:t.template('<p class="deleteNoticeText -colorError"><%= durationText %></p><% if (showCancelBtn) { %><button type="button" class="buttonText _btnCancelPageClosure"><%= IM("ui.label.cancel") %></button><% } %>'),ui:{btnCancelPageClosure:"._btnCancelPageClosure"},events:{"click @ui.btnCancelPageClosure":"_openCancelPageClosureConfirmMessageLayer"},templateContext:function(){var e="",t=this.pageBandCloseManager.formattedReservedClosureDuration(this.reservedClosureAt);return t.isReserved&&(e=t.isToday?IM("pageband.post.close_page.notice.suspend_closure.today"):IM("pageband.post.close_page.notice.suspend_closure",{reservedClosureDuration:t.closureDayDiff})),{showCancelBtn:this.options.showCancelBtn,durationText:e}},initialize:function(e){this.bandNo=e.bandNo,this.reservedClosureAt=e.reservedClosureAt,this.pageBandCloseManager=s.build(e.bandNo,{reservedClosureAt:e.reservedClosureAt})},_openCancelPageClosureConfirmMessageLayer:function(){this.pageBandCloseManager.openConfirmForCancelMessageLayer(this.reservedClosureAt),this.listenTo(this.pageBandCloseManager,"closePageBand:cancelPageDeletion",t.bind((function(){this.destroy()}),this))}});return a.build=function(e){return new a({bandNo:e.bandNo,showCancelBtn:e.showCancelBtn,reservedClosureAt:e.reservedClosureAt})},a}.call(t,n,t,e))||(e.exports=i)},1809:function(e,t){e.exports='<div class="lyContent">\n<% if (title != \'\') { %>\n    <header class="header">\n        <h1 class="title"><%= title %></h1>\n    </header>\n<% } %>\n    <div class="main">\n    <% if (descTitle != \'\') { %>\n        <p class="p"><strong><%= descTitle %></strong></p>\n    <% } %>\n        <div class="p -fs13">\n            <p class="p"><%= desc %>\n        </div>\n        <div class="selectArea">\n            <label for="desc1" class="uCheck -checkbox">\n                <input type="checkbox" id="desc1" class="checkInput _confirmCheckbox">\n                <span class="checkLabel">\n                    <span class="shape "></span>\n                    <span class="text"><%= confirmCheckboxDescription %></span>\n                </span>\n            </label>\n        </div>\n    </div>\n    <footer class="footer">\n    <% if (cancelLabel != \'\') { %>\n        <button type="button" class="uButton -cancel _btnCancel"><%= cancelLabel %></button>\n    <% } %>\n        <button type="button" class="uButton -confirm -disabled _btnConfirm"><%= confirmLabel %></button>\n    <% if (closeLabel != \'\') { %>\n        <button type="button" class="btnLyClose uButton -iconClose _btnClose"><span class="gSrOnly"><%= closeLabel %></span></button>\n    <% } %>\n    </footer>\n</div>'},1810:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1811),a=n(486),o={CONFIRM:"CONFIRM"},l=i.View.extend({template:t.template(s),attributes:{"data-viewname":"DPageBandDeleteView"},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",checkInput:"._checkInput"},events:{"click @ui.btnConfirm":"_onClickConfirm","click @ui.btnCancel":"destroy","change @ui.checkInput":function(){this.getUI("btnConfirm").attr("disabled",!this.getUI("checkInput").is(":checked"))}},initialize:function(e){this._bandData=e.bandData},_onClickConfirm:function(){this.trigger(o.CONFIRM),this.destroy()}});return l.EVENT=o,l.openAsLayer=function(e){var t=new l({bandData:e});return a.open(t),t},l}.call(t,n,t,e))||(e.exports=i)},1811:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w360">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("pageband.page_setting.close_page.confirm_message.description_title") %></h1>\n        </header>\n\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <div class="msgWrap gPal0 gPar0">\n                    <p class="pText"><%= IM("pageband.setting.delete_page.desc1") %></p>\n                </div>\n                <ul class="guidePointList gMat8">\n                    <li class="guidePointItem"><%= IM("pageband.setting.delete_page.desc2") %></li>\n                    <li class="guidePointItem"><%= IM("pageband.setting.delete_page.desc3") %></li>\n                </ul>\n                <div class="selectArea">\n                    <label for="deletePageBand" class="uCheck -checkbox">\n                        <input type="checkbox" id="deletePageBand" class="checkInput _checkInput">\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("ui.label.i_agree") %></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n        </div>\n\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},1812:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(16),a=n(1534),o=i.View.extend({attributes:{"data-viewname":"DBandReservedClosureNoticeView"},className:"deleteNoticeBox gBoxShadow",template:t.template('<p class="deleteNoticeText -colorError"><%= durationText %></p><% if (canShowDeleteBandCancel) { %><button type="button" class="buttonText _btnBandDeleteCancel"><%= IM("ui.label.cancel") %></button><% } %>'),ui:{btnBandDeleteCancel:"._btnBandDeleteCancel"},events:{"click @ui.btnBandDeleteCancel":"_openCancelClosureConfirmMessageLayer"},templateContext:function(){return{canShowDeleteBandCancel:this._canShowDeleteBandCancel(),durationText:this._getReservedClosureDurationText()}},initialize:function(e){this.bandData=e.bandData,this.canCancelReservedClosing=this.bandData.canCancelReservedClosing(),this.reservedClosureAt=this.bandData.getReservedClosureAt()},_canShowDeleteBandCancel:function(){return this.canCancelReservedClosing&&s().isBefore(this.reservedClosureAt)},_getReservedClosureDurationText:function(){var e="",t=this._formattedReservedClosureDuration();return t.isReserved&&(e=t.isToday?IM("bandhome.band_delete.closure_time.today"):IM("bandhome.band_delete.closure_time",{days:t.closureDayDiff})),e},_formattedReservedClosureDuration:function(){var e={isReserved:!1,isToday:!1,closureDayDiff:null};if(!this.reservedClosureAt)return e;var t=s(),n=Math.ceil(s.duration(this.reservedClosureAt.diff(t)).asDays());return e.isReserved=!0,e.closureDayDiff=n,n>1||t.date()===this.reservedClosureAt.date()&&(e.isToday=!0),e},_openCancelClosureConfirmMessageLayer:function(){var e=a.openAsLayer(this.bandData,!1);this.listenTo(e,a.EVENT.CONFIRM,t.bind((function(){this.destroy()}),this))}});return o.build=function(e){return new o({bandData:e.bandData})},o}.call(t,n,t,e))||(e.exports=i)},1813:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.band_delete.title2") %></h1>\n        </header>\n\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <div class="msgWrap gPal0 gPar0">\n                    <p class="pText _closureTimeText"><%= closureTimeText %></p>\n                    <p class="pText -smallFont gMat9"><%= IM(\'bandsetting.band_delete.reservation_cancel.desc2\') %></p>\n                </div>\n            </div>\n        </div>\n\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm"><%= IM("bandsetting.band_delete.reservation_cancel.btn_label") %></button>\n        </footer>\n    </div>\n</section>'},1814:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1815),o=n(1816),l=n(158),r=n(637),d=n(169),c=n(1236),h=n(1535),u=n(1106),p=n(1597),m=n(1048),_=n(495),b=n(487),g=n(26),f=n(155),v=n(17),A=n(162),M=n(157),C=n(13),I=n(154);n(1095);var E=s.View.extend({tagName:"div",className:"cIntro gContentCardShadow",attributes:{"data-viewname":"DPageBandIntroView"},getTemplate:function(){return this.model.isExistPageIntro()?i.template(a):i.template(o)},ui:{btnEditor:"._btnEditor",btnMoreContent:"._btnMoreContent",pageContent:"._pageContent",keywordLink:"._keywordLink",pageLocation:"._pageLocation",bandIntroMediaListRegion:"._bandIntroMediaListRegion",showBusinessIDInfoButton:"._showBusinessIDInfoButton",btnMoreOption:"._btnMoreOption",optionMenuLayer:"._optionMenuLayer",btnModifyIntro:"._btnModifyIntro",btnDeleteIntro:"._btnDeleteIntro",sharePageBand:"._sharePageBand",pageBandShareOptionListViewRegion:"._pageBandShareOptionListViewRegion"},regions:{bandIntroMediaListRegion:{el:"@ui.bandIntroMediaListRegion",replaceElement:!0},pageBandShareOptionListViewRegion:{el:"@ui.pageBandShareOptionListViewRegion",replaceElement:!0}},behaviors:[{behaviorClass:_,sceneId:_.SCENE.PAGE_HOME},{behaviorClass:b}],events:{"click @ui.btnEditor":"_openIntroEditLayer","click @ui.btnMoreContent":"_showMoreContent","click @ui.keywordLink":"_onClickKeywordLink","click @ui.pageLocation":"_openMap","click @ui.showBusinessIDInfoButton":"_openBusinessIDInfoLayer","click @ui.btnMoreOption":"_openOptionMenuLayer","click @ui.btnModifyIntro":"_openIntroEditLayer","click @ui.btnDeleteIntro":"_removeIntro","click @ui.sharePageBand":"_openPageBandShare"},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._unfoldPageContent=!1},serializeData:function(){return{vid:this.cid,pageDescription:this._getPageDescription(),pageContent:this._getPageContent(),keywords:this._bandData.getBandKeywordsWithKeywordGroups(),pageLocation:this._getLocation(),canShowBusinessIdentificationInfo:this._bandData.canShowBusinessIdentificationInfo(),businessRegistrationNo:this._bandData.getBusinessRegistrationNo(),showEditingFunctions:this._bandData.canEditPageIntro()}},onRender:function(){this._toggleViewClass(),this._showMediaList()},onAttach:function(){this.listenTo(g.getDGlobalChannel(),g.EVENT.HTML_CLICK,this._closeAllLayers),this.listenTo(this._bandData,f.UPDATE_EVENT.BAND,this.render),this.listenTo(g.getBandChannel(this._bandNo),g.EVENT.PAGE_BAND_INTRO_INFO_CHANGED,this._refreshPageBandIntroView)},onBeforeDetach:function(){this.stopListening(g.getDGlobalChannel()),this.stopListening(this._bandData),this.stopListening(g.getBandChannel(this._bandNo))},onDomRefresh:function(){this._unfoldPageContent||this.ui.pageContent.dotdotdot({ellipsis:"",wrap:"letter",height:70,callback:i.bind((function(e){this.ui.btnMoreContent.css("display",e?"":"none")}),this)})},_toggleViewClass:function(){this.$el.toggleClass("cIntroEditor gMat10",!this.model.isExistPageIntro())},_showMoreContent:function(){this._unfoldPageContent=!0,this.ui.btnMoreContent.css("display","none"),this.ui.pageContent.trigger("destroy.dot")},_getPageDescription:function(){return l.nl2br(i.escape(this.model.get("description")))},_getPageContent:function(){var e=l.nl2br(i.escape(this.model.get("content")));return i.isEmpty(e)||(e=l.linkTextReplace(e,d.OUTER_LINK)),e},_getLocation:function(){var e=this.model.getPageLocation();return e?e.has("name")?e.get("name"):e.get("address"):null},_showMediaList:function(){var e=this.getRegion("bandIntroMediaListRegion");h.show(e,{bandNo:this._bandNo,bandIntroModel:this.model,wrapperClassNames:"introOption gMat15"})},_openOptionMenuLayer:function(){"none"==this.ui.optionMenuLayer.css("display")&&i.defer(i.bind((function(){this.ui.optionMenuLayer.css("display","")}),this))},_closeOptionMenuLayer:function(){this.ui.optionMenuLayer.css("display","none")},_closeAllLayers:function(){this._closeOptionMenuLayer()},_openIntroEditLayer:function(){p.openPageBandEditIntroLayer(this._bandNo)},_openMap:function(){var e=this.model.getPageLocation(),t=e.get("latitude"),n=e.get("longitude"),i=r.getLargeMapUrl(t,n);return window.open(i,"_blank"),!1},_openBusinessIDInfoLayer:function(){u.openDBusinessIdentificationInfoView({bandNo:this._bandNo})},_removeIntro:function(){confirm(IM("pageband.page_main.page_intro.confirm.delete_intro"))&&I.wrapActivePromise(this.model.removePageIntroInfo(this._bandNo),this).then(i.bind(this._refreshPageBandIntroView,this))},_openPageBandShare:function(){var e=this.getRegion("pageBandShareOptionListViewRegion");e.hasView()?e.empty():i.defer(i.bind((function(){var t,n=this._bandData.getBandAddress(),i="["+this._bandData.getBandCore().name+"] "+IM("web.noui.band.title.band")+" "+IM("discover.search.page.bandlist.title");t=n?v.extractPath(n):A.PAGE_BAND_HOME.makeUrl({band_no:this._bandNo}),e.show(m.buildUrlShareView({shareUrl:v.appendCurrentDomainOnPathUrl(t),message:i,excludedBandNos:this._bandNo,isSingleSelectionOnMoreBandSelection:!0})),this._sendSharePageBandClickLog()}),this))},_sendSharePageBandClickLog:function(){this.jplClick(b.CLASSIFIER.PAGE_SHARE,{band_no:this._bandNo,position:"page_pc_beside_share"})},_onClickKeywordLink:function(e){var n=t(e.currentTarget),i=n.data("group"),s=n.data("keyword"),a=M.GLOBAL_KEYWORD_GROUP.makeUrl({group:encodeURIComponent(i),keyword:encodeURIComponent(s)});e.preventDefault(),C.canAccessBandSearchForGuardianship()&&C.canSearchQualificationByAge()&&window.open(a,"_blank")},_refreshPageBandIntroView:function(){I.wrapActivePromise(this.model.fetchPageIntro(this._bandNo),this).then(i.bind(this.render,this))}});return E.buildPageBandIntroView=function(e){var t=new c;return t.fetchPageIntro(e.getBandCore().bandNo).then((function(){if(t.isExistPageIntro()||e.canEditPageIntro())return new E({bandData:e,model:t})}))},E}.call(t,n,t,e))||(e.exports=i)},1815:function(e,t){e.exports='<h2 class="title gSrOnly"><%= IM("pageband.page_setting.manage_intro_info.title") %></h2>\n\n<% // 한 줄 소개 %>\n<% if (pageDescription) { %>\n    <div class="simpleDesc gMat-1">\n        <p class="desc"><%= pageDescription %></p>\n    </div>\n<% } %>\n\n<% // 여러 줄 소개 %>\n<% if (pageContent) { %>\n    <div class="detailDesc">\n        <p class="desc _pageContent"><%= pageContent %></p>\n        <button type="button" class="seeMore _btnMoreContent" style="display: none;">...<%= IM(\'ui.label.more.long\') %></button>\n    </div>\n<% } %>\n\n<% // 키워드 %>\n<% if (!_.isEmpty(keywords)) { %>\n<div class="introOption gMat15">\n    <div class="introOptionBox">\n        <ul class="selectedKeywordList">\n            <% _.each(keywords, function(item) { %>\n            <li class="selectedKeywordItem"><a href="#" class="keywordSearchLink _keywordLink" data-group="<%- _.first(item.keyword_groups) %>" data-keyword="<%- item.keyword %>"><%- item.keyword %></a></li>\n            <% }); %>\n        </ul>\n    </div>\n</div>\n<% } %>\n\n<div class="infoBox gMat15">\n<% // 지도 (위치) %>\n<% if (pageLocation) { %>\n    <p class="info -address"><a href="#" role="button" class="_pageLocation"><%- pageLocation %></a></p>\n<% } %>\n\n<% // 사업자 정보 %>\n    <% if (canShowBusinessIdentificationInfo) { %>\n    <p class="info -businessLicenseNumber"><a href="#" role="button" class="_showBusinessIDInfoButton">사업자등록번호 <%- businessRegistrationNo %></a></p>\n<% } %>\n</div>\n\n    <% // 첨부한 사진, 동영상 %>\n    <div class="_bandIntroMediaListRegion"></div>\n\n<% // 공유하기 버튼 %>\n    <div class="buttonArea">\n        <button type="button" class="buttonShare _sharePageBand"><%= IM("pageband.page_main.page_intro.text.share_page") %></button>\n    </div>\n\n    <div class="_pageBandShareOptionListViewRegion"></div>\n\n<% // 더보기 옵션 레이어 %>\n<% if (showEditingFunctions) { %>\n    <div class="postFunction">\n        <button type="button" class="postSet _btnMoreOption"><%= IM("pageband.page_main.page_intro.label.more_option") %></button>\n        <div class="lyMenu _optionMenuLayer" style="min-width:145px; display:none">\n            <ul>\n                <li><a href="#" class="_btnModifyIntro"><%= IM("ui.label.modify_long") %></a></li>\n                <li><a href="#" class="_btnDeleteIntro"><%= IM("ui.label.delete_long") %></a></li>\n            </ul>\n        </div>\n    </div>\n<% } %>'},1816:function(e,t){e.exports='\x3c!-- [D] 개발전 일부만 노출함 --\x3e\n<h2 class="title"><%-IM(\'pageband.page_main.page_intro_empty.title\') %></h2>\n<div class="simpleDesc">\n    \x3c!-- [D] 최대높이 124px --\x3e\n    <textarea class="textField" cols="40" rows="10" placeholder="<%- IM(\'pageband.page_main.page_intro_empty.text.guide_edit_intro\') %>" style="height:44px;"></textarea>\n</div>\n<div class="introPhoto gMat10 gPab24">\n    <ul class="photoList">\n        <li class="photoItem">\n            <label for="photo1_<%=vid%>" class="inputLabel"><span class="gSrOnly"><%-IM("ui.label.upload_photo")%></span></label><input type="file" id="photo1_<%=vid%>" class="inputFile">\n        </li>\n        <li class="photoItem">\n            <label for="photo2_<%=vid%>" class="inputLabel"><span class="gSrOnly"><%-IM("ui.label.upload_photo")%></span></label><input type="file" id="photo2_<%=vid%>" class="inputFile">\n        </li>\n        <li class="photoItem">\n            <label for="photo3_<%=vid%>" class="inputLabel"><span class="gSrOnly"><%-IM("ui.label.upload_photo")%></span></label><input type="file" id="photo3_<%=vid%>" class="inputFile">\n        </li>\n        <li class="photoItem">\n            <label for="photo4_<%=vid%>" class="inputLabel"><span class="gSrOnly"><%-IM("ui.label.upload_photo")%></span></label><input type="file" id="photo4_<%=vid%>" class="inputFile">\n        </li>\n    </ul>\n</div>\n<button type="button" class="buttonEditor _btnEditor"></button>'},1817:function(e,t){e.exports='<div class="lyContent" style="width: 450px">\n\n    <header class="modalHeader -high">\n        <h1 class="title">사업자 정보 <% if ( bandName ) { %><p class="titleDesc"><%- bandName %></p><% } %></h1>\n<% if ( showOption ) { %>\n        <div class="moreMenuWrap">\n            <button class="btnMoreMenu _menuBtn">메뉴</button>\n            <div class="menuBox _menuBoxDiv" style="display: none;">\n                <ul class="menuList">\n                    <li class="menuItem">\n                        <button class="btnMenuText _updateBusinessIDInfoBtn">수정하기</button>\n                    </li>\n                    <li class="menuItem">\n                        <button class="btnMenuText _deleteBusinessIDInfoBtn">삭제하기</button>\n                    </li>\n                </ul>\n            </div>\n        </div>\n<% } %>\n    </header>\n\n    <div class="modalBody">\n        <div class="modalContentWrap gMat-1">\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">상호명</label>\n                <div class="pText -smallFont"><%- companyName %></div>\n            </div>\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">대표자 성명</label>\n                <div class="pText -smallFont"><%- representativeName %></div>\n            </div>\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">주소</label>\n                <div class="pText -smallFont"><%- address %></div>\n            </div>\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">전화</label>\n                <div class="pText -smallFont"><%- phone %></div>\n            </div>\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">메일</label>\n                <div class="pText -smallFont"><%- email %></div>\n            </div>\n\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">사업자 등록번호</label>\n                <div class="pText -smallFont"><%- registrationNo %></div>\n            </div>\n\n            <% if (mailOrderSalesNo) { %>\n            <div class="flexList -tLine -minH47">\n                <label class="bizTitle">통신판매 신고번호</label>\n                <div class="pText -smallFont"><%- mailOrderSalesNo %></div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n\n    <div class="modalFooter -tLine">\n        <%\n            var displayTerm = showBandTermAsPage ? \'페이지 운영자\' : \'밴드 리더\';\n        %>\n        <div class="attendText gMat-10 gMab20">위 정보는 <%- displayTerm %>가 등록한 정보입니다.</div>\n        <button type="button" class="uButton _closeButton">확인</button>\n    </div>\n\n</div>'},1818:function(e,t){e.exports='<div class="lyContent" style="width: 450px">\n    <header class="modalHeader">\n        <h1 class="title"><%- title %> <% if (showBandName) { %><p class="titleDesc"><%- bandName %></p><% } %></h1>\n\n<% if ( showOption ) { %>\n        <div class="moreMenuWrap">\n            <button class="btnMoreMenu _menuBtn">메뉴</button>\n            <div class="menuBox _menuBoxDiv" style="display: none;">\n                <ul class="menuList">\n                    <li class="menuItem">\n                        <button class="btnMenuText _deleteBusinessIDInfoBtn">삭제하기</button>\n                    </li>\n                </ul>\n            </div>\n        </div>\n<% } %>\n    </header>\n\n    <div class="modalBody">\n        <div class="formWrap">\n            <div class="labelLow gMat-5">\n                <label class="bizTitle">상호명</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _companyNameInput" placeholder="상호명을 입력하세요." value="<%- companyName %>" maxlength="30">\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle">대표자 성명</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _representativeNameInput" placeholder="대표자성명을 입력하세요." value="<%- representativeName %>" maxlength="20">\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle  gMat-35">주소</label>\n                <div class="uTextarea" style="height:70px">\n                    <textarea class="_inputArea _addressInput" placeholder="주소를 입력하세요."><%- address %></textarea>\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle">전화</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _phoneInput" placeholder="전화번호를 입력하세요." value="<%- phone %>" maxlength="20">\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle">메일</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _emailInput" placeholder="예) band@band.us" value="<%- email %>" maxlength="60">\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle">사업자 <br>등록번호</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _registrationNo" placeholder="예) 111-22-33333" value="<%- registrationNo %>" maxlength="20">\n                    <span class="border"></span>\n                </div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <label class="bizTitle">통신판매<br>신고번호</label>\n                <div class="uInput" style="height:40px">\n                    <input type="text" class="_inputArea _mailOrderSalesNoInput" placeholder="예) 제2018-경기성남-11111호" value="<%- mailOrderSalesNo %>" maxlength="40">\n                    <span class="border"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="modalFooter -tLine">\n        <button type="button" class="uButton -cancel _cancelButton">취소</button>\n        <button type="button" class="uButton _saveButton" disabled>저장</button>\n    </div>\n</div>'},1819:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=(n(155),n(1820)),a=n(486),o=i.View.extend({tagName:"section",className:"lyWrap ",attributes:{"data-viewname":"DPersonalInfoCollectingForBusinessView"},template:t.template(s),ui:{collectingAgreeCheckInput:"._collectingAgreeCheckInput",saveButton:"._saveButton",closeButton:"._closeButton"},templateContext:function(){var e=!!(this.options&&this.options.bandData&&this.options.bandData.getBandCore())&&this.options.bandData.getBandCore().showBandTermAsPage();return{cid:this.cid,showBandTermAsPage:e}},events:{"click @ui.collectingAgreeCheckInput":function(){this.ui.saveButton.prop("disabled",!1)},"click @ui.closeButton":function(){this.trigger(o.CLOSE_COLLECTING_PERSONAL_INFO_EVENT),this.destroy()},"click @ui.saveButton":function(){this.ui.collectingAgreeCheckInput.is(":checked")?this.destroy():alert("개인정보 수집 및 이용에 관한 동의가 필요합니다.")}}});return o.CLOSE_COLLECTING_PERSONAL_INFO_EVENT="closeCollectingPersonalInfo",o.openDPersonalInfoCollectingForBusinessView=function(e){var t=new o({bandData:e.bandData});return a.openWithoutHiding(t),t},o}.call(t,n,t,e))||(e.exports=i)},1820:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="modalHeader">\n        <h1 class="title">개인정보 수집 및 이용 시 동의 안내</h1>\n    </header>\n\n    <%\n        var displayTerm = showBandTermAsPage ? \'페이지\' : \'밴드\';\n    %>\n    <div class="modalBody">\n        <div class="msgWrap gMat-2">\n            <p class="pText">사업자 정보를 <%- displayTerm %>에 등록하기 위해서는 아래와 같이 개인정보 수집 및 이용이 발생합니다. 입력하신 정보는 <%- displayTerm %>에 공개됩니다.</p>\n        </div>\n        <div class="msgWrap  gMat-4">\n            <div class="modalFlex">\n                <div class="flexItemTitle">수집 항목</div>\n                <div class="flexItemText">이름, 주소, 전화번호, 이메일 주소</div>\n            </div>\n            <div class="modalFlex gMat10">\n                <div class="flexItemTitle">수집 목적</div>\n                <div class="flexItemText"><%- displayTerm %> 내 상거래 활동을 위한 사업자 <br/>표시 의무 준수 </div>\n            </div>\n            <div class="modalFlex gMat10">\n                <div class="flexItemTitle">보유 기간</div>\n                <div class="flexItemText"><%- displayTerm %> 삭제 시 파기\n                    <p class="pText -smallFont -lightGray gMat3">단, 관계법령 외 규정에 의하여 보전할 필요가 있는 경우에 관련 규정에 따라 일정 기간 동안 개인 정보를 보관합니다.</p>\n                </div>\n            </div>\n        </div>\n        <div class="msgWrap gMat-5">\n            <div class="selectArea">\n                <label for="desc_<%- cid %>" class="uCheck -checkbox ">\n                    <input type="checkbox" id="desc_<%- cid %>" class="checkInput _collectingAgreeCheckInput">\n                    <span class="checkLabel">\n                        <span class="shape "></span>\n                        <span class="text">개인정보 수집 및 이용에 동의합니다.</span>\n                    </span>\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <footer class="modalFooter -tLine gMat14">\n        <button type="button" class="uButton -cancel _closeButton">취소</button>\n        <button type="button" class="uButton -confirm _saveButton">저장</button>\n    </footer>\n</div>'},1821:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent" style="width: 480px">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("pageband.page_setting.manage_intro_info.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="cIntro cIntroEditor">\n                <% // 한 줄 소개 %>\n                <div class="simpleDesc">\n                    <textarea class="textField _pageDescription"\n                              cols="40"\n                              rows="10"\n                              placeholder="<%= IM(\'pageband.page_setting.manage_intro_info.intro_summary.placeholder\') %>"\n                              maxlength="<%- descriptionMaxLength %>"\n                              style="height:44px;max-height:64px;"><%- pageDescription %></textarea>\n                </div>\n\n                <% // 여러 줄 소개 %>\n                <div class="detailDesc">\n                    <textarea class="textField _pageContent"\n                              placeholder="<%= IM(\'pageband.page_setting.manage_intro_info.intro_description.placeholder\') %>"\n                              maxlength="<%- contentMaxLength %>"\n                              style="height:124px;max-height:144px;"><%- pageContent %></textarea>\n                </div>\n\n                <% // 키워드 등록영역 %>\n                <% if (isKeywordManagePermitted) { %>\n                <div class="introOption">\n                    <div class="introOptionBox">\n                        <ul class="selectedKeywordList">\n                            \x3c!--[D] 데이터 및 UI 컨트롤 메소드 - DPageBandEditIntroView._renderKeywordList --\x3e\n                            <% _.times(keywordCount, function() { %>\n                            <li class="selectedKeywordItem -selectedItem _keywordList"><button type="button" class="keywordButton _keywordBtn">\x3c!-- 키워드 --\x3e</button></li>\n                            <% }); %>\n                        </ul>\n                    </div>\n                    <div class="introOptionButton">\n                        <button class="uButton -sizeS -confirm2  gPal9 gPar9 _keywordChangeBtn"><%= IM(\'ui.label.change\') %></button>\n                    </div>\n                </div>\n                <% } %>\n\n                <% // 지도 (위치) 위치를 지정한 후 button--\x3espan으로 변경됨 type도 같이 삭제해주세요. 주석처리된 영역이 나옵니다. %>\n                <div class="introOption">\n                    <div class="introOptionBox">\n                        <div class="addressText">\n                            \x3c!--[D] 데이터 및 UI 컨트롤 메소드 - DPageBandEditIntroView._renderLocation --\x3e\n                            <button type="button" class="textButton gPat1 _locationGuideBtn"><%= IM(\'groupband.band_intro_description.help_guide.input_location\') %></button>\n                            <span class="textButton gPat1 _locationText">\x3c!-- 주소나오는 영역 --\x3e</span>\n                            <button type="button" class="btnDelete _locationRemoveBtn">\n                                <span class="gSrOnly"><%= IM("ui.label.delete") %></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="introOptionButton">\n                        <button class="uButton -sizeS -confirm2 gPal9 gPar9 _locationChangeBtn"><%= IM(\'ui.label.change\') %></button>\n                    </div>\n                </div>\n\n                <% // 사업자 정보 추가 영역 - 한국어로 렌더링 (http://bts.campmobile.com/browse/BAND-85740) %>\n                <% if (businessRegistrationNo) { %>\n                <div class="introOption _businessWrap">\n                    <div class="introOptionBox">\n                        \x3c!--[D] 데이터 및 UI 컨트롤 메소드 - DPageBandEditIntroView._refreshBusinessRegistrationNo --\x3e\n                        <div class="registrationText">사업자등록번호 <span class="_businessNo"><%- businessRegistrationNo %></span><button type="button" class="iconButton _businessDetailBtn"><span class="gSrOnly">사업자등록정보 보기</span></button></div>\n                    </div>\n                    <div class="introOptionButton">\n                        <button class="uButton -sizeS -confirm2  gPal9 gPar9 _businessChangeBtn"><%= IM(\'ui.label.change\') %></button>\n                    </div>\n                </div>\n                <% } %>\n\n                <% // 첨부한 사진, 동영상 %>\n                <div class="_mediaListRegion"></div>\n            </div>\n        </div>\n        <footer class="modalFooter gPat23">\n                <button type="button" class="uButton -cancel _btnClose"><%- IM("ui.label.cancel") %></button>\n                <button type="button" class="uButton _btnConfirm"><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},1822:function(e,t){e.exports='<div class="lyContent" style="width:440px">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM(\'bandsetting.keyword.title2\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="setKeyword">\n            <div class="titleWrap">\n                <h2 class="title"><%= guideTitle %></h2>\n                <p class="desc"><%= IM("bandsetting.keyword.guide_desc") %></p>\n            </div>\n            <div class="selectedKeywords">\n                <button type="button" class="addKeyword _btnAddKeywords" style="<%= hasSelectedKeyword ? \'display:none;\' : \'\' %>">\n                    <span class="addKeywordText"><%= IM(\'bandsetting.keyword.menu.select_keyword\') %></span>\n                </button>\n                <div class="_selectedKeywordListRegion"></div>\n            </div>\n        </div>\n        <% if (hasSelectedKeyword) { %>\n        <div class="keywordSearchArea">\n            <button type="button" class="keywordSearchButton _btnAddMoreKeywords">\n                <span class="keywordButtonLabel"><%= IM(\'bandsetting.keyword.menu.add_more_keywords\') %></span>\n            </button>\n        </div>\n        <% } %>\n    </div>\n    <footer class="modalFooter -tLine">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},1823:function(e,t){e.exports='<% if (subTitle) { %>\n<h3 class="subTitle"><%- subTitle %></h3>\n<% } else { %>\n<h3 class="gSrOnly"><%= IM(\'groupband.band_intro.media.hidden_title\') %></h3>\n<% } %>\n\n<div class="_mediaUploader" style="position:absolute;visibility:hidden;">\n    <label for="photo_" class="inputLabel"><span class="gSrOnly"><%= IM("ui.label.upload_photo") %></span></label>\n    <input type="file" id="photo_" class="inputFile">\n</div>\n\n<div class="_mediaListRegion"></div>'},1824:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1825),a=n(1021),o=i.View.extend({tagName:"li",className:"photoItem",template:t.template('<button type="button" class="inputLabel _btnUpload"><span class="gSrOnly"><%= IM("ui.label.upload_photo") %></span></button>'),events:{"click ._btnUpload":function(e){this.trigger("upload")}}});return i.CollectionView.extend({tagName:"ul",className:"photoList -flexLayout",attributes:{"data-viewnmae":"DBandIntroEditMediaListCollectionView"},childView:s,childViewTriggers:{upload:"upload"},collectionEvents:{add:function(e,t,n){var i=this.children.find((function(e){return e instanceof o}));this.removeChildView(i)},remove:function(e,t,n){this.addChildView(new o,this.children.length)}},onAttach:function(){this._fillUploadButtonView()},_fillUploadButtonView:function(){var e=a.MEDIA.MAX_COUNT-this.children.length;if(!(e<=0))for(var t=0;t<e;t++)this.addChildView(new o,this.children.length)}})}.call(t,n,t,e))||(e.exports=i)},1825:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(82),a=n(1012),o=n(1021),l=n(590);return i.View.extend({tagName:"li",className:function(){var e=["photoItem"];return this.model.get("data").isGif?e.push("gif"):this.model.get("type")===o.MEDIA.TYPE.VIDEO&&e.push("player"),e.join(" ")},template:t.template('<div class="inputLabel">\n    <img src="<%- thumbnailUrl %>" alt="" class="inputThumb _attachedMedia">\n    <button type="button" class="buttonClose _btnDelete"><span class="gSrOnly"><%= IM("ui.label.delete") %></span></button>\n</div>'),templateContext:function(){return{thumbnailUrl:s.make(this.model.get("data").url,s.TYPE.s75)}},ui:{attachedMedia:"._attachedMedia",btnDelete:"._btnDelete"},events:{"click @ui.btnDelete":function(e){l.isContentCreationPunished()||this.model.collection.remove(this.model)}},onRender:function(){this._setImageLoadingAndRetry()},_setImageLoadingAndRetry:function(){this.getUI("attachedMedia")&&$(this.getUI("attachedMedia")).setLoading({tag:a.html(a.Size.MEDIUM,a.MiddleClass.AREA_VERTICAL_MIDDLE)})}})}.call(t,n,t,e))||(e.exports=i)},1826:function(e,t){e.exports='<% if (showHeader) { %>\n<div class="uHeaderWrap <% if(isRecruiting) { %>-waitingBand -bLineNone<% } else { %>-h50 -bgWhite<% } %>">\n    <header class="header">\n        <h1 class="title"><%= IM("groupband.band_intro_description.title") %></h1>\n    </header>\n</div>\n<% } %>\n\n<% if(showMoreOptionMenu && (canReportBand || isPermittedManageDescription)) { %>\n<div class="postFunction">\n    <button type="button" class="postSet _btnMore"><span class="gSrOnly"><%= IM("groupband.band_setting.more_option") %></span></button>\n    <div class="lyMenu _moreMenuLayer" style="display:none; min-width:130px">\n        <ul>\n            <% if (isPermittedManageDescription) { %>\n            <li><a href="#" role="button" class="_btnModifyIntro"><%= IM("ui.label.modify_long") %></a></li>\n            <% } %>\n            <% if(canReportBand) { %>\n            <li><a href="#" role="button" class="_reportBand"><%= IM("ui.label.report") %></a></li>\n            <% } %>\n            <li><a href="#" role="button" class="_btnCopyBandUrl" data-clipboard-text="<%= bandWebUrl %>"><%= IM("copy.band_web.url") %></a></li>\n            <% if(!isRecruiting) { %>\n            <li><a href="#" role="button" class="_btnCopyBandIntroUrl" data-clipboard-text="<%= bandIntroUrl %>"><%= IM("copy.band_intro.url") %></a></li>\n            <% } %>\n        </ul>\n    </div>\n</div>\n<% } %>\n\n<% if (canShowGroupIntro) { %>\n    <% //min-height가 필요한 곳에서는 -isMinHeight클래스 추가해주세요. %>\n    <div class="cBandIntro <% if(isRecruiting) { %>-waitingBand<% } else { %>-more<% } %>">\n        <h2 class="cBandIntroTitle"><%= IM("groupband.band_intro_description.title") %></h2>\n\n        \x3c!-- 지역 소모임 정보 영역  --\x3e\n        <% if (showLocalBandInfo) { %>\n        <div class="introOptionLocalGroup">\n            <h3 class="introSubTitle"><%= IM(\'groupband.band_intro.local_band_info.title\') %></h3>\n            <div class="_localBandInfoRegion"></div>\n        </div>\n        <% } %>\n\n        <% // 소개말 %>\n        <% if (introDescription || (!hasRegion && !_.isEmpty(bandKeywordsWithKeywordGroups))) { %>\n        <div class="cBandIntroDetail">\n            <% if (introDescription) { %>\n            <p class="desc gPal2"><%= introDescription %></p>\n            <% } %>\n\n            <% // 키워드 %>\n            <% if (!hasRegion && !_.isEmpty(bandKeywordsWithKeywordGroups)) { %>\n            <div class="introOption <%= (introDescription) ? \'gMat18\': \'gMat0\' %>">\n                <div class="introOptionBox">\n                    <ul class="selectedKeywordList">\n                        <% _.each(bandKeywordsWithKeywordGroups, function(item) { %>\n                        <li class="selectedKeywordItem -selectedItem">\n                            <% if (canOpenKeywordGroup) { %>\n                            <button type="button" class="introOptionLink gFs12 _btnBandKeyword" data-group="<%- item.group %>" data-keyword="<%- item.keyword %>"><%- item.keyword %></button>\n                            <% } else { %>\n                            <span class="introOptionLink gFs12"><%- item.keyword %></span>\n                            <% } %>\n                        </li>\n                        <% }); %>\n                    </ul>\n                </div>\n            </div>\n            <% } %>\n        </div>\n        <% } %>\n\n        \x3c!-- 사진/동영상 --\x3e\n        <div class="_bandIntroMediaListRegion"></div>\n\n        <% //7.8.0 이후 대기밴드에도 노출되어야 함. %>\n        <% if(getSchoolInfo) { %>\n        <div class="introOption gPal2">\n            <div class="introOptionBox">\n                <div class="schoolGradeText"><span class="newSchoolInfo"><%- getSchoolInfo %></span></div>\n            </div>\n        </div>\n        <% } %>\n\n        \x3c!-- 지도 (위치) --\x3e\n        <% if (!!bandLocation) { %>\n        <div class="introOption gPal2">\n            <div class="introOptionBox">\n                <div class="addressText"><a href="#" class="introOptionLink _bandLocation"><%- bandLocation %></a></div>\n            </div>\n        </div>\n        <% } %>\n\n        \x3c!-- 사업자 정보 --\x3e\n        <% if ( canShowBusinessIdentificationInfo ) { %>\n        <div class="introOption gPal2">\n            <div class="introOptionBox">\n                <div class="registrationText gMat-3">사업자등록번호 <%- businessRegistrationNo  %><button type="button" class="iconButton _showBusinessIDInfoButton"><span class="gSrOnly">사업자등록정보 보기</span></button></div>\n            </div>\n        </div>\n        <% } %>\n\n        \x3c!-- 다가오는 공개정모 --\x3e\n        <div class="_upcomingLocalMeetupScheduleListRegion"></div>\n\n        \x3c!-- 첨부 파일 --\x3e\n        <div class="_attachedFileListRegion"></div>\n\n        \x3c!-- 밴드소개 상세만 : 밴드 활동 정보 통계 --\x3e\n        <% if((!isSummaryView && !!bandHistory) || (!!bandHistory && canShowGroupBandMainActivitySummary)) { %>\n        <div class="introOptionStatisticsWrap gMat20 gMal2 gMar2 gPat22">\n            <h2 class="introSubTitle"><%= IM("band_intro.activity.info.title") %></h2>\n            <div class="introInfoWrap gMat10">\n                <p class="introDesc"><%= IM("band_intro.activity.create_date") %> <span class="introDescData"><%= bandHistory.created_date %></span></p>\n                <p class="introDesc"><%= IM("band_intro.activity.new_post") %> <span class="introDescData"><em><%= bandHistory.last7days_post_count %></em> <%= IM("band_intro.activity.text_word.case") %></span></p>\n                <p class="introDesc"><%= IM("band_intro.activity.new_join") %> <span class="introDescData"><em><%= bandHistory.last7days_join_member_count %></em> <%= IM("band_intro.activity.text_word.person") %></span></p>\n            </div>\n            <div class="introStatsSummary"><%= activityByDaySummaryTxt %></div>\n\n            <div class="statsChartWrap -summaryChart _bandIntroChart"></div>\n        </div>\n        <% } %>\n\n        \x3c!-- 밴드소개 상세만 : 연결된 페이지 보기 --\x3e\n        <% if(!isSummaryView && connectedPageBandList.length > 0) { %>\n        <div class="introPageWrap gMat18 gMal2 gMar2 gPat22">\n            <h2 class="introSubTitle"><%= IM("group_band.summary.connected_page.title") %></h2>\n            <ul class="cCoverList gMat18">\n                <% _.map(connectedPageBandList, function(pageBand){ %>\n                <li class="cCoverItem">\n                    \x3c!-- [D]home/discovery 참고 --\x3e\n                    <div class="bandUri">\n                        <div class="cover">\n                            <div class="uCoverImage -w80 -border -circle">\n                                    <span class="coverInner">\n                                        <img src="<%= pageBand.profileImage %>" class="coverImg" alt="">\n                                    </span>\n                            </div>\n                        </div>\n                        <div class="bandName">\n                            <div class="name">\n                                <a href="<%= pageBand.pageBandUrl %>" class="text" target="_blank">\n                                    <%= pageBand.pageBandName %>\n                                </a>\n                            </div>\n                            <p class="pSubTxt "><%= pageBand.description %></p>\n                            <button type="button" class="btnPageSubscription <% if(pageBand.isMember) { %>-disabled _unsubscribePage<% } else { %>_subscribePage<% } %>" data-bandno="<%= pageBand.bandNo %>"><%= pageBand.isMemberStateText %></button>\n                            <div class="readMember">\n                                <span class="total"><% IM("global_search.subscribing_number_html", {count:  pageBand.memberCount}) %></span>\n                            </div>\n                        </div>\n                    </div>\n                    <a href="#" class="bandLink"><span class="gSrOnly">바로가기</span></a>\n                </li>\n                <% }) %>\n            </ul>\n        </div>\n        <% } %>\n\n        <% if(isSummaryView && !isRecruitingBand) { %>\n        <div class="introMoreBtnWrap gMat25">\n            <button type="button" class="buttonIntroMore _goBandIntro"><%= IM("band_intro.go_band_intro.text") %></button>\n        </div>\n        <% } %>\n\n    </div>\n<% } %>\n\n<% // 헤더가 있는 소개페이지이며, 대기밴드 아니고, 밴드에 가입했고, 밴드소개 없는 상태 %>\n<% if(!isSummaryView && !isRecruiting && canShowGroupBandIntroDescriptionAndDoAction && !canShowGroupIntro) { %>\n<div class="gBoxShadow uEmpty gMat-18" style="height: 547px">\n    <div>\n        <p class="uEmptyDesc"><%- IM("band.intro.empty") %></p>\n    </div>\n</div>\n<% } %>\n\n<% // 헤더가 있는 소개페이지이며, 대기밴드 아니고, 밴드에 가입 안했고, 밴드소개 없는 상태 %>\n<% if(!isSummaryView && !isRecruiting && !canShowGroupBandIntroDescriptionAndDoAction && !canShowGroupIntro) { %>\n<div class="gBoxShadow uEmpty gMat-18" style="height: 547px">\n    <div>\n        <p class="uEmptyDesc"><%- IM("band.intro.empty") %></p>\n    </div>\n</div>\n<% } %>\n\n<% //대기밴드이고, 밴드에 가입했고, 밴드소개 편집 권한이 없고, 밴드소개 등록되지 않은 상태 %>\n<% if(isRecruiting && canShowGroupBandIntroDescriptionAndDoAction && !isPermittedManageDescription && !canShowGroupIntro) { %>\n<div class="gBoxShadow uEmpty gMat-18" style="height: 547px">\n    <div>\n        <p class="uEmptyDesc"><%= IM("band.intro.try.join_chat") %></p>\n    </div>\n</div>\n<% } %>\n\n<% // 대기밴드이고, 밴드에 가입했고, 밴드소개 편집 권한이 있는 상태 %>\n<% if(isRecruiting && canShowGroupBandIntroDescriptionAndDoAction && isPermittedManageDescription && !canShowGroupIntro) { %>\n<div class="gBoxShadow uEmpty gMat-18" style="height: 547px">\n    <a href="#" class="_btnModifyIntro">\n        <span class="uEmptyIcon -first"></span>\n        <strong class="uEmptyTitle"><%- IM("band.intro.empty2") %></strong>\n        <p class="uEmptyDesc"><%= IM("band.intro.empty3") %></p>\n    </a>\n</div>\n<% } %>\n\n<% // 대기밴드이고, 밴드에 가입 하지 않았고, 밴드소개 등록되지 않은 상태 %>\n<% if(isRecruiting && !canShowGroupBandIntroDescriptionAndDoAction && !canShowGroupIntro) { %>\n<div class="gBoxShadow uEmpty gMat-18" style="height: 547px">\n    <div>\n        <p class="uEmptyDesc"><%= IM("band.intro.try.join_chat") %></p>\n    </div>\n</div>\n<% } %>'},1827:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="header">\n        <h1 class="title"><%-IM(\'band_address\')%></h1>\n    </header>\n\n    <div class="main">\n        <p class="p"><%- IM("copy_url.label.try_copy_to_paste") %></p>\n\n        <div class="p -tSpace">\n            <div class="uInput">\n                <label class="gSrOnly" for="bandAddressInput"><%-IM(\'band_address\')%></label>\n                <input type="text" id="bandAddressInput" readonly="readonly" value="<%- bandUrl %>">\n                <span class="border"></span>\n            </div>\n        </div>\n    </div>\n\n    <footer class="footer">\n        <button type="button" class="uButton _btnClose"><%-IM(\'web.ui.button.label.close\')%></button>\n    </footer>\n</div>\n'},1828:function(e,t){e.exports='\x3c!-- 주제 선택 --\x3e\n<% if (showRegionAndKeyword) { %>\n<ul class="selectedKeywordList">\n    <li class="selectedKeywordItem -selectedItem">\n        <% if (!!regionLinkUrl) { %>\n        <a href="<%- regionLinkUrl %>" target="_blank" type="button" class="keywordButton">\n            <span class="iconLocal"></span><%- region.name %>\n        </a>\n        <% } else { %>\n        <span><%- region.name %></span>\n        <% } %>\n    </li>\n    <% if (!!keyword) { %>\n    <li class="selectedKeywordItem -selectedItem">\n        <% if (!!keywordLinkUrl) { %>\n        <a href="<%- keywordLinkUrl %>" target="_blank" type="button" class="keywordButton _btnLocalKeyword">\n            <%- keyword.keyword %>\n        </a>\n        <% } else { %>\n        <span><%- keyword.keyword %></span>\n        <% } %>\n    </li>\n    <% } %>\n</ul>\n<% } %>\n\x3c!-- 가입 조건 --\x3e\n<% if (!!joinConditionLabel) { %>\n<div class="introJoinCondition">\n    <%= IM(\'local_band.label.member_condition\') %>:\n    <% if (!!joinConditionLabel.gender) { %><em class="gender"><%= joinConditionLabel.gender %></em><% } %>\n    <% if (!!joinConditionLabel.yearOfBirthday) { %><em class="age"><%= joinConditionLabel.yearOfBirthday %></em><% } %>\n</div>\n<% } %>'},1829:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1830),a=n(503),o=n(549),l=n(165),r=n(9),d=n(1626),c=n(937),h=n(685),u=i.View.extend({tagName:"div",className:"introPublicSchedule gPal2",attributes:{"data-viewname":"DUpcomingLocalMeetupScheduleListView"},template:t.template(s),templateContext:function(){var e=this._upcomingLocalMeetupScheduleListCollection.at(0);return{isSummaryView:this._isSummaryView,scheduleCount:this._upcomingLocalMeetupScheduleCount,firstScheduleName:e.getName(),firstScheduleId:e.getScheduleId()}},regions:{upcomingMeetupScheduleListRegion:{el:"._upcomingMeetupScheduleListRegion",replaceElement:!0}},events:{"click ._btnOpenDetailLayer":function(e){var t=this._bandData.getBandCore().bandNo,n=$(e.currentTarget).data("scheduleId");c.openScheduleDetailLayerView({showBandNameTitle:!1,bandNo:t,scheduleId:n})}},initialize:function(e){this._bandData=e.bandData,this._isSummaryView=e.isSummaryView,this._upcomingLocalMeetupScheduleCount=e.upcomingLocalMeetupScheduleCount,this._upcomingLocalMeetupScheduleListCollection=e.upcomingLocalMeetupScheduleListCollection},onAttach:function(){this._showUpcomingLocalMeetupScheduleList()},_showUpcomingLocalMeetupScheduleList:function(){if(!this._isSummaryView){var e=new m({collection:this._upcomingLocalMeetupScheduleListCollection});this.showChildView("upcomingMeetupScheduleListRegion",e)}}}),p=i.View.extend({tagName:"li",className:"scheduleListItem",template:t.template('<time class="date" datetime="<%= date %>">\n    <span><%= day %> <em><%= dayName %></em></span>\n</time>\n<div class="_scheduleEventItemRegion"></div>'),templateContext:function(){return{date:r.format.date(this._scheduleDate,"short_noweekday"),day:this._scheduleDate.format("D"),dayName:this._scheduleDate.format("dddd")}},regions:{scheduleEventItemRegion:{el:"._scheduleEventItemRegion",replaceElement:!0}},events:{click:"_openScheduleDetailLayer"},initialize:function(){this._scheduleDate=this.model.getStartAtMoment().tz(l.getCurrentTimezoneId())},onAttach:function(){this._showScheduleEventItem()},_showScheduleEventItem:function(){var e=new d({model:this.model,scheduleDate:this._scheduleDate,scheduleType:d.SCHEDULE_TYPE.UPCOMING_LOCAL_MEETUP_SCHEDULE});this.listenTo(e,"openSchedule",this._openScheduleDetailLayer),this.showChildView("scheduleEventItemRegion",e)},_openScheduleDetailLayer:function(){c.openScheduleDetailLayerView({showBandNameTitle:!1,bandNo:this.model.getBandNo(),scheduleId:this.model.getScheduleId()})}}),m=i.CollectionView.extend({tagName:"ul",className:"dailyScheduleList",childView:p});return u.show=function(e,n){if(h.build(n.bandData).canShowUpcomingLocalBandMeetupSchedule()&&e){e.hasView()&&e.empty();var i=n.bandData.getBandCore().bandNo;return a.getUpcomingLocalMeetupSchedules(i).then(t.bind((function(i){if(!i||t.isEmpty(i.items))return null;var s=new Backbone.Collection(i.items,{model:o,parse:!0}),a=new u({bandData:n.bandData,isSummaryView:n.isSummaryView,upcomingLocalMeetupScheduleCount:i.count,upcomingLocalMeetupScheduleListCollection:s});return e.show(a),a}),this))}},u}.call(t,n,t,e))||(e.exports=i)},1830:function(e,t){e.exports='<h3 class="introSubTitle">\n    <%= IM(\'local_band.upcoming_meetup_schedules.title\') %>\n    <% if (isSummaryView) { %><span class="sf_color"><%= scheduleCount %></span><% } %>\n</h3>\n<% if (isSummaryView) { %>\n<ul class="cFileList gMat7">\n    <li class="uFlexItem -grayBox gPat14 gPab14 gPal19 gPar19">\n        <span class="thumb -schedul-s gMat1 gMar12"></span>\n        <span class="body">\n            <a href="#" class="text -ellipsis _btnOpenDetailLayer" data-schedule-id="<%= firstScheduleId %>"><%- firstScheduleName %></a>\n        </span>\n    </li>\n</ul>\n<% } %>\n<div class="_upcomingMeetupScheduleListRegion"></div>\n\n'},1831:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1832),a=n(942),o=n(158),l=n(1542),r=n(169),d=i.View.extend({tagName:"div",className:"introOptionFile gMat18 gMal2 gMar2 gPat24",attributes:{"data-viewname":"DBandIntroFileListView"},template:t.template(s),templateContext:function(){var e=this._fileListCollection.at(0);return{isSummaryView:this._isSummaryView,title:this._isSummaryView?IM("band_intro.upload_file.title2"):IM("band_intro.upload_file.title"),fileCount:this._fileListCollection.length,fileDesc:this._getFileDescription(),firstFileName:e.get("fileName")}},regions:{fileListRegion:{el:"._fileListRegion",replaceElement:!0}},events:{"click ._btnDownloadFirstFile":function(e){e.preventDefault();var t=this._fileListCollection.at(0);t.getFileUrl(this._bandNo).then((function(e){e&&(t.get("isDropboxFile")?window.open(e,"_blank"):location.href=e)}))}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._fileDesc=e.fileDesc,this._fileListCollection=e.fileListCollection,this._isSummaryView=e.isSummaryView},onRender:function(){this._showFileListView()},_getFileDescription:function(){var e=o.nl2br(t.escape(this._fileDesc));return e=e.replace(/(<br>)+/g,"<br>"),t.isEmpty(e)||(e=o.linkTextReplace(e,r.OUTER_LINK)),e},_showFileListView:function(){if(!this._isSummaryView&&!this._fileListCollection.isEmpty()){var e=new i.CollectionView({tagName:"ul",className:"cFileList gMat13",childView:l,childViewOptions:function(e,t){return{bandNo:this.options.bandNo,isEditMode:!1}},collection:this._fileListCollection,bandNo:this._bandNo});this.showChildView("fileListRegion",e)}}});return d.show=function(e,t){if(e){e.hasView()&&e.empty();var n=t.bandIntroModel.get("bandFiles").fileList,i=t.bandIntroModel.get("bandFiles").dropboxList,s=a.buildFromBandIntroFiles(n,i);if(!s.isEmpty()){var o=new d({bandData:t.bandData,fileDesc:t.bandIntroModel.getBandIntroFilesDescription(),fileListCollection:s,isSummaryView:t.isSummaryView});return e.show(o),o}}},d}.call(t,n,t,e))||(e.exports=i)},1832:function(e,t){e.exports='<h2 class="introSubTitle">\n    <%= title %> <% if (isSummaryView) { %><span class="sf_color"><%= fileCount %></span><% } %>\n</h2>\n\n<% if (!isSummaryView) { %>\n<div class="introDesc gMat6"><%= fileDesc %></div>\n<% } %>\n\n\x3c!-- 밴드 소개 첨부 파일 목록 (축약형 뷰) --\x3e\n<% if(isSummaryView) { %>\n<ul class="cFileList gMat7">\n    <li class="uFlexItem -grayBox gPat14 gPab14 gPal19 gPar19">\n        <span class="thumb -file-s gMat1 gMar12"></span>\n        <span class="body">\n            <a href="#" class="text -ellipsis _btnDownloadFirstFile"><%- firstFileName %></a>\n        </span>\n    </li>\n</ul>\n<% } %>\n\n<div class="_fileListRegion"></div>\n\n\n\n'},1833:function(e,t){e.exports='<span class="thumb <%= fileTypeIcon %>-s"></span>\n<span class="body">\n    <a href="#" class="text -ellipsis _btnDownload"><%- fileName %></a>\n    <span class="subText -ellipsis">\n        <% if (isDropboxFile) { %>\n        <span>Dropbox</span>\n        <% } else { %>\n        <span><%= fileSizeText %></span><span><%= uploadedAtText %></span>\n        <% } %>\n    </span>\n</span>\n<% if (isEditMode) { %>\n<span class="etc">\n    <button class="uButton -sizeS -confirm2 _btnDelete"><%= IM("ui.label.delete") %></button>\n</span>\n<% } else if (!isDropboxFile) { %>\n<span class="etc">\n    <a href="#" class="download _btnDownload"><span class="gSrOnly">download</span></a>\n</span>\n<% } %>'},1834:function(e,t){e.exports='<div>\n    <div class="uEmpty gContentCardShadow" style="height:547px">\n        <a href="#" class="<%= actionClass %>">\n            <% if (icon) { %>\n            <span class="uEmptyIcon <%= icon %>"></span>\n            <% } %>\n            <% if (titleMessage) { %>\n            <h1 class="uEmptyTitle <%= titleColor %>"><%= titleMessage %></h1>\n            <% } %>\n            <% if (descMessage) { %>\n            <p class="uEmptyDesc"><%= descMessage %></p>\n            <% } %>\n        </a>\n    </div>\n</div>\n'},1835:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(6),a=n(1836),o=n(1837),l=n(930),r=n(26),d=n(153),c=n(554),h=i.View.extend({tagName:"div",className:"cMissionWrap gContentCardShadow",attributes:{"data-viewname":"DMissionListCardView"},template:t.template(a),templateContext:function(){var e=this.collection.size();return{canShowMoreButton:e>=2,missionCardCount:e,missionsLinkUrl:d.GROUP_BAND_MISSION.makeUrl({band_no:this._bandNo})}},ui:{missionListWrap:"._missionListWrap",btnMore:"._btnMore"},regions:{missionListRegion:{el:"._missionListRegion",replaceElement:!0}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._bandRadio=r.getBandChannel(this._bandNo)},onAttach:function(){this._showMissionList(),this.listenTo(this._bandRadio,r.EVENT.BAND_MISSION_DELETED,this._handleBandMissionDeleted)},onBeforeDetach:function(){this.stopListening(this._bandRadio)},_showMissionList:function(){var e=new i.CollectionView({tagName:"ul",className:"missionList",childView:o,collection:new s.Collection(this.collection.slice(0,3)),childViewOptions:t.bind((function(){return{firstMissionInfoCreatePostEnabled:this.collection.findWhere({confirmStatus:c.CONFIRM_STATUS.NOT_YET_CONFIRMED}),bandData:this._bandData}}),this)});this.showChildView("missionListRegion",e)},_handleBandMissionDeleted:function(e){var t=this.collection.find((function(t){return t.getMissionId()==e}));e&&(1==this.collection.size()?this.destroy():this.collection.remove(t))}});return h.showMissionListCardView=function(e,n){if(e.canAccessMission()){var i=e.getBandNo();(new l).fetchOnGoingMissions(i).then(t.bind((function(i){if(!i.isEmpty()){var a=i.filter((function(e){return e.isUpcomingMission()})),o=i.filter((function(e){return e.isOngoingMission()}));a.sort((function(e,t){return e.getBandMissionStartAt()-t.getBandMissionStartAt()||e.getMissionCreateAt()-t.getMissionCreateAt()})),o.sort((function(e,n){return t.isNull(n.getBandMissionConfirmStatus())?n.getBandMissionStartAt()-e.getBandMissionStartAt():n.getBandMissionConfirmStatus().localeCompare(e.getBandMissionConfirmStatus())||n.getBandMissionStartAt()-e.getBandMissionStartAt()}));var l=o.concat(a);!function(e,n,i){n&&!t.isEmpty(i)&&(n.empty(),n.show(new h({bandData:e,collection:new s.Collection(i)})))}(e,n,l)}}),this))}},h}.call(t,n,t,e))||(e.exports=i)},1836:function(e,t){e.exports='<h2 class="title">\n    <%- IM(\'band_mission.mission_list_card.title\') %>\n\n    <% if(canShowMoreButton) { %>\n    <a href="<%- missionsLinkUrl %>" class="moreLink _btnMore"><%= missionCardCount %></a>\n    <% } %>\n</h2>\n\n<div class="missionListWrap _missionListWrap">\n    <div class="_missionListRegion"></div>\n</div>'},1837:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1838),a=n(153),o=n(739),l=n(26),r=n(167),d=n(166),c=n(554);return i.View.extend({tagName:"li",className:"missionItem",attributes:{"data-viewname":"DMissionListCardItemView"},template:t.template(s),templateContext:function(){var e=this.model.isRestrictedBandMission(),t=this.model.isOngoingMission(),n=this.model.getBandMissionConfirmStatus(),i=this.model.isUpcomingMission();return{isDisabled:e&&!this._bandData.canManageMission(),isRestricted:e,isAlreadyConfirmed:t&&n==c.CONFIRM_STATUS.ALREADY_CONFIRMED,canConfirm:!e&&t&&n==c.CONFIRM_STATUS.NOT_YET_CONFIRMED,canShowUpcomingMissionText:!e&&i&&n==c.CONFIRM_STATUS.CONFIRM_DISABLED,landingUrl:this._getLandingUrl(),frequencyText:o.getBandMissionConfirmFrequencyText(this.model.getBandMissionConfirmFrequency()),durationText:o.getBandMissionDurationText(this.model.getBandMissionDuration()),periodText:o.getBandMissionTimezonePeriodText(this.model.getBandMissionStartAt(),this.model.getBandMissionEndAt(),this.model.getBandMissionTimeZoneId(),!1),remainingDaysText:o.getRemainingDayText(this.model.getBandMissionStartAt(),this.model.getFetchedAt(),this.model.getBandMissionTimeZoneId()),needShowGuideMark:this._needShowGuideMark,daysInProgressText:this._getDaysInProgressText()}},events:{"click @ui.missionLink":function(e){this.model.isRestrictedBandMission()&&(e.preventDefault(),this._bandData.canManageMission()&&(this.model.getBandMissionIsManuallyEnded()?alert(IM("band_mission.scheduled_to_end")):this.model.isPossibleMissionEnd()?this._endRestrictedBandMission():this.model.isPossibleMissionDelete()&&this._deleteRestrictedBandMission()))},"click ._btnWriteConfirmPost":function(){l.getPostChannel().trigger(l.EVENT.NEW_POST_WITH_MISSION,{bandData:this._bandData,bandMissionModel:this.model})}},ui:{missionLink:"._missionLink",guideMark:"._guideMark"},initialize:function(e){this._bandData=e.bandData,this._createPostEnabledFirstMissionInfo=e.firstMissionInfoCreatePostEnabled,this._needShowGuideMark=!1;var t=r.getCurrentUserEnvStorage(),n=t.get(d.ConfirmPostWriteGuide);this._createPostEnabledFirstMissionInfo&&(this.model.getMissionId()==this._createPostEnabledFirstMissionInfo.getMissionId()&&!n&&(this._needShowGuideMark=!0,t.set(d.ConfirmPostWriteGuide,!0)))},onAttach:function(){this.listenTo(l.getPostChannel(),l.EVENT.CANCEL_MISSION_CONFIRM,(function(e){e.bandNo===this.model.getBandNo()&&e.missionId===this.model.getMissionId()&&(this.model.set("confirmStatus",c.CONFIRM_STATUS.NOT_YET_CONFIRMED),this.render())}))},_getDaysInProgressText:function(){return this.model.isOngoingMission()?o.getDaysInProgressText(this.model):null},_getLandingUrl:function(){var e={band_no:this.model.getBandNo(),mission_id:this.model.getMissionId()};return a.GROUP_BAND_MISSION_DETAIL.makeUrl(e)},_endRestrictedBandMission:function(){var e=o.getBandMissionManualEndDateText(this.model),t=IM("band_mission.restricted_mission_end_confirm",{endDate:e});confirm(t)&&this.model.endBandMissionManually()},_deleteRestrictedBandMission:function(){confirm(IM("band_mission.restricted_mission_delete_confirm"))&&this.model.deleteBandMission()}})}.call(t,n,t,e))||(e.exports=i)},1838:function(e,t){e.exports='<a href="<%- landingUrl %>" class="missionInfoBox <%- isDisabled ? \'gCursorDefault\' : \'\' %> _missionLink">\n    <% if (isRestricted) { %>\n    <p class="missionBlindGuideText gColorGr3 gMat10 gMab10"><%- IM(\'band_mission.restricted\') %></p>\n    <% } else { %>\n    <h3 class="missionTitle"><%- title %></h3>\n    <div class="missionDesc">\n        <span class="missionDate">\n            <% if (!!remainingDaysText) { %>\n            <span class="dDay sf_color"><%= remainingDaysText %></span>\n            <% } %>\n            <% if (!!daysInProgressText) { %>\n            <em class="state sf_color"><%= daysInProgressText %></em>\n            <% } %>\n            <span class="frequency"><%= frequencyText %>,</span>\n            <span class="period"><%= durationText %></span>\n            <span class="periodInfoDetail">(<%= periodText %>)</span>\n        </span>\n        <% if (isAlreadyConfirmed) { %>\n        <span class="missionState sf_color -completion">\n            <svg class="svgIcon ico-certification-completed sf_color" aria-hidden="true">\n                <use xlink:href="#ico-certification-completed"></use>\n            </svg>\n           <%= IM(\'band_mission.comfirm_complete\') %>\n        </span>\n        <% } %>\n    </div>\n    <% } %>\n</a>\n\n<% if (canConfirm) { %>\n<div class="missionWriteWrap">\n    <button class="btnMissionAttendWrite sf_color gMat9 _btnWriteConfirmPost" type="button">\n        <%= IM(\'create.confirm_post.editor.title\') %>\n        <svg class="svgIcon iconArrow sf_color" aria-hidden="true">\n            <use xlink:href="#icon-arrow-10"></use>\n        </svg>\n    </button>\n    <% if (needShowGuideMark) { %>\n    <div class="coachingGuide _guideMark" style="display: block;">\n        <%= IM("create.confirm_post.guide.msg") %>\n    </div>\n    <% } %>\n</div>\n<% } %>'},1839:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1840),o=n(877),l=n(553),r=s.View.extend({tagName:"div",className:"reserveWrap gBoxShadow",attributes:{"data-viewname":"DNotPostedLiveCountView"},template:i.template(a),initialize:function(e){this._bandData=e.bandData,this._count=e.count},serializeData:function(){var e=this._bandData.getBandCore();return{url:l.notPostedLives(e).url,count:this._count>10?"10+":this._count}}});return r.asyncBuildNotPostedLiveCountView=function(e){var n=e.getBandCore();return e.canAccessNotPostedLiveList()?o.getNotPostedLiveCount(n.bandNo).then((function(n){var i=n.not_posted_live_count||0;return i>0?new r({bandData:e,count:i}):t.Deferred().reject().promise()})):t.Deferred().reject().promise()},r}.call(t,n,t,e))||(e.exports=i)},1840:function(e,t){e.exports='<div class="cPostReserve">\n    <a href="<%- url %>" class="tit"><%- IM(\'live.not_posted_live_count_text\') %> <span class="total"><%- count %></span></a>\n</div>'},1841:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(167),a=n(166),o=n(1842),l=n(487),r=n(83);function d(e){var t=JSON.parse(s.getCurrentUserEnvStorage().get([a.BandServiceGuide,e]));return null==t?{hiddenGuideIds:[],lastReadGuideId:null}:t}function c(e,t){s.getCurrentUserEnvStorage().set([a.BandServiceGuide,e],JSON.stringify(t))}var h=i.View.extend({className:"guidanceWrap gContentCardShadow",attributes:{"data-viewname":"DBandServiceGuideView"},template:t.template(o),templateContext:function(){var e=this._getCurrentGuide();return{content:e.content,button:e.button,link:e.web,isNewWindow:e.web_open_new_window_yn}},behaviors:[l],ui:{toggleGuide:"._toggleGuide",guideArea:"._guideArea",offGuide:"._offGuide",goToPost:"._goToPost",newIcon:"._newIcon",detailView:"._detailView"},events:{"click @ui.toggleGuide":"_toggleGuide","click @ui.offGuide":function(){var e,n,i,s=this._getCurrentGuide();e=this._bandNo,n=s.id,(i=d(e)).hiddenGuideIds.push(n),i.hiddenGuideIds=t.uniq(i.hiddenGuideIds),c(e,i),this._guideDataList.splice(0,1),this._guideDataList.length>0?this.render():this.destroy(),this.jplClick(l.CLASSIFIER.SERVICE_GUIDE_STOP)},"click @ui.goToPost":"_readGuide","click @ui.detailView":function(){this.jplClick(l.CLASSIFIER.SERVICE_GUIDE_MORE)}},initialize:function(e){this._loading=!0,this._guideDataList=e.guides,this._bandNo=e.bandData.getBandNo()},onAttach:function(){d(this._bandNo).lastReadGuideId===this._getCurrentGuide().id&&this.ui.newIcon.hide()},_getCurrentGuide:function(){return this._guideDataList[0]},_toggleGuide:function(){this.ui.guideArea.hasClass("-isViewMore")?this.ui.guideArea.removeClass("-isViewMore"):(this.ui.guideArea.addClass("-isViewMore"),this._readGuide())},_readGuide:function(){var e,t,n,i=this._getCurrentGuide();this.getUI("newIcon").hide(),e=this._bandNo,t=i.id,(n=d(e)).lastReadGuideId=t,c(e,n),this.jplClick(l.CLASSIFIER.SERVICE_GUIDE)}});return h.showDBandServiceGuideView=function(e,n){if(e){var i=n.getBandNo();r.getBandServiceGuides(i).then(t.bind((function(s){var a=s;if(0!==a.length){var o=function(e,n){var i=d(e);return 0===i.hiddenGuideIds.length?n:(i.hiddenGuideIds=t.intersection(i.hiddenGuideIds,t.pluck(n,"id")),c(e,i),t.filter(n,t.bind((function(e){return!t.contains(i.hiddenGuideIds,e.id)}),this)))}(i,a);if(0!==o.length){var l=new h({bandData:n,guides:o});e.show(l)}}}),this))}},h}.call(t,n,t,e))||(e.exports=i)},1842:function(e,t){e.exports='<div class="cServiceGuidance _guideArea">\n    <div class="serviceGuidanceDesc">\n        <span class="gNewIcon _newIcon"><%- IM("band_intro.activity.new_post") %></span>\n        <a href="<%- link %>" class="guideText _goToPost" <%= (isNewWindow) ? \'target="_blank"\': \'\' %>><%- content %></a>\n        <button class="buttonMore _toggleGuide"><span class="gSrOnly"><%- IM("web.postlist.btn.see_more") %></span></button>\n    </div>\n\n    <div class="buttonBox">\n        <button type="button" class="buttonText _offGuide"><%- IM("label.ui.off") %></button>\n        <a href="<%- link %>" class="buttonText _detailView" <%= (isNewWindow) ? \'target="_blank"\': \'\' %>><%- button %></a>\n    </div>\n</div>'},1843:function(e,t){e.exports='<button type="button" class="feedType _btnListTypeFeed"><span class="gSrOnly">feed type</span></button>\n<button type="button" class="listType _btnListTypeList"><span class="gSrOnly">list type</span></button>\n'},1844:function(e,t){e.exports='<div class="_tagSwipe"></div>\n<button type="button" class="prev _btnSlidePrev"><span class="gSrOnly"><%= IM(\'ui.label.prev\') %></span></button>\n<button type="button" class="next _btnSlideNext"><span class="gSrOnly"><%= IM(\'ui.label.next\') %></span></button>\n'},1845:function(e,t,n){var i=n(0),s=n(4),a=n(1846),o=n(909),l="_visibleSlider",r=500,d={SLIDE_CHANGED:"SLICE_CHANGED",ITEM_CLICKED:"ITEM_CLICKED"},c=s.View.extend({attributes:{"data-viewname":"DBandBoardTagSwipeView"},className:"tagWrapper",initialize:function(){this._pageIndex=void 0,this._items=this.options.items},template:i.template(a),templateContext:function(){return{items:this._items}},ui:{tagWrapInner:"._tagWrapInner",btnItem:"._btnItem",btnTagSetting:"._btnTagSetting"},events:{"click @ui.btnItem":function(e){var t=this.$(e.currentTarget),n=Number(t.attr("data-index"));this.trigger(d.ITEM_CLICKED,this._items[n].id)}},onDomRefresh:function(){this._initSwiper()},onBeforeDetach:function(){this._destroySwiper()},_initSwiper:function(){this._destroySwiper();var e=this;this._swiper=new o(this.getUI("tagWrapInner"),{loop:!1,initialSlide:this.getUI("tagWrapInner").find("a").filter(".sf_tBg").parent().index()-1,slidesPerView:"auto",spaceBetween:8,watchSlidesVisibility:!0,watchSlidesProgress:!0,allowTouchMove:!1,slideVisibleClass:l,navigation:{nextEl:null,prevEl:null},on:{init:function(){e._swiperPageSlides=function(e){var t=e.slides,n=e.slidesSizesGrid,s=e.slidesGrid,a=e.width,o=[0],l=0;return i.each(t,(function(e,t){var i=n[t],r=s[t];r+i-l>a&&(o.push(t),l=r)}),this),o}(this),e._pageIndex=e._findCurrentPageIndex(this.activeIndex),setTimeout(i.bind((function(){e.trigger(d.SLIDE_CHANGED,{isBeginning:this.isBeginning,isEnd:this.isEnd})}),this),0)},slideChange:function(){e._swiperPageSlides&&(e._pageIndex=e._findCurrentPageIndex(this.activeIndex),e.trigger(d.SLIDE_CHANGED,{isBeginning:this.isBeginning,isEnd:this.isEnd}))}}})},_destroySwiper:function(){this._swiper&&(this._swiper.destroy(),this._swiper=null)},_findCurrentPageIndex:function(e){if(!this._swiperPageSlides)throw new Error("swiper is not initialized");var t=i.findIndex(this._swiperPageSlides,(function(t){return e<t}));return t<0?this._swiperPageSlides.length-1:t-1},slidePrev:function(){this._swiperPageSlides[this._pageIndex]!==this._swiper.activeIndex?this._slideToPage(this._pageIndex):this._slideToPage(this._pageIndex-1)},slideNext:function(){this._slideToPage(this._pageIndex+1)},_slideToPage:function(e){!this._swiper||e<0||e>=this._swiperPageSlides||this._swiper.slideTo(this._swiperPageSlides[e],r)}});c.buildDBandBoardTagSwipeView=function(e){return new c({items:e})},c.EVENT=d,e.exports=c},1846:function(e,t){e.exports='<div class="_tagWrapInner">\n  <ul class="tagSwipe swiper-wrapper">\n    <% _.each(items, function(item, index) { %>\n    <li class="itemWrap swiper-slide"><a href="#" role="button" data-index="<%=index%>" data-id="<%= item.label %>" class="tagItem <%=item.anchorClass %> _btnItem <%= (item.active) ? \'sf_tBg sf_tBorder -active\' : \'\' %>"><%= item.label %></a></li>\n    <% }); %>\n  </ul>\n</div>\n'},1847:function(e,t){e.exports='<% // 대표태그 설정 %>\n<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="header">\n            <h1 class="title"><%= IM("bandsetting.tag_setting.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContentWrap gPa0">\n                <div class="tagSetting">\n                    <p class="notification _uNotification" style="display:none;"></p>\n\n                    <% if (canUseSetHashtagConfig) { %>\n                    <div class="hashTagSetting">\n                        <div class="flexList -tbSpace15">\n                            <div class="text">\n                                <label for="postHashtag" class="labelTitle"><%= IM(\'bandsetting.tag_setting.use_post_hashtag\') %></label>\n                            </div>\n                            <div class="etc">\n                                <label for="postHashtag" class="uCheck -switch">\n                                    <input type="checkbox" id="postHashtag" class="checkInput _postHashtagCheckInput" <%= (isPinnedHashtagsRequiredOnPost) ? \'checked\' : \'\' %>>\n                                    <span class="checkLabel">\n                                        <span class="shape"></span>\n                                        <span class="text"></span>\n                                    </span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <dl class="guideInformation -borderBottom">\n                        <dt class="title"><%= IM(\'bandsetting.tag_setting.post_hashtag.desc1\') %></dt>\n                        <dd class="item"><%= IM(\'bandsetting.tag_setting.post_hashtag.desc2\') %></dd>\n                        <dd class="item"><%= IM(\'bandsetting.tag_setting.post_hashtag.desc3\') %></dd>\n                    </dl>\n                    <% } %>\n\n                    <form class="_tagSettingForm">\n                        <div class="searchWrap">\n                            <label for="inputAddTag" class="gSrOnly"><%= IM("bandsetting.tag_setting.add_tag") %></label>\n                            <span class="inputWrap">\n                                <input type="text" id="inputAddTag" class="inputSearch _inputTagName" maxlength="85" placeholder="<%= IM(\'bandsetting.tag_setting.add_tag\') %>" autocomplete="off" <%= (!isEnableAppendHashtag) ? \'disabled\' : \'\' %>>\n                            </span>\n                            <button type="submit" class="btnSearch uButton -sizeS -default _btnAddTag" disabled><%= IM("bandsetting.tag_setting.add.label") %></button>\n                        </div>\n\n                        \x3c!-- 태그 없을때 인풋박스 클릭시 --\x3e\n                        <div class="tagSearchHint _tagSearchHint">\n                            <div class="inner">\n                                <ul>\n                                    <%\n                                    if (count > 0) {\n                                        _.each(bandTags, function(tag, index) {\n                                            var isPinned = \'false\';\n\n                                            if (tag.is_pinned) {\n                                                isPinned = \'true\';\n                                            }\n                                    %>\n                                    <li class="_tagSearchHintItem" data-pinned="<%- isPinned %>" data-tagname="<%- tag.hashtag.replace(/\\"/g, \'&quot;\') %>"><a href="#"><%= tag.hashtag %></a></li>\n                                    <%\n                                        });\n                                    }\n                                    %>\n                                </ul>\n                            </div>\n                        </div>\n                    </form>\n\n                    \x3c!-- 태그 검색전 --\x3e\n                    <p class="uEmpty _emptyList" <% if (isPinnedCount) { %>style="display:none"<% } %>>\n                        <span><%= IM("bandsetting.tag_setting.desc.txt") %></span>\n                    </p>\n\n                    \x3c!-- 태그 검색 --\x3e\n                    <div class="tagList _tagListWrap" <% if (!isPinnedCount) { %>style="display:none"<% } %>>\n                        <ul class="listLine _tagListUl">\n                            <%\n                            _.each(bandTags, function(tag, index) {\n                                if (tag.is_pinned) {\n                            %>\n                            <li class="flexList -h52 bLine _tagListLi" data-tagname="<%- tag.hashtag.replace(/\\"/g, \'&quot;\') %>">\n                                <span class="text -ellipsis _hashtag"><%= tag.hashtag %></span>\n                                <span class="etc">\n                                    <button class="uButton -iconListRemove _btnRemoveTag"><span class="gSrOnly"><%= IM("bandsetting.tag_setting.delete_tag") %></span></button>\n                                </span>\n                                <span class="etc">\n                                    <a href="#" role="button" class="uButton -iconListMove _dragBtn"><span class="gSrOnly"><%= IM("bandsetting.tag_setting.order_change") %></span></a>\n                                </span>\n                            </li>\n                            <%\n                                }\n                            });\n                            %>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <footer class="footer">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnSaveTag" disabled><%= IM("ui.label.save") %></button>\n        </footer>\n    </div>\n</section>\n'},1848:function(e,t,n){var i=n(0),s=n(4),a=n(1849),o=n(1001),l=n(26),r=n(889),d=[{id:o.LIST_ORDER_TYPE.RECENT,title:IM("ui.label.sort.lastest")},{id:o.LIST_ORDER_TYPE.COMMENT,title:IM("board.post_sort.menu.by_comment_desc")}],c={CHANGE_POST_SORT_ORDER:"CHANGE_POST_SORT_ORDER"},h=s.View.extend({attributes:{"data-viewname":"DBandHomeSortPostMenuView"},className:"sortLast",initialize:function(){this._currentTitleId=this.options.currentSortOrder,this.listenTo(l.getDGlobalChannel(),l.EVENT.HTML_CLICK,this._closeSortMenu)},template:i.template(a),templateContext:function(){return{title:this._getCurrentTitle()}},ui:{btnSort:"._btnSort",menuSort:"._menuSort"},events:{"click @ui.btnSort":function(){return this._toggleSortMenu(),!1}},regions:{sortMenu:{el:"._sortMenu",replaceElement:!0}},_getCurrentTitle:function(){var e=i.findWhere(d,{id:this._currentTitleId});return e&&e.title},_toggleSortMenu:function(){if(this.getRegion("sortMenu").hasView())this._closeSortMenu();else{var e=r.buildLyMenu(d,122);this.showChildView("sortMenu",e),this.listenTo(e,r.EVENTS.MENU_SELECTED,(function(e){this._currentTitleId=e,this.render(),this.trigger(c.CHANGE_POST_SORT_ORDER,e)}))}},_closeSortMenu:function(){this.getRegion("sortMenu").empty()}});h.EVENT=c,h.buildDBandHomeSortPostMenuView=function(e){return new h({currentSortOrder:e})},e.exports=h},1849:function(e,t){e.exports='<button type="button" class="iconArrowGray _btnSort"><%=title%></button>\n<div class="_sortMenu"></div>\n'},1850:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1851),a=n(520),o=n(517),l=(n(152),n(1852)),r=i.CollectionView.extend({tagName:"div",className:"postWrap viewTypeListWrap",attributes:{"data-viewname":"DPreviewPostListCollectionView"},childView:l}),d=i.View.extend({tagName:"div",className:"moduleBox",attributes:{"data-viewname":"DPreviewPostListView"},template:t.template(s),regions:{postListRegion:{el:"._postListRegion",replaceElement:!0}},events:{"click ._btnJoin":function(){this.trigger("DBandMainLayoutView:startBandJoin")}},onRender:function(){this.showChildView("postListRegion",new r({collection:this.collection}))}});return d.show=function(e,n,i){if(e)return e.hasView()&&e.empty(),a.getRecentPosts(n).done((function(n){if(!t.isEmpty(n.items)){var s=new Backbone.Collection(n.items,{model:o,parse:!0}),a=new d({collection:s});return e.show(a),a}e.show(new i)}))},d}.call(t,n,t,e))||(e.exports=i)},1851:function(e,t){e.exports='<div class="_postListRegion"></div>\n<div class="gContentCardShadow uEmpty" style="height:147px">\n    <a href="#" class="_btnJoin">\n        <span class="uEmptyIcon -join"></span>\n        <p class="uEmptyDesc"><%= IM(\'closed_band.preview_post_list.join_guide_text\') %></p>\n    </a>\n</div>'},1852:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(52),a=n(4),o=n(1853),l=n(9),r=n(152),d=n(509),c=n(656),h=n(1040),u=n(82),p=n(158),m=n(1110),_=n(1155),b=n(1533);return a.View.extend({tagName:"div",className:"cCard gContentCardShadow",attributes:{"data-viewname":"DPreviewPostListItemView"},template:t.template(o),templateContext:function(){var e=i.isBlank(this.model.get("content")),t=this.model.getMissionInfoForPost(),n=t?t.getPostMissionConfirmCompleteText():null;return c.hasRestriction(this.model)&&(n=void 0),{prefixAttachmentText:this._getPrefixAttachmentText(),content:e?this._getNonContentText():p.convertPostText(this.model.get("content")),commentCountText:i.numberFormat(this.model.get("commentCount")||0),readCountText:i.numberFormat(this.model.get("readCount")||0),media:this._getPresentMedia(),missionTitle:n}},ui:{missionInfo:"._missionInfo",postText:"._postText",textBody:"._textBody",moreWrap:"._moreWrap",btnMedia:"._btnMedia",btnEmotion:"._btnEmotion",btnComment:"._btnComment"},events:{click:function(e){return alert(IM("closed_band.preview_post_list.post_click_alert")),!1}},regions:{postAuthorRegion:{el:"._postAuthorRegion",replaceElement:!0},emotionCountSelectRegion:{el:"._emotionCountSelectRegion",replaceElement:!0},stickerRegion:{el:"._stickerRegion",replaceElement:!0}},initialize:function(e){this._orderedExistingAttachmentTypes=this._getOrderedExistingAttachmentTypes()},onRender:function(){this._renderAuthor(),this._renderSticker(),this._renderEmotionCount()},onDomRefresh:function(){this.getUI("moreWrap").toggle(this.getUI("textBody").prop("scrollHeight")>this.getUI("textBody").prop("clientHeight"))},_getOrderedExistingAttachmentTypes:function(){var e=[];return t.each(r.ATTACHMENT_ORDER,(function(n){n===r.POST_ATTACHMENT_TYPE.PHOTO&&this.model.hasMediaAll()&&t.each(r.MEDIA_ATTACHMENT_TYPES,(function(t){this.model.hasAttachment(t)&&e.push(t)}),this),this.model.hasAttachment(n)&&e.push(n)}),this),e},_getPrefixAttachmentText:function(){var e=[r.POST_ATTACHMENT_TYPE.PHOTO_ALBUM,r.POST_ATTACHMENT_TYPE.VIDEO,r.POST_ATTACHMENT_TYPE.PROMOTION_PHOTO,r.POST_ATTACHMENT_TYPE.PHOTO,r.POST_ATTACHMENT_TYPE.SHARED_POST_SNIPPET,r.POST_ATTACHMENT_TYPE.SHARED_PAGE_POST_SNIPPET,r.POST_ATTACHMENT_TYPE.SNIPPET,r.POST_ATTACHMENT_TYPE.SUBPOST,r.POST_ATTACHMENT_TYPE.STICKER],n=t.find(this._orderedExistingAttachmentTypes,(function(n){return!(t.contains(e,n)||!r.ATTACHMENT_TEXT[n].TITLE)&&n}),this);return n?n===r.POST_ATTACHMENT_TYPE.ADDON?this.model.getAddon().at(0).getAddonSummaryModel().getNameMap()[s.camelize(l.lang)]:r.ATTACHMENT_TEXT[n]&&r.ATTACHMENT_TEXT[n].TITLE:""},_getNonContentText:function(){var e=this._orderedExistingAttachmentTypes[0];if(e===r.POST_ATTACHMENT_TYPE.VIDEO){var t=this._getPresentMedia();if(t&&t.isGif)return IM("post.gif.msg.attached");if(t&&t.isLive)return IM("post.live.msg.attached")}return e===r.POST_ATTACHMENT_TYPE.PROMOTION_PHOTO&&(e=r.POST_ATTACHMENT_TYPE.PHOTO),r.ATTACHMENT_TEXT[e]&&r.ATTACHMENT_TEXT[e].ATTACHED_FOR_NO_CONTENT||IM("post.msg.created")},_getPresentMedia:function(){var e=h.generateSortedMediasFromPostListItemModel(this.model);if(e[0])return{thumbnail:u.make(e[0].photo_url,u.TYPE.s480),totalCountText:e.length>9?"9+":e.length>1?e.length:"",isGif:e[0].video&&e[0].video.is_gif,isVideo:e[0].video&&!e[0].video.is_gif,isLive:e[0].video&&e[0].video.is_live}},_renderAuthor:function(){this.getRegion("postAuthorRegion").show(m.build(this.model,{bPostDetail:!1}))},_renderSticker:function(){if(i.isBlank(this.model.get("content"))&&this._orderedExistingAttachmentTypes[0]===r.POST_ATTACHMENT_TYPE.STICKER){var e=this.model.getAttachment(r.POST_ATTACHMENT_TYPE.STICKER).at(0);this.showChildView("stickerRegion",_.build({model:e}))}},_renderEmotionCount:function(){this.showChildView("emotionCountSelectRegion",b.buildDEmotionCountSelectView({model:this.model,bandNo:this.model.getBandNo(),contentKey:d.buildPostKey(this.model.getPostNo()),clickable:!1}))}})}.call(t,n,t,e))||(e.exports=i)},1853:function(e,t){e.exports='<div class="cContentsCard _postMainWrap">\n        <% // 작성자와 글 정보 영역 %>\n        <div class="_postAuthorRegion"></div>\n\n        <div class="postMain">\n            <% if(missionTitle) {%>\n            <div class="missionCertification _missionInfo">\n                <span class="missonName -pointColor"><span class="iconMisson"></span><%- missionTitle %></span>\n            </div>\n            <% } %>\n            <div class="postBody <% if (media) { %>-flexible<% } %>">\n                <div class="dPostTextView">\n                    <div class="postText _postText" tabindex="-1">\n                        <p class="txtBody _textBody"><% if (prefixAttachmentText) { %><span class="attachmentTypeText">[<%-prefixAttachmentText%>]</span> <% } %><%= content %></p>\n                        <span class="seeMore _moreWrap" style="display: none;">\n                            <button type="button" class="">...<%= IM(\'ui.label.more.long\') %></button>\n                        </span>\n                    </div>\n                    <div class="_stickerRegion"></div>\n                </div>\n                <% if (media) { %>\n                <div class="uWidget">\n                    <ul class="uCollage -vertical">\n                        <li class="collageItem <%-media.isVideo && \'player\' %> <%-media.isGif && \'gif\' %> -size50">\n                            <button type="button" class="collageImage _btnMedia">\n                                <img src="<%-media.thumbnail %>" alt="">\n                                <% if (media.totalCountText) { %>\n                                <span class="number"><%-media.totalCountText%></span>\n                                <% } %>\n                            </button>\n                        </li>\n                    </ul>\n                </div>\n                <% } %>\n            </div>\n        </div>\n\n        <div class="postReaction">\n            <div class="reactionItemBox">\n                <div class="reactionItem _emotionCountSelectRegion"></div>\n                \x3c!-- 댓글수 --\x3e\n                <div class="reactionItem">\n                    <span class="reactionButton"><span class="iconComment"></span><span class="count"><%-commentCountText%></span></span>\n                </div>\n            </div>\n\n            <% if (readCount) { %>\n            <div class="readCountBox">\n                <span class="read"><span class="gSrOnly"><%-IM(\'post.label.read\')%></span><span class="count"><%-readCountText%></span></span>\n            </div>\n            <% } %>\n        </div>\n    </div>'},1854:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1855),o=n(1491),l=n(1856),r=n(488),d=n(499),c=n(498),h=n(26),u=n(512),p=s.View.extend({className:"sNoticeList",attributes:{"data-viewname":"DBandNoticeListView"},template:i.template(a),regions:{noticeListRegion:{el:"._noticeListContainer",replaceElement:!0}},initialize:function(e){this.bandData=e.bandData,this.listenTo(u,"window:scroll:bottom",(function(){this.collection.hasNextNotices()&&this.collection.isReadyToFetchNotices()&&this.collection.fetchNextNotices()}))},onBeforeAttach:function(){var e=t(i.template(c)({_loading_size:d.Size.MEDIUM,middleClass:r.ELEMENT.SCREEN_VERTICAL_MIDDLE})).appendTo(this.$el);this.collection.fetchNotices().then((function(){e.remove()}))},onAttach:function(){this.showChildView("noticeListRegion",new m({collection:this.collection,bandData:this.bandData}))}}),m=s.CollectionView.extend({attributes:{"data-viewname":"DBandNoticeListCollectionView"},childView:l,childViewOptions:function(){return{bandData:this.options.bandData}},childViewEvents:{"change:band_notice_item":"_onChangeBandNoticeItem"},_onChangeBandNoticeItem:function(e,t){var n=t.type,s=t.model,a=this.collection.models,o=i.filter(a,(function(e){return 1==e.get("isMajor")}));switch(n){case"unset_general_notice":this.collection.remove(s);break;case"set_major_notice":if(o.length>=2){var l=i.findLastIndex(a,(function(e){return 1==e.get("isMajor")}));this.collection.at(l).set("isMajor",!1)}this.collection.remove(s),s.set("isMajor",!0),this.collection.unshift(s);break;case"unset_major_notice":0==i.findIndex(a,(function(e){return e.get("postNo")==s.get("postNo")}))&&o.length>=2&&(this.collection.remove(s),this.collection.add(s,{at:1})),s.set("isMajor",!1)}h.getPostChannel().trigger(h.EVENT.POST_UPDATED,s.get("postNo")),h.getPostChannel().trigger(h.EVENT.UPDATE_BAND_NOTICE)}});return p.buildDBandNoticeListView=function(e){return new p({collection:new o([],{bandNo:e.getBandNo()}),bandData:e})},p}.call(t,n,t,e))||(e.exports=i)},1855:function(e,t){e.exports='<div class="uHeaderWrap -bLineNone gBoxShadow gMab12">\n    <header class="header">\n        <h1 class="title"><%- IM(\'ui.label.notice.title.plural\') %></h1>\n    </header>\n</div>\n\n<div class="_noticeListContainer"></div>\n'},1856:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1857),a=n(786),o=n(153),l=n(82),r=n(870),d=n(510),c=n(26),h=n(156),u=n(618),p=n(1637),m=n(1061),_=n(1041),b=n(656);return n(1095),i.View.extend({tagName:"article",className:"gBoxShadow notice",attributes:{"data-viewname":"DBandNoticeListItemView"},behaviors:[m,_.withUI("dimArea")],template:t.template(s),serializeData:function(){return this.model.toJSON()},templateContext:function(){var e=this.model.get("thumbnail");return{showMajor:!b.hasRestriction(this.model)&&this.model.get("isMajor"),thumbnailUrl:e?l.make(e,l.TYPE.s150):"",showBtnPostMore:this.showBtnPostMore,postUrl:o.GROUP_BAND_POST_DETAIL.makeUrl({band_no:this.bandNo,post_no:this.postNo})}},ui:{dimArea:"._dimArea",noticeBody:"._noticeBody",btnMore:"._btnMore",divMenu:"._divMenu",linkSetMajorNotice:"._linkSetMajorNotice",linkUnsetMajorNotice:"._linkUnsetMajorNotice",linkUnsetNotice:"._linkUnsetNotice",thumb:"._thumb",linkSetNotice:"._linkSetNotice"},regions:{profileImage:{el:"._profileImage",replaceElement:!0}},events:{"click @ui.btnMore":"_onClickBtnMore","click @ui.linkSetNotice":"_onClickLinkSetNotice","click @ui.linkSetMajorNotice":"_onClickLinkSetMajorNotice","click @ui.linkUnsetMajorNotice":"_onClickLinkUnsetMajorNotice","click @ui.linkUnsetNotice":"_onClickLinkUnsetNotice",click:function(){return this._openPostDetail(),!1}},modelEvents:{"change:isMajor":"render"},childViewEvents:{clickProfileImageView:function(){return this._openPostDetail(),!1}},onBeforeRender:function(){this.showBtnPostMore=this.bandData.isNoticeEditPermitted(),this.showBtnPostMore&&this.$el.addClass("-more")},onRender:function(){_.renderDimOfView(this),this.showChildView("profileImage",u.buildDProfileImageView({memberProfile:this.model.get("author").getMemberProfile(),bandCore:this.bandData.getBandCore(),role:this.model.get("author").get("role").name,size:34}));var e=this.model.get("thumbnail");e&&(this.model.get("isPlayButtonVisible")?this.ui.thumb.addClass("-iconPlay"):h.isGif(e)&&this.ui.thumb.addClass("-gif")),this.ui.noticeBody.dotdotdot({ellipsis:"...",wrap:"letter",height:92})},initialize:function(e){this.bandData=e.bandData,this.bandNo=this.bandData.getBandNo(),this.postNo=this.model.get("postNo"),this.listenTo(c.getDGlobalChannel(),c.EVENT.HTML_CLICK,(function(){this._closeAllLayers()}))},_closeAllLayers:function(){this.ui.divMenu.hide(),this.ui.btnMore.removeClass("menuOn")},_openPostDetail:function(e){this.$el.find(".gNewIcon").remove(),a.buildPostDetailAsLayer({bandNo:this.bandNo,postNo:this.postNo,postNoList:[],uncoverOnce:e})},openPostDetailLayerWithUncoverOnce:function(){this._openPostDetail(!0)},_onClickBtnMore:function(){return this.ui.divMenu.is(":hidden")&&c.getDGlobalChannel().trigger(c.EVENT.HTML_CLICK),this.ui.divMenu.toggle(),this.ui.btnMore.addClass("menuOn"),!1},_onClickLinkSetMajorNotice:function(){return this._closeAllLayers(),d.openLayer({headerTitle:IM("web.postdetail.menu.set_major_notice"),bodyDesc:IM("web.postdetail.menu.major_notice_addition_confirm_desc")}).once(d.EVENTS.CONFIRM,t.bind((function(){r.setMajorBandNotice(this.bandNo,this.postNo).then(t.bind((function(e){this._triggerAndAlertMessage("set_major_notice",e)}),this),t.bind(this._handleFailure,this))}),this)),!1},_onClickLinkUnsetMajorNotice:function(){return this._closeAllLayers(),r.unsetMajorBandNotice(this.bandNo,this.postNo).then(t.bind((function(e){this._triggerAndAlertMessage("unset_major_notice",e)}),this),t.bind(this._handleFailure,this)),!1},_onClickLinkUnsetNotice:function(){return this._closeAllLayers(),r.unsetBandNotice(this.bandNo,this.postNo).then(t.bind((function(e){this._triggerAndAlertMessage("unset_general_notice",e)}),this),t.bind(this._handleFailure,this)),!1},_onClickLinkSetNotice:function(){this._closeAllLayers();var e=this.model.toJSON();e=$.extend(e,{isNotice:!0,isMajorNotice:this.model.get("isMajor")});var n=p.openAsLayer({post:e,hasLinkedBand:this.bandData.canShowPostNoticeToConnectedBand(),bandNo:this.bandNo});return this.listenTo(n,"modal:confirm",(function(e){r.setBandNoticeState(e.bandNo,e.postNo,e.noticeState,e.isLinkedBandNotice,e.unsetAt,e.timezoneId).then(t.bind((function(){var t="set_notice";"off"===e.noticeState?t="unset_general_notice":"major_notice"===e.noticeState?t="set_major_notice":"notice"===e.noticeState&&(t="unset_major_notice"),this._fetchItemNoticeEnd(t,e.alertMessage)}),this))})),!1},_fetchItemNoticeEnd:function(e,n){this.model.fetchNoticeItem().then(t.bind((function(){this._triggerAndAlertMessage(e,n)}),this))},_triggerAndAlertMessage:function(e,t){this.trigger("change:band_notice_item",this,{type:e,model:this.model}),alert(t)},_handleFailure:function(e){var t=e?e.result_data:"",n=t?t.message:"";n&&alert(n)}})}.call(t,n,t,e))||(e.exports=i)},1857:function(e,t){e.exports='<div class="_dimArea"></div>\n<div class="contentWrap">\n    <% if (!isRead) { %><span class="gNewIcon -w5"><%- IM(\'web.more.menu.notice.new\') %></span><% } %>\n\n    <% if (thumbnailUrl) { %>\n    <div class="thumb _thumb">\n        <img src="<%- thumbnailUrl %>" alt="<%- title %>">\n    </div>\n    <% } %>\n\n    <p class="text"><% if (showMajor) { %><strong class="sf_color">[<%- IM(\'band.noticelist.major.label\') %>]</strong><% } %> <%- title %></p>\n\n    <div class="info">\n        <span class="_profileImage"></span>\n        <div class="infoTextWrap">\n            <span class="writer"><%- author.name %></span>\n            <% if (readCount >= 1 ) { %>\n            <span class="read"><%=IM("chat.message.read_count", {count : readCount }) %></span>\n            <% } %>\n        </div>\n\n    </div>\n</div>\n\n<a href="<%- postUrl %>" role="button" class="btnDetailView"><span class="gSrOnly"><%- IM(\'web.bandboard.btn.detail\') %></span></a>\n\n<% if (showBtnPostMore) { %>\n<div class="option">\n    <button type="button" class="btnMore _btnMore"><span class="gSrOnly"><%- IM(\'band.noticelist.notice.options\') %></span></button>\n    <div class="lyMenu _divMenu" style="display:none;min-width:145px">\n        <ul>\n            <li><a href="#" class="_linkSetNotice"><%- IM("page.notice.setting.title") %></a></li>\n            <% if (!isMajor) { %><li><a href="#" class="_linkSetMajorNotice"><%- IM(\'web.postdetail.menu.set_as_major_notice\') %></a></li><% } %>\n            <% if (isMajor) { %><li><a href="#" class="_linkUnsetMajorNotice"><%- IM(\'web.postdetail.menu.unset_major_notice\') %></a></li><% } %>\n\n            <li><a href="#" class="_linkUnsetNotice"><%- IM(\'web.postdetail.menu.unset_notice\') %></a></li>\n        </ul>\n    </div>\n</div>\n<% } %>'},1858:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1859),a=n(1860),o=n(1047),l=n(16),r=n(1239),d=i.View.extend({attributes:{"data-viewname":"DBandBoardPeriodSearchLayoutView"},template:t.template(s),ui:{postListRegion:"._postListRegion",formPeriodSearch:"._formPeriodSearch",selectFromYear:"._selectFromYear",selectFromMonth:"._selectFromMonth",selectToYear:"._selectToYear",selectToMonth:"._selectToMonth"},events:{"submit @ui.formPeriodSearch":"_searchPostList","change @ui.selectFromYear,@ui.selectFromMonth":function(){this.fromDate.set({year:this.ui.selectFromYear.val(),month:parseInt(this.ui.selectFromMonth.val())-1}),this._validateChangedFromDate()},"change @ui.selectToYear,@ui.selectToMonth":function(){this.toDate.set({year:this.ui.selectToYear.val(),month:parseInt(this.ui.selectToMonth.val())-1}),this._validateChangedToDate()}},regions:{postListRegion:"@ui.postListRegion",postViewType:{el:"._postViewType",replaceElement:!0}},loadingTemplate:t.template('<p class="uLoading"><img src="<%-resBaseUrl%>/images/common/loading.gif" width="32" height="32" alt="loading..."></p>'),noResultTemplate:t.template('<div class="cContentsCard gBoxShadow _noResults"><div class="uEmpty" style="height:500px"><p><span class="uEmptyIcon -noData"></span>  <strong class="title"><%= IM("ui.message.no_search_result") %></strong></p></div></div>'),initialize:function(e){this.bandData=e.bandData,this.collection=new a([],{bandNo:this.bandData.getBandNo()}),this.toDate=l().endOf("month"),this.fromDate=l(this.toDate).subtract(1,"month").startOf("month"),this.limitToYear=l().year(),this.limitFromYear=2013},templateContext:function(){return{beginYear:this.limitToYear,endYear:this.limitFromYear,stepYear:-1}},onRender:function(){this.ui.selectFromYear.val(this.fromDate.year()),this.ui.selectFromMonth.val(this.fromDate.month()+1),this.ui.selectToYear.val(this.toDate.year()),this.ui.selectToMonth.val(this.toDate.month()+1),this.showChildView("postViewType",r.buildDPostViewTypeSelectView(this.bandData))},onAttach:function(){this._searchPostList()},_searchPostList:function(){var e=this.getRegion("postListRegion"),n=$(this.loadingTemplate()).appendTo(this.$el);return e.empty(),this.$("._noResults").remove(),this.collection.fetchPeriodSearchPost(this.fromDate.valueOf(),this.toDate.valueOf()).then(t.bind((function(){this.collection.length>0?e.show(o.buildPeriodSearchPostListView(this.bandData,this.collection)):this.ui.postListRegion.before(this.noResultTemplate())}),this)).always((function(){n.remove()})),!1},_validateChangedFromDate:function(){l(this.fromDate).endOf("month").isBefore(this.toDate)||(this.toDate=l(this.fromDate).add(1,"month").endOf("month"),this.toDate.year()>this.limitToYear&&this.toDate.subtract(1,"month"),this.ui.selectToYear.val(this.toDate.year()),this.ui.selectToMonth.val(this.toDate.month()+1))},_validateChangedToDate:function(){l(this.fromDate).endOf("month").isBefore(this.toDate)||(this.fromDate=l(this.toDate).subtract(1,"month").startOf("month"),this.fromDate.year()<this.limitFromYear&&this.fromDate.add(1,"month"),this.ui.selectFromYear.val(this.fromDate.year()),this.ui.selectFromMonth.val(this.fromDate.month()+1))}});return d.buildDBandBoardPeriodSearchLayoutView=function(e,t){return new d({bandData:e,bandType:t})},d}.call(t,n,t,e))||(e.exports=i)},1859:function(e,t){e.exports='<div class="boardSearchBox gBoxShadow">\n    \x3c!-- 예전 글 보기 해더 --\x3e\n    <div class="uHeaderWrap">\n        <header class="header -h50">\n            <h1 class="title -fs16"><%= IM(\'web.post.period_search\') %></h1>\n            <div class="_postViewType"></div>\n        </header>\n    </div>\n\n    <div class="searchPeriod">\n        <form class="_formPeriodSearch">\n            <div class="uSelect">\n                <select title="<%- IM(\'web.post.period_search.start_year\') %>" style="width:101px" class="_selectFromYear">\n                    <% _.each(_.range(beginYear, endYear - 1, stepYear), function(year) { %>\n                    <option><%= year %></option>\n                    <% }); %>\n                </select>\n            </div>\n\n            <div class="uSelect">\n                <select title="<%- IM(\'web.post.period_search.start_month\') %>" style="width:70px" class="_selectFromMonth">\n                    <% _.each(_.range(1, 13), function(month) { %>\n                    <option><%= month %></option>\n                    <% }); %>\n                </select>\n            </div>\n\n            <span class="dash"></span>\n\n            <div class="uSelect">\n                <select title="<%- IM(\'web.post.period_search.end_year\') %>" style="width:101px" class="_selectToYear">\n                    <% _.each(_.range(beginYear, endYear - 1, stepYear), function(year) { %>\n                    <option><%= year %></option>\n                    <% }); %>\n                </select>\n            </div>\n\n            <div class="uSelect">\n                <select title="<%- IM(\'web.post.period_search.end_month\') %>" style="width:70px" class="_selectToMonth">\n                    <% _.each(_.range(1, 13), function(month) { %>\n                    <option><%= month %></option>\n                    <% }); %>\n                </select>\n            </div>\n\n            <button type="submit" class="uButton -active"><%= IM(\'web.postsearch.search.label\') %></button>\n        </form>\n    </div>\n    \x3c!-- // 예전 글 보기 해더 --\x3e\n</div>\n\n<h2 class="gSrOnly"><%= IM(\'search.post_search_result\') %></h2>\n<section class="boardList">\n    <h2 class="gSrOnly"><%= IM(\'web.board.search.result.title\') %></h2>\n\n    <div class="postWrap _postListRegion"></div>\n</section>'},1860:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(6),a=n(520),o=n(176),l=n(517);return s.Collection.extend({model:l,initialize:function(e,t){this.bandNo=t.bandNo},fetchPeriodSearchPost:function(e,n){var s={band_no:this.bandNo,from:e,to:n,limit:10};return i.when(a.getPostWithCreatedAt(s),o.fetchBandJoin()).then(t.bind((function(e){this.nextParams=e.paging.next_params,this.reset(e.items,{parse:!0,silent:!0})}),this))},fetchNextPostList:function(){return i.when(a.getPostWithCreatedAt(this.nextParams),o.fetchBandJoin()).then(t.bind((function(e){this.nextParams=e.paging.next_params,this.set(e.items,{add:!0,merge:!1,remove:!1,parse:!0})}),this))},hasMore:function(){return!!this.nextParams}})}.call(t,n,t,e))||(e.exports=i)},1861:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(1862),o=n(1226),l=n(1863),r=n(1234),d=n(157),c=s.View.extend({tagName:"section",className:"boardList",attributes:{"data-viewname":"DBandBoardSearchLayoutView"},template:t.template(a),ui:{postListRegion:"._postListRegion",searchOptionWrap:"._searchOptionWrap",commentOptionSelect:"._commentOptionSelect",myBandsPostsLink:"._myBandsPostsLink"},events:{"change @ui.commentOptionSelect":"_renderSearchPostList","click @ui.myBandsPostsLink":function(){return d.GLOBAL_MY_BAND_POST_SEARCH.goDForced({query:encodeURIComponent(this.query)}),!1}},regions:{postSearchFormRegion:{el:"._postSearchFormRegion",replaceElement:!0},postListRegion:"@ui.postListRegion"},loadingTemplate:t.template('<p class="uLoading"><img src="<%-resBaseUrl%>/images/common/loading.gif" width="32" height="32" alt="loading..."></p>'),noResultTemplate:t.template('<div class="cContentsCard gBoxShadow _noResults"><div class="uEmpty" style="height:547px"><p><span class="uEmptyIcon -noData"></span> <strong class="uEmptyTitle gColorGr1"><%- IM("web.postsearch.message.no_search_result", {query: query}) %></strong></p></div></div>'),templateContext:function(){return{viewId:this.cid,myBandsPostsUrl:d.GLOBAL_MY_BAND_POST_SEARCH.makeUrl({query:encodeURIComponent(this.query)}),canMyBandSearch:this.bandData.getBandCore().showMyBandSearchAtBoardSearch()}},initialize:function(e){this.bandData=e.bandData,this.query=e.query,this.collection=new o([],{bandNo:this.bandData.getBandNo()})},onAttach:function(){this.showChildView("postSearchFormRegion",r.createDBandPostSearchFormView(this.bandData,this.query)),this._renderSearchPostList()},_renderSearchPostList:function(){var e=this.getRegion("postListRegion"),n=i(this.loadingTemplate()).appendTo(this.$el);e.empty(),this.$("._noResults").remove(),this.collection.fetchSearchPost(this.query,this.ui.commentOptionSelect.val()).then(t.bind((function(){this.collection.length>0?(this.ui.searchOptionWrap.show(),e.show(new l({collection:this.collection,bandData:this.bandData}))):(this.ui.searchOptionWrap.hide(),this.ui.postListRegion.before(this.noResultTemplate({query:t.unescape(this.query)})))}),this)).always((function(){n.remove()}))}});return c.buildDBandBoardSearchLayoutView=function(e,t){return new c({bandData:e,query:t})},c}.call(t,n,t,e))||(e.exports=i)},1862:function(e,t){e.exports='\x3c!-- 게시글 검색 Form  --\x3e\n<div class="_postSearchFormRegion"></div>\n\n<h2 class="gSrOnly"><%-IM(\'web.board.search.result.title\')%></h2>\n\n<div class="sortBoardSearch">\n    <label for="bandSort_<%= viewId %>" class="gSrOnly"><%- IM(\'web.bandlist.order_type.title\') %></label>\n    <div class="uSelect">\n        <select id="bandSort_<%= viewId %>" style=min-width:120px;" class="_commentOptionSelect" title="<%- IM(\'web.board.search.option.title\') %>">\n            <option value="true"><%- IM(\'web.board.search.option.include_comment\') %></option>\n            <option value="false"><%- IM(\'web.board.search.option.exclude_comment\') %></option>\n        </select>\n    </div>\n\n    <% if (canMyBandSearch) { %>\n    <a href="<%- myBandsPostsUrl %>" class="gMyBandSearchLink _myBandsPostsLink"><%= IM(\'my_bands_posts.link\') %></a>\n    <% } %>\n</div>\n\n<div class="postWrap _postListRegion"></div>'},1863:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1864),a=n(26),o=n(517),l=n(1276),r='<p class="uLoading" data-uiselector="postLoading"><img src="'+window.resBaseUrl+'/images/common/loading.gif" width="32" height="32" alt="Loading..."></p>';return i.CollectionView.extend({attributes:{"data-viewname":"DSearchedPostListView"},behaviors:function(){var e=[];return e.push({behaviorClass:l,fetchMoreFunc:t.bind((function(){!this.onLoading&&this.collection.hasMore()&&(this.onLoading=!0,this.$el.append(r),this.collection.fetchNextPostList().always(t.bind((function(){this.onLoading=!1,this.$el.find("[data-uiselector=postLoading]").remove()}),this)))}),this)}),e},childView:s,childViewOptions:function(){return{bandData:this._bandData}},initialize:function(e){this._bandData=e.bandData,this.listenTo(a.getPostChannel(),a.EVENT.POST_DELETED,(function(e){this.collection.remove(o.makeModelId(e.bandNo,e.postNo))}))}})}.call(t,n,t,e))||(e.exports=i)},1864:function(e,t,n){var i;void 0===(i=function(e){var t,i,s=n(0),a=n(4),o=n(1865),l=n(1866),r=n(1868),d=n(159),c=n(1580),h=n(9),u=n(1247),p=n(1061),m=n(1579),_=n(619),b=n(152),g=n(786),f=n(1041),v=n(656);return a.View.extend({attributes:{"data-viewname":"DSearchedPostLayoutView"},template:s.template(o),templateContext:function(){return{msg_canNotify:this._bandData.isNoticeEditPermitted(),msg_canReport:!this.model.get("isAuthor")&&h.spec.canReport(),msg_canDelete:this.model.get("isAuthor")||this._bandData.isContentsDeletionPermitted(),msg_useNaverCafe:h.spec.useNaverCafe(),msg_isCommentingPermitted:this._bandData.canWriteComment()}},behaviors:[d,p,f.withUI("dimArea","clickDim")],ui:{dimArea:"._dimArea",postRegion:"._postRegion",moreOptionListRegion:"._moreOptionListRegion",commentRegion:"._commentRegion",postMainWrap:"._postMainWrap",postCountViewRegion:"._postCountViewRegion"},regions:{postRegion:{el:"@ui.postRegion",replaceElement:!0},moreOptionListRegion:{el:"@ui.moreOptionListRegion",replaceElement:!0},commentRegion:{el:"@ui.commentRegion",replaceElement:!0},postCountViewRegion:{el:"@ui.postCountViewRegion",replaceElement:!0}},onMessages:(i={},i[d.MSG.SEARCHED_COMMENT_VIEW_EXPAND]="_toggleEmotionComment",i[d.MSG.COMMENTLIST_CHANGE_COLLECTION]=function(){_.fetchPostTotalCommentCount(this._bandNo,this._postNo,this).then(s.bind((function(e){this.getRegion("postCountViewRegion").currentView.changeCommentCount(e)}),this))},i),childViewEvents:(t={"DPostCountView:toggleEmotionComment":"_toggleEmotionComment","DPostCountView:moveToCommentInputBox":"_openCommentAndFocusInput","DPostCountView:showShareMenuListLayer":"_openSharePost","DPostCountView:changeCountAttributes":function(e){this._postListItemModel.set(e)}},t[l.EVENT.CLICK_POST]="_onClickPostItem",t),initialize:function(e){this._bandNo=this.model.getBandNo(),this._postNo=this.model.getPostNo(),this._bandData=e.bandData,this._postListItemModel=this.model.createPostModel(),this.listenTo(this,"clickDim",this._onClickPostItem)},serializeData:function(){return this.model.toJSON()},onRender:function(){this._updateDimArea(),this._renderMoreOptionList(),this.getRegion("postRegion").show(new l({model:this.model})),this._renderPostCountView(),this.model.get("searchedComments").length>0&&this.getRegion("commentRegion").show(new r({model:this.model}))},_renderPostCountView:function(){var e=m.buildSimpleCountView(this.model,{isCommentingPermitted:this._canWriteComment()});this.showChildView("postCountViewRegion",e)},_canWriteComment:function(){return!this._postListItemModel.get("shouldDisableComment")&&this._bandData.canWriteComment()},_updateDimArea:function(){f.renderDimOfView(this,s.bind((function(e){this.getUI("postMainWrap").toggleClass("-blockUserPost",e)}),this))},_onClickPostItem:function(){if(v.isStateDimCovered(this.model))this.trigger(p.POST_MORE_ACTIONS.UNCOVER_DIMMED_POST);else{var e={bandNo:this.model.getBandNo(),postNo:this.model.getPostNo(),postNoList:[]};g.buildPostDetailAsLayer(e)}},openPostDetailLayerWithUncoverOnce:function(){var e={bandNo:this.model.getBandNo(),postNo:this.model.getPostNo(),postNoList:[],approachedPostListType:b.POST_LIST_TYPE.BAND_SEARCH_POST_LIST,uncoverOnce:!0};g.buildPostDetailAsLayer(e)},_renderMoreOptionList:function(){var e=u.buildOptionList(this._bandNo,this._postNo,null);this.listenTo(e,"postMoreOptionList:clickMenu",(function(e){this.triggerMethod(e)})),this.model.get("isRestricted")||v.hideAllMoreOption(this.model)?this.ui.moreOptionListRegion.hide():this.getRegion("moreOptionListRegion").show(e)},_toggleEmotionComment:function(e){if(this._toggleProgress)return!1;if(this._isCommentListMode())return this._isCommentListOpened=!1,this.getRegion("postCountViewRegion").currentView.closeEmotionRegion(),this._postProcessAfterRendered(),this.model.get("searchedComments").length>0?this.getRegion("commentRegion").show(new r({model:this.model})):this.getRegion("commentRegion").empty(),!1;this._toggleProgress=!0;var t=this._canWriteComment();return this._postListItemModel.fetchPostListItem().then(s.bind((function(){if(this._postListItemModel.get("isRestricted"))return!1;this._isCommentListOpened=!0,this._canWriteComment()!==t&&this._renderPostCountView(),this.getRegion("postCountViewRegion").currentView.showEmotionRegion(this._postListItemModel),this._renderCommentRegion(this._bandData,e),this._postProcessAfterRendered(),this._toggleProgress=!1}),this)),!1},_renderCommentRegion:function(e,t){if(!this._postListItemModel.get("isRestricted")){var n=t&&t.originCommentId&&t.commentId?t.commentId:null,i=n&&t.commentId?t.originCommentId:t.commentId;this._commentMainView=c.buildDPostCommentMainView({bandCore:this._postListItemModel.getBandCore(),postNo:this._postListItemModel.getPostNo(),totalCount:this._postListItemModel.get("commentCount"),simple:!1,isCommentingPermitted:this._canWriteComment(),currentProfileMemberType:e.getCurrentSelectedMemberProfileMemberTypeAtComment(),memberProfileArray:e.getSelectableMemberProfilesAtComment(),initCommentReplyId:n,initCommentId:i}),this.showChildView("commentRegion",this._commentMainView)}},_postProcessAfterRendered:function(){this._isCommentListMode()?this._addPostMainWrapDataType("comment"):this._removePostMainWrapDataType("comment")},_openCommentAndFocusInput:function(){return!!this._commentMainView&&(this._commentMainView.scrollToMessageInput(),!1)},_addPostMainWrapDataType:function(e){var t=this._extractMainWrapDataType(e);t.push(e),this.ui.postMainWrap.attr("data-type",t.join(" "))},_removePostMainWrapDataType:function(e){var t=this._extractMainWrapDataType(e).join(" ");s.isEmpty(t)?this.ui.postMainWrap.removeAttr("data-type"):this.ui.postMainWrap.attr("data-type",t)},_extractMainWrapDataType:function(e){var t=(this.ui.postMainWrap.attr("data-type")||"").split(/\s+/);return s.without(t,"",e)},_isCommentListMode:function(){return!0===this._isCommentListOpened}})}.call(t,n,t,e))||(e.exports=i)},1865:function(e,t){e.exports='<% //TODO 차단된 사용자의 글 표시하기 위해 \'-blockUserPost\' 클래스 추가  %>\n<div class="_postMainWrap cContentsCard gBoxShadow searchResultList">\n    <% //TODO 차단된 사용자의 글을 딤드하는 태그 %>\n    <div class="_dimArea"></div>\n\n    <% // 글 본문 (첨부 정보 포함) %>\n    <div class="_postRegion"></div>\n\n    <% // 더보기 옵션 메뉴 버튼과 레이어 %>\n    <div class="_moreOptionListRegion"></div>\n\n    <% // 카운트 영역, 표정짓기/댓글쓰기/공유하기 버튼 영역, 표정 목록 영역 %>\n    <div class="_postCountViewRegion"></div>\n\n    <div class="_commentRegion" ></div>\n</div>\n'},1866:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1867),a=n(158),o=n(82),l=n(1110),r=n(156),d=i.View.extend({attributes:{"data-viewname":"DSearchedPostItemView",tabindex:-1},template:t.template(s),templateContext:function(){return{msg_convertBody:function(e){if(-1===e.indexOf("</mark>")){var t=a.splitForTruncate(e,4,45);e=t[1]?t[0]+"...":t[0]}return a.convertSearchedText(e)},msg_thumbnailUrl:function(e){return o.make(e,o.TYPE.s150)}}},ui:{postAuthorRegion:"._postAuthorRegion",postText:"._postText",thumb:"._thumb"},events:{"click @ui.postText":"_onClickPostItem"},regions:{postAuthorRegion:{el:"@ui.postAuthorRegion",replaceElement:!0}},childViewEvents:{"author:showPostDetailLayer":"_onClickPostItem"},serializeData:function(){return this.model.toJSON()},onRender:function(){var e=this.model.get("image");this.getRegion("postAuthorRegion").show(l.build(this.model,{bPostDetail:!1})),e&&(this.model.get("isPlayButtonVisible")?this.ui.thumb.addClass("-player"):r.isGif(e.url)&&this.ui.thumb.addClass("-gif"))},_onClickPostItem:function(){this.trigger(d.EVENT.CLICK_POST)}});return d.EVENT={CLICK_POST:"CLICK_POST"},d}.call(t,n,t,e))||(e.exports=i)},1867:function(e,t){e.exports='<% // 작성자와 글 정보 영역 %>\n<div class="_postAuthorRegion"></div>\n\n<div class="postMain">\n    <div class="postBody">\n        <div class="postText _postText" tabindex="-1">\n            <% if (image) { %>\n            <div class="thum _thumb">\n                <img src="<%-msg_thumbnailUrl(image.url)%>" width="100" height="100" alt="">\n                <% if (photoCount > 1) { %>\n                <% // isPhotoCountless 는 deprecated 됨. 향후는 photoCount > 10 으로 바꿔야 하나, 현재 검색 결과가 photoCount는 10까지만 나와서 우선은 구버전 유지. (SearchedPostModel) %>\n                <% var cnt = isPhotoCountless ? \'10+\' : photoCount; %>\n                <span><span class="gSrOnly"><%= IM(\'web.postlist.attachphotoalbum.title\', {count: cnt}) %></span> <em><%= cnt %></em></span>\n                <% } %>\n            </div>\n            <% } %>\n            <p class="txtBody"><%= msg_convertBody(content) %></p>\n        </div>\n    </div>\n</div>'},1868:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1869),a=n(158),o=n(159),l=n(9);return i.View.extend({className:"sCommentList",attributes:{"data-viewname":"DSearchedCommentListView"},template:t.template(s),templateContext:function(){return{msg_convertTxt:function(e){return a.convertSearchedText(e)},msg_commentPubDate:function(e){return l.format.relative(e,"month_day")}}},behaviors:{CourierBehavior:""},ui:{cComment:"._cComment"},events:{click:function(e){var t=$(e.target).closest(this.getUI("cComment").selector),n=t.data("comment-id"),i=t.data("origin-comment-id");this.spawn(o.MSG.SEARCHED_COMMENT_VIEW_EXPAND,{commentId:n,originCommentId:i}),e.preventDefault()}},serializeData:function(){return this.model.toJSON()}})}.call(t,n,t,e))||(e.exports=i)},1869:function(e,t){e.exports='<% _.each(searchedComments, function (comment) { %>\n<a href="#" class="cComment _cComment" data-comment-id="<%-comment.commentId%>" data-origin-comment-id="<%-comment.originCommentId%>">\n    <div class="itemWrap" style="<%= comment.author.isMuted ? \'position:relative;\' : \'\' %>">\n        <% if (comment.author.isMuted) { %>\n        <div class="gDimmed"></div>\n        <% } %>\n        <div class="writeInfo">\n            <button class="nameWrap" type="button">\n                <strong class="name"><%-comment.author.name%></strong>\n                <p class="nickname"><%-comment.author.desc%></p>\n            </button>\n        </div>\n        <div class="commentBody">\n            <p class="txt"><%=msg_convertTxt(comment.body)%></p>\n            <div class="func">\n                <time class="time"><%-msg_commentPubDate(comment.createdAt)%></time>\n            </div>\n        </div>\n    </div>\n</a>\n<% }); %>\n\n<% if (isSearchedCommentsCountless) { %>\n<div class="cComment more">\n    <div class="itemWrap">\n        <div class="commentBody">\n            <p class="txt"><a href="#"><%-IM(\'web.board.search.message.more_comments\')%></a></p>\n        </div>\n    </div>\n</div>\n<% } %>'},1870:function(e,t,n){var i=n(0),s=n(4),a=n(154),o=n(1871),l=n(1047),r=n(1234),d=n(1239),c=n(1548),h=n(1493),u=n(1001),p=n(1599),m=n(1053),_=s.View.extend({options:{bandData:void 0,buildEmptyView:i.noop,postListViewBuilder:i.noop,title:"",selectedItem:{}},tagName:"section",className:"boardList",attributes:{"data-viewname":"DBandBoardCategoryPostLayoutView"},template:i.template(o),templateContext:function(){return{title:this.options.title}},ui:{postListRegion:"._postListRegion",bandTagRegion:"._bandTagRegion",emptyViewContainer:"._emptyViewContainer",btnOpenWriteLayer:"._btnOpenWriteLayer"},regions:{postSearchFormRegion:{el:"._postSearchFormRegion",replaceElement:!0},postListRegion:"@ui.postListRegion",emptyViewContainer:"@ui.emptyViewContainer",postViewType:{el:"._postViewType",replaceElement:!0},tagMenu:{el:"._tagMenu",replaceElement:!0}},onRender:function(){this.showChildView("postSearchFormRegion",r.createDBandPostSearchFormView(this.options.bandData)),this.showChildView("tagMenu",c.buildDBandBoardTagMenuView(this.options.bandData,this.options.selectedItem)),this._renderPostViewType(),this._fetchAndRenderPage()},_renderPostViewType:function(){if(this.options.bandData.canUsePostListType()){var e=d.buildDPostViewTypeSelectView(this.options.bandData);this.showChildView("postViewType",e),this.listenTo(e,d.EVENT.CHANGE,this._fetchAndRenderPage)}},_fetchAndRenderPage:function(){return a.wrapActivePromise(this.options.postListViewBuilder(),this).then(i.bind((function(e){if(!this._isValidPostListView(e))throw new Error("DPostListView required");e.collection.isEmpty()?(this.getUI("emptyViewContainer").css("display",""),this.showChildView("emptyViewContainer",this.options.buildEmptyView())):(this.getUI("emptyViewContainer").css("display","none"),this.showChildView("postListRegion",e))}),this))},_isValidPostListView:function(e){return e instanceof l&&e.collection instanceof Backbone.Collection}});_.buildDBandBoardHashtagPostsView=function(e,t){return new _({bandData:e,postListViewBuilder:function(){var n=new h([],{bandNo:e.getBandNo(),hashtag:"#"+t});return n.fetchPostList().then(i.bind((function(){return l.buildSearchPostList(e,n)}),this))},buildEmptyView:function(){return p.buildGroupBandHashtagPostView()},title:m.encodeQuery("#"+t),selectedItem:{tag:"#"+t}})},_.buildDBandBoardPopularPostsView=function(e){return new _({bandData:e,postListViewBuilder:function(){var t={listOrderType:u.LIST_ORDER_TYPE.POPULAR,bandNo:e.getBandNo()},n=new u([],t);return n.fetchNextPostList().then(i.bind((function(){return l.buildDBandPostListView(e,n)}),this))},buildEmptyView:function(){return p.buildGroupBandPopularPostView(e)},title:IM("band.popular_post.title"),selectedItem:{isPopularPost:!0}})},e.exports=_},1871:function(e,t){e.exports='\x3c!-- 게시글 검색 Form  --\x3e\n<div class="_postSearchFormRegion"></div>\n\n\x3c!-- 대표태그 영역 --\x3e\n<div class="postViewTypeTagBox">\n    <div class="header">\n        <h3 class="title sf_color"><%= title %></h3>\n\n        \x3c!-- 게시글 뷰 타입 버튼--\x3e\n        <div class="_postViewType"></div>\n    </div>\n\n    <div class="_tagMenu"></div>\n</div>\n\n<div class="cContentsCard gBoxShadow _emptyViewContainer" style="display: none;"></div>\n\n\x3c!-- 게시글 목록 영역 --\x3e\n<div class="postWrap _postListRegion"></div>'},1872:function(e,t){e.exports='<% if (clickable) { %>\n<a href="#" class="_link">\n    <% } %>\n    <% if (icon) { %><span class="uEmptyIcon <%-icon%>"></span><% } %>\n    <% if (titleText) { %>\n    <strong class="uEmptyTitle"><%- titleText /* 태그 사용 불가 */ %></strong>\n    <% } %>\n    <p class="uEmptyDesc"><%= descHtml /* 태그 사용 가능 */ %></p>\n    <% if (clickable) { %>\n</a>\n<% } %>\n'},1873:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(0),s=n(2),a=n(4),o=n(1874),l=n(1047),r=n(1875),d=n(1877),c=n(512),h=n(53),u=n(159),p=n(55),m=n(26),_=n(153),b=n(162),g=n(168),f=n(488),v=n(583),A=n(1403),M="all",C="onlyConfirmPost",I="post",E="photo",y="comment",T="confirm-post",N="GROUP_BAND_READONLY",D="GROUP_BAND_DELETABLE",S="PAGE_BAND_MANAGER_READONLY",w="PAGE_BAND_MANAGER_DELETABLE",B="PAGE_BAND_MEMBER_READONLY",L="PAGE_BAND_MEMBER_DELETABLE",P=a.View.extend({tagName:"p",className:"uEmpty gBoxShadow",attributes:{style:"height:450px"},template:i.template('<span class="gFs14 gColorGr3"><%- message %></span>'),templateContext:function(){return{message:this.options.message}}}),O=a.View.extend({behaviors:[{behaviorClass:u}],attributes:{"data-viewname":"DBandMemberPostLayoutView"},template:i.template(o),ui:{accountSectionHeader:"._accountSectionHeader",contentRegion:"._contentRegion",btnManage:"._btnManage",btnDelete:"._btnDelete",selectResultArea:"._selectResultArea",btnClose:"._btnClose",selectedCount:"._selectedCount",manageArea:"._manageArea",loadingBarRegion:"._loadingBarRegion",postSortWrap:"._postSortWrap",postSortSelect:"#postSortSelect"},regions:{contentRegion:"@ui.contentRegion",loadingBarRegion:{el:"@ui.loadingBarRegion",replaceElement:!0}},onMessages:(t={},t[u.MSG.MEMBER_CONTENTS_MULTI_DELETE_CHECK]=function(e){this._selectedItemCollection=this._contentView.collection.where({isItemSelected:!0});var t=this._selectedItemCollection.length;t>0?this.getUI("btnDelete").prop("disabled",!1):this.getUI("btnDelete").prop("disabled",!0),t>50&&(alert(IM("member_contents.multi_delete.max_count",{maxCount:50})),e.checkedElement.prop("checked",!1),e.checkedModel.set("isItemSelected",!1)),e.isTargetPhoto?this._showManageMode():this._refreshSelectedCount()},t[u.MSG.MEMBER_CONTENTS_MULTI_DELETE_COMPLETE]=function(){this._contentView.collection.remove(this._selectedItemCollection),this._selectedItemCollection=[],this._showViewMode()},t[u.MSG.MEMBER_CONTENT_FETCH_START]=function(){this._toggleLoadingBar(!0)},t[u.MSG.MEMBER_CONTENT_FETCH_END]=function(){this._toggleLoadingBar(!1)},t),events:{"click @ui.btnManage":"_showManageMode","click @ui.btnDelete":"_deleteMemberContents","click @ui.btnClose":"_resetViewMode","change @ui.postSortSelect":function(e){e.target.value==M&&_.GROUP_BAND_MEMBER_CONTENT.goDForced({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:I}),e.target.value==C&&_.GROUP_BAND_MEMBER_CONTENT.goDForced({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:T})}},initialize:function(e){this._bandData=e.bandData,this._memberKey=e.memberKey,this._contentType=e.contentType,this._authorName=e.authorName,this._contentView=e.contentView,this._viewType=e.viewType,this._bandCore=this._bandData.getBandCore(),this._routeInfo=h.getCurrentRouteInfo().routeInfo,this._selectedItemCollection=[]},templateContext:function(){return{headerClass:this._getHeaderClass(),title:this._getTitle(),tabs:this._getTabs(),deletable:this._isDeletable()}},onRender:function(){this.$el.toggleClass("sAccountWriteManage",this._isDeletable())},onAttach:function(){this._renderContentRegion(),this._bindHeaderFixOnScroll(),this._bindPaging(),this._contentType!=I&&this._contentType!=T||this._renderPostSortSelect()},_renderPostSortSelect:function(){if(this._contentType==T)return this.ui.postSortSelect.val(C),void this.ui.postSortWrap.css("display","");this._contentType==I&&(this._viewType==N||this._viewType==D)&&A.getMissionConfirmPostsWithAuthor({band_no:this._bandCore.bandNo,author_key:this._memberKey}).then(i.bind((function(e){var t=e.result_data.items;this._haveConfirmPost=t&&t.length>0,this._haveConfirmPost&&(this.ui.postSortSelect.val(M),this.ui.postSortWrap.css("display",""))}),this))},_getHeaderClass:function(){switch(this._viewType){case N:return"gMab12 gBoxShadow";case D:return"gBoxShadowLight -fixed";case B:return"gMab12 gBoxShadow -noTab";case L:return"gBoxShadowLight -noTab";case S:return"gMab12 gBoxShadow";case w:return"gBoxShadowLight"}},_isDeletable:function(){switch(this._viewType){case D:case L:case w:return!0;default:return!1}},_renderContentRegion:function(){this.showChildView("contentRegion",this._contentView)},_deleteMemberContents:function(){this._contentType===I||this._contentType===T?this._contentView.deletePosts(this._selectedItemCollection):this._contentType===E?this._contentView.deletePhotos(this._selectedItemCollection):this._contentType===y&&this._contentView.deleteComments(this._selectedItemCollection)},_showViewMode:function(){this.$el.toggleClass("-checkMode",!1),this.getUI("btnManage").show(),this.getUI("btnDelete").hide(),this.getUI("selectResultArea").hide()},_showManageMode:function(){this.$el.toggleClass("-checkMode",!0),this.getUI("btnManage").hide(),this.getUI("btnDelete").show(),this.getUI("btnDelete").prop("disabled",!(this._selectedItemCollection.length>0)),this.getUI("selectResultArea").show(),this._refreshSelectedCount(),this._adjustBottomSelectBarFixing()},_refreshSelectedCount:function(){this._selectedItemCollection=this._contentView.collection.where({isItemSelected:!0});var e=IM("member_contents.multi_delete.selected_count",{selectedCount:""+this._selectedItemCollection.length});this.getUI("selectedCount").html(e)},_adjustBottomSelectBarFixing:function(){var e=this.el.getBoundingClientRect().bottom;p.getHeight()<=e+40-23?this.getUI("selectResultArea").toggleClass(f.ELEMENT.FIXED,!0):this.getUI("selectResultArea").toggleClass(f.ELEMENT.FIXED,!1)},_resetViewMode:function(){m.getPostChannel().trigger(m.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL),this._selectedItemCollection=[],this._showViewMode()},_bindHeaderFixOnScroll:function(){switch(this._viewType){case L:case w:this._contentScrollParent=this.ui.contentRegion.scrollParent(),this._gnbHeaderHeight=s("#header").height(),this.listenTo(c,"window:scroll",this._adjustHeaderFix)}},_adjustHeaderFix:function(){var e=this._contentScrollParent.scrollTop()>this.$el.offset().top-this._gnbHeaderHeight;this.ui.accountSectionHeader.toggleClass(f.ELEMENT.FIXED,e)},_getTitle:function(){switch(this._viewType){case S:case w:return IM("page.user_write_content");default:return IM("web.board.member_posts.title",{name:'<span class="sf_color">'+i.escape(this._authorName)+"</span>"})}},_getTabs:function(){var e=[];switch(this._viewType){case S:case w:e=i.map([I,y],this._getPageBandManagerContentTab,this);break;case N:case D:e=i.map([I,E,y],this._getGroupBandMemberContentTab,this)}return i.each(e,(function(e){e.active=e.contentType==this._contentType,this._contentType==T&&e.contentType==I&&(e.active=!0)}),this)},_getPageBandManagerContentTab:function(e){switch(e){case I:return{contentType:I,url:b.PAGE_BAND_MANAGER_POST.makeUrl({band_no:this._bandCore.bandNo}),label:IM("web.board.member_posts.post_tab_name")};case y:return{contentType:y,url:b.PAGE_BAND_MANAGER_COMMENT.makeUrl({band_no:this._bandCore.bandNo}),label:IM("web.board.member_posts.comment_tab_name")}}},_getGroupBandMemberContentTab:function(e){switch(e){case I:return{contentType:I,url:_.GROUP_BAND_MEMBER_CONTENT.makeUrl({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:I}),label:IM("web.board.member_posts.post_tab_name")};case E:return{contentType:E,url:_.GROUP_BAND_MEMBER_CONTENT.makeUrl({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:E}),label:IM("web.board.member_posts.photo_tab_name")};case y:return{contentType:y,url:_.GROUP_BAND_MEMBER_CONTENT.makeUrl({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:y}),label:IM("web.board.member_posts.comment_tab_name")};case T:return{contentType:I,url:_.GROUP_BAND_MEMBER_CONTENT.makeUrl({band_no:this._bandCore.bandNo,member_key:this._memberKey,type:I}),label:IM("web.board.member_posts.post_tab_name")}}},_toggleLoadingBar:function(e){var t=this.getRegion("loadingBarRegion");e?t.show(v.buildListBottomMediumLoadingBar()):t.empty()},_bindPaging:function(){this._contentView instanceof P||this._contentType==I||this.listenTo(c,"window:scroll:bottom",(function(){i.result(this._contentView,"viewNextPage")}))}});function R(e){switch(e){case T:case I:return IM("web.board.member_posts.no_result");case E:return IM("web.board.member_photos.no_result");case y:return IM("web.board.member_comments.no_result");default:return""}}function x(e,t){return t.then((function(t){return t||new P({message:R(e)})}),(function(){return s.Deferred().resolve(new P({message:IM("web.setting.account.alert.temporary_error")}))}))}function k(e,t,n){var i=e.bandData,a=i.getBandCore().bandNo,o=decodeURIComponent(e.memberKey),c=e.type;return i.canFetchMemberProfile()?g.getMemberByMemberKey(a,o).then((function(e){var a=e.me||!1;return function(e,t,n){switch(e){case T:case I:return t.canAccessSearchMemberPostWebPage();case E:return t.canAccessSearchMemberPhotoWebPage();case y:return t.canAccessSearchMemberCommentWebPageOfUser(n);default:return!1}}(c,i,a)?function(e,t,n){var i=t.getBandCore().bandNo,a=s.when();switch(e){case I:a=l.buildMemberPostListView(t,n);break;case E:a=r.buildDBandMemberPhotoListView(i,n);break;case y:a=d.buildMemberCommentListView(i,n);break;case T:a=l.buildMissionConfirmPostListWithAuthorView(t,n)}return x(e,a)}(c,i,o).then((function(s){var l=!(s instanceof P)&&function(e,t,n){switch(e){case T:case I:return t.canDeleteMultipleMembershipPostsOfUser(n);case E:return t.canDeleteMultipleMembershipPhotosOfUser(n);case y:return t.canDeleteMultipleMembershipCommentsOfUser(n);default:return!1}}(c,i,a);return new O({contentType:c,bandData:i,memberKey:o,authorName:e.name,contentView:s,viewType:l?n:t})})):s.Deferred().reject()})):s.Deferred().reject()}return O.buildPageBandManagerContentLayoutView=function(e){var t=e.bandData,n=e.type;return t.canAccessManagerContentWebPage()?function(e,t){var n=t.getBandCore(),i=s.when();switch(e){case I:i=l.buildPageBandManagerPostListView(t);break;case y:i=d.buildPageBandManagerCommentListView(n.bandNo)}return x(e,i)}(n,t).then((function(e){var i=!(e instanceof P)&&function(e,t){switch(e){case I:return t.canDeleteMultiplePageProfilePosts();case y:return t.canDeleteMultiplePageProfileComments();default:return!1}}(n,t);return new O({contentType:n,bandData:t,contentView:e,viewType:i?w:S})})):s.Deferred().reject()},O.buildPageBandMemberContentLayoutView=function(e){return k(e,B,L)},O.buildGroupBandMemberContentLayoutView=function(e){return k(e,N,D)},O}.call(t,n,t,e))||(e.exports=i)},1874:function(e,t){e.exports='<div class="accountSectionHeader <%- headerClass %> _accountSectionHeader">\n\n    <div class="uHeaderWrap">\n        <header class="header">\n            <h1 class="title"><%= title /* HTML 태그 있음 */ %></h1>\n        </header>\n    </div>\n\n    <% if (_.size(tabs) > 0) { %>\n    <ul class="userPostNav">\n        <% _.each(tabs, function(tab) { %>\n        <li><a href="<%- tab.url %>"  class="navItem<%- tab.active ? \' active sf_color sf_afterBg\' : \'\' %>"><%- tab.label %></a></li>\n        <% }); %>\n    </ul>\n    <% } %>\n\n    <% if (deletable) { %>\n    <div class="manageArea -alignRight _manageArea">\n        <button type="button" class="uButton -text -manage _btnManage"><%- IM(\'ui.label.manage\') %></button>\n        <button type="button" class="uButton -text -manage _btnDelete" disabled  style="display:none"><%- IM(\'ui.label.delete\') %></button>\n    </div>\n    <% } %>\n</div>\n\n<div class="missionPostSort _postSortWrap" style="display:none">\n    <div class="uSelect -h20 gMat18 gMal12">\n        <select id="postSortSelect">\n            <option value="all"><%= IM("member.post.sort.all") %></option>\n            <option value="onlyConfirmPost"><%= IM("member.post.sort.only_confirm_post") %></option>\n        </select>\n    </div>\n</div>\n\n<div class="content _contentRegion"></div>\n\n<% if (deletable) { %>\n<div class="fPostSelectStatus _selectResultArea" style="display:none;">\n    <p class="_selectedCount"><%= IM("member_contents.multi_delete.selected_count", {selectedCount: 0}) %></p>\n    <button type="button" class="btnClose _btnClose"><%- IM(\'ui.label.quit\') %></button>\n</div>\n<% } %>\n\n<div class="_loadingBarRegion"></div>'},1875:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1876),a=n(1500),o=n(156),l=n(164),r=n(82),d=n(611),c=n(786),h=n(26),u=n(159),p=n(833),m=i.View.extend({tagName:"li",className:"album",attributes:{"data-viewname":"DBandMemberPhotoListItemView"},template:t.template(s),templateContext:function(){return{imgSrcUrl:this._getImgSrcUrl(),cid:this.cid}},behaviors:{CourierBehavior:""},ui:{link:"._link",img:"._img",checkInput:"._checkInput"},events:{"click @ui.link":function(){return this.trigger("memberWritings:photo:click",this),!1},"click @ui.checkInput":function(){this.model.set("isItemSelected",this.getUI("checkInput").is(":checked")),this.spawn(u.MSG.MEMBER_CONTENTS_MULTI_DELETE_CHECK,{checkedElement:this.getUI("checkInput"),checkedModel:this.model,isTargetPhoto:!0})}},initialize:function(){this.listenTo(h.getPostChannel(),h.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL,(function(){this.model.set("isItemSelected",!1),this.getUI("checkInput").is(":checked")&&this.getUI("checkInput").prop("checked",!1)}))},onAttach:function(){this.ui.img.setLoading()},onRender:function(){var e="",t=this.model.get("video");t?o.isExpiredFile(t.expires_at)?(this.$el.addClass("-expired"),this.ui.link.append('<div class="uVideoExpired -size42"><span class="cont"><i></i><span>'+IM("storage_period.video.expired.msg")+"</span></span></div>")):e="iconPlayer":o.isGif(this.model.get("photo_url"))&&(e="iconGif"),this.ui.link.addClass(e)},_getImgSrcUrl:function(){var e=l.s276;return null!=this.model.get("video")&&640===this.model.get("width")&&480===this.model.get("height")&&(e=l.mfullfill_640_480),r.make(this.model.get("photo_url"),e)}}),_=i.CollectionView.extend({behaviors:[{behaviorClass:u}],tagName:"ul",className:"albumImages -sizeL gMat22",attributes:{"data-viewname":"DBandMemberPhotoListView"},childView:m,childViewEvents:{"memberWritings:photo:click":function(e){this._openMediaViewer(e.model)}},initialize:function(e){this._bandNo=e.bandNo,this._colHeights=[0,0,0],this._loading=!1,this.listenTo(h.getPostChannel(),h.EVENT.POST_DELETED,(function(e){e.bandNo===this._bandNo&&(this.collection.remove(this.collection.where({source:"post",post_no:e.postNo})),this._rearrange())})),this.listenTo(h.getPostChannel(),h.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL,(function(){t.each(this.collection.models,(function(e){e.set("isItemSelected",!1)}))}))},viewNextPage:function(){!this._loading&&this.collection.hasMore()&&(this._loading=!0,this.spawn(u.MSG.MEMBER_CONTENT_FETCH_START),this.collection.fetchSearchPhotosWithAuthor().always(t.bind((function(){this._loading=!1,this.spawn(u.MSG.MEMBER_CONTENT_FETCH_END)}),this)))},_openMediaViewer:function(e){var t=d.openDPhotoVideoImageViewer({result_data:{photos:this.collection.toJSON(),total_count:this.collection.length},openIndex:this.collection.indexOf(e),bandNo:this._bandNo,goPostSupport:!0,profileViewSupport:!0,showUserInfo:!0,moreOptionList:[p.MEDIA_MORE_OPTION.SHOW_VIDEO_VIEWER_LIST,p.MEDIA_MORE_OPTION.COPY_URL,p.MEDIA_MORE_OPTION.DELETE,p.MEDIA_MORE_OPTION.REPORT,p.MEDIA_MORE_OPTION.MEDIA_DOWNLOAD_SETTING]});this.listenTo(t,d.EVENT.SHOW_POST,(function(e){c.buildPostDetailAsLayer({bandNo:this._bandNo,postNo:e})})),this.listenTo(t,p.TRIGGERING_EVENTS.MEDIA_DELETED,(function(e){t.destroy(),this.collection.remove(e),this._rearrange()}))},_rearrange:function(){this._colHeights=[0,0,0],this.render()}}),b=i.View.extend({attributes:{"data-viewname":"DBandMemberPhotoLayoutView"},className:"sAlbumSection gBoxShadow",template:t.constant('<div class="albumWrap _content"></div>'),behaviors:{CourierBehavior:""},regions:{content:"._content"},childViewEvents:{isItemSelected:function(){this.trigger("isItemSelected")}},onRender:function(){this.showChildView("content",new _({collection:this.collection,bandNo:this.options.bandNo}))},viewNextPage:function(){this.getChildView("content").viewNextPage()},deletePhotos:function(e){var n=IM("band.user.photo.delete.alert.message",{count:e.length});confirm(n)&&this.collection.deletePhotos(e).then(t.bind((function(){this.spawn(u.MSG.MEMBER_CONTENTS_MULTI_DELETE_COMPLETE)}),this))}});return _.buildDBandMemberPhotoListView=function(e,t){return a.fetchSearchPhotosWithAuthor(e,t).then((function(t){return 0==t.length?null:new b({collection:t,bandNo:e})}))},_}.call(t,n,t,e))||(e.exports=i)},1876:function(e,t){e.exports='<a href="#" class="_link"><img class="_img" src="<%- imgSrcUrl %>" alt=""></a>\n<% if (emotion_count > 0 || comment_count > 0) { %>\n<div class="count">\n    <% if (emotion_count > 0) { %><span class="emotion"><%= emotion_count %></span><% } %>\n    <% if (comment_count > 0) { %><span class="comment"><%= comment_count %></span><% } %>\n</div>\n<% } %>\n<label for="check_<%- cid %>" class="uCheck -checkbox -photo">\n    <input type="checkbox" id="check_<%- cid %>" class="checkInput _checkInput">\n    <span class="checkLabel">\n        <span class="shape sf_tAfterBg"></span>\n    </span>\n</label>'},1877:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1878),a=n(1501),o=n(9),l=n(611),r=n(786),d=n(533),c=n(26),h=n(937),u=n(158),p=n(1032),m=n(509),_=n(159),b=n(833),g="MEMBER_COMMENT",f="PAGE_BAND_MANAGER_COMMENT",v=i.View.extend({tagName:"a",className:"cCommentOnly gBoxShadow",attributes:{"data-viewname":"DBandMemberCommentListItemView",href:"#"},template:t.template(s),templateContext:function(){var e=this.model.get("band");return{date:o.format.date(new Date(this.model.get("created_at")),"short_date_time"),cid:this.cid,convertContent:function(e){return u.convertTextForMemberComment(e)},managerContent:this._commentType==f,bandName:e.name}},behaviors:{CourierBehavior:""},ui:{checkInput:"._checkInput"},events:{click:function(){return this.trigger("memberWritings:comment:click",this,this._contentKey),!1},"click @ui.checkInput":function(e){e.stopPropagation(),this.model.set("isItemSelected",this.getUI("checkInput").is(":checked")),this.spawn(_.MSG.MEMBER_CONTENTS_MULTI_DELETE_CHECK,{checkedElement:this.getUI("checkInput"),checkedModel:this.model})}},initialize:function(e){this._commentType=e.commentType,this._contentKey=m.buildByAttributes({contentType:this.model.get("content_type"),postNo:this.model.get("post_no"),photoNo:this.model.get("photo_no"),scheduleId:this.model.get("schedule_id"),commentId:this.model.get("comment_id"),originCommentId:this.model.get("origin_comment_id")}),this.listenTo(c.getPostChannel(),c.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL,(function(){this.model.set("isItemSelected",!1),this.getUI("checkInput").is(":checked")&&this.getUI("checkInput").prop("checked",!1)}))}}),A=i.CollectionView.extend({tagName:"div",attributes:{"data-viewname":"DBandMemberCommentListView"},behaviors:{CourierBehavior:""},childView:v,childViewOptions:function(){return{commentType:this._commentType}},childViewEvents:{"memberWritings:comment:click":function(e,n){var i=e.model,s=null;switch(n.getContentType()){case p.POST_COMMENT:case p.POST_COMMENT_COMMENT:s=t.extend({bandNo:this._bandNo,postNo:n.getPostNo()},n.makeInitCommentIdAndReplyId()),r.buildPostDetailAsLayer(s);break;case p.PHOTO_COMMENT:case p.PHOTO_COMMENT_COMMENT:this._openMediaViewer(i,n);break;case p.SCHEDULE_COMMENT:case p.SCHEDULE_COMMENT_COMMENT:s=t.extend({bandNo:this._bandNo,scheduleId:n.getScheduleId()},n.makeInitCommentIdAndReplyId()),h.openScheduleDetailLayerView(s)}}},initialize:function(e){this._commentType=e.commentType,this._bandNo=e.bandNo,this._loading=!1,this.listenTo(c.getPostChannel(),c.EVENT.POST_DELETED,(function(e){e.bandNo===this._bandNo&&this.collection.remove(this.collection.where({content_type:p.POST_COMMENT.getContentTypeKey(),post_no:e.postNo}))})),this.listenTo(c.getCommentChannel(),c.EVENT.COMMENT_DELETED,(function(e){this.collection.removeComment(e)})),this.listenTo(c.getPostChannel(),c.EVENT.MEMBER_CONTENTS_MULTI_DELETE_CANCEL,(function(){t.each(this.collection.models,(function(e){e.set("isItemSelected",!1)}))}))},viewNextPage:function(){!this._loading&&this.collection.hasMore()&&(this._loading=!0,this.spawn(_.MSG.MEMBER_CONTENT_FETCH_START),this.collection.fetchSearchCommentsWithAuthor().always(t.bind((function(){this._loading=!1,this.spawn(_.MSG.MEMBER_CONTENT_FETCH_END)}),this)))},_openMediaViewer:function(e,n){this._getPhoto(e).then(t.bind((function(e){var i=t.extend({result_data:{photos:[e],total_count:1},bandNo:this._bandNo,goPostSupport:!0,profileViewSupport:!0,showUserInfo:!0,moreOptionList:[b.MEDIA_MORE_OPTION.DELETE,b.MEDIA_MORE_OPTION.REPORT]},n.makeInitCommentIdAndReplyId()),s=l.openDPhotoVideoImageViewer(i);this.listenTo(s,l.EVENT.SHOW_POST,(function(e){r.buildPostDetailAsLayer({bandNo:this._bandNo,postNo:e})})),this.listenTo(s,b.TRIGGERING_EVENTS.MEDIA_DELETED,(function(e){s.destroy(),this.collection.remove(this.collection.where({content_type:p.PHOTO_COMMENT.getContentTypeKey(),photo_no:e}))}))}),this))},_getPhoto:function(e){var n=e.get("__photo");return null!=n?$.Deferred().resolve(n):d.getPhotoDetail(this._bandNo,e.get("photo_no")).then(t.bind((function(t){return n=t.photo,e.set("__photo",n),n}),this))},deleteComments:function(e){var n=IM("band.user.comment.delete.alert.message",{count:e.length});if(confirm(n)){var i=[];t.each(e,(function(e){var t=m.buildByAttributes({contentType:e.get("content_type"),postNo:e.get("post_no"),photoNo:e.get("photo_no"),scheduleId:e.get("schedule_id"),commentId:e.get("comment_id"),originCommentId:e.get("origin_comment_id")});i.push(t.toApiParams(!1))})),this.collection.deleteComments(this._bandNo,i).then(t.bind((function(){this.spawn(_.MSG.MEMBER_CONTENTS_MULTI_DELETE_COMPLETE)}),this))}return!1}});return A.buildMemberCommentListView=function(e,t){return a.buildMemberCommentSearchCollection(e,t).then((function(t){return 0==t.length?null:new A({commentType:g,collection:t,bandNo:e})}))},A.buildPageBandManagerCommentListView=function(e){return a.buildPageBandManagerCommentSearchCollection(e).then((function(t){return 0==t.length?null:new A({commentType:f,collection:t,bandNo:e})}))},A}.call(t,n,t,e))||(e.exports=i)},1878:function(e,t){e.exports='<% if ( managerContent ) { %>\n<div class="pageBandInfo">\n    <span class="pageBandName"><%- bandName %></span>\n    <span class="pageBandHostName"><%- author.real_name %></span>\n</div>\n<% } %>\n\n<p class="comment"><%= convertContent(content) %></p>\n<p class="body"><%- owner_content %></p>\n<p class="date"><%= date %></p>\n<label for="check_<%- cid %>" class="uCheck -checkbox">\n\t<input type="checkbox" id="check_<%- cid %>" class="checkInput _checkInput">\n\t<span class="checkLabel">\n        <span class="shape sf_afterBg"></span>\n    </span>\n</label>'},1879:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(556),s=n(1613),a=n(1880),o=n(158),l=n(572),r=n(153),d=n(1144),c=n(487),h=n(908),u=n(26),p=n(553),m=s.extend({attributes:{"data-viewname":"DPostDetailWebPageView"},template:t.template(a),templateContext:function(){return{showBtnSubscribe:this._isPageSubscribedRecently||this.model.getBand().isSubscribingAvailable()}},behaviors:function(){if(!t.isArray(s.prototype.parentBehaviors))throw new Error("parentBehaviors is required");return s.prototype.parentBehaviors.concat([{behaviorClass:h,bandNo:this.options.model.getBandNo()}])},onAttach:function(){l.changePageTitle(d.newRoute(r.GROUP_BAND_POST_DETAIL),{bandName:this.model.getBandName(),postBody:o.ellipsisByLength(o.extractRichPostContentText(this.model.get("content")),100)}),this._sendSceneEnterLog(),this.listenTo(u.getPostChannel(),u.EVENT.POST_DELETED,(function(e){this.model.getPostNo()===e.postNo&&this.model.getBandNo()===e.bandNo&&p.latestContents(this.model.getBandCore()).go()}))},onBeforeDetach:function(){this.stopListening(u.getPostChannel())},_sendSceneEnterLog:function(){this.jplSceneEnter(c.CLASSIFIER.POST_DETAIL,{band_no:this.model.getBandCore().bandNo,post_no:this.model.getPostNo(),writer_no:this.model.getAuthor().get("userNo"),band_type:this.model.getBandCore().type,is_preview:this.options.bandData.isPreviewForJplExtra()})}});return m.buildPostDetailWebPageView=function(e,t,n,s,a,o,l){return(new i).fetchPostDetail(t,n,!1,o).then((function(t){return new m({bandData:e,model:t,postNo:n,initCommentId:s,initCommentReplyId:a,params:l,token:o})}))},m}.call(t,n,t,e))||(e.exports=i)},1880:function(e,t){e.exports='<section class="boardList">\n    <div class="postWrap -postDetailPage">\n        <% //TODO 차단된 사용자의 글 표시하기 위해 \'-blockUserPost\' 클래스 추가  %>\n        <div class="cContentsCard gContentCardShadow _postWrapper" data-type="comment">\n            <div class="_dimArea"></div>\n\n            <% // 페이지 구독하기 버튼 %>\n            <% if (showBtnSubscribe) { %>\n            <div class="pageSubscribeWrap _pageSubscriptionRegion">\n            </div>\n            <% } %>\n\n            <% // 더보기 옵션 메뉴 버튼과 레이어 %>\n            <div class="_moreOptionListRegion" style="display: none;"></div>\n\n            <div class="postMain">\n                <% // 작성자와 글 정보 영역 %>\n                <div class="_postAuthorRegion"></div>\n\n                <% // 글 읽음수 노출 %>\n                <div class="readNotice _postReaderWrap" style="display: none;">\n                    <p class="_postReaders"></p>\n                </div>\n\n                \x3c!-- 미션 인증 글 > 미션 정보 --\x3e\n                <div class="missionCertification _missionInfo"></div>\n\n                <% // 글 본문 (첨부 정보 포함) %>\n                <div class="_contentListRegion"></div>\n\n                <% // 번역 보기 %>\n                <div class="_contentTranslationRegion" style="display:none"></div>\n\n                <% // 대표태그 표시 %>\n                <div class="_postPinnedHashtagsRegion"></div>\n            </div>\n\n            <% // 표정수, 댓글수 영역 및 글에 해당하는 이모티콘 목록 영역 %>\n            <div class="_postCountAndEmotionRegion"></div>\n\n            <% // 댓글 목록 영역 (댓글쓰기 Inputbox 포함) %>\n            <div class="_commentRegion"></div>\n        </div>\n    </div>\n</section>'},1881:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(162),o=n(160),l=n(907),r=n(589),d=n(527),c=n(154),h=n(1235),u=n(538),p=n(545),m=n(491),_=n(1046),b=n(1092),g=n(181),f=n(52),v=n(1600),A=n(510),M="transfer_virtual_member",C="keep_external_calendar",I="use_paid_product",E=s.Object.extend({initialize:function(e){return this.bandNo=e.bandNo,this.isNeedOtherProcess=e.isNeedOtherProcess,this.agreements=[],i.when(u.getBandOption(this.bandNo),m.getCachedBandData(this.bandNo)).then(t.bind((function(e,t){this.bandOptionModel=e,this.bandData=t,this._checkMemberLayerOpenCondition()}),this))},_checkMemberLayerOpenCondition:function(){this.bandData.getBandCore().supportCheckForPageLeaderDelegation()?this._checkAndDelegatePageLeader():this._openMemberSelectView()},_checkAndDelegatePageLeader:function(){i.when(u.SETTING.getBandMembersForDelegateLeader(this.bandNo),g.getPageAdpost(this.bandNo,"")).then(t.bind((function(e,n){if(0==e.members.length)return alert(IM("pageband.page_setting.delegate_leader.alert.no_members")),void a.PAGE_BAND_SETTING_MANAGE_COLEADER.goDForced({band_no:this.bandNo});(f.camelizeKeys(n)||{}).isAdpostConnected?confirm("운영자를 위임하기 전에 애드포스트 미디어 등록을 해제하시겠습니까?")?v.openDeregisterView(this.bandNo,this).then(t.bind((function(){this._openMemberSelectView()}),this)):alert("애드포스트 미디어로 등록된 상태에서는 운영자를 위임할 수 없습니다."):this._openMemberSelectView()}),this))},_openMemberSelectView:function(){var e=this.bandData.getBandCore().showBandLeaderTermAsManager(),n=e?IM("pageband.page_setting.delegate_leader.title"):IM("bandsetting.delegate_leader.title"),i=this.bandData.getBandCore().supportCheckForPageLeaderDelegation()?o.DELEGATE_PAGE_LEADER:o.DELEGATE_LEADER,s=l.openDMemberSelectionView({titleText:n,descriptionText:e?IM("transfer_manager_role.member_select_desc"):IM("transfer_admin_role.member_select_desc"),submitBtnText:IM("ui.label.complete"),onlySingleSelection:!0}),a=d.buildBandMemberWithFilterDataCollection(this.bandNo,i,100),h=d.buildBandMemberWithFilterDataCollection(this.bandNo,i,100);c.wrapActivePromise(a.fetchBandMemberWithFilterDataCollection(),this).then(t.bind((function(){s.renderMemberListToSelect({memberModels:a.toMemberSelectionViewModels(),showSearchMoreMemberBtn:a.hasMoreMember()})}),this)),this.listenTo(s,l.EVENT.MEMBER_SELECTION_MEMBER_SELECT_CLICK,(function(e){s.deselectAllMembers(),s.selectMember(e.selectedMember)})),this.listenTo(s,l.EVENT.MEMBER_SELECTION_MEMBER_DESELECT_CLICK,(function(e){s.deselectMember(e)})),this.listenTo(s,l.EVENT.MEMBER_SELECTION_MEMBER_PROFILE_CLICK,(function(e){r.openMembershipProfileLayer({name:e.name,profileImageUrl:e.profileImageUrl,userNo:e.userNo,bandNo:this.bandNo})})),this.listenTo(s,l.EVENT.MEMBER_SELECTION_SEARCH,(function(e){c.wrapActivePromise(h.searchBandMemberWithFilterDataCollection(e),this).then((function(){s.renderMemberListToSelect({memberModels:h.toMemberSelectionViewModels(),showSearchMoreMemberBtn:h.hasMoreMember()})}))})),this.listenTo(s,l.EVENT.MEMBER_SELECTION_INPUT_EMPTY,(function(){s.renderMemberListToSelect({memberModels:a.toMemberSelectionViewModels(),showSearchMoreMemberBtn:a.hasMoreMember()})})),this.listenTo(s,l.EVENT.MEMBER_SELECTION_COMPLETE,(function(n){n.selectedMembers[0].isKid()?alert(IM("bandsetting.kid.leader_delegation.alert")):A.openLayer({bodyDesc:e?IM("transfer_manager_role.member_select_desc"):IM("transfer_admin_role.member_select_desc")}).once(A.EVENTS.CONFIRM,t.bind((function(){var e=n.selectedMembers[0].getUserNo();this.bandData.getBandCore().supportVirdualMemberCheckForLeaderDelegation()&&this.bandData.getBandCore().supportExternalCalendarCheckForLeaderDelegation()&&this.bandData.getBandCore().supportChargedQuotaCheckForLeaderDelegation()?this._checkVirtualMembers().then(t.bind((function(){this._checkExternalCalendar().then(t.bind((function(){this._checkBoughtQuota().then(t.bind((function(){this._delegateLeader(e),s.destroyView(),this.trigger("bandSettingHome:scrollTop")}),this))}),this))}),this)):(this._delegateLeader(e),s.destroyView(),this.trigger("bandSettingHome:scrollTop"))}),this))}))},_checkVirtualMembers:function(){var e=i.Deferred();if(this.bandData.isManageVirtualMemberPermitted()){var n=new _([]);n.fetchVirtualMemberCollection(this.bandNo).then(t.bind((function(){n.length>0?this._openConfirmMessageLayer(M,{descTitle:IM("delegate_leader.confirm.has_virtual_member_title"),desc:IM("delegate_leader.confirm.has_virtual_member_desc")},e):e.resolve()}),this))}else e.resolve();return e},_checkExternalCalendar:function(){var e=i.Deferred(),n=b.build();return n.fetchCalendar(this.bandNo,p.TYPE.EXTERNAL).then(t.bind((function(){n.length>0?this._openConfirmMessageLayer(C,{descTitle:IM("bandsetting.delegate_leader.noti.existing_external_calendar"),desc:IM("bandsetting.delegate_leader.existing_external_calendar.desc1")+"<br/>"+IM("bandsetting.delegate_leader.existing_external_calendar.desc2")},e):e.resolve()}),this)),e},_checkBoughtQuota:function(){var e=i.Deferred(),t=this.bandData.getBandCore().showBandLeaderTermAsManager();return this.bandOptionModel&&this.bandOptionModel.hasBoughtQuota()?this._openConfirmMessageLayer(I,{descTitle:IM("band_leave.confirm.has_bought_quota"),desc:t?IM("pageband.page_setting.delegate_leader.confirm.description.no_refund"):IM("delegate_leader.confirm.no_refund")},e):e.resolve(),e},_openConfirmMessageLayer:function(e,n,i){n=t.extend({title:IM("bandsetting.delegate_leader.title"),closeLayer:IM("ui.label.close_layer"),confirm:IM("ui.label.confirm"),confirmCheckboxDescription:IM("bandsetting.delegate_leader.confirm.checked")},n);var s=h.openAsLayer(n);this.listenTo(s,"modal:confirm",t.bind((function(){this.agreements.push(e),i.resolve()}),this))},_delegateLeader:function(e){return u.SETTING.delegateLeader(this.bandNo,e,this.agreements).then(t.bind((function(){this.isNeedOtherProcess?this.trigger("delegateLeader:doOtherProcess"):this.trigger("bandSettingHome:refresh")}),this))}});return E.build=function(e){return new E({bandNo:e.bandNo,isNeedOtherProcess:e.isNeedOtherProcess})},E}.call(t,n,t,e))||(e.exports=i)},1882:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1883),a=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DAdpostSettingView"},template:t.template(s),templateContext:function(){return{cid:this.cid}},ui:{cancelBtn:"._cancelBtn",confirmBtn:"._confirmBtn",deregisterCheckBtn:"._deregisterCheckBtn"},events:{"click @ui.cancelBtn":function(){this.destroy()},"click @ui.confirmBtn":function(){this.ui.confirmBtn.prop("disabled",!0),this.trigger(a.DEREGISTER_CONFIRMED)},"change @ui.deregisterCheckBtn":function(){this.ui.confirmBtn.prop("disabled",!this.ui.deregisterCheckBtn.is(":checked"))}}});return a.DEREGISTER_CONFIRMED="DAdpostDeregisterView_deregisterConfirmed",a.buildDAdpostDeregisterView=function(){return new a},a}.call(t,n,t,e))||(e.exports=i)},1883:function(e,t){e.exports='<div class="lyContent" style="width: 380px">\n    <header class="header">\n        <h1 class="title">미디어 등록 해제</h1>\n    </header>\n\n    <div class="main">\n        <p class="p point"><strong class="-highlightText">애드포스트 미디어 등록을 해제하면,</strong></p>\n        <div class="p -fs13">\n            <p class="p ">해제 후 미디어 등록을 다시 신청하려면, 신청 시점의 활동성 조건에 따라 등록이 거절될 수 있습니다.</p>\n            <p class="p ">해제 완료까지 최대 10분이 소요되며, 해제 현황은 애드포스트에서 확인할 수 있습니다.</p>\n        </div>\n        <div class="selectArea">\n            <label for="desc_<%- cid %>" class="uCheck -checkbox ">\n                <input type="checkbox" id="desc_<%- cid %>" class="checkInput _deregisterCheckBtn">\n                <span class="checkLabel">\n                    <span class="shape "></span>\n                    <span class="text">애드포스트 미디어 등록을 해제하겠습니다.</span>\n                </span>\n            </label>\n        </div>\n    </div>\n\n    <footer class="footer">\n        <button type="button" class="uButton -cancel _cancelBtn">취소</button>\n        <button type="button" class="uButton -confirm _confirmBtn" disabled>해제</button>\n    </footer>\n</div>'},1884:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1885),a=n(486),o=n(553),l={MEMBER_WITHDRAWAL_MANAGEMENT:"member_withdrawal_management",DELETE_RESERVED:"delete_reserved"},r=i.View.extend({template:t.template(s),templateContext:{INPUT_VALUES:l},attributes:{"data-viewname":"DBandDeleteSelectView"},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",checkInput:"._checkInput"},events:{"click @ui.btnConfirm":"_onClickConfirm","click @ui.btnCancel":"destroy","change @ui.checkInput":function(){var e=this.getUI("checkInput").filter(":checked").length>0;this.getUI("btnConfirm").attr("disabled",!e)}},initialize:function(e){this._bandData=e.bandData},_onClickConfirm:function(){this.getUI("checkInput").filter(":checked").val()!==l.MEMBER_WITHDRAWAL_MANAGEMENT?(this.trigger(l.DELETE_RESERVED),this.destroy()):o.memberWithdrawal(this._bandData.getBandCore()).go()}});return r.EVENT=l,r.openAsLayer=function(e){var t=new r({bandData:e});return a.open(t),t},r}.call(t,n,t,e))||(e.exports=i)},1885:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.band_delete.title") %></h1>\n        </header>\n\n        <div class="modalBody">\n            <div class="modalContent gPat20 gPal20 gPar20">\n                <p class="p gMab15 gMat-5"><%= IM("bandsetting.band_delete.txt.select_desc") %></p>\n                <ul class="selectArea">\n                    <li>\n                        <label for="memberWithdrawalManagement" class="uCheck -radio ">\n                            <input type="radio" id="memberWithdrawalManagement" name="bandDelete" value="<%= INPUT_VALUES.MEMBER_WITHDRAWAL_MANAGEMENT %>" class="checkInput _checkInput">\n                            <span class="checkLabel">\n                                <span class="shape sf_afterBg"></span>\n                                <span class="text"><%= IM("bandsetting.band_delete.txt.member_withdrawal_management") %></span>\n                            </span>\n                        </label>\n                    </li>\n                    <li>\n                        <label for="deleteReservation" class="uCheck -radio ">\n                            <input type="radio" id="deleteReservation" name="bandDelete" value="<%= INPUT_VALUES.DELETE_RESERVATION %>" class="checkInput _checkInput">\n                            <span class="checkLabel">\n                                <span class="shape sf_afterBg"></span>\n                                <span class="text"><%= IM("bandsetting.band_delete.txt.delete_reservation") %></span>\n                            </span>\n                        </label>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},1886:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1887),a=n(486),o=n(83),l={CONFIRM:"CONFIRM"},r=i.View.extend({template:t.template(s),attributes:{"data-viewname":"DBandDeleteReservationView"},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",checkInput:"._checkInput"},events:{"click @ui.btnConfirm":"_onClickConfirm","click @ui.btnCancel":"destroy","change @ui.checkInput":function(){var e=this.getUI("checkInput").is(":checked");this.getUI("btnConfirm").attr("disabled",!e)}},initialize:function(e){this.bandNo=e.bandNo},_onClickConfirm:function(){o.closeBand(this.bandNo).then(t.bind((function(){this.trigger(l.CONFIRM),this.destroy()}),this))}});return r.EVENT=l,r.openAsLayer=function(e){var t=new r({bandNo:e});return a.open(t),t},r}.call(t,n,t,e))||(e.exports=i)},1887:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.layer.confirm_msg_title") %></h1>\n        </header>\n\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <div class="msgWrap gPal0 gPar0">\n                    <p class="pText"><%= IM("bandsetting.band_delete.reservation.desc") %></p>\n                </div>\n                <ul class="guidePointList gMat8">\n                    <li class="guidePointItem"><%= IM("bandsetting.band_delete.reservation.desc1") %></li>\n                    <li class="guidePointItem"><%= IM("bandsetting.band_delete.reservation.desc2") %></li>\n                    <li class="guidePointItem"><%= IM("bandsetting.band_delete.reservation.desc3") %></li>\n                    <li class="guidePointItem"><%= IM("bandsetting.band_delete.reservation.desc4") %></li>\n                </ul>\n                <div class="selectArea">\n                    <label for="agree" class="uCheck -checkbox">\n                        <input type="checkbox" id="agree" class="checkInput _checkInput">\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("ui.label.i_agree") %></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n        </div>\n\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},1888:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1889),o=n(486),l=n(154),r=n(499),d=n(498),c=n(153),h=n(543),u=n(538),p=n(83),m=n(544),_=n(1890),b=s.View.extend({attributes:{"data-viewname":"DBandTypeConditionView"},getTemplate:function(){return this._fetched?i.template(a):i.template(d)},ui:{openTypeWrapper:"._openTypeWrapper",openTypeLabel:"._openTypeLabel",radioOpenType:"._radioOpenType",btnConfirm:"._btnConfirm",kidsWrap:"._kidsWrap",kidBandSettingGuide:"._kidBandSettingGuide",checkKidsMethod:':checkbox[name="checkKidsMethod"]'},events:{"click @ui.openTypeWrapper, @ui.radioOpenType":function(e){e.stopPropagation();var n=e.currentTarget;t(n).find(this.getUI("radioOpenType")).prop("checked",!0);var i=this.getUI("radioOpenType").filter(":checked").val(),s="#"+h.BAND_OPEN_TYPE.SECRET;i===h.BAND_OPEN_TYPE.SECRET||!this.getUI("checkKidsMethod").is(":checked")||confirm(IM("alert.change.band_for_kids_enabled.type.setting"))?(this.bandOptionModel.isRecruitingBandForKidsEnabled()&&(i===h.BAND_OPEN_TYPE.SECRET?(this.getUI("checkKidsMethod").prop("checked",!0).change(),this.getUI("kidsWrap").show()):(this.getUI("kidsWrap").hide(),this.getUI("checkKidsMethod").prop("checked",!1).change())),this._adaptBandOpenCheckedTypeStyle()):this.getUI("radioOpenType").filter(s).prop("checked",!0)},"click @ui.btnConfirm":"_setBandOpenType","click @ui.checkKidsMethod":function(e){e.stopPropagation()},"change @ui.checkKidsMethod":function(){this.getUI("checkKidsMethod").is(":checked")?this.getUI("kidBandSettingGuide").text(IM("band_setting.kid_band.on")):this.getUI("kidBandSettingGuide").text(IM("band_setting.kid_band.off"))}},initialize:function(e){this._fetched=!1,this.bandNo=e.bandNo},serializeData:function(){return this._fetched?(this.bandOptionModel.isRecruitingOpenType()?(e=this.bandOptionModel.isPublicRecruitingBand(),t=this.bandOptionModel.isClosedRecruitingBand(),n=this.bandOptionModel.isSecretRecruitingBand(),i=this.bandOptionModel.isRecruitingBandForKidsEnabled(),s=this.bandOptionModel.getRecruitingBandForKidBand()):(e=this.bandOptionModel.isPublicBand(),t=this.bandOptionModel.isClosedBand(),n=this.bandOptionModel.isSecretBand()),{openTypePublic:h.BAND_OPEN_TYPE.PUBLIC,openTypeClosed:h.BAND_OPEN_TYPE.CLOSED,openTypeSecret:h.BAND_OPEN_TYPE.SECRET,isPublicBand:e,isClosedBand:t,isSecretBand:n,showRecruitingBandForKidBand:i,isRecruitingBandForKidBand:s}):{_loading_size:r.Size.MEDIUM};var e,t,n,i,s},onAttach:function(){return u.getBandOption(this.bandNo).then(i.bind((function(e){this._fetched=!0,this.bandOptionModel=e,this.render()}),this))},_setBandOpenType:function(){if(!this._updateProgress){var e=this.getUI("radioOpenType").filter(":checked").val();_.canUpdateWithoutConfirmView(this.bandOptionModel,e)?this._setBandOpenOptions(e):(this._bandTypeChangeConfirmView=_.buildBandTypeConfirmView(e),this.listenToOnce(this._bandTypeChangeConfirmView,"bandTypeChangeConfirm_confirmed",(function(){this._setBandOpenOptions(e)})),o.open(this._bandTypeChangeConfirmView))}},_setBandOpenOptions:function(e){if(this._updateProgress=!0,this.bandOptionModel.isRecruitingOpenType()){var t=null;this.bandOptionModel.isRecruitingBandForKidsEnabled()&&e===h.BAND_OPEN_TYPE.SECRET&&(t=this.getUI("checkKidsMethod").is(":checked"));var n={bandNo:this.bandNo,recruitingOpenType:e,recruitingBandForKidsEnabled:t};return p.setBandConfigForRecruiting(n).always(i.bind((function(){m.LFG_BAND_SETTING.goDForced({band_no:this.bandNo}),this._updateProgress=!1,this._bandTypeChangeConfirmView&&(this._bandTypeChangeConfirmView.destroy(),this._bandTypeChangeConfirmView=null)}),this))}l.wrapActivePromise(u.SETTING.setBandOpenOptions(this.bandNo,e),this).always(i.bind((function(){c.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo}),this._updateProgress=!1,this._bandTypeChangeConfirmView&&(this._bandTypeChangeConfirmView.destroy(),this._bandTypeChangeConfirmView=null)}),this))},_adaptBandOpenCheckedTypeStyle:function(){this.getUI("openTypeLabel").removeClass("-point"),this.getUI("radioOpenType").filter(":checked").closest("._openTypeWrapper").find("._openTypeLabel").addClass("-point")}});return b.build=function(e){return new b({bandNo:e})},b}.call(t,n,t,e))||(e.exports=i)},1889:function(e,t){e.exports='<section class="sSettingBand gContentCardShadow">\n    <div class="uHeaderWrap -h50">\n        <header class="header">\n            <h1 class="title"><%= IM("bandsetting.band_type_condition.title") %></h1>\n        </header>\n    </div>\n    <ul class="sSettingList -tbSpace">\n        <%  // 비공개 밴드 %>\n        <li class="sSettingItem _openTypeWrapper">\n            <div class="itemContent">\n                <label for="<%- openTypeSecret %>" class="label _openTypeLabel <% if (isSecretBand) { %> -point<% } %>"><%= IM("bandsetting.band_type_join_setting.txt.secret_band") %></label>\n                <span class="subTxt"><%= IM("bandsetting.band_type_join_setting.txt.secret_band.description") %></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -checkbox">\n                    <input type="radio" id="<%- openTypeSecret %>" class="checkInput _radioOpenType" name="type_check" value="<%- openTypeSecret %>" <% if (isSecretBand) { %> checked<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n            </div>\n            \x3c!-- [D] 어린이용 밴드 설정 옵션 --\x3e\n            <div class="classBandOption -flexible _kidsWrap" <% if( !(isSecretBand && showRecruitingBandForKidBand)) { %>style="display:none;"<% } %>>\n                <div class="text">\n                    <span class="textTitle"><%= IM("band_setting.kid_band.title") %></span>\n                    <span class="textDesc _kidBandSettingGuide"><%= IM("band_setting.kid_band.on") %></span>\n                </div>\n\n                <label for="checkKidsMethod" class="uCheck -switch ">\n                    <input type="checkbox" id="checkKidsMethod" class="checkInput" value="checkKidsMethod" name="checkKidsMethod" <% if (isRecruitingBandForKidBand) { %> checked<% } %>>\n                    <span class="checkLabel">\n                            <span class="shape "></span>\n                            <span class="text"></span>\n                        </span>\n                </label>\n            </div>\n            \x3c!--// 어린이용 밴드 설정 옵션 --\x3e\n        </li>\n\n        <%  // 밴드명 공개 밴드 %>\n        <li class="sSettingItem _openTypeWrapper">\n            <div class="-flexible">\n                <div class="itemContent">\n                    <label for="<%- openTypeClosed %>" class="label _openTypeLabel <% if (isClosedBand) { %> -point<% } %>"><%= IM("bandsetting.band_type_join_setting.txt.closed_band") %></label>\n                    <span class="subTxt"><%= IM("bandsetting.band_type_join_setting.txt.closed_band.description") %></span>\n                </div>\n                <div class="itemSide">\n                    <label class="uCheck -checkbox">\n                        <input type="radio" id="<%- openTypeClosed %>" class="checkInput _radioOpenType" name="type_check" value="<%- openTypeClosed %>" <% if (isClosedBand) { %> checked<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <%  // 공개 밴드 %>\n        <li class="sSettingItem _openTypeWrapper">\n            <div class="-flexible">\n                <div class="itemContent">\n                    <label for="<%- openTypePublic %>" class="label _openTypeLabel <% if (isPublicBand) { %> -point<% } %>"><%= IM("bandsetting.band_type_join_setting.txt.public_band") %></label>\n                    <span class="subTxt"><%= IM("bandsetting.band_type_join_setting.txt.public_band.description") %></span>\n                </div>\n                <div class="itemSide">\n                    <label class="uCheck -checkbox">\n                        <input type="radio" id="<%- openTypePublic %>" class="checkInput _radioOpenType" name="type_check" value="<%- openTypePublic %>" <% if (isPublicBand) { %> checked<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n        </li>\n    </ul>\n    <div class="guideArea -borderTop gMar22 gMal22 gPat20 gPab20">\n        <p class="guideAreaText -fs12"><%= IM("web.bandsetting.bandtypelayer.txt.notification_send_info") %></p>\n    </div>\n    <div class="btnFooter">\n        <button type="button" class="uButton -sizeL -confirm _btnConfirm"><%= IM("ui.label.save") %></button>\n    </div>\n</section>'},1890:function(e,t,n){var i,s;i=[n(0),n(4),n(1891)],void 0===(s=function(e,t,n){var i=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandTypeChangeConfirmView"},template:e.template(n),ui:{cancelButton:"._cancelButton",confirmButton:"._confirmButton",bandTypeCheck:"._bandTypeCheck"},events:{"click @ui.cancelButton":function(){this.destroy()},"click @ui.confirmButton":function(){this.trigger("bandTypeChangeConfirm_confirmed")},"click @ui.bandTypeCheck":function(){var e=!this.ui.bandTypeCheck.prop("checked");this.ui.confirmButton.prop("disabled",e).toggleClass("-disabled",e)}},serializeData:function(){return{changingToSecretBand:1==this.options.changingToSecretBand,cid:this.cid}}});return i.buildBandTypeConfirmView=function(e){return new i({changingToSecretBand:"secret"==e})},i.canUpdateWithoutConfirmView=function(e,t){return e.getOpenType()==t||(!!e.isSecretBand()||!(!e.isClosedBand()||"public"!=t))},i}.apply(t,i))||(e.exports=s)},1891:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="header">\n        <h1 class="title"><%= IM(\'bandsetting.band_type_condition.title\') %></h1>\n    </header>\n\n    <div class="main">\n        <p class="p"><strong><%= IM(\'bandsetting.bandtype.change_caution.title\') %></strong></p>\n\n        <div class="p -fs13">\n            <p class="p"><%= IM(\'bandsetting.bandtype.change_caution.non-searchable_band\') %></p>\n            <% if (changingToSecretBand) { %>\n            <p class="p"><%= IM(\'bandsetting.bandtype.change_caution.losing_url\') %></p>\n            <p class="p"><%= IM(\'bandsetting.bandtype.change_caution.inaccessible_private_band\') %></p>\n            <% } else { %>\n            <p class="p"><%= IM(\'bandsetting.bandtype.change_caution.inaccessible_closed_band\') %></p>\n            <% } %>\n        </div>\n\n        <div class="selectArea">\n            <label for="desc1_<%- cid %>" class="uCheck -checkbox">\n                <input type="checkbox" id="desc1_<%- cid %>" class="checkInput _bandTypeCheck">\n                <span class="checkLabel">\n                    <span class="shape"></span>\n                    <span class="text"><%= IM(\'bandsetting.bandtype.type_change\') %></span>\n                </span>\n            </label>\n        </div>\n    </div>\n\n    <footer class="footer">\n        <button type="button" class="uButton -cancel _cancelButton"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm -disabled _confirmButton" disabled><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},1892:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(1893),o=n(510),l=n(800),r=n(499),d=n(498),c=(n(153),n(543)),h=n(541),u=n(538),p=n(553),m=n(1894),_=n(659),b=s.View.extend({attributes:{"data-viewname":"DBandJoinConditionView"},className:"sSettingBand gContentCardShadow",getTemplate:function(){return this._bandOptionModel?t.template(a):t.template(d)},ui:{selectGender:"._selectGender",selectMinYear:"._selectMinYear",selectMaxYear:"._selectMaxYear",checkboxEmailVerification:"#checkboxEmailVerification",settingItemRegisterEmailDomain:"._settingItemRegisterEmailDomain",btnRegisterEmailDomain:"._btnRegisterEmailDomain",textEmailVerificationDomainCount:"._textEmailVerificationDomainCount",settingItemReverify:"._settingItemReverify",btnReverify:"._btnReverify",btnConfirmJoinType:"._btnConfirmJoinType"},events:{"click @ui.btnConfirmJoinType":"_updateJoinType","change @ui.checkboxEmailVerification":function(e){var t=this.getUI("checkboxEmailVerification"),n=this.getUI("settingItemRegisterEmailDomain"),i=this.getUI("settingItemReverify");t.prop("checked")?(n.show(),i.show(),0===this._emailVerificationDomains.length&&this.getUI("btnRegisterEmailDomain").click()):(n.hide(),i.hide())},"click @ui.btnRegisterEmailDomain":function(e){var n=m.openAsLayer(this.bandCore,this._emailVerificationDomains);this.listenTo(n,m.EVENTS.CONFIRM,(function(e){this._emailVerificationDomains=e,t.isEmpty(this._emailVerificationDomains)?this.getUI("checkboxEmailVerification").prop("checked",!1).change():this.getUI("textEmailVerificationDomainCount").text(this._emailVerificationDomains.length)})),this.listenTo(n,m.EVENTS.CANCEL,(function(){t.isEmpty(this._emailVerificationDomains)&&this.getUI("checkboxEmailVerification").prop("checked",!1).change()}))},"click @ui.btnReverify":function(e){l.openAsLayer({title:IM("ui.label.select_item"),confirm:IM("ui.label.confirm"),cancel:IM("ui.label.cancel"),radioItems:[{label:IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify_option",{days:90}),value:90},{label:IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify_option",{days:180}),value:180},{label:IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify_option",{days:365}),value:365}],withoutHiding:!0}).once("modal:confirm",t.bind((function(e){o.openLayer({headerTitle:IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.confirm_title"),bodyDesc:[IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.confirm_desc_1"),IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.confirm_desc_2"),IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.confirm_desc_3")],confirm:IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.confirm_btn_txt"),cancel:IM("ui.label.cancel")}).once(o.EVENTS.CONFIRM,t.bind((function(){_.resendBandEmailVerification(this.bandNo,e).then((function(){alert(IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.reverify.completed"))}))}),this))}),this))}},initialize:function(e){this.bandCore=e.bandCore,this.bandNo=this.bandCore.bandNo,this._bandOptionModel=null,this._emailVerificationSettable=!this.bandCore.isRecruiting,this._emailVerificationDomains=[],this._loading=!0},serializeData:function(){return this._loading?{_loading_size:r.Size.MEDIUM}:{allowedGender:this._bandOptionModel.getAllowedGender(),maxYearForAge:c.BAND_JOIN_CONDITION.MAX_YEAR_FOR_AGE,minYearForAge:c.BAND_JOIN_CONDITION.MIN_YEAR_FOR_AGE,minBirthYear:this._bandOptionModel.getMinBirthYear(),maxBirthYear:this._bandOptionModel.getMaxBirthYear(),emailVerificationSettable:this._emailVerificationSettable,emailVerificationEnabled:this._bandOptionModel.isEmailVerificationEnabled(),emailVerificationDomainCount:this._emailVerificationDomains.length}},onAttach:function(){var e=[u.getBandOption(this.bandNo)];this._emailVerificationSettable&&e.push(_.getBandEmailVerification(this.bandNo)),$.when.apply($,e).then(t.bind((function(e,t){this._bandOptionModel=e,this._emailVerificationDomains=t&&t.email_verification_domains||[],this._loading=!1,this.render()}),this))},_updateJoinType:function(){var e=this.ui.selectGender.find("option:selected").val(),n=this.ui.selectMinYear.find("option:selected").val(),s=this.ui.selectMaxYear.find("option:selected").val();if(i.toNumber(s)<i.toNumber(n)){var a=s;s=n,n=a}var o=this.getUI("checkboxEmailVerification").prop("checked"),l=[h.setBandJoinCondition(this.bandNo,e,n,s,o)];this._emailVerificationSettable&&l.push(_.setBandEmailVerification(this.bandNo,this._emailVerificationDomains)),$.when.apply($,l).then(t.bind((function(){p.latestContents(this.bandCore).go()}),this))}});return b.build=function(e){return new b({bandCore:e})},b}.call(t,n,t,e))||(e.exports=i)},1893:function(e,t){e.exports='<% // 가입 조건 설정 %>\n<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.band_join_condition.title") %></h1>\n    </header>\n</div>\n\n<ul class="sSettingList">\n<% // 성별 %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n\t\t    <label for="gender" class="label"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_gender") %></label>\n        </div>\n        <div class="itemSide -wAuto">\n            <span class="uSelect -bg" style="min-width:105px">\n                <select id="gender" class="_selectGender gColorBk4">\n                    <option value="none" <% if (allowedGender && allowedGender == "none") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                    <option value="male" <% if (allowedGender && allowedGender == "male") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.join_condition_male") %></option>\n                    <option value="female" <% if (allowedGender && allowedGender == "female") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.join_condition_female") %></option>\n                </select>\n            </span>\n        </div>\n    </li>\n<% // 나이 %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_age") %></span>\n        </div>\n        <div class="itemSide -wAuto">\n            <span class="uTableList -wAuto -inline gMal20">\n                <label for="maxAge" class="cell gColorBk4"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_min_age") %></label>\n                <span class="cell gPal10">\n                    <span class="uSelect -bg" style="min-width:77px">\n                        <select id="maxAge" class="_selectMaxYear gColorBk4">\n                            <option value="none" <% if (maxBirthYear && maxBirthYear == "none") { %>selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                                    <% for (var i = maxYearForAge; i >= minYearForAge; i--) { %>\n                            <option value="<%= i %>" <% if (maxBirthYear && maxBirthYear == i) { %>selected<% } %>><%= IM(\'bandsetting.band_join_condition.age.birth_year\', {birthYear: i}) %></option>\n                                    <% } %>\n                        </select>\n                    </span>\n                </span>\n\n                <span class="cell gPal16 gPar16 gColorBk4">-</span>\n\n                <label for="minAge" class="cell gColorBk4"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_max_age") %></label>\n                <span class="cell gPal10">\n                    <span class="uSelect -bg" style="min-width:77px">\n                        <select id="minAge" class="_selectMinYear gColorBk4">\n                            <option value="none" <% if (minBirthYear && minBirthYear == "none") { %>selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                                    <% for (var i = maxYearForAge; i >= minYearForAge; i--) { %>\n                            <option value="<%= i %>" <% if (minBirthYear && minBirthYear == i) { %>selected<% } %>><%= IM(\'bandsetting.band_join_condition.age.birth_year\', {birthYear: i}) %></option>\n                                    <% } %>\n                        </select>\n                    </span>\n                </span>\n            </span>\n        </div>\n    </li>\n    \x3c!--  이메일 인증 ON/OFF 설정  --\x3e\n    <% if (emailVerificationSettable) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <label for="checkboxEmailVerification" class="label"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.title\') %></label>\n            <span class="subTxt"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.desc\') %></span>\n        </div>\n        <div class="itemSide">\n            <label for="checkboxEmailVerification" class="uCheck -switch">\n                <input type="checkbox" id="checkboxEmailVerification" class="checkInput" <%= emailVerificationEnabled ? \'checked="checked"\' : \'\' %>>\n                <span class="checkLabel">\n                    <span class="shape "></span>\n                    <span class="text"></span>\n                </span>\n            </label>\n        </div>\n    </li>\n    \x3c!--  이메일 등록  --\x3e\n    <li class="sSettingItem _settingItemRegisterEmailDomain" style="<%= emailVerificationEnabled ? \'\' : \'display:none\' %>">\n        <button type="button" class="-flexible -arrowText _btnRegisterEmailDomain">\n            <div class="itemContent">\n                <label class="label"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.register_email\') %></label>\n            </div>\n            <div class="itemSide">\n                <span class="sideTxt _textEmailVerificationDomainCount"><%= emailVerificationDomainCount %></span>\n            </div>\n        </button>\n    </li>\n    \x3c!--  재인증 요청  --\x3e\n    <li class="sSettingItem _settingItemReverify" style="<%= emailVerificationEnabled ? \'\' : \'display:none\' %>">\n        <button type="button" class="-flexible -arrowText _btnReverify">\n            <div class="itemContent">\n                <label class="label"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.request_reverification.title\') %></label>\n                <span class="subTxt"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.request_reverification.desc\') %></span>\n            </div>\n        </button>\n    </li>\n    <% } %>\n<% // 멤버 가입 승인 %>\n</ul>\n<% // 저장 버튼 %>\n<div class="btnFooter">\n    <button type="button" class="_btnConfirmJoinType uButton -sizeL -confirm"><%= IM("ui.label.save") %></button>\n</div>'},1894:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(4),a=n(1895),o=n(486),l=n(1896),r=n(659),d=n(555),c={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},h=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DEmailDomainregisterLayerView"},template:t.template(a),templateContext:function(){return{domainCount:this.collection.length}},ui:{inputEmailDomain:"#inputEmailDomain",btnAdd:"._btnAdd",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},regions:{emailDomainRegion:{el:"._emailDomainRegion",replaceElement:!0}},events:{"click @ui.btnConfirm":function(){var e=this.collection.map((function(e){return e.get("domain")}));this.trigger(c.CONFIRM,e),this.destroy()},"click @ui.btnCancel":function(e){this.destroy(),this.trigger(c.CANCEL)},"click @ui.btnAdd":"_addDomain",keydown:function(e){if(e.keyCode===d.KEY_2&&e.shiftKey)return!1},"keyup @ui.inputEmailDomain":function(e){e.keyCode===d.ENTER&&this._addDomain(),this._toggleDomainAddButton()}},collectionEvents:{"add remove":"_handleDomainCollectionChange"},initialize:function(e){this._bandCore=e.bandCore},onAttach:function(){this.getUI("inputEmailDomain").focus(),this.showChildView("emailDomainRegion",new s.CollectionView({tagName:"ul",className:"listLine",childView:l,collection:this.collection,emptyView:s.View.extend({tagName:"p",className:"uEmpty",attributes:{style:"height:204px"},template:t.template("<span class=\"gPar7 gPal7\"><%= IM('bandsetting.band_type_join_setting.txt.join_condition_email_verification.domain_register.empty_text') %></span>")})}))},_handleDomainCollectionChange:function(){this.collection.length>=3?(this.getUI("inputEmailDomain").prop("disabled",!0),this.getUI("btnConfirm").focus()):this.getUI("inputEmailDomain").prop("disabled",!1).focus()},_toggleDomainAddButton:function(){this.getUI("inputEmailDomain").val().trim().length>0?this.getUI("btnAdd").addClass("-active").prop("disabled",!1):this.getUI("btnAdd").removeClass("-active").prop("disabled",!0)},_addDomain:function(){var e=this.getUI("inputEmailDomain").val();r.checkBandEmailVerificationDomains([e]).done(t.bind((function(n){t.isEmpty(n.invalid_domains)?(this.collection.add({domain:e}),this.getUI("inputEmailDomain").val(""),this._toggleDomainAddButton()):alert(IM("bandsetting.band_type_join_setting.txt.join_condition_email_verification.register_wrong_domain"))}),this))}});return h.EVENTS=c,h.openAsLayer=function(e,n){var s=new i.Collection(t.map(n,(function(e){return{domain:e}}))),a=new h({bandCore:e,collection:s});return o.open(a),a},h}.call(t,n,t,e))||(e.exports=i)},1895:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.register_email\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap" style="height:245px;">\n            <div class="searchWrap gMar-20 gMal-20">\n                <label class="inputLabel">@</label>\n                <span class="inputWrap">\n                    <input type="text" id="inputEmailDomain" class="inputSearch gFs13 gColorBk2" placeholder="<%= IM(\'bandsetting.band_type_join_setting.txt.join_condition_email_verification.domain_register.input_placeholder\') %>" <%= domainCount == 3 ? \'disabled=""\' : \'\' %>>\n                </span>\n                <span class="btn">\n                    <button type="button" class="_btnAdd btnSearch uButton -sizeS -default" disabled="disabled"><%= IM(\'ui.label.add\') %></button>\n                </span>\n            </div>\n            <div class="_emailDomainRegion"></div>\n        </div>\n    </div>\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},1896:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1897);return i.View.extend({tagName:"li",className:"flexList -h52 bLine",attributes:{"data-viewname":"DEmailVerificationDomainListItemView"},template:t.template(s),events:{"click ._btnDelete":function(e){this.model.collection.remove(this.model)}}})}.call(t,n,t,e))||(e.exports=i)},1897:function(e,t){e.exports='<span class="text -ellipsis gFs14">@<%= domain %></span>\n<span class="etc">\n    <button class="uButton -iconListRemove _btnDelete"><span class="gSrOnly"><%= IM(\'ui.label.delete\') %></span></button>\n</span>'},1898:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(541),a=n(153),o=n(162),l=n(499),r=n(498),d=n(1089),c=n(154),h=n(1899),u=n(1901),p=n(933),m=n(538),_=n(16),b=i.View.extend({attributes:{"data-view":"DBandQuotaSettingView",class:"sSettingBand gContentCardShadow"},ui:{chkSetStatusAnnounce:"._chkSetStatusAnnounce"},events:{"click @ui.chkSetStatusAnnounce":function(e){$(e.target).is(":checked")||window.confirm(IM("setting.quota.status_notice.off"))?this._setStatusAnnounce():this.render()},"click ._archiveLargeFiles":"_archiveLargeFiles"},getTemplate:function(){return this._dataFetched?t.template(u):t.template(r)},templateContext:function(){return{moment:_}},initialize:function(e){this._bandNo=e.bandData.getBandCore().bandNo,this._changeStatusAnnounceable=!1},serializeData:function(){return this._dataFetched?{dataFetched:!0,quotaRestInfo:this._quotaRestInfo,quotaStatus:this._bandQuota,changeStatusAnnounceable:this._changeStatusAnnounceable,file_quota_policy:this._fileQuotaStatusMassage(),storageInfo:this._storageInfo,restStorageBoughtDay:this._restStorageBoughtDay,restStorageBoughtHour:this._restStorageBoughtHour,restStorageBoughtMinute:this._restStorageBoughtMinute,restStorageBoughtLeftMessage:this._restStorageBoughtLeftMessage,bandQuotaUrl:this.options.bandData.getBandCore().makeBandRouteUrl(a.GROUP_BAND_SETTING_MEDIA_QUOTA_STORAGE,o.PAGE_BAND_SETTING_MEDIA_QUOTA_STORAGE,{band_no:this._bandNo})}:{dataFetched:!1,_loading_size:l.Size.MEDIUM}},onAttach:function(){$.when(c.wrapActivePromise(s.getQuotaInfo(this._bandNo),this),this._getStorageInfo(),c.wrapActivePromise(m.getBandOption(this._bandNo),this)).then(t.bind((function(e,t,n){n.isPermittedConfigureContentsQuota()?(this._storageInfo=null,this._restStorageBoughtDay=null,this._restStorageBoughtHour=null,this._restStorageBoughtMinute=null,this._restStorageBoughtLeftMessage=null,t&&(this._storageInfo=t,this._restStorageBoughtTime=_.duration(_(t.expire_time).diff(_())),this._restStorageBoughtDay=Math.ceil(this._restStorageBoughtTime.as("days")),this._restStorageBoughtHour=Math.ceil(this._restStorageBoughtTime.as("hours")),this._restStorageBoughtMinute=Math.ceil(this._restStorageBoughtTime.as("minutes")),this._restStorageBoughtLeftMessage=this._checkRestBougth()),this._dataFetched=!0,this._quotaRestInfo=d.quotaRestInfo(n),this._bandQuota=e.band_quota,this._changeStatusAnnounceable=e.band_quota.is_status_announceable,this._fileQuotaPolicy=e.band_quota.file_quota_policy,this.render()):this.options.bandData.getBandCore().goBandDForced(a.GROUP_BAND_SETTING,o.PAGE_BAND_SETTING,{band_no:this._bandNo})}),this)).fail(t.bind((function(){this.options.bandData.getBandCore().goBandDForced(a.GROUP_BAND_HOME,o.PAGE_BAND_HOME,{band_no:this._bandNo})}),this))},_getStorageInfo:function(){var e=$.Deferred();return s.getStorageInfo(this._bandNo).then((function(t){t=t.quota_purchase_info;e.resolve(t)}),(function(){e.resolve()})),e.promise()},_setStatusAnnounce:function(){this._changeStatusAnnounceable=!this._changeStatusAnnounceable;var e={bandNo:this._bandNo,receive:this._changeStatusAnnounceable};s.setQuotaInfo(e).then(t.bind((function(){this.render()}),this))},_checkRestBougth:function(){if(this._restStorageBoughtDay<=7)var e=IM("setting.rest.storage.bougth.day",{value:this._restStorageBoughtDay});if(this._restStorageBoughtDay<1)e=IM("setting.rest.storage.bougth.hour",{value:this._restStorageBoughtHour});if(this._restStorageBoughtHour<=1)e=IM("setting.rest.storage.bougth.minute",{value:this._restStorageBoughtMinute});if(this._restStorageBoughtMinute<=1)e=IM("setting.rest.storage.bougth.minute",{value:1});return e},_archiveLargeFiles:function(e){e.preventDefault();var n={bandNo:this._bandNo,quota:this._fileQuotaPolicy},i=h.buildAsLayer(n);this.listenTo(i,"quota:refresh",t.bind(this._refreshBandOptionModel,this))},_refreshBandOptionModel:function(e){return s.setQuotaInfo(e).then(t.bind((function(){p.resetCachedQuotaStatus(),this.onAttach()}),this))},_fileQuotaStatusMassage:function(){return"all"===this._fileQuotaPolicy?IM("bandsetting.quota.label.all"):"small_only"===this._fileQuotaPolicy?IM("bandsetting.quota.label.small_only"):void 0}});return b.buildDBandQuotaSettingView=function(e){return new b({bandData:e})},b}.call(t,n,t,e))||(e.exports=i)},1899:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(486),a=n(155),o=n(510),l=n(1900),r=i.View.extend({attributes:{"data-view":"DBandQuotaSettingLargeFilesView"},template:t.template(l),ui:{smallOnly:"._small_only",checkInput:"._checkInput",all:"._all",btnConfirm:"._btnConfirm",btnClose:"._btnClose"},events:{"click @ui.checkInput":function(){this.ui.checkInput.filter(":checked").attr("id")===this.file_quota_policy?this.ui.btnConfirm.attr("disabled",!0):this.ui.btnConfirm.attr("disabled",!1)},"click @ui.btnConfirm":"_setArchiveLargerFiles","click @ui.btnClose":"destroy"},initialize:function(e){this.bandNo=e.bandNo,this.file_quota_policy=e.file_quota_policy,this.bandData=a.get(e.bandNo)},templateContext:function(){return{description:this.bandData.getBandCore().showBandTermAsPage()?IM("pageband.band_setting.quota.storage.large_files.layer.desc"):IM("setting.quota.storage.large_files.layer.desc")}},onAttach:function(){this.ui.btnConfirm.attr("disabled",!0),"small_only"===this.file_quota_policy?this.ui.smallOnly.prop("checked",!0):this.ui.all.prop("checked",!0)},_setArchiveLargerFiles:function(){var e=this.ui.checkInput.filter(":checked").attr("id"),n="",i="";"all"===e&&(n=IM("setting.quota.storage.large_files.option.all"),i=IM("setting.quota.storage.large_files.all.description")),"small_only"===e&&(n=IM("setting.quota.storage.large_files.option.small_only"),i=IM("setting.quota.storage.large_files.small.description")),o.openLayer({headerTitle:n,bodyDesc:i,breakWordKeepAll:!0}).once(o.EVENTS.CONFIRM,t.bind(this._refreshBandOptionModel,this))},_refreshBandOptionModel:function(){var e=this.ui.checkInput.filter(":checked").attr("id"),t={bandNo:this.bandNo,quota:e};this.trigger("quota:refresh",t),this.destroy()}});return r.buildAsLayer=function(e){var t=new r({bandNo:e.bandNo,file_quota_policy:e.quota});return s.open(t),t},r}.call(t,n,t,e))||(e.exports=i)},1900:function(e,t){e.exports='<section class="lyWrap">\n\t<div class="lyContent">\n\t\t<header class="header">\n\t\t\t<h1 class="title"><%= IM("setting.quota.storage.large_files_Live.title") %></h1>\n\t\t</header>\n\t\t<div class="main">\n\t\t\t<p class="p"><%= description %></p>\n\t\t\t<ul class="selectArea">\n\t\t\t\t<li>\n\t\t\t\t\t<label for="small_only" class="uCheck -radio ">\n\t\t\t\t\t\t<input type="radio" id="small_only" name="radio" class="checkInput _small_only _checkInput">\n\t\t\t\t\t\t<span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("setting.quota.storage.large_files.option.small_only") %></span>\n                        </span>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<label for="all" class="uCheck -radio ">\n\t\t\t\t\t\t<input type="radio" id="all" name="radio" class="checkInput _all _checkInput">\n\t\t\t\t\t\t<span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("setting.quota.storage.large_files.option.all") %></span>\n                        </span>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<footer class="footer">\n\t\t\t<button type="button" class="uButton -cancel _btnClose"><%= IM("ui.label.cancel") %></button>\n\t\t\t<button type="button" class="uButton -confirm _btnConfirm"><%= IM("ui.label.confirm") %></button>\n\t\t</footer>\n\t</div>\n</section>'},1901:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.quota_status.title") %></h1>\n    </header>\n</div>\n<ul class="sSettingList">\n    <li class="sSettingItem">\n        <div class="progressWrap">\n            \x3c!-- [D] 10%미만 또는 1GB 이하 일때 -colorError 클래스 추가 --\x3e\n            <div class="progressCircle <%= quotaRestInfo.color %>" data-progress="<%= Math.floor(quotaRestInfo.usePercent) %>">\n                <div class="circle">\n                    <%\n                    var rotateValue =  quotaRestInfo.usePercent * 1.8;\n                    var rotateValue2 =  quotaRestInfo.usePercent * 1.8 * 2;\n                    %>\n                    <div class="full circleSlice" style="transform: rotate(<%= rotateValue %>deg);">\n                        <div class="circleFill" style="transform: rotate(<%= rotateValue %>deg);"></div>\n                    </div>\n                    <div class="circleSlice">\n                        <div class="circleFill" style="transform: rotate(<%= rotateValue %>deg);"></div>\n                        <div class="circleFill circleBar" style="transform: rotate(<%= rotateValue2 %>deg);"></div>\n                    </div>\n                </div>\n                <div class="circleInset">\n                    <div class="percentage">\n                        <div class="numbers">\n                            <span>\n                                <% if (! quotaStatus.has_bought_quota ) { %>\n                                <%= quotaRestInfo.restPercent %>%\n                                <% } else { %>\n                                <%= quotaRestInfo.gigabyte %>GB\n                                <% } %>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <% if(quotaRestInfo.zero) { %>\n            <p class="progressDesc <%= quotaRestInfo.color %>">\n                0% <%= IM("setting.quota.storage.full") %>\n            </p>\n            <% } else { %>\n            <p class="progressDesc">\n                <% if (! quotaStatus.has_bought_quota ) { %>\n                <%= IM("setting.quota.storage.remaining.percent", {percent: quotaRestInfo.restPercent}) %>\n                <% } else { %>\n                <%= IM("setting.quota.storage.remaining.gigabyte", {gigabyte: quotaRestInfo.gigabyte}) %>\n                <% } %>\n            </p>\n            <% } %>\n        </div>\n    </li>\n    <li class="sSettingItem -minHeightAuto">\n        <div class="attention -bg -wFull -tLine -bLine">\n            <div class="noticeArea">\n                <p class="noticeText">\n                    <%= IM("setting.quota.guide_description1") %><br>\n                    <%= IM(\'setting.quota.guide_band_mission\') %>\n                </p>\n                <p class="noticeText"><%= IM("setting.quota.guide_description2") %></p>\n                <p class="noticeText"><%= IM("setting.quota.guide_description3") %></p>\n                <p class="noticeText"><%= IM("setting.quota.guide_description4") %></p>\n            </div>\n        </div>\n    </li>\n    <li class="sSettingItem">\n        <a href="<%- bandQuotaUrl %>" class="-flexible -arrow _goQuotaStorage" role="button">\n            <div class="itemContent">\n                <span class="label"><%= IM("setting.quota.storage.manage.title") %></span>\n                <span class="subTxt"><%= IM("setting.quota.description2.text") %></span>\n            </div>\n            <% if(quotaRestInfo.zero) { %>\n            <span class="error"><span class="gSrOnly"><%= IM("setting.home.not_enough.storage") %></span></span>\n            <% } %>\n        </a>\n    </li>\n    <li class="sSettingItem">\n        <a href="#" class="-flexible -arrowText _archiveLargeFiles" role="button">\n            <div class="itemContent">\n                <span class="label"><%= IM("setting.quota.storage.large_files_Live.title") %></span>\n                <span class="subTxt"><%= IM("setting.quota.storage.large_files.description") %></span>\n            </div>\n            <div class="itemSide">\n                <span class="sideTxt"><%= file_quota_policy %></span>\n            </div>\n        </a>\n    </li>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("setting.quota.storage.status.notice.title") %></span>\n            <span class="subTxt"><%= IM("setting.quota.description3.text") %></span>\n        </div>\n        <div class="itemSide">\n            <label class="uCheck -switch">\n                <input type="checkbox" id="chkSetStatusAnnounce" class="_chkSetStatusAnnounce checkInput" <% if( changeStatusAnnounceable ) { %> checked="checked"<% } %>>\n                <span class="checkLabel">\n                    <span class="shape"></span>\n                    <span class="text"></span>\n                </span>\n            </label>\n        </div>\n    </li>\n    <li class="sSettingItem -heightAuto">\n        <% if (! quotaStatus.has_bought_quota ) { %>\n        <p class="desc"><%= IM("setting.quota.storage.need_buy") %></p>\n        <% } else { %>\n        <div class="itemContent">\n            <span class="name"><%= IM("setting.quota.storage.bought.title") %></span>\n            <span class="subTxt"><%= IM("setting.quota.storage.buy.only_app") %></span>\n        </div>\n        <div class="itemSide -wAuto">\n            <span class="sideTxt">\n                <em class="volume"><%= storageInfo.volume_in_gigabyte %>GB</em>\n                <span class="date"><%= IM("expiration_date") %> : <%= moment(storageInfo.expire_time).format(\'YYYY.MM.DD\') %></span>\n\n                <span class="date -colorError"><%= restStorageBoughtLeftMessage %></span>\n\n            </span>\n        </div>\n        <% } %>\n    </li>\n</ul>'},1902:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(541),a=n(153),o=n(162),l=n(499),r=n(498),d=n(154),c=n(1089),h=n(1903),u=n(1907),p=n(1913),m=n(538),_=i.View.extend({attributes:{"data-view":"DBandQuotaStorageView",class:"sSettingBand gContentCardShadow"},ui:{fileList:"._file",videoList:"._video",progress:"._progress",restPercent:"._restPercent",restGigabyte:"._restGigabyte",changePercent:"._changePercent"},regions:{files:{el:"._fileList",replaceElement:!0}},events:{"click @ui.fileList":function(e){var t=$(e.target);this.ui.videoList.removeClass("active sf_color sf_afterBg"),t.addClass("active sf_color sf_afterBg"),this.stopListening(this.getChildView("files")),this.showChildView("files",h.buildDBandQuotaStorageFileView({bandData:this._bandData,orderBy:"created_at"})),this.listenTo(this.getChildView("files"),"QuotaRestInfo:change",this._settingQuotaInfomation)},"click @ui.videoList":function(e){var t=$(e.target);this.ui.fileList.removeClass("active sf_color sf_afterBg"),t.addClass("active sf_color sf_afterBg"),this.stopListening(this.getChildView("files")),this.showChildView("files",u.buildDBandQuotaStorageVideoView(this.bandNo,"created_at",this.options.bandData.isAdaptPageFixedPositionForQuotaStorage())),this.listenTo(this.getChildView("files"),"QuotaRestInfo:change",this._settingQuotaInfomation)}},getTemplate:function(){return this._dataFetched?t.template(p):t.template(r)},initialize:function(e){this._bandData=e.bandData,this.bandNo=this._bandData.getBandCore().bandNo},serializeData:function(){return this._dataFetched?{dataFetched:!0,quotaRestInfo:this._quotaRestInfo,quotaStatus:this._bandQuota}:{dataFetched:!1,_loading_size:l.Size.MEDIUM}},onRender:function(){this._dataFetched&&(this.showChildView("files",u.buildDBandQuotaStorageVideoView(this.bandNo,"created_at",this.options.bandData.isAdaptPageFixedPositionForQuotaStorage())),this.listenTo(this.getChildView("files"),"QuotaRestInfo:change",this._settingQuotaInfomation))},onAttach:function(){$.when(d.wrapActivePromise(s.getQuotaInfo(this.bandNo),this),d.wrapActivePromise(m.getBandOption(this.bandNo),this)).then(t.bind((function(e,t){t.isPermittedConfigureContentsQuota()?(this._dataFetched=!0,this._bandQuota=e.band_quota,this._quotaRestInfo=c.quotaRestInfo(t),this.render()):this.options.bandData.getBandCore().goBandDForced(a.GROUP_BAND_SETTING,o.PAGE_BAND_SETTING,{band_no:this.bandNo})}),this)).fail(t.bind((function(){this.options.bandData.getBandCore().goBandDForced(a.GROUP_BAND_HOME,o.PAGE_BAND_HOME,{band_no:this.bandNo})}),this))},_settingQuotaInfomation:function(e,t){if(this.ui.progress.removeClass("-fixed"),this._quotaRestInfo.restPercent!=e.restPercent){var n=e.restPercent.concat("%"),i=e.gigabyte.concat("GB");this.ui.restPercent.html(n),this.ui.restGigabyte.html(i),this.ui.changePercent.removeClass("-colorError").removeClass("-point"),this.ui.changePercent.addClass(e.color).css("width",n)}t&&this.ui.progress.addClass("-fixed")}});return _.buildDBandQuotaStorageView=function(e){return new _({bandData:e})},_}.call(t,n,t,e))||(e.exports=i)},1903:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(541),o=n(1052),l=n(154),r=n(1089),d=n(55),c=n(512),h=n(1904),u=n(538),p=n(1007),m=n(1281),_=s.View.extend({tagName:"div",attributes:{"data-view":"DBandQuotaStorageFileView",class:"manageWarp _fileList"},regions:{filesContainer:{el:"[data-uiselector=filesContainer]",replaceElement:!0}},ui:{detailSort:"._detailSort",orderBy:"._orderBy",resultEmptyMsg:"._resultEmptyMsg",manage:"._manage",fileSave:"._fileSave",fileDel:"._fileDel",fileWrap:"._fileWrap",selectCheckboxStatus:"._selectCheckboxStatus",checkLength:"._checkLength",cancelCheck:"._cancelCheck",toastPopup:"._toastPopup",checkApplied:"._checkApplied"},events:{"change @ui.orderBy":function(e){var n;n=1==t(e.target).find(":selected").length?t(e.target).find(":selected")[0].value:"created_at",this._orderBy=n,this._resetCheckbox(),this._collectionFetch()},"click @ui.manage":"_toggleCheckMode","click @ui.checkApplied":"_inquireQuotaBeingAppliedToFiles","click @ui.fileDel":function(){var e=this.collection.getCheckedFiles();e.length>=1&&window.confirm(IM("confirm.delete.do_not_restore"))&&l.wrapActivePromise(o.deleteFiles(this.bandNo,e),this).then(i.bind((function(){this._resetCheckbox(),this._collectionFetch()}),this))},"click @ui.cancelCheck":"_resetCheckbox"},childViewEvents:{"file:checked":function(){this.ui.checkLength.text(this.collection.getCheckedFileCount())}},initialize:function(e){this._bandData=e.bandData,this._orderBy=e.orderBy,this.isPageBand=this._bandData.isAdaptPageFixedPositionForQuotaStorage(),this.bandNo=this._bandData.getBandCore().bandNo,this.positionFixed=!1,this._manageMode=!1,this.collection=p.build(),this._checkValidator=i.bind((function(e){return!(e&&this.collection.getCheckedFileCount()>=20)||(alert(IM("file.select_up_to_count",{count:20})),!1)}),this)},template:i.template(h),onRender:function(){var e=m.buildQuotaFileListView({collection:this.collection,bandData:this._bandData,checkValidator:this._checkValidator});this.showChildView("filesContainer",e),this._collectionFetch()},_collectionFetch:function(){this.stopListening(c);var e=t.when(a.getQuotaInfo(this.bandNo),u.getBandOption(this.bandNo),this.collection.fetchFilesForQuota({bandNo:this.bandNo,orderBy:this._orderBy}));l.wrapActivePromise(e,this).then(i.bind((function(e,t){e.band_quota.is_quota_being_applied_to_files&&this.ui.toastPopup.show(),this.collection.length<=0&&(this.ui.fileWrap.hide(),this.ui.resultEmptyMsg.css("display","table"));var n=this.isPageBand?442:231,i=this.isPageBand?392:112;d.getHeight()<this.getChildView("filesContainer").$el.height()+n?(this.ui.toastPopup.addClass("-fixed"),this.ui.selectCheckboxStatus.addClass("-fixed"),this.positionFixed=!0):(this.ui.toastPopup.removeClass("-fixed"),this.ui.selectCheckboxStatus.removeClass("-fixed"),this.positionFixed=!1),this._quotaRestInfo=r.quotaRestInfo(t),this.trigger("QuotaRestInfo:change",this._quotaRestInfo,this.positionFixed),this.listenTo(c,"window:scroll:bottom",(function(){this.collection.fetchMoreFilesForQuota()})),this.listenTo(c,"window:scroll:down",(function(e){e>i&&this.ui.detailSort.addClass("-fixed")})),this.listenTo(c,"window:scroll:up",(function(e){e<i&&this.ui.detailSort.removeClass("-fixed")}))}),this))},_resetCheckbox:function(){this.collection.disableFileListCheckable(),this.ui.manage.css("display","inline-block"),this.ui.fileDel.hide(),this.ui.checkLength.text("0"),this.ui.selectCheckboxStatus.hide(),this._manageMode=!1},_toggleCheckMode:function(){this.collection.isEmpty()||(this._manageMode||(this.ui.manage.hide(),this.collection.enableFileListCheckable(),this.ui.fileDel.show()),this.ui.selectCheckboxStatus.show(),this._manageMode=!0)},_inquireQuotaBeingAppliedToFiles:function(){this.ui.toastPopup.hide(),this._collectionFetch()}});return _.buildDBandQuotaStorageFileView=function(e){return new _(e)},_}.call(t,n,t,e))||(e.exports=i)},1904:function(e,t){e.exports='<div class="detailSort _detailSort">\n    <div class="uSelectArea">\n        <div class="uSelect -h20 -textType -sizeS">\n            <label for="sort" class="gSrOnly"><%= IM("ui.label.selection") %></label>\n            <select id="sort" class="_orderBy">\n                <option value="created_at" class="created_at"><%= IM("selection.label.created_at") %></option>\n                <option value="file_size" class="file_size"><%= IM("selection.label.file_size") %></option>\n            </select>\n        </div>\n    </div>\n    <div class="action">\n        <div class="item">\n            <button type="button" class="uButton -text -manage _manage"><%= IM("management") %></button>\n            <div class="btns">\n                <button type="button" class="uButton -text _fileDel" style="display:none;"><%= IM("ui.label.delete") %></button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="_fileWrap fileWrap">\n    <div data-uiselector="filesContainer"></div>\n</div>\n<div class="status _selectCheckboxStatus" style="display:none;">\n    <p><%= IM("selected.count.label") %></p>\n    <button type="button" class="btnClose -active _cancelCheck"><%= IM("mode.all.clear") %></button>\n</div>\n<p class="uEmpty _resultEmptyMsg" style="display:none;">\n    <span>\n        <strong><%= IM("there.is.no.file") %></strong>\n    </span>\n</p>\n<div class="toastPopup _toastPopup" style="display:none;">\n    <p class="text"><%= IM("setting.quota.storage.exchange.unlimited") %></p>\n    <button type="button" class="buttonClose _checkApplied"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n</div>'},1905:function(e,t,n){var i=n(0),s=n(4),a=n(1906),o=n(1052),l=n(156),r=n(154),d=n(933),c=n(668),h={DEFAULT:"DEFAULT",QUOTA_FILE:"QUOTA_FILE",FOLDER_FILE:"FOLDER_FILE"},u=s.View.extend({tagName:"li",className:"cFileItem uFlexItem",attributes:{"data-viewname":"DBandFileItemView"},template:i.template(a),ui:{checkWrap:"._checkWrap",checkbox:"._checkbox",originLink:"._originLink",quotaBtn:"._quotaBtn",downloadLink:"._downloadLink"},events:{"click @ui.checkbox":function(e){if(this._isRestricted)return c.openSimpleAlert(IM("post.msg.post_is_restricted")),void e.preventDefault();this._checkValidator(this.ui.checkbox.prop("checked"))||e.preventDefault()},"change @ui.checkbox":function(){var e=this.ui.checkbox.prop("checked");this.model.setFileChecked(e),this.trigger("file:checked",{file:this.model,checked:e})},"click @ui.originLink":function(e){e.isDefaultPrevented()||(e.preventDefault(),this._originUrl?o.openOriginContent(this._bandData.getBandCore(),this.model,this):this._downloadFile())},"click @ui.quotaBtn":function(e){e.preventDefault(),this._startSettingFileIntoQuota()},"click @ui.downloadLink":function(e){e.preventDefault(),this._downloadFile()}},modelEvents:{"file:checked":function(e){this.ui.checkbox.prop("checked",e),this.model.setFileChecked(e)},"file:checkable":function(e){this._checkable=e,this.ui.checkWrap.css("display",e?"":"none"),this.ui.checkbox.prop("checked",!1),this.model.setFileChecked(!1)},"file:modified":"render"},initialize:function(e){this._bandData=e.bandData,this._viewType=h[e.viewType]||h.DEFAULT,this._checkable=!0===e.checkable,this._checkValidator=i.isFunction(e.checkValidator)?e.checkValidator:i.constant(!0),this._bandNo=this._bandData.getBandCore().bandNo,this._isRestricted=this.model.isRestrictedFile(),this._originUrl=this._isRestricted?null:o.getOriginLabel(this.model)},serializeData:function(){var e=this._getFileType(),t={viewId:this.cid,checkable:this._checkable,originUrl:this._originUrl,originLabel:this._getOriginLabel(),fileIcon:e,svgIcon:"#ico"+e,fileName:this._isRestricted?IM("file.restricted_file_name"):this._escapeSearchResult(this.model.getFileName()),isRestricted:this._isRestricted};return this._isRestricted||i.extend(t,{fileSize:l.toStringFileSize(this.model.getFileSize()),fileDate:l.formatFileDate(this.model.getFileCreatedAt()),authorName:this._escapeSearchResult(this.model.getFileAuthorName()),expirationText:this._getExpirationText(),quotaBtn:this._canFileSetIntoQuota(),warningText:this._getWarningText(),folderName:this._getFolderName()}),t},_getFileType:function(){var e=this.model.getFileExtension(),t=this.model.getFileExpiresAt(),n=this.model.getFileName();return l.getFileType(e,t,n)},_getOriginLabel:function(){return this._originUrl?o.getOriginLabel(this.model):IM("web.postdetail.attachfile.txt.download")},_escapeSearchResult:function(e){return i.escape(e).replace(/&lt;strong&gt;(.*?)&lt;\/strong&gt;/g,"<strong>$1</strong>")},_canFileSetIntoQuota:function(){switch(this._viewType){case h.QUOTA_FILE:return!1;default:var e=this.model.getFileExpiresAt(),t=this.model.getFileSize();return d.canSetFileIntoQuota(this._bandNo,e,t)}},_getExpirationText:function(){switch(this._viewType){case h.QUOTA_FILE:return null;default:return l.makeExpirationText(this.model.getFileExpiresAt())}},_getWarningText:function(){switch(this._viewType){case h.QUOTA_FILE:var e=this.model.getFileExpiresAt();return e?l.isExpiredFile(e)?IM("web.postdetail.attachfile.txt.expired"):IM("setting.storage.deletion.scheduled"):null;default:return null}},_getFolderName:function(){switch(this._viewType){case h.FOLDER_FILE:return null;default:return this.model.getFileFolderName()}},_downloadFile:function(){this._downloading||(this._downloading=!0,o.downloadFile(this._bandNo,this.model).then(i.bind((function(){this._downloading=!1}),this)))},_startSettingFileIntoQuota:function(){var e=d.startSettingFileIntoQuota({bandNo:this._bandNo,fileId:this.model.getFileId()});r.wrapActivePromise(e,this).then(i.bind((function(){this.model.unsetFileExpiresAt()}),this))}});u.VIEW_TYPE=h,e.exports=u},1906:function(e,t){e.exports='<div class="uCheckBox _checkWrap" style="<%- checkable ? \'\' : \'display:none\' %>">\n    <label for="file_<%- viewId %>" class="uCheck -checkbox">\n        <input type="checkbox" id="file_<%- viewId %>" class="checkInput _checkbox">\n        <span class="checkLabel">\n            <span class="shape sf_tAfterBg"></span>\n            <span class="text"></span>\n        </span>\n    </label>\n</div>\n<a href="<%- (originUrl || \'#\') %>" class="cFileItemLink <%- isRestricted ? \'-blockedFile\' : \'\' %> _originLink" title="<%- originLabel %>">\n    <div class="gFileType <%- fileIcon %>">\n        <svg class="svgIcon" aria-hidden="true">\n            <use xlink:href="<%- svgIcon %>"></use>\n        </svg>\n    </div>\n    <div class="body">\n        <span class="text -ellipsis gFw4"><%= fileName /* 태그 있음 */ %></span>\n        <% if (!isRestricted) { // 블라인드 징계되지 않은 파일 정보 시작 %>\n        <span class="subText -ellipsis"><span class="fileSize"><%- fileSize %></span><span class="creationDate"><%- fileDate %></span><span class="authorName"><%= authorName /* 태그 있음 */ %></span></span>\n        <% if (expirationText || quotaBtn) { %>\n        <span class="subText"><% if (expirationText) { %><span class="fileSaveExpire"><%- expirationText %></span><% } %><% if (quotaBtn) { %><span class="fileSetting"><button type="button" class="buttonSetting _quotaBtn"><%- IM(\'web.postdetail.attachfile.settingSave\') %></button></span><% } %></span>\n        <% } %>\n        <% if (warningText) { %>\n        <span class="subText -colorError"><%- warningText %></span>\n        <% } %>\n        <% if (folderName) { %>\n        <span class="subText gColorGr2 -ellipsis">\n            <svg class="folderIcon svgIcon" aria-hidden="true">\n                <use xlink:href="#ico-folder"></use>\n            </svg>\n            <span class="folderName"><%- folderName %></span>\n        </span>\n        <% } %>\n        <% } // 블라인드 징계되지 않은 파일 정보 끝 %>\n    </div>\n</a>\n<div class="etc">\n    <a href="#" class="download _downloadLink"><span class="gSrOnly"><%- IM(\'web.postdetail.attachfile.txt.download\') %></span></a>\n</div>'},1907:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(541),a=n(154),o=n(1089),l=n(55),r=n(512),d=n(1908),c=n(1910),h=n(1912),u=n(26),p=n(538),m=i.View.extend({tagName:"div",attributes:{"data-view":"DBandQuotaStorageVideoView",class:"manageWarp _fileList"},regions:{videosContainer:{el:"[data-uiselector=videosContainer]",replaceElement:!0}},ui:{detailSort:"._detailSort",orderBy:"._orderBy",resultEmptyMsg:"._resultEmptyMsg",manage:"._manage",fileSave:"._fileSave",fileDel:"._fileDel",fileWrap:"._fileWrap",selectCheckboxStatus:"._selectCheckboxStatus",checkLength:"._checkLength",cancelCheck:"._cancelCheck",toastPopup:"._toastPopup",checkApplied:"._checkApplied"},events:{"change @ui.orderBy":function(e){var t;t=1==$(e.target).find(":selected").length?$(e.target).find(":selected")[0].value:"created_at",this._params={band_no:this.bandNo,order_by:t},this._resetCheckbox(),this._collectionFetch()},"click @ui.manage":"_toggleCheckMode","click @ui.checkApplied":"_inquireQuotaBeingAppliedToFiles","click @ui.fileDel":function(){var e={bandNo:this.bandNo,videoIds:this.getChildView("videosContainer").checkVideoIds};if(this.getChildView("videosContainer").checkVideoIds.length>=1&&window.confirm(IM("confirm.delete.do_not_restore")))return s.deleteVideos(e).then(t.bind((function(){this._resetCheckbox(),this._collectionFetch()}),this))},"click @ui.cancelCheck":"_resetCheckbox"},initialize:function(e){this.bandNo=e.bandNo,this.positionFixed=!1,this._manageMode=!1,this.isPageBand=e.isPageBand},template:t.template(h),onRender:function(){this.showChildView("videosContainer",new _({collection:this.collection,isPageBand:this.isPageBand})),this._collectionFetch()},onAttach:function(){var e=this.isPageBand?392:112;this.listenTo(r,"window:scroll:bottom",(function(){this.collection.fetchNextFiles()})),this.listenTo(r,"window:scroll:down",(function(t){t>e&&this.ui.detailSort.addClass("-fixed"),this._uiAdjustPosition()})),this.listenTo(r,"window:scroll:up",(function(t){t<e&&this.ui.detailSort.removeClass("-fixed"),this._uiAdjustPosition()})),this.listenTo(u.getDGlobalChannel(),u.EVENT.WINDOW_RESIZE,t.throttle((function(){this._uiAdjustPosition()}),300)),this.listenTo(this.getChildView("videosContainer"),"checkStatus",(function(e){this.ui.checkLength.text(e)}))},_collectionFetch:function(){this.stopListening(this.getChildView("videosContainer")),this.stopListening(r),$.when(a.wrapActivePromise(s.getQuotaInfo(this.bandNo),this),a.wrapActivePromise(p.getBandOption(this.bandNo),this),a.wrapActivePromise(this.collection.fetchFiles(this._params),this)).then(t.bind((function(e,t){e.band_quota.is_quota_being_applied_to_files&&this.ui.toastPopup.show(),this.collection.length<=0&&(this.ui.fileWrap.hide(),this.ui.resultEmptyMsg.css("display","table")),this._quotaRestInfo=o.quotaRestInfo(t),this._uiAdjustPosition()}),this))},_uiAdjustPosition:function(){var e=this.isPageBand?442:231;l.getHeight()<this.getChildView("videosContainer").$el.height()+e||l.getHeight()<this.getUI("fileWrap").height()+this.getUI("fileWrap").offset().top?(this.ui.toastPopup.addClass("-fixed"),this.ui.selectCheckboxStatus.addClass("-fixed"),this.positionFixed=!0):(this.ui.toastPopup.removeClass("-fixed"),this.ui.selectCheckboxStatus.removeClass("-fixed"),this.positionFixed=!1),this.trigger("QuotaRestInfo:change",this._quotaRestInfo,this.positionFixed)},_resetCheckbox:function(){this.getChildView("videosContainer").checkVideoIds=[],this.getChildView("videosContainer").resetCheckbox(),this.ui.manage.css("display","inline-block"),this.ui.fileDel.hide(),this.ui.checkLength.text("0"),this.ui.selectCheckboxStatus.hide(),this._manageMode=!1},_toggleCheckMode:function(){this.getChildView("videosContainer").getItemLength()<=0||(this._manageMode||(this.ui.manage.hide(),this.getChildView("videosContainer").showCheckbox(),this.ui.fileDel.show()),this.ui.selectCheckboxStatus.show(),this._manageMode=!0)},_inquireQuotaBeingAppliedToFiles:function(){this.ui.toastPopup.hide(),this._collectionFetch()}}),_=i.CollectionView.extend({tagName:"ul",className:"cFileList",childView:c,childViewOptions:function(){return{isPageBand:this.options.isPageBand}},initialize:function(){this.checkVideoIds=[]},childViewEvents:{"singleCheckbox:on":function(e,t){if(this.checkVideoIds.length>=20)return t.prop("checked",!1),void alert(IM("setting.quota.storage.maximum.selection_twenty"));this.checkVideoIds.push(e.model.get("video_id")),this.trigger("checkStatus",this.checkVideoIds.length)},"singleCheckbox:off":function(e){this.checkVideoIds.splice(t.indexOf(this.checkVideoIds,e.model.get("video_id")),1),this.trigger("checkStatus",this.checkVideoIds.length)}},showCheckbox:function(){this.children.each((function(e){e.ui.singleCheckbox.show(),e.ui.downloadButton.hide()}))},getItemLength:function(){return this.children.length},resetCheckbox:function(){this.children.each((function(e){e.ui.checkItemInput.prop("checked",!1),e.ui.singleCheckbox.hide(),e.ui.downloadButton.show()}))}});return m.buildDBandQuotaStorageVideoView=function(e,t,n){return new m({bandNo:e,isPageBand:n,collection:new d([],{bandNo:e,orderBy:t})})},m}.call(t,n,t,e))||(e.exports=i)},1908:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(1909),s=n(541);return t.Collection.extend({model:function(e,t){return e.bandNo=t.collection.bandNo,new i(e,{parse:!0})},initialize:function(e,t){this.bandNo=t.bandNo,this.orderBy=t.orderBy,this._paging=null,this._fetchProgress=null},fetchFiles:function(e){if(null!=this._fetchProgress)return this._fetchProgress;var t=e||{};return t.band_no&&t.order_by||(t.band_no=this.bandNo,t.order_by=this.orderBy),this._fetchProgress=this._fetch(t).then(_.bind((function(e){this._paging=e.paging,this.reset(e.items),this._fetchProgress=null}),this)),this._fetchProgress},_fetch:function(e){return s.getVideosForQuota(e)},fetchNextFiles:function(){return null!=this._fetchProgress?this._fetchProgress:this._paging&&this._paging.next_params?(this._fetchProgress=this._fetch(this._paging.next_params).then(_.bind((function(e){this.add(e.items),this._paging=e.paging,this._fetchProgress=null}),this)),this._fetchProgress):this._fetchProgress}})}.call(t,n,t,e))||(e.exports=i)},1909:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(516),o=n(550),l=n(509),r=n(161),d=n(156);return s.Model.extend({idAttribute:"file_id",parse:function(e,t){if(i.isEmpty(e))return e;var n={};n.fileSize=d.toStringFileSize(e.file_size),n.createdAt=d.formatFileDate(e.created_at),n.isExpired=d.isExpiredFile(e.expires_at),n.isLive=e.is_live,n.contentKey=l.buildByAttributes({contentType:e.origin,postNo:e.post_no,photoNo:e.photo_no,scheduleId:e.schedule_id,commentId:e.comment_id,originCommentId:e.origin_comment_id});var s=e.band;return n.bandCore=r.createBandCore({bandNo:e.bandNo,certified:s.certified,cover:s.cover,name:s.name,themeColor:s.theme_color,type:s.type,isRecruiting:s.is_recruiting}),i.extend(e,n)},fetchFileUrl:function(){var e={fileUrl:this.get("file_link"),isOutbound:!!this.get("file_link")};return this.get("isExpired")?(alert(IM("web.postdetail.attachfile.alert.expired")),t.Deferred().reject()):this.get("is_restricted")?(alert(IM("post.msg.post_is_restricted")),t.Deferred().reject()):e.fileUrl?t.Deferred().resolve(e):a.getVideoUrls(this.get("bandNo"),this.get("video_id")).then(i.bind((function(t){var n=this.get("video_id");return e.fileUrl=t[n].download_url[o.QUALITY_480],e.isOutbound=!1,e}),this))},getContentKey:function(){return this.get("contentKey")},getContentType:function(){return this.getContentKey().getContentType()},getBandCore:function(){return this.get("bandCore")},getQuotaStorageVideoPostNo:function(){return this.get("post_no")},getQuotaStorageVideoId:function(){return this.get("video_id")}})}.call(t,n,t,e))||(e.exports=i)},1910:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1911),a=n(82),o=n(1103),l=n(1179),r=n(17),d=n(84),c=n(937),h=n(1032),u=n(1054);return i.View.extend({attributes:{"data-viewname":"DBandQuotaStorageVideoItemView"},tagName:"li",className:"uFlexItem",template:t.template(s),templateContext:function(){var e="web.bandfile.filelist.viewOriginPost";(this._contentType.isSchedule()||this._contentType.isScheduleComment()||this._contentType.isScheduleCommentReply())&&(e="bandfile.filelist.viewOriginSchedule");var t=this.model.toJSON().author.name,n=this._leftSchedule(),i=a.make(this.model.get("logo_image"),a.TYPE.w200);return{msg_viewOriginLabel:IM(e),_author_name:t,leftScheduled:n,thumbnailLogo:i,isLive:this.model.get("is_live")}},ui:{downloadButton:"._downloadButton",viewOrigin:"._viewOrigin",checkItemInput:"._checkItemInput",openSingleImageViewer:"._openSingleImageViewer",singleCheckbox:"._singleCheckbox"},events:{"click @ui.downloadButton":function(e){e.preventDefault(),this._downloadFile()},"click @ui.viewOrigin":function(e){e.preventDefault(),this._viewOrigin()},"change @ui.checkItemInput":"_toggleCheck","click @ui.openSingleImageViewer":"_openSingleImageViewer"},initialize:function(){this._bandCore=this.model.getBandCore(),this._contentType=this.model.getContentType()},_toggleCheck:function(e){var t=$(e.target);t.is(":checked")?this.trigger("singleCheckbox:on",this,t):this.trigger("singleCheckbox:off",this,t)},_downloadFile:function(){this.model.fetchFileUrl().then((function(e){d.go(r.appendParamsToURL(e.fileUrl,{ctype:"down",filename:"BandVideo.mp4"}))}))},_viewOrigin:function(){var e=this.model.get("bandNo"),t=this.model.get("contentKey"),n=t.makeInitCommentIdAndReplyId();switch(this._contentType){case h.POST:d.go(t.makeContentUrl(this._bandCore));break;case h.POST_COMMENT:case h.POST_COMMENT_COMMENT:alert(IM("page.move.comment.attached_video")),d.go(t.makeContentUrl(this._bandCore));break;case h.PHOTO:o.openSingleImageViewer(this,e,t.getPhotoNo());break;case h.PHOTO_COMMENT:case h.PHOTO_COMMENT_COMMENT:alert(IM("page.move.comment.attached_video")),o.openSingleImageViewer(this,e,t.getPhotoNo(),n.initCommentId,n.initCommentReplyId);break;case h.SCHEDULE_COMMENT:case h.SCHEDULE_COMMENT_COMMENT:alert(IM("page.move.comment.attached_video"));var i={bandNo:e,scheduleId:this.model.get("schedule_id"),initCommentId:n.initCommentId,initCommentReplyId:n.initCommentReplyId};c.openScheduleDetailLayerView(i)}},_openSingleImageViewer:function(){var e=this.model.get("bandNo"),t=this.model.get("photo_no");if(this._contentType.isPost()||this._contentType.isPhoto())return this.model.get("isLive")?void u.openVodLiveViewerLayer(e,this.model.getQuotaStorageVideoPostNo(),this.model.getQuotaStorageVideoId()):void o.openSingleImageViewer(this,e,t);l.openDCommentMediaViewer({bandNo:e,view:this,contentKey:this.model.getContentKey(),resultData:{photos:[{photo_url:this.model.get("logo_image"),author:{user_no:this.model.get("author").user_no,name:this.model.get("author").name},width:this.model.get("width"),height:this.model.get("height"),video:{expires_at:this.model.get("expires_at"),videoId:this.model.get("video_id")}}],total_count:1},video:!0,photo:!1})},_leftSchedule:function(){return this.model.get("expires_at")?this.model.get("isExpired")?IM("web.postdetail.attachfile.txt.expired"):IM("setting.storage.deletion.scheduled"):""}})}.call(t,n,t,e))||(e.exports=i)},1911:function(e,t){e.exports='<a href="#" class="player _openSingleImageViewer">\n    <img src="<%- thumbnailLogo %>" alt="">\n    <% if(isLive) { %>\n    <div class="liveState -finished">\n        <span class="liveStateText"><%= IM(\'ui.label.live_end\') %></span>\n    </div>\n    <% } %>\n</a>\n<span class="body">\n    <a href="#" class="text -ellipsis _downloadButton"><%- content %></a>\n    <span class="subText -ellipsis"><span><%= fileSize %></span><span><%= createdAt %></span><span><%- _author_name %></span></span>\n    <span class="subText -colorError"><%= leftScheduled %></span>\n    <a href="#" class="uButton -sizeS -viewOrigin _viewOrigin"><%= msg_viewOriginLabel %></a>\n</span>\n<span class="etc">\n    <label for="uCheck_<%= video_id %>" class="uCheck -checkbox _singleCheckbox" style="display:none;"><input type="checkbox" id="uCheck_<%= video_id %>" class="checkInput _checkItemInput"><span class="checkLabel"><span class="shape sf_tAfterBg"></span><span class="text"></span></span></label>\n    <a href="#" class="download _downloadButton"><span class="gSrOnly"><%= IM(\'web.postdetail.attachfile.txt.download\') %></span></a>\n</span>'},1912:function(e,t){e.exports='<div class="detailSort _detailSort">\n    <div class="uSelectArea">\n        <div class="uSelect -h20 -textType -sizeS">\n            <label for="sort" class="gSrOnly"><%= IM("ui.label.selection") %></label>\n            <select id="sort" class="_orderBy">\n                <option value="created_at" class="created_at"><%= IM("selection.label.created_at") %></option>\n                <option value="file_size" class="file_size"><%= IM("selection.label.file_size") %></option>\n            </select>\n        </div>\n    </div>\n    <div class="action">\n        <div class="item">\n            <button type="button" class="uButton -text -manage _manage"><%= IM("management") %></button>\n            <div class="btns">\n                <button type="button" class="uButton -text _fileDel" style="display:none;"><%= IM("ui.label.delete") %></button>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="_fileWrap fileWrap">\n    <div data-uiselector="videosContainer"></div>\n</div>\n<div class="status _selectCheckboxStatus" style="display:none;">\n    <p><%= IM("selected.count.label") %></p>\n    <button type="button" class="btnClose -active _cancelCheck"><%= IM("mode.all.clear") %></button>\n</div>\n<p class="uEmpty _resultEmptyMsg" style="display:none;">\n    <span>\n        <strong><%= IM("there.is.no.video") %></strong>\n        <em><%= IM("setting.quota.storage.video.unlimited") %></em>\n    </span>\n</p>\n<div class="toastPopup _toastPopup" style="display:none;">\n    <p class="text"><%= IM("setting.quota.storage.exchange.unlimited") %></p>\n    <button type="button" class="buttonClose _checkApplied"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n</div>'},1913:function(e,t){e.exports='    <div class="uHeaderWrap -h50">\n        <header class="header"><h1 class="title"><%= IM("setting.quota.storage.manage.title") %></h1></header>\n    </div>\n    <ul class="userPostNav">\n        <li><button type="button" class="navItem active sf_color sf_afterBg _video"><%= IM("video") %></button></li>\n        <li><button type="button" class="navItem _file"><%= IM("file") %></button></li>\n    </ul>\n    <div class="_fileList"></div>\n    <div class="progress _progress">\n        <div class="inner">\n            <p class="text"><%= IM("storage") %>\n                <% if (! quotaStatus.has_bought_quota ) { %>\n                <%= IM("setting.home.storage.remaining.percent_class", {percent:quotaRestInfo.restPercent}) %>\n                <% } else { %>\n                <%= IM("setting.home.storage.remaining.gigabyte_class", {gigabyte: quotaRestInfo.gigabyte}) %>\n                <% } %>\n            </p>\n            <div class="progressBar"><div class="bar _changePercent <%= quotaRestInfo.color %>" style="width:<%= quotaRestInfo.usePercent %>%"></div></div>\n        </div>\n    </div>'},1914:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(3428),s=t.CollectionView.extend({tagName:"ul",className:"sSettingList",attributes:{"data-viewname":"DBandCalendarListView"},childView:i,childViewOptions:function(){return{bandNo:this.bandNo,bandData:this.bandData,bandOptionModel:this.bandOptionModel,isExportCalendar:this.isExportCalendar}},initialize:function(e){this.bandNo=e.bandNo,this.collection=e.calendarCollection,this.isExportCalendar=e.isExportCalendar,this.bandOptionModel=e.bandOptionModel,this.bandData=e.bandData}});return s.build=function(e){return new s({bandNo:e.bandNo,calendarCollection:e.calendarCollection,isExportCalendar:e.isExportCalendar,bandOptionModel:e.bandOptionModel,bandData:e.bandData})},s}.call(t,n,t,e))||(e.exports=i)},1915:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(82),a=n(153),o=n(162),l=n(497),r=n(538),d=n(510),c=n(589),h=n(1916),u=i.View.extend({attributes:{"data-viewname":"DBandCoLeaderItemView"},tagName:"li",className:"uFlexItem",template:t.template(h),ui:{btnProfileImage:"._btnProfileImage",btnRemoveCoLeader:"._btnRemoveCoLeader"},events:{"click @ui.btnProfileImage":"_openProfileLayer","click @ui.btnRemoveCoLeader":"_removeCoLeader"},initialize:function(e){this.isUseTermAsManager=e.bandData.getBandCore().showBandLeaderTermAsManager(),this.isLeaderPermission=e.bandOptionModel.isPermittedViewManagers()&&e.bandOptionModel.isPermittedManageCoLeader()},serializeData:function(){return{isUseTermAsManager:this.isUseTermAsManager,isLeaderPermission:this.isLeaderPermission,userNo:this.model.getUserNo(),userName:this.model.getUserName(),profileImage:this.model.getProfileImage(),profileInnerClass:s.makeProfileInnerClass(this.model.getProfileImage()),isLeader:this.model.isLeader(),isCoLeader:this.model.isCoLeader()}},_openProfileLayer:function(){c.openProfileView(this.model.getBandNo(),this.model.getUserNo())},_removeCoLeader:function(){var e={headerTitle:this.isUseTermAsManager?null:IM("bandsetting.manage_coleader.title"),bodyDesc:this.isUseTermAsManager?IM("pageband.page_setting.manage_coleader.confirm_message.remove_coleader"):IM("bandsetting.manage_coleader.txt.confirm_description"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")};d.openLayer(e).once(d.EVENTS.CONFIRM,t.bind((function(){return r.SETTING.removeCoLeader(this.model.getBandNo(),this.model.getUserNo()).then(t.bind((function(){this.options.bandData.getBandCore().goBandDForced(a.GROUP_BAND_SETTING_MANAGE_COLEADER,o.PAGE_BAND_SETTING_MANAGE_COLEADER,{band_no:this.model.getBandNo()})}),this))}),this))}});return u.Model=Backbone.Model.extend({idAttribute:"user_no",parse:function(e){var t={};return t.bandNo=e.band_no,t.userNo=e.user_no,t.userName=e.name,t.role=e.role,e.profile_image_url&&(t.profileImageUrl=e.profile_image_url),t},getBandNo:function(){return this.get("bandNo")},getUserNo:function(){return this.get("userNo")},getUserName:function(){return this.get("userName")},getProfileImage:function(){return s.makeProfileMiddleThumbnailUrl(this.get("profileImageUrl"))},getRole:function(){return this.get("role")},isLeader:function(){return this.getRole()==l.LEADER},isCoLeader:function(){return this.getRole()==l.CO_LEADER}}),u}.call(t,n,t,e))||(e.exports=i)},1916:function(e,t){e.exports='<a href="#" role="button" class="uProfile -size50 _btnProfileImage">\n    <span class="profileInner <%- profileInnerClass %>">\n        <img src="<%- profileImage %>" width="50" height="50" alt="<%- userName %>">\n    </span>\n</a>\n\n<span class="body">\n    <%\n        var className = "";\n        var roleLabel = "";\n\n        if (isUseTermAsManager) {\n            className = isLeader ? "leader -pageLeader" : "coleader -pageLeader";\n            roleLabel = isLeader ? IM("pageband.member.leader") : IM("pageband.member.coleader");\n        } else {\n            className = isLeader ? "leader" : "coleader";\n            roleLabel = isLeader ? IM("bandsetting.manage_coleader.txt.leader") : IM("bandsetting.manage_coleader.txt.coleader");\n        }\n    %>\n    <span class="text -flex"><em class="<%- className %> gMal0"><%- roleLabel %></em></span>\n    <span class="text -ellipsis gMat6"><%- userName %></span>\n</span>\n\n<% if (isCoLeader && isLeaderPermission) { %>\n<span class="etc">\n    <button type="button" class="uButton -sizeS -confirm2 _btnRemoveCoLeader"><%= IM("ui.label.change") %></button>\n</span>\n<% } %>'},1917:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1918),a=n(1920),o=n(1922),l=n(583),r=n(512),d=n(1924),c=n(155),h=n(160),u=n(1057),p=n(26),m=n(538),_="name",b="oldest",g="emailNotVerified",f=i.View.extend({attributes:{"data-viewname":"DBandMemberWithdrawalListView"},className:"sSettingBand gContentCardShadow",template:t.template(d),ui:{moveToWithdrawalMemberPage:"._moveToWithdrawalMemberPage",moveToBlockMemberPage:"._moveToBlockMemberPage",searchEl:"._searchEl",inputSearch:"._inputSearch",btnSearch:"._btnSearch",collectionEmptyMsgEl:"._collectionEmptyMsgEl",collectionEmptyMsg:"._collectionEmptyMsg",checkMode:"._checkMode",checkLength:"._checkLength",selectCheckboxStatus:"._selectCheckboxStatus",cancelCheck:"._cancelCheck",bandLeaveText:"._bandLeaveText",btnManageWithdrawalMultiUser:"._btnManageWithdrawalMultiUser",selectedMemberCount:"._selectedMemberCount",summaryWrap:"._summaryWrap",memberCount:"._memberCount",memberCountText:"._memberCountText",sortMemberList:"._sortMemberList",sortMemberListWarp:"._sortMemberListWarp"},regions:{bandMemberListContainer:{el:"._bandMemberListContainer",replaceElement:!0}},events:{"click @ui.moveToWithdrawalMemberPage":"_withdrawalMembers","click @ui.moveToBlockMemberPage":"_drawPageForBlockMembers","keyup @ui.inputSearch":"_searchMember","click @ui.btnSearch":"_searchMember","click @ui.checkMode":"_memberListCheckMode","click @ui.cancelCheck":"_cancelMemberListCheckMode","change @ui.sortMemberList":"_sortByMemberList","click @ui.btnManageWithdrawalMultiUser":"_manageWithdrawalMultiUser"},initialize:function(e){this.bandNo=e.bandNo,this.isBlockedBand=e.isBlockedBand,this.bandData=c.get(e.bandNo),this._blockMembersPage=!1,this._selectWithdrawalMembersUserNo=[],this._selectWithdrawalMembers=[],this._sortBy=e.sortType,this._isMemberListCheckMode=!1,this._allMemberCount=this.bandData.getMemberCount()-1,this._queryed="",this.isEmailVerificationEnabled=!1,this._sortBy||(this._sortBy=h.KICK_MEMBER),this.isBandOtionFetched=!1},serializeData:function(){return{usableSearch:!this.isBlockedBand,memberCount:this._allMemberCount,sortByName:_,sortByOldest:b,sortByEmailNotVerified:g,sortBy:this._sortBy,canBanOrBlockMultipleMember:this.bandData.canBanOrBlockMultipleMember(),isEmailVerificationEnabled:this.isEmailVerificationEnabled}},onAttach:function(){m.getBandOption(this.bandNo).then(t.bind((function(e){this.bandOption=e,this.isEmailVerificationEnabled=e.isEmailVerificationEnabled(),this.isBandOtionFetched=!0,this.render()}),this))},onDomRefresh:function(){this.isBandOtionFetched&&(this.getUI("moveToWithdrawalMemberPage").toggleClass("-on"),this.isBlockedBand||this.getUI("searchEl").removeClass("gHide"),this.getUI("sortMemberListWarp").show(),this.getUI("memberCount").show(),this.showChildView("bandMemberListContainer",l.build()),this.collection=new s([]),this.collection.fetchMemberListOfBand(this.bandNo,this._sortBy).then(t.bind((function(){var e=new v({bandNo:this.bandNo,sortBy:this._sortBy,collection:this.collection,selectWithdrawalMembersUserNo:this._selectWithdrawalMembersUserNo});this.showChildView("bandMemberListContainer",e),this.listenTo(e,"toggle:memberWithdrawal:onList",t.bind((function(e){this._setSelectWithdrawalMemberList(e)}),this)),this.listenTo(e,"withdrawMember",this._withdrawSingleUser),this._showWithdrawalMemberList()}),this)),this.listenTo(r,"window:scroll:bottom",(function(e){this.collection.nextFetch(),this._isMemberListCheckMode&&this._changeCheckModeUI()})))},_sortByMemberList:function(){var e=this.getUI("sortMemberList").val();b===e&&this._sortByOldestVisited(),_===e&&this._sortByName(),g===e&&this._sortByEmailNotVerified()},_setSelectWithdrawalMemberList:function(e){var n=e.getUserNo(),i=[],s=[];if(t.find(this._selectWithdrawalMembersUserNo,(function(e){return e==n})))i=t.filter(this._selectWithdrawalMembersUserNo,(function(e){return e!=n})),s=t.filter(this._selectWithdrawalMembers,(function(e){return e.get("user_no")!=n})),this._selectWithdrawalMembersUserNo=i,this._selectWithdrawalMembers=s;else{if(10===this._selectWithdrawalMembersUserNo.length)return alert(IM("band.setting.member.select.max_member_count",{maxCount:10})),this.getChildView("bandMemberListContainer").rollbackSelectMember(n),!1;this._selectWithdrawalMembersUserNo.push(n),this._selectWithdrawalMembers.push(e)}this.getUI("selectedMemberCount").text("("+this._selectWithdrawalMembersUserNo.length+")"),this.getUI("checkLength").text(this._selectWithdrawalMembersUserNo.length)},_showWithdrawalMemberList:function(){this.collection.isEmpty()?(this.getUI("searchEl").addClass("gHide"),this._showEmptyMessageEl(IM("bandsetting.member_withdrawal.alert.no_member")),this.getUI("checkMode").hide()):(this._hideEmptyMessageEl(),this.getRegion("bandMemberListContainer").$el.show(),this._isMemberListCheckMode&&this._changeCheckModeUI())},_showEmptyMessageEl:function(e){this.getUI("collectionEmptyMsg").text(e),this.getUI("collectionEmptyMsgEl").show()},_hideEmptyMessageEl:function(){this.getUI("collectionEmptyMsg").text(""),this.getUI("collectionEmptyMsgEl").hide()},_withdrawalMembers:function(){this._blockMembersPage=!1,this.render()},_drawPageForBlockMembers:function(){this._blockMembersPage||(this._blockMembersPage=!0,this.getUI("summaryWrap").hide(),this.getUI("moveToWithdrawalMemberPage").toggleClass("-on",!1),this.getUI("moveToBlockMemberPage").toggleClass("-on",!0),this.getUI("searchEl").addClass("gHide"),this.getRegion("bandMemberListContainer").reset(),this.collection=new s([]),this.showChildView("bandMemberListContainer",l.build()),this._hideEmptyMessageEl(),this.collection.fetchBlockMemberList(this.bandNo).then(t.bind((function(){var e=new A({bandNo:this.bandNo,collection:this.collection});this.showChildView("bandMemberListContainer",e),this.listenTo(e,"releaseBlockMember:updateMemberList",t.bind((function(){this._blockMemberCollectionEmptyView()}),this)),this._blockMemberCollectionEmptyView()}),this)))},_blockMemberCollectionEmptyView:function(){this.collection.isEmpty()?this._showEmptyMessageEl(IM("bandsetting.block_member.txt.no_member")):this.collection.size()>199&&this._showEmptyMessageEl(IM("bandsetting.block_member.txt.description"))},_searchMember:function(e){if(13===e.which||1===e.which){var n=$.trim(this.ui.inputSearch.val());n!==this._queryed&&(this._queryed=n,""!==n?(this._blockMembersPage=!1,this.showChildView("bandMemberListContainer",l.build()),this.collection.fetchSearchMemberList(n,this.bandNo).then(t.bind((function(){this.showChildView("bandMemberListContainer",new v({bandNo:this.bandNo,sortBy:this._sortBy,collection:this.collection,selectWithdrawalMembersUserNo:this._selectWithdrawalMembersUserNo})),this.getUI("sortMemberListWarp").hide(),this.getUI("memberCount").hide(),this._isMemberListCheckMode&&this._changeCheckModeUI(),this.listenTo(this.getChildView("bandMemberListContainer"),"toggle:memberWithdrawal:onList",t.bind((function(e){this._setSelectWithdrawalMemberList(e)}),this)),this.collection.isEmpty()?this._showEmptyMessageEl(IM("ui.message.no_search_result")):this._hideEmptyMessageEl()}),this))):this.render())}},_sortByName:function(){this._sortBy=h.KICK_MEMBER,this.render()},_sortByOldestVisited:function(){this._sortBy=h.KICK_MEMBER_OLDEST_VISITED,this.render()},_sortByEmailNotVerified:function(){this._sortBy=h.KICK_MEMBER_EMAIL_NOT_VERIFIED,this.render()},_memberListCheckMode:function(){this._isMemberListCheckMode=!0,this._changeCheckModeUI()},_changeCheckModeUI:function(){this.getChildView("bandMemberListContainer").showMultiCheckMode(),this.getUI("selectCheckboxStatus").show(),this.getUI("checkMode").hide(),this.getUI("bandLeaveText").show(),this.getUI("selectedMemberCount").text("("+this._selectWithdrawalMembersUserNo.length+")"),this.getUI("checkLength").text(this._selectWithdrawalMembersUserNo.length)},_cancelMemberListCheckMode:function(){this._isMemberListCheckMode=!1,this._initializeMemberCheckMode(),this._cancelCheckModeUI()},_cancelCheckModeUI:function(){this._blockMembersPage||this.getChildView("bandMemberListContainer").cancelCheckMode(),this.getUI("selectCheckboxStatus").hide(),this.getUI("checkMode").show(),this.getUI("bandLeaveText").hide()},_initializeMemberCheckMode:function(){this._selectWithdrawalMembersUserNo=[],this._selectWithdrawalMembers=[],this.getUI("checkLength").text(0),this.getUI("selectedMemberCount").text("")},_manageWithdrawalMultiUser:function(){if(!t.isEmpty(this._selectWithdrawalMembersUserNo)){var e=u.openLayer({bandData:this.bandData,userNos:this._selectWithdrawalMembersUserNo});this.listenTo(e,"membersWithdrawal:updateMemberList",t.bind((function(){this.collection.remove(this._selectWithdrawalMembers),this.collection.length<=30&&this.collection.nextFetch(),this._isMemberListCheckMode&&this._changeCheckModeUI(),this._memberCountReCounting(),this._showWithdrawalMemberList(),this._initializeMemberCheckMode()}),this))}},_withdrawSingleUser:function(e){var t=u.openLayer({bandData:this.bandData,userNo:e.getUserNo()});this.listenTo(t,"memberWithdrawal:updateMember",(function(){this.collection.remove(e),this._showWithdrawalMemberList()}))},_memberCountReCounting:function(){this._allMemberCount=this._allMemberCount-this._selectWithdrawalMembers.length,this.getUI("memberCountText").text(this._allMemberCount),p.getDGlobalChannel().trigger(p.EVENT.MEMBER_WITHDRAWAL,this._allMemberCount)}}),v=i.CollectionView.extend({initialize:function(e){this.bandNo=e.bandNo,this.selectWithdrawalMembersUserNo=e.selectWithdrawalMembersUserNo,this._sortBy=e.sortBy},tagName:"ul",className:"cMemberList",childView:a,childViewOptions:function(e){return e.set("bandNo",this.bandNo),{sortBy:this._sortBy,isInitializeChecked:t.filter(this.selectWithdrawalMembersUserNo,(function(t){return t==e.get("user_no")}))}},childViewEvents:{withdrawMember:function(e){this.trigger("withdrawMember",e)},"toggle:memberWithdrawal":function(e){this.trigger("toggle:memberWithdrawal:onList",e)}},showMultiCheckMode:function(){if(this.children.isEmpty())return!1;this.children.each((function(e){e.multiCheckMode()}))},cancelCheckMode:function(){this.children.each((function(e){e.uncheckItem(),e.singleCheckMode()}))},rollbackSelectMember:function(e){this.children.map((function(t){t.model.getUserNo()==e&&t.uncheckItem()}))}}),A=i.CollectionView.extend({initialize:function(e){this.bandNo=e.bandNo},tagName:"ul",className:"cMemberList",childView:o,childViewOptions:function(e){e.set("bandNo",this.bandNo)},childViewEvents:{"releaseBlockMember:updateMemberList":function(e){this.collection.remove(e.model),this.trigger("releaseBlockMember:updateMemberList")}}});return f.buildBandMemberWithdrawalListView=function(e){var t={name:h.KICK_MEMBER,oldest:h.KICK_MEMBER_OLDEST_VISITED,emailNotVerified:h.KICK_MEMBER_EMAIL_NOT_VERIFIED};return new f({bandNo:e.bandNo,sortType:t[e.sortType],isBlockedBand:e.isBlockedBand||!1,collection:new s([])})},f}.call(t,n,t,e))||(e.exports=i)},1918:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(0),s=n(160),a=n(493),o=(n(784),n(1919));return t.Collection.extend({model:o,initialize:function(e){e=e||{},this._sliceIdx=0,this._sliceCnt=e.sliceCnt?e.sliceCnt:30,this._fetching=!1},nextFetch:function(){if(!this._fetching){this._fetching=!0;var e=this._sliceCnt*(this._sliceIdx+1),t=this.originalMemberList.slice(e,e+this._sliceCnt);t.length>0&&(this.push(t),this._sliceIdx++,this._fetching=!1)}},fetchMemberListOfBand:function(e,t){return this._fetching=!0,a.getBandMembersOfBandWithFilter(e,t).then(i.bind((function(e){return this._sliceIdx=0,this.set(e.members.slice(this._sliceIdx,this._sliceCnt)),this.totalMemberCount=e.members.length,this.originalMemberList=e.members,this._fetching=!1,this}),this))},fetchSearchMemberList:function(e,t){return this._fetching=!0,a.searchMember(e,t,s.KICK_MEMBER).then(i.bind((function(e){var t=e.members||[];return this._sliceIdx=0,this.reset(t.slice(this._sliceIdx,this._sliceCnt)),this.totalMemberCount=e.total,this.originalMemberList=t,this._fetching=!1,this}),this))},fetchBlockMemberList:function(e){return this._fetching=!0,a.getBlockMemberList(e).then(i.bind((function(e){var t=e.block_members.map((function(e){return{created_at:e.created_at,executor:e.executor?e.executor.name:null,name:e.member.name,profile_image_url:e.member.profile_image_url,user_no:e.member.user_no}})).slice(this._sliceIdx,this._sliceCnt);return this.set(t),this.totalMemberCount=e.block_members.length,this.originalMemberList=t,this._fetching=!1,this}),this))},resetMemberList:function(){this.reset(this.originalMemberList)}})}.call(t,n,t,e))||(e.exports=i)},1919:function(e,t,n){var i;void 0===(i=function(e){var t=n(16),i=n(6),s=n(82),a=n(9),o=n(493);return i.Model.extend({idAttribute:"user_no",defaults:function(){return{name:"",profile_image_url:"",user_no:null,created_at:null,executor:null}},releaseBandBlockMember:function(){var e=this.getBandNo(),t=this.getUserNo();return o.doReleaseBandBlockMember(e,t)},getBandNo:function(){return this.get("bandNo")},getUserNo:function(){return this.get("user_no")},getUserName:function(){return this.get("name")},getUserDescription:function(){return!!this.get("description")&&this.get("description")},getProfileImageUrl:function(){return s.makeProfileMiddleThumbnailUrl(this.get("profile_image_url"))},getExecutor:function(){return this.get("executor")},getCreatedAt:function(){return a.format.date(t(this.get("created_at")),"short_date_time")},getVisitedAt:function(){return this.get("visited_at")?a.format.date(t(this.get("visited_at")),"year_month_day"):null},isNotEmailVerified:function(){return!1===this.get("is_email_verified")}})}.call(t,n,t,e))||(e.exports=i)},1920:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(82),a=n(589),o=n(1921),l=n(160);return i.View.extend({attributes:{"data-viewname":"DBandMemberWithdrawalItemView",class:"uFlexItem"},template:t.template(o),tagName:"li",ui:{toggleMemberWithdrawal:"._toggleMemberWithdrawal",btnManageMemberWithdrawal:"._btnManageMemberWithdrawal",btnProfile:"._btnProfile"},events:{"click @ui.btnProfile":function(e){e.preventDefault();var t=$(e.currentTarget).data("user_no"),n=this.model.getBandNo();a.openProfileView(n,t)},"click @ui.btnManageMemberWithdrawal":"_showMemberWithdrawalSetLayer","click @ui.toggleMemberWithdrawal":"_toggleMemberWithdrawal"},initialize:function(e){this.isInitializeChecked=e.isInitializeChecked,this._sortBy=e.sortBy},serializeData:function(){return{name:this.model.getUserName(),profileInnerClass:s.makeProfileInnerClass(this.model.getProfileImageUrl()),profileImageUrl:this.model.getProfileImageUrl(),userNo:this.model.getUserNo(),visitedAt:this.model.getVisitedAt(),description:this.model.getUserDescription(),isSortByOldestVisited:this._sortBy==l.KICK_MEMBER_OLDEST_VISITED,isNotEmailVerified:this.model.isNotEmailVerified()}},onAttach:function(){t.isEmpty(this.isInitializeChecked)||this.getUI("toggleMemberWithdrawal").find("input").attr("checked","checked")},multiCheckMode:function(){this.getUI("toggleMemberWithdrawal").show(),this.getUI("btnManageMemberWithdrawal").hide()},singleCheckMode:function(){this.getUI("toggleMemberWithdrawal").hide(),this.getUI("btnManageMemberWithdrawal").show()},uncheckItem:function(){this.getUI("toggleMemberWithdrawal").find(".checkInput").attr("checked",!1)},_toggleMemberWithdrawal:function(){this.trigger("toggle:memberWithdrawal",this.model)},_showMemberWithdrawalSetLayer:function(){this.trigger("withdrawMember",this.model)}})}.call(t,n,t,e))||(e.exports=i)},1921:function(e,t){e.exports='<a href="#" role="button" data-user_no="<%= userNo %>" class="_btnProfile uProfile -size50">\n<span class="profileInner <%- profileInnerClass %>">\n    <img src="<%- profileImageUrl %>" width="50" height="50" alt="<%- name %>">\n</span>\n</a>\n<span class="body">\n    <span class="text -ellipsis"><%- name %></span>\n    <% if (description) { %>\n    <span class="subText -ellipsis"><%- description %></span>\n    <% } %>\n    <% if (isSortByOldestVisited) { %>\n        <% if (!visitedAt || visitedAt == 0) { %>\n        <date class="date -ellipsis"><%= IM("member_list.sort.oldest_visited_at_befoer_20190924") %></date>\n        <% } else { %>\n        <date class="date -ellipsis"><%= IM("member_list.sort.oldest_visited_at", {visitedAt: visitedAt}) %></date>\n        <% } %>\n    <% } %>\n    <% if (isNotEmailVerified) { %>\n    <span class="subText -ellipsis gColorGr2"><%= IM("member_list.label.email_not_verified") %></span>\n    <% } %>\n</span>\n\n<span class="etc">\n    <button type="button" class="_btnManageMemberWithdrawal uButton -sizeS -alert -reverse"><%= IM("bandsetting.member_withdrawal.label.compulsory_withdrawal") %></button>\n\n    <label for="uCheck<%- userNo %>" class="uCheck -checkbox _toggleMemberWithdrawal" style="display:none;">\n        <input type="checkbox" id="uCheck<%- userNo %>" class="checkInput">\n        <span class="checkLabel">\n            <span class="shape sf_tAfterBg"></span>\n            <span class="text"></span>\n        </span>\n    </label>\n</span>'},1922:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(589),a=n(510),o=n(82),l=n(1923);return i.View.extend({attributes:{"data-viewname":"DBandBlockMemberItemView"},tagName:"li",className:"uFlexItem",template:t.template(l),events:{"click ._btnProfile":function(e){e.preventDefault();var t=$(e.currentTarget).data("user_no"),n=this.model.getBandNo();s.openProfileView(n,t)},"click ._btnReleaseBlockMember":"_showReleaseBlockMemberSetLayer"},serializeData:function(){return{name:this.model.getUserName(),profileImageUrl:this.model.getProfileImageUrl(),profileInnerClass:o.makeProfileInnerClass(this.model.getProfileImageUrl()),userNo:this.model.getUserNo(),executor:this.model.getExecutor()?"by "+this.model.getExecutor():"",createdAt:this.model.getCreatedAt()}},_showReleaseBlockMemberSetLayer:function(){var e={headerTitle:IM("bandsetting.block_member.label.release_block_member"),bodyDesc:IM("bandsetting.release_block_member.txt.description")};a.openLayer(e).once(a.EVENTS.CONFIRM,t.bind((function(){return this.model.releaseBandBlockMember(this.model.getBandNo(),this.model.getUserNo()).then(t.bind((function(){this.trigger("releaseBlockMember:updateMemberList",{model:this.model})}),this))}),this))}})}.call(t,n,t,e))||(e.exports=i)},1923:function(e,t){e.exports='<a href="#" role="profile" data-user_no="<%= userNo %>" class="uProfile -size50 _btnProfile">\n    <span class="profileInner <%- profileInnerClass %>"><img src="<%- profileImageUrl %>" width="50" height="50" alt="<%- name %>"></span>\n</a>\n<span class="body">\n    <span class="text -ellipsis"><%- name %></span>\n    <span class="subText -ellipsis"><%- executor %></span>\n    <date class="date -ellipsis"><%= createdAt %></date>\n</span>\n<span class="etc">\n    <button type="button" class="_btnReleaseBlockMember uButton -sizeS -cancel"><%= IM("bandsetting.block_member.label.release_block_member") %></button>\n</span>'},1924:function(e,t){e.exports='<% // 멤버 탈퇴 관리 %>\n<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.member_withdrawal.title") %></h1>\n    </header>\n</div>\n<div class="uTabNav">\n    <button type="button" class="btn _moveToWithdrawalMemberPage sf_color"><%= IM("bandsetting.member_withdrawal.txt.member_list") %></button>\n    <button type="button" class="btn _moveToBlockMemberPage sf_color"><%= IM("bandsetting.block_member.title") %></button>\n</div>\n<div class="leaveMemberList">\n    <div class="uInputSearch gHide _searchEl">\n        <label class="gSrOnly" for="input_search"><%= IM(\'ui.label.search\') %></label>\n        <input type="text" class="_inputSearch" id="input_search" placeholder="<%= IM(\'ui.label.search\') %>">\n        <button type="button" class="search _btnSearch"><span class="gSrOnly"><%= IM(\'ui.label.search\') %></span></button>\n        <span class="border"></span>\n    </div>\n\n    <div class="summaryWrap _summaryWrap">\n        <div class="subTitle gMat18 _memberCount">\n            <h2 class="title gFw6"><%= IM("web.common.members") %> <span class="sf_color _memberCountText"><%- memberCount %></span></h2>\n            <% if(sortBy === \'kick_member_email_not_verified\'){ %>\n            <p class="guideAreaText -fs12 gMat6 gMab15"><%= IM("bandsetting.member_withdrawal.email_not_verified.desc") %></p>\n            <% } %>\n        </div>\n        <div class="detailSort gMat9">\n            <div>\n                <div class="uSelect -h20 -textType _sortMemberListWarp">\n                    <label for="sort" class="gSrOnly"><%= IM("web.bandlist.order_type.title") %></label>\n                    <select id="sort" class="_sortMemberList">\n                        <option value="<%= sortByName %>" <% if(sortBy === \'kick_member\'){ %>selected="selected"<% } %>><%= IM("member_list.sort.abc") %></option>\n                        <option value="<%= sortByOldest %>" <% if(sortBy === \'kick_member_oldest_visited\'){ %>selected="selected"<% } %>><%= IM("member_list.sort.visit_at") %></option>\n                        <% if(isEmailVerificationEnabled) { %>\n                        <option value="<%= sortByEmailNotVerified %>" <% if(sortBy === \'kick_member_email_not_verified\'){ %>selected="selected"<% } %>><%= IM("member_list.sort.email_not_verified") %></option>\n                        <% } %>\n                    </select>\n                </div>\n            </div>\n            <% if (canBanOrBlockMultipleMember) { %>\n            <div class="action">\n                <div class="item">\n                    <button type="button" class="uButton -text -manage _checkMode"><%= IM("ui.label.selection") %></button>\n                    <div class="btns _bandLeaveText" style="display:none;">\n                        <button type="button" class="uButton -text -colorCaution _btnManageWithdrawalMultiUser"><%= IM("ui.label.band_leave") %> <span class="memberCount _selectedMemberCount"></span></button>\n                    </div>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n\n    <div class="listWrap">\n        <div class="_bandMemberListContainer" style="display: none"></div>\n        <p class="uEmpty _collectionEmptyMsgEl" style="height:545px;display: none;">\n            <span class="gColorGr3 _collectionEmptyMsg"></span>\n        </p>\n    </div>\n\n    <div class="cFixedBottomStatus -fixed _selectCheckboxStatus" style="display:none;">\n        <div class="statusCommentWrap">\n            <span class="statusText"><%= IM("selected.count.member.label") %></span>\n        </div>\n        <div class="buttonBox gMal10">\n            <% if (canBanOrBlockMultipleMember) { %>\n            <button type="button" class="uButton -text -colorCaution gFs12 _btnManageWithdrawalMultiUser"><%= IM("ui.label.band_leave") %> <span class="memberCount _selectedMemberCount"></span></button>\n            <% } %>\n            <button type="button" class="btnClose -active _cancelCheck"><%= IM("mode.all.clear") %></button>\n        </div>\n    </div>\n</div>'},1925:function(e,t){e.exports='<div class="lyContent -w480">\n    <header class="modalHeader">\n        <h1 class="title"><%- IM("band_mission.setting.title") %></h1>\n    </header>\n\n    <div class="modalBody ">\n        <div class="modalContentWrap -missionCreate">\n\n            <div class="titleWrap">\n                <label for="mission_name" class="gSrOnly"><%- IM("band_mission.setting.mission_name") %></label>\n                <input type="text" id="mission_name" class="_missionName" maxlength="200" placeholder="<%- IM("band_mission.setting.mission_name.placeholder") %>" value="<%- title %>">\n                <% if(!isManuallyEnded) { %>\n                <div class="previousCheck">\n                    <button type="button" class="btnLoad _btnLoadMission"><span class="gSrOnly"><%- IM("band_mission.setting.load.my_mission") %></span></button>\n                </div>\n                <% } %>\n            </div>\n            <div class="flexBox gMat10">\n                <% if(!isRecruitingBand) { %>\n                <div class="flexList -tbSpaceNone gMat5">\n                    <div class="labelTitle -maxW80 gFs13 gPar10"><%- IM("ui.label.date") %></div>\n\n                    <div class="etc -minW172">\n                        <div class="_missionStartAtInputRegion"></div>\n                    </div>\n                    <div class="etc gPal9">\n                        <div class="option gMat17">\n                            <button type="button" class="btnTimezone _btnSetTimezone"><%- IM("web.scheduleedit.date.timezone") %></button>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- [D]시간대 설정 클릭 시 해당 스타일도 toggle될 수 있게 부탁드립니다.--\x3e\n                <div class="flexList -tbSpaceNone gMat10 _missionCreateTimezoneRegion" style="display: none"></div>\n                <% } %>\n                <div class="flexList -tbSpaceNone gMat11">\n                    <div class="labelTitle -maxW80 gFs13 gPar10"><label for="priod"><%- IM("band_mission.setting.duration") %></label></div>\n\n                    <div class="etc">\n                            <span class="flexList -tbSpaceNone -layoutFixed" style="min-width: 172px">\n                                <span class="flexItem">\n                                    <span class="uSelect -h32 -bg -block gColorBk2">\n                                        <select id="priod" class="_selectMissionDuration" <% if(isManuallyEnded) { %>disabled="disabled"<% } %>>\n                                            <% if(isManuallyEnded) { %>\n                                            <option value="<%= settingDuration %>"><%= nowDurationDays %></option>\n                                            <% } else { %>\n                                            <% _.each(missionDurations, function(item){ %>\n                                            <option value="<%= item.duration %>" <% if (item.duration == settingDuration) { %>selected="selected"<% } %>><%= item.label %></option>\n                                            <% }) %>\n                                            <% } %>\n                                        </select>\n                                    </span>\n                                </span>\n\n                            </span>\n                    </div>\n                </div>\n\n                <div class="flexList -tbSpaceNone gMat10">\n                    <div class="labelTitle -maxW80 gFs13 gPar10"><label for="frequency"><%- IM("band_mission.setting.frequency") %></label></div>\n\n                    <div class="etc">\n                            <span class="flexList -tbSpaceNone -layoutFixed" style="min-width: 172px">\n                                <span class="flexItem">\n                                    <span class="uSelect -h32 -bg -block gColorBk2">\n                                        <select id="frequency" class="_selectMissionFrequency" <% if (isGoingMission) { %>disabled<% } %>>\n                                            <% _.each(missionFrequency, function(item){ %>\n                                            <option value="<%= item.confirmFrequency %>" <% if (item.confirmFrequency == settingFrequency) { %>selected="selected"<% } %>><%= item.label %></option>\n                                            <% }) %>\n                                        </select>\n                                    </span>\n                                </span>\n\n                            </span>\n                    </div>\n                </div>\n\n                <div class="textFieldArea -tLine gMat19">\n                    <div class="labelTitle gFs13 gMat16"><label for="rule"><%- IM("band_mission.setting.rule") %></label></div>\n\n                    <div class="uTextarea gMat9">\n                        <textarea placeholder="<%- IM(\'band_mission.setting.description.placeholder\') %>" id="rule" class="_missionDescription" maxlength="500" style="height: 49px;"><%- description %></textarea>\n                        <span class="border"></span>\n                    </div>\n                </div>\n\n                <div class="textFieldArea -tLine gMat20">\n                    <div class="labelTitle gFs13 gMat14 gPal23 -goodCase"><label for="goodCase"><%- IM("band_mission.setting.good_case.title") %></label></div>\n\n                    <div class="uTextarea gMat9 gPab12">\n                        <textarea placeholder="<%- IM(\'band_mission.setting.good_case.placeholder\') %>" id="goodCase" class="_goodMissionExContents" maxlength="500" style="height: 25px"><%- goodExample.content %></textarea>\n                        <span class="border"></span>\n\n                        <div class="btnUploadWrap gMar3">\n                            <span class="iconBtn image"><button type="button" class="_goodMissionExFakeUploader" style="position:absolute;left:0;width:100%;height:100%;"></button></span>\n                        </div>\n                    </div>\n                    <div class="uploadArea _goodUploadArea">\n                        <div class="multiMediaArea">\n                            <div class="_goodMissionExAttacheMediaRegion"></div>\n                            <span class="btnAttachPhoto _goodMissionExUploader"><input type="file" class="" /><span class="gSrOnly"><%- IM("web.btn.attach") %></span></span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="textFieldArea -tLine gMat20 gMab20">\n                    <div class="labelTitle gFs13 gMat16 gPal23 -badCase"><label for="badCase"><%- IM("band_mission.setting.bad_case.title") %></label></div>\n\n                    <div class="uTextarea  gMat9 gPab12">\n                        <textarea placeholder="<%- IM(\'band_mission.setting.bad_case.placeholder\') %>" id="badCase" class="_badMissionExContents" maxlength="500" style="height: 25px"><%- badExample.content %></textarea>\n                        <span class="border"></span>\n\n                        <div class="btnUploadWrap gMar3">\n                            <span class="iconBtn image"><button type="button" class="_badMissionExFakeUploader" style="position:absolute;left:0;width:100%;height:100%;"></button></span>\n                        </div>\n                    </div>\n                    <div class="uploadArea _badUploadArea">\n                        <div class="multiMediaArea">\n                            <div class="_badMissionExAttacheMediaRegion"></div>\n                            <span class="btnAttachPhoto _badMissionExUploader"><input type="file" class="" /><span class="gSrOnly"><%- IM("web.btn.attach") %></span></span>\n                        </div>\n                    </div>\n                </div>\n                <% if(!isRecruitingBand && isPossibleMissionDelete) { %>\n                <div class="flexList -tLine -spaceBetween -h62 gMat20 ">\n                    <div class="labelTitle">\n                        <div><%- IM("band_mission.delete.title") %></div>\n                    </div>\n\n                    <div class="etc">\n                        <button class="uButton -sizeS -confirm2 -colorError _btnMissionDelete"><%- IM("ui.label.delete") %></button>\n                    </div>\n                </div>\n                <% } %>\n                <% if(!isRecruitingBand && isPossibleMissionEnd) { %>\n                <div class="flexList -tLine -spaceBetween -h62 gMat20 ">\n                    <div class="labelTitle">\n                        <div><%- IM("band_mission.end.title") %></div>\n                    </div>\n\n                    <div class="etc">\n                        <button class="uButton -sizeS -confirm2 -colorError _btnMissionEnd"><%- IM("ui.label.end") %></button>\n                    </div>\n                </div>\n                <% } %>\n            </div>\n\n            <div class="missionGuideBox -borderTop">\n                <p class="missionGuideText gFs12 gColorBk4 gMat7 gMab-3">\n                    <%=nl2br(IM(\'band_mission.setting.showing_photographed_at_guide\')) %>\n                </p>\n            </div>\n        </div>\n    </div>\n    <footer class="modalFooter">\n            <span class="buttonWrap">\n                <button type="button" class="uButton -confirm _btnConfirmCreateMission"><%- IM("ui.label.complete") %></button>\n            </span>\n        <div class="closeWrap">\n            <button type="button" class="btnLyClose uButton -iconClose _btnClose"><span class="gSrOnly"><%- IM("ui.label.close_layer") %></span></button>\n        </div>\n    </footer>\n</div>'},1926:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1927),o=n(930),l=n(739),r=n(486),d={BAND_MISSION_SELECTED:"bandMissionSelected"},c=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandMissionEditImportView"},template:i.template(a),ui:{missionBtn:"._missionBtn",closeBtn:"._closeBtn"},events:{"click @ui.missionBtn":function(e){this._importMission(t(e.currentTarget).data("index"))},"click @ui.closeBtn":"_closeView"},initialize:function(e){this._bandNo=e.bandNo},serializeData:function(){return{missions:this.collection.map((function(e){return{title:e.getBandMissionTitle(),frequency:l.getBandMissionConfirmFrequencyText(e.getBandMissionConfirmFrequency()),duration:l.getBandMissionDurationText(e.getBandMissionDuration())}}))}},_importMission:function(e){var t=this.collection.at(e);t&&(this.trigger(d.BAND_MISSION_SELECTED,t),this._closeView())},_closeView:function(){this.destroy()}});return c.EVENT=d,c.openAsLayer=function(e){var t=o.buildBandMissionCollection(),n=t.fetchMyMissions(e,10),i=new c({bandNo:e,collection:t});return r.openPromiseView(n,!1,{width:480,height:562,view:i}),i},c}.call(t,n,t,e))||(e.exports=i)},1927:function(e,t){e.exports='<div class="lyContent -w480">\n    <header class="header">\n        <h1 class="title"><%- IM(\'band_mission.setting.load.my_mission\') %></h1>\n    </header>\n    <div class="main -spaceNone">\n        <div class="previousAttendance">\n            <div class="topNoticeBar">\n                <p class="sDesc gMat0"><%- IM(\'band_mission.copy_desc\') %></p>\n            </div>\n            <% if (missions.length > 0) { %>\n            <ul class="listLine rScroll -h480">\n                <% _.each(missions, function(mission, index) { %>\n                <li class="tLine">\n                    <button type="button" class="flexList _missionBtn" data-index="<%- index %>">\n                        <div class="text">\n                            <div class="ellipsis"><%- mission.title %></div>\n                            <div class="sub">\n                                <span class="frequency"><%- mission.frequency %>, </span>\n                                <span class="periodInfo"><%- mission.duration %></span>\n                            </div>\n                        </div>\n                    </button>\n                </li>\n                <% }); %>\n            </ul>\n            <% } else { %>\n            <p class="uEmpty -h480">\n                <span><%- IM(\'ui.message.empty_conents\') %></span>\n            </p>\n            <% } %>\n        </div>\n    </div>\n    <footer class="footer -spaceNone">\n        <button type="button" class="btnLyBack uButton -iconLyBack _closeBtn"><span class="gSrOnly"><%- IM(\'ui.label.back\') %></span></button>\n    </footer>\n</div>'},1928:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(10),a=n(6),o=n(4),l=n(1929),r=n(1930),d=n(153),c=n(162),h=n(1494),u=n(1935),p=n(595),m=n(533),_=n(512),b=n(611),g=n(568),f=n(26),v=n(159),A=n(1150),M=n(1103),C=n(190),I=n(499),E=n(498),y=n(154),T=n(55),N=n(488),D=n(590),S=n(908),w=n(495),B=n(487),L=n(1937),P=n(1553),O=n(156),R=n(1105),x=n(17),k=n(1023),V=n(935),U=n(562),F=n(158),G=n(1261),W=n(1127);n(591);var z,H=o.View.extend({attributes:{"data-viewname":"DBandAlbumDetailView","aria-live":"polite"},tagName:"div",className:"sAlbumSection gContentCardShadow",ui:{headerEl:"._headerEl",photoUpload:"[data-uiselector=photoUpload]",fileInput:"[data-uiselector=fileInput]",optionMenuButton:"[data-uiselector=optionMenuButton]",albumNameEditButton:"[data-uiselector=albumNameEditButton]",albumDeleteButton:"[data-uiselector=albumDeleteButton]",albumNameTitle:"._albumNameTitle",emptyWrap:"._emptyWrap",selectResultArea:"._selectResultArea",unselectButton:"._unselectButton",checkDescription:"._checkDescription",photoCountEl:"._photoCountEl",menuRegion:"._menuRegion",photoListRegion:"._photoListRegion",deselectionButton:"._deselectionButton",albumUrlCopy:"._albumUrlCopy",menuWrap:"._menuWrap"},regions:{menuRegion:{el:"@ui.menuRegion",replaceElement:!0},photoListRegion:{el:"@ui.photoListRegion",replaceElement:!0}},behaviors:function(){var e=[{behaviorClass:S,bandNo:this.options.bandNo},v,B];return this.options.isPage?e.push({behaviorClass:w,sceneId:w.SCENE.PAGE_PHOTO_LIST}):e.push({behaviorClass:w,sceneId:w.SCENE.BAND_PHOTO_LIST}),e},events:{"click @ui.optionMenuButton":"_toggleMenu","click @ui.unselectButton":function(){this._downloadProgress||this._changeToUncheckMode()},"click @ui.albumNameEditButton":function(){this._openAlbumNameUpdateModal()},"click @ui.albumDeleteButton":function(e){if(e.preventDefault(),this._groupCollection.isEmpty()){if(!confirm(IM("web.albumdetail.topbar.confirm.delete_album")))return;p.deletePhotoAlbum(this._bandNo,this.model.getAlbumNo()).then(i.bind((function(){d.GROUP_BAND_ALBUM.goDForced({band_no:this._bandNo})}),this))}else confirm(IM("web.albumdetail.topbar.confirm.delete_photo_exist_album"))&&this._changeToCheckMode()},"click @ui.fileInput":function(){return!D.isContentCreationPunished()&&(this._bandData.isUploadPhotoToAlbumPermitted()?void 0:(alert(IM("permission.not_appointed_member_submit_denied")),!1))},"click @ui.deselectionButton":function(){this._downloadProgress||this._uncheckAll()},"click @ui.albumUrlCopy":function(){this._copyBandAlbumUrl()}},onMessages:(z={},z[v.MSG.DALBUM_MENU_VIEW_SELECT_CLICK]=function(){this._groupCollection.isEmpty()||this._toggleSelectMode()},z[v.MSG.DALBUM_MENU_VIEW_SEND_PHOTO]=function(){this._selectMode&&(this._bandData.isUploadPhotoToAlbumPermitted()?this._openAlbumSelectViewForMove():alert(IM("permission.not_appointed_member_submit_denied")))},z[v.MSG.DALBUM_MENU_VIEW_DOWNLOAD_PHOTO]=function(){this._selectMode&&this._downloadSelectedPhotos()},z[v.MSG.DALBUM_MENU_VIEW_DELETE_PHOTO]=function(){if(this._selectMode){if(this._bandData.isContentsDeletionPermitted()){if(!confirm(IM("web.albumdetail.layer.confirm.delete_photos")))return}else if(!confirm(IM("web.albumdetail.topbar.confirm.delete_selected_photos")))return;var e=new a.Collection(this._groupCollection.extractCheckedCollection());this._deletePhotos(e.pluck("photo_no"))}},z[v.MSG.ALBUM_DETAIL_CHECK_IMAGE]=function(e){this._downloadProgress||(this._groupListView.changeCheckListByClickData(e),this._selectMode?this._refreshMenuStatus():this._changeToCheckMode())},z[v.MSG.ALBUM_DETAIL_CLICK]=function(e){var t=this._groupCollection.extractPhotoDataForImageViewer(e.model),n=M.openImageViewer(this,this._bandData,this.model.getAlbumNo(),t.index,t.result_data.photos,t.result_data.total_count,!1,this._menuView.isCurrentMonthlySortType());this._setFinalIndexToImageViewer(n),this.listenTo(n,b.EVENT.FETCH_NEXT_PHOTOS,(function(e,t){y.wrapActivePromise(this._fetchNextPage(),this).then(i.bind((function(e){var i={};i.photos=e.items,i.total_count=e.total,M.populateToCollection(n,this.model.getBandNo(),t,i),this._setFinalIndexToImageViewer(n)}),this))}))},z[v.MSG.DALBUM_MENU_VIEW_SORT_CHANGE]=function(e){var t=e.sortType,n=e.from;this._fetchAndRenderList(t,n)},z),initialize:function(e){this._bandNo=e.bandNo,this._albumNo=e.albumNo,this._isPage=e.isPage,this._albumNameEditable=!1,this._topSelectBarFixed=!1,this._selectMode=!1,this._isFixed="-fixed",t.isNumeric(this._albumNo)&&this._albumNo!=g.TOTAL_ALBUM_NO||(this._albumNo=g.TOTAL_ALBUM_NO),this._dataFetched=!1,this.listenTo(f.getDGlobalChannel(),f.EVENT.HTML_CLICK,(function(){this._toggleMenu(!1)})),this.listenTo(f.getAlbumChannel(),f.EVENT.ALBUM_PHOTO_ADDED,this._movePageOnPhotoAddEvent),this.listenTo(f.getAlbumChannel(),f.EVENT.ALBUM_PHOTO_DELETED,this._movePageOnPhotoDeleteEvent),this.listenTo(_,"window:scroll:bottom",this._fetchNextPage)},getTemplate:function(){return this._dataFetched?i.template(l):i.template(E)},serializeData:function(){if(!this._dataFetched)return{dataFetched:!1,_loading_size:I.Size.MEDIUM,middleClass:N.ELEMENT.SCREEN_VERTICAL_MIDDLE};var e=!this.model.isTotalAlbum()&&(this._bandData.isContentsDeletionPermitted()||this.model.isAlbumOwner());return i.extend(this.model.toJSON(),{isEmpty:this._groupCollection.isEmpty(),dataFetched:!0,isAlbumNameEditable:this._albumNameEditable,isAlbumDeletable:e,photoCount:s.numberFormat(this._groupCollection.getTotalCount()),cid:this.cid,isFixed:this._isFixed,isPage:this._isPage,isUploadPhotoToAlbumPermitted:this._bandData.isUploadPhotoToAlbumPermitted()})},onDomRefresh:function(){this._dataFetched&&(this._renderMenuAndPhotoList(g.ALBUM_DETAIL_SORT_TYPE.RECENT_PHOTO),this._bindPhotoUploader())},onAttach:function(){this._dataFetched=!1,y.wrapActivePromise(h.fetchDetailAlbumData(this._bandNo,this._albumNo),this).then(i.bind((function(e){this.model=e.detailModel,this._bandData=e.bandData,this._groupCollection=e.groupCollection,this._albumNameEditable=!this.model.isTotalAlbum()&&(this._bandData.isAlbumNameEditPermitted()||this.model.isAlbumOwner()),this._albumNameEditable&&this.$el.addClass("-albumNameEditable"),this._dataFetched=!0,this._isPage?(this._headUiFixed(),this._sendPageBandPhotoListSceneEnterJackpotLog()):this._sendBandAlbumPhotoListSceneEnterJackpotLog(),this.render()}),this),i.bind((function(){var e=d.GROUP_BAND_ALBUM;this.options.isPage&&(e=c.PAGE_BAND_MEDIA),e.goDForced({band_no:this._bandNo})}),this))},onBeforeDetach:function(){this._destroyPhotoUploader()},_fetchAndRenderList:function(e,t){y.wrapActivePromise(h.fetchGroupCollection(this.model.getBandNo(),t,this.model.getAlbumNo(),e),this).then(i.bind((function(n){T.get$Window().scrollTop()>22&&T.get$Window().scrollTop(22),this._groupCollection=n,this._renderMenuAndPhotoList(e,t)}),this))},_renderMenuAndPhotoList:function(e,t){this._sortType=e,this._selectedTimeMillis=t,this._groupCollection.isEmpty()?this._renderEmptyAlbumList():(this._menuView?this._menuView.renderMenuView(e,t):(this._menuView=u.buildDetailMenuView(e,this.model.getFirstPhotoTimeMillis(),this._bandData.isVisibleAlbumDetailActionMenu()),this.getRegion("menuRegion").show(this._menuView)),this._menuView.$el.show(),P.resetShiftGuideInCurrentPage(),this._groupListView=r.buildDGroupListView(this._groupCollection,e,this._bandData.isVisibleAlbumDetailActionMenu()),this.getRegion("photoListRegion").show(this._groupListView),this.getUI("emptyWrap").hide(),this.ui.photoCountEl.text(s.numberFormat(this._groupCollection.getTotalCount())),this._changeToUncheckMode(),this._adjustBottomSelectBarFixing())},_adjustBottomSelectBarFixing:function(){if(!this._groupCollection.isEmpty()){var e=this._groupListView.el.getBoundingClientRect().bottom;T.getHeight()<=e+40?this.ui.selectResultArea.toggleClass("-fixed",!0):this.ui.selectResultArea.toggleClass("-fixed",!1)}},_refreshMenuStatus:function(){var e=this._groupCollection.getCheckedImageCount();this.ui.checkDescription.html(IM("n_photos_selected",{count:e+""}));var t=e>0&&!this._downloadProgress;this._menuView.changePhotoMenuButtons(t),this.ui.deselectionButton.toggle(t)},_movePageOnPhotoAddEvent:function(e,t){if(!this.isDestroyed()&&this._dataFetched&&this._bandNo==e){var n=d.GROUP_BAND_ALBUM_DETAIL;this._bandData.canSelectAlbumWhenUploadMedia()||(n=c.PAGE_BAND_MEDIA),n.goDForced({band_no:this._bandNo,album_no:this._albumNo==g.TOTAL_ALBUM_NO?C.TOTAL_ALBUM_NO:t+""})}},_movePageOnPhotoDeleteEvent:function(e,t){!this.isDestroyed()&&this._dataFetched&&this._bandNo==e&&this._groupCollection.containTargetPhotoNos(t)&&this._removePhotosFromView(this._bandNo,this._albumNo,t)},_openAlbumSelectViewForMove:function(){var e=A.openAlbumSelectView({bandNo:this.model.getBandNo(),saveButtonText:IM("web.modal.btn.confirm"),excludeAlbumNo:this.model.getAlbumNo()});this.listenTo(e,"unselect:album",(function(){this._movePhotos(g.TOTAL_ALBUM_NO,e)})),this.listenTo(e,"select:album",(function(t,n){this._movePhotos(n,e)}))},_movePhotos:function(e,t){if(!this._moveProgress){var n=new a.Collection(this._groupCollection.extractCheckedCollection()).pluck("photo_no");this._moveProgress=!0,y.wrapActivePromise(m.movePhotos(this.model.getBandNo(),e,n),this).then(i.bind((function(){alert(IM("photo.photos_move_completed")),this.model.getAlbumNo()==e||this.model.isTotalAlbum()?this._changeToUncheckMode():this._removePhotosFromView(this._bandNo,this.model.getAlbumNo(),n)}),this)).always(i.bind((function(){t.destroy(),this._moveProgress=!1}),this))}},_removePhotosFromView:function(e,t,n){this._dataFetched&&this._bandNo==e&&this.model.getAlbumNo()==t&&(this._groupListView.removePhotos(n),this._groupCollection.isEmpty()&&this._renderEmptyAlbumList(),this._changeToUncheckMode(),this._adjustBottomSelectBarFixing(),this.ui.photoCountEl.text(s.numberFormat(this._groupCollection.getTotalCount())),R.restartDocumentSticky())},_deletePhotos:function(e){y.wrapActivePromise(m.deletePhotos(this._bandNo,e),this).then(i.bind((function(e){this._changeToUncheckMode(),f.getAlbumChannel().trigger(f.EVENT.ALBUM_PHOTO_DELETED,this._bandNo,e)}),this))},_downloadSelectedPhotos:function(){if(!this._downloadProgress){var e=this._groupCollection.extractDownloadablePhotos();e.length>100?alert(IM("album.exceed_max_download_count",{count:100})):(alert(IM("album.multiple_download_alert")),i.isEmpty(e)?this._uncheckAll():(this._downloadProgress=!0,this._refreshMenuStatus(),y.wrapActivePromise(this._downloadAsZipFile(e),this).then(i.bind((function(){this._uncheckAll()}),this)).always(i.bind((function(){this._downloadProgress=!1,this._refreshMenuStatus()}),this))))}},_downloadAsZipFile:function(e){var t=this._bandData.getBandCore().name.substring(0,100),n=this.model.getAlbumName().substring(0,100),i=O.convertToSafeFileNameAgainstOS(t+"-"+n);return W.supports()?this._downloadWithZipDownloader(e,i):this._downloadFromServer(e,i)},_downloadFromServer:function(e,t){var n=e.map((function(e){return"<"+e.photoNo+">"+e.photoUrl})).join(",");return L.downloadMultipleMedias(n,t).fail((function(){alert(IM("album.multiple_download_failure"))}))},_downloadWithZipDownloader:function(e,n){for(var i=this._bandData.getBandCore(),s=i.bandNo,a=W.entries(),o=n+"-",l=0,r=e.length;l<r;l++){var d=e[l];a.addPhoto(s,o+d.photoNo,d.photoUrl)}var c=t.Deferred();return W.download({zipName:n,zipEntries:a,bandCore:i,onCancel:function(){c.reject()},onComplete:function(){c.resolve()}}),c.promise()},_isValidForAlbumName:function(e){var t=s.trim(e);if(!t)return!1;if(t.length>g.MAX_ALBUM_NAME_LENGTH){var n=IM("ui.message.type_up_to_maxlength",{maxlength:g.MAX_ALBUM_NAME_LENGTH});return this._alertBandAlbumMessage(n),!1}return!0},_alertBandAlbumMessage:function(e){U.openLayer({bodyTitle:F.nl2br(e),withoutHiding:!0})},_openAlbumNameUpdateModal:function(){V.openDPromptModalView({title:IM("web.albumdetail.layer.btn.change_album_name"),defaultText:this.model.getAlbumName(),maxlength:g.MAX_ALBUM_NAME_LENGTH,placeholder:IM("ui.label.album_name"),validation:i.bind(this._isValidForAlbumName,this),withoutHiding:!0}).once({"modal:confirm":i.bind((function(e){this._updateAlbumName(e)}),this)})},_updateAlbumName:function(e){var t=s.trim(e);this._isValidForAlbumName(t)&&y.wrapActivePromise(p.setPhotoAlbumName(this._bandNo,this.model.getAlbumNo(),t),this).then(i.bind((function(e){this.model.setAlbumName(e.photo_album.name),this.ui.albumNameTitle.text(this.model.getAlbumName())}),this))},_toggleSelectMode:function(){this._selectMode?this._changeToUncheckMode():this._changeToCheckMode()},_changeToCheckMode:function(){this._selectMode||(this.$el.toggleClass("-checkMode",!0),this._menuView.toggleSelectButton(!0),this.ui.selectResultArea.show(),this._refreshMenuStatus(),this._selectMode=!0)},_changeToUncheckMode:function(){this.$el.toggleClass("-checkMode",!1),this._uncheckAll(),this._menuView.toggleSelectButton(!1),this.ui.selectResultArea.hide(),this._selectMode=!1},_uncheckAll:function(){this._groupListView.uncheckAll(),this._refreshMenuStatus()},_fetchNextPage:function(){return 1!=this._fetchProgress&&this._dataFetched&&this._groupCollection.hasMorePhoto()?(this._fetchProgress=!0,y.wrapActivePromise(h.fetchPhotoList(this.model.getBandNo(),this._menuView.getCurrentFrom(),this.model.getAlbumNo(),this._menuView.getCurrentSortType(),this._groupCollection.getPaging()),this).then(i.bind((function(e){return this._groupListView.addFetchedPhotoData(e),e}),this)).always(i.bind((function(){this._fetchProgress=!1}),this))):t.Deferred().reject()},_setFinalIndexToImageViewer:function(e){this._menuView.isCurrentMonthlySortType()&&(this._groupCollection.hasMorePhoto()||e.setFinalIndex(this._groupCollection.getCurrentCount()-1))},_destroyPhotoUploader:function(){this._photoUploader&&this._photoUploader.destroy()},_bindPhotoUploader:function(){this._destroyPhotoUploader(),this._photoUploader=G.createPhotoOrVideoUploader({inputElement:this.ui.photoUpload,inputClick:i.bind(this._sendUploadClickJackpotLog,this),bandNo:this._bandNo,albumNo:this._albumNo,addToAlbum:!0})},_sendBandAlbumPhotoListSceneEnterJackpotLog:function(){try{this.jplSceneEnter(B.CLASSIFIER.BAND_PHOTO_LIST,{band_no:this._bandNo,album_no:this._albumNo})}catch(e){}},_sendPageBandPhotoListSceneEnterJackpotLog:function(){try{this.jplSceneEnter(B.CLASSIFIER.PAGE_PHOTO_LIST,{band_no:this._bandNo})}catch(e){}},_sendUploadClickJackpotLog:function(){try{this.jplClick(B.CLASSIFIER.UPLOAD_PHOTO,{band_no:this._bandNo,album_no:this._albumNo})}catch(e){}},_headUiFixed:function(){this._isFixed="",this.listenTo(_,"window:scroll:down",(function(e){e>297&&this.getUI("headerEl").addClass("-fixed")})),this.listenTo(_,"window:scroll:up",(function(e){e<297&&this.getUI("headerEl").removeClass("-fixed")}))},_renderEmptyAlbumList:function(){this._menuView&&this._menuView.renderMenuView(this._sortType,this._selectedTimeMillis),this.getUI("emptyWrap").show(),this.getRegion("photoListRegion").destroy()},_copyBandAlbumUrl:function(){var e=x.appendCurrentDomainOnPathUrl(d.GROUP_BAND_ALBUM_DETAIL.makeUrl({band_no:this._bandNo,album_no:this._albumNo==g.TOTAL_ALBUM_NO?C.TOTAL_ALBUM_NO:this._albumNo}));k.openUrlCopyLayerView(e)},_toggleMenu:function(e){!1!==e?"none"===this.ui.menuWrap.css("display")&&i.defer(i.bind((function(){this.ui.menuWrap.css("display","")}),this)):this.ui.menuWrap.css("display","none")}});return H.buildDBandAlbumDetailView=function(e,t,n){return new H({bandNo:e,albumNo:t,isPage:n||!1})},H}.call(t,n,t,e))||(e.exports=i)},1929:function(e,t){e.exports='<div class="uHeaderWrap -detail _headerEl <%- isFixed %> <% if ( isPage ) {%> -h50 <%} %>">\n    <header class="header">\n        <h1 class="title -ellipsis">\n            <span class="titleText _albumNameTitle"><%- albumName %></span> <em class="count sf_color _photoCountEl"><%= photoCount != 0 ? photoCount : \'\' %></em>\n        </h1>\n        <div class="btnsWrap">\n            <% if(isUploadPhotoToAlbumPermitted && !isPage) { %>\n            <div class="btn uButton sf_tBorderOpacity sf_color" data-uiselector="photoUpload"><%= IM(\'ui.label.upload_photo\') %>\n                <input type="file" data-uiselector="fileInput" class="inputFile">\n            </div>\n            <% } %>\n            <div class="moreWrap">\n                <button type="button" class="btnMore" data-uiselector="optionMenuButton"><span class="gSrOnly"><%= IM(\'photo.album.setting\') %></span></button>\n                <div class="lyMenu _menuWrap" style="display:none">\n                    <ul>\n                        <li><button class="btnListItem _albumUrlCopy"><%= IM(\'ui.label.copy_url\') %></button></li>\n                        <% if ( isAlbumNameEditable) { %>\n                        <li><button class="btnListItem" data-uiselector="albumNameEditButton"><%= IM(\'photo.change_album_name\') %></button></li>\n                        <% }\n\n                            if ( isAlbumDeletable ) {\n                        %>\n                        <li><button class="btnListItem" data-uiselector="albumDeleteButton"><%= IM(\'photo.delete_album\') %></button></li>\n                        <% } %>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </header>\n</div>\n<div class="_menuRegion"></div>\n\n<div class="_photoListRegion"></div>\n<% if ( !isPage ) { %>\n<div class="albumWrap -detail _emptyWrap"<% if ( !isEmpty ) { %> style="display: none;" <% } %>>\n    <p class="uEmpty gFs14 gColorGr3 gMat22" style="height:450px">\n        <span><%= IM(\'web.albumdetail.photolist.txt.no_photo_description\') %></span>\n    </p>\n</div>\n<% } else { %>\n<div class="albumWrap -detail _emptyWrap"<% if ( !isEmpty ) { %> style="display: none;" <% } %>>\n    <div class="uEmpty" style="height:525px">\n        <div>\n            <span class="uEmptyIcon -photo"></span>\n            <strong class="uEmptyTitle"><%= IM(\'board.no.photos.still\') %></strong>\n            <p class="uEmptyDesc"><%= IM(\'band.photos.videos.moa.in.here\') %></p>\n        </div>\n    </div>\n</div>\n<% } %>\n<div class=" cFixedBottomStatus gMal-1 gMar-1 gMab-1 _selectResultArea" style="display: none;">\n    <div class="statusCommentWrap gMat-1">\n        <span class="statusText _checkDescription"></span>\n    </div>\n    <div class="buttonBox gMal10">\n        <button type="button" class="btnDeselect _deselectionButton" ><%- IM(\'deselection\') %></button>\n        <button type="button" class="btnClose _unselectButton"><%= IM(\'ui.label.quit\') %></button>\n    </div>\n</div>'},1930:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1931),a=n(568),o=i.CollectionView.extend({attributes:{"data-viewname":"DBandAlbumDetailGroupListView"},className:function(){return this._isMonthlyDateType()?"_groupContainer":"albumWrap -detail _groupContainer"},template:t.template(""),ui:{groupContainer:"._groupContainer"},childView:s,childViewOptions:function(e){return{collection:e.getPhotoCollection(),isMonthlyDateType:this._isMonthlyDateType(),isVisibleAlbumDetailActionMenu:this.options.isVisibleAlbumDetailActionMenu}},initialize:function(){this._recentClickedPhotoNo=null,this._recentShiftClickedPhotoNo=null},_isMonthlyDateType:function(){return a.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(this.options.sortType)},uncheckAll:function(){this._recentClickedPhotoNo=null,this._recentShiftClickedPhotoNo=null,this.children.each((function(e){e.uncheckAll()}))},addFetchedPhotoData:function(e){this.collection.addPhotoResultData(e)},removePhotos:function(e){this.collection.removeTargetModels(e);var t=[];this.children.each((function(e){e.isChildrenEmpty()&&t.push(e.getModel())})),this.collection.remove(t)},changeCheckListByClickData:function(e){if(null==this._recentClickedPhotoNo||!e.shiftKey)return this._toggleCheckAdjacentlyByPhotoNo(e.photoNo,e.photoNo),e.checkState?(this._recentClickedPhotoNo=this._recentShiftClickedPhotoNo,void this._resetClickedPhotoNosIfNoneSelected()):(this._recentClickedPhotoNo=e.photoNo,void(this._recentShiftClickedPhotoNo=e.photoNo));if(null==this._recentShiftClickedPhotoNo)return this._toggleCheckAdjacentlyByPhotoNo(this._recentClickedPhotoNo,e.photoNo),void(e.checkState||(this._recentShiftClickedPhotoNo=e.photoNo));var t=this.collection.findAdjacentPhotoNoArray(this._recentClickedPhotoNo,e.photoNo);if(!this.collection.isTargetPhotosAllChecked(t))return this._checkAdjacentlyByPhotoNo(this._recentClickedPhotoNo,e.photoNo),void(this._recentShiftClickedPhotoNo=e.photoNo);this._uncheckAdjacentlyByPhotoNo(e.photoNo,this._recentShiftClickedPhotoNo),this._recentShiftClickedPhotoNo=e.photoNo,this._resetClickedPhotoNosIfNoneSelected()},_toggleCheckAdjacentlyByPhotoNo:function(e,t){var n=this.collection.findAdjacentPhotoNoArray(e,t);this.collection.isTargetPhotosAllChecked(n)?this._uncheckAdjacentlyByPhotoNo(e,t):this._checkAdjacentlyByPhotoNo(e,t)},_checkAdjacentlyByPhotoNo:function(e,t){var n=this.collection.findAdjacentPhotoNoArray(e,t);this.children.each((function(e){e.checkTargetPhotos(n)}))},_uncheckAdjacentlyByPhotoNo:function(e,t){var n=this.collection.findAdjacentPhotoNoArray(e,t);this.children.each((function(e){e.uncheckTargetPhotos(n)}))},_resetClickedPhotoNosIfNoneSelected:function(){this.collection.getCheckedImageCount()>0||(this._recentClickedPhotoNo=null,this._recentShiftClickedPhotoNo=null)}});return o.buildDGroupListView=function(e,t,n){return new o({collection:e,sortType:t||!1,isVisibleAlbumDetailActionMenu:n})},o}.call(t,n,t,e))||(e.exports=i)},1931:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1932),a=n(1933),o=i.View.extend({attributes:{"data-viewname":"DBandAlbumDetailPhotoListView"},tagName:"div",className:function(){return this.options.isMonthlyDateType?"albumWrap -detail":""},template:t.template(s),regions:{photoListContainer:{el:"._photoListContainer",replaceElement:!0}},onDomRefresh:function(){this._photoCollectionView=new l({collection:this.collection,model:this.model,isVisibleAlbumDetailActionMenu:this.options.isVisibleAlbumDetailActionMenu}),this.showChildView("photoListContainer",this._photoCollectionView)},uncheckAll:function(){this._photoCollectionView.uncheckAll()},isChildrenEmpty:function(){this._photoCollectionView.isChildrenEmpty()},getModel:function(){this._photoCollectionView.getModel()},checkTargetPhotos:function(e){this._photoCollectionView.checkTargetPhotos(e)},uncheckTargetPhotos:function(e){this._photoCollectionView.uncheckTargetPhotos(e)}}),l=i.CollectionView.extend({tagName:"ul",className:"_photoListContainer albumImages -sizeL",ui:{photoListContainer:"._photoListContainer"},childView:a,childViewContainer:"@ui.photoListContainer",childViewOptions:function(){return{isVisibleAlbumDetailActionMenu:this.options.isVisibleAlbumDetailActionMenu}},filter:function(e){return!this.model.isMonthlyDateType()||this.model.getYearMonthText()==e.getYearMonthText()},uncheckAll:function(){this.children.each((function(e){e.uncheck()}))},isChildrenEmpty:function(){return 0==this.children.length},checkTargetPhotos:function(e){this.children.each((function(t){t.checkIfPhotoNoIn(e)}))},uncheckTargetPhotos:function(e){this.children.each((function(t){t.uncheckIfPhotoNoIn(e)}))},getModel:function(){return this.model}});return o}.call(t,n,t,e))||(e.exports=i)},1932:function(e,t){e.exports='<% if ( monthlyDateType ) { %>\n<h2 class="title"><%= yearMonthText %></h2>\n<% } %>\n<div class="_photoListContainer"></div>'},1933:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1934),a=n(82),o=n(159),l=n(164),r=n(512),d=n(498),c=n(154),h=n(1553),u=n(26);n(502);return i.View.extend({attributes:{"data-viewname":"DBandAlbumDetailPhotoView"},tagName:"li",className:"album",templateContext:function(){var e=this.model;return{msg_thumbnailUrl:function(){var t=l.s276;return e.isVideo()&&640==e.getWidth()&&480==e.getHeight()&&(t=l.mfullfill_640_480),a.make(e.getPhotoUrl(),t)},isVisibleAlbumDetailActionMenu:this.options.isVisibleAlbumDetailActionMenu}},behaviors:{CourierBehavior:""},ui:{image:"._image",thumbnailImage:"._thumbnailImage",border:"._border",checkBoxInput:"._checkBoxInput",closeShiftGuideButton:"._closeShiftGuideButton",shiftGuideLayer:"._shiftGuideLayer"},events:{"click @ui.checkBoxInput":function(e){return c.wrapDeferPromise(this).then(t.bind((function(){this.spawn(o.MSG.ALBUM_DETAIL_CHECK_IMAGE,{shiftKey:e.shiftKey,photoNo:this.model.getPhotoNo(),checkState:this.model.isChecked()})}),this)),!1},"click @ui.thumbnailImage":function(e){this.spawn(o.MSG.ALBUM_DETAIL_CLICK,{model:this.model}),e.preventDefault()},"click @ui.closeShiftGuideButton":function(){h.hideShiftGuidePermanently(),this.ui.shiftGuideLayer.hide()}},initialize:function(){this._hidden=!1,this._throttledEmptyView=t.throttle(t.bind(this._emptyViewIfOutOfScreen,this),500)},getTemplate:function(){return this._hidden?t.template(""):t.template(s)},onDomRefresh:function(){if(!this._hidden){var e="";this.model.isGifVideo()||this.model.isGif()?e="iconGif":this.model.isVideo()&&(this.model.isVideoExpired()?(this.$el.addClass("-expired"),this.ui.thumbnailImage.append('<div class="uVideoExpired -size42"><span class="cont"><i></i><span>'+IM("storage_period.video.expired.msg")+"</span></span></div>")):e="iconPlayer"),this.ui.thumbnailImage.addClass(e)}},onAttach:function(){var e=t.template(d)({middleClass:"cMiddle",_loading_size:32});this.ui.image.setLoading({tag:e}),this._offsetTop=this.$el.offset().top,this.listenTo(r,"window:scroll",this._throttledEmptyView)},uncheck:function(){this.model.unCheck(),this._hidden||(this.ui.checkBoxInput.prop("checked",!1),this.ui.border.hide()),u.getAlbumChannel().trigger(u.ALBUM_PHOTO_HIDE_SHIFT_GUIDE)},checkIfPhotoNoIn:function(e){t.isEmpty(e)||t.contains(e,this.model.getPhotoNo())&&this._checkPhotoView()},uncheckIfPhotoNoIn:function(e){t.isEmpty(e)||t.contains(e,this.model.getPhotoNo())&&this.uncheck()},_checkPhotoView:function(){this.model.setCheck(!0),this._hidden||(this.ui.checkBoxInput.prop("checked",!0),this.ui.border.show()),u.getAlbumChannel().trigger(u.ALBUM_PHOTO_HIDE_SHIFT_GUIDE),h.canShowShiftGuide()&&(h.hideShiftGuideInCurrentPage(),this.ui.shiftGuideLayer.show(),this.listenToOnce(u.getAlbumChannel(),u.ALBUM_PHOTO_HIDE_SHIFT_GUIDE,this._hideShiftGuideLayer),this.listenToOnce(r,"window:scroll",this._hideShiftGuideLayer))},_hideShiftGuideLayer:function(){h.hideShiftGuideInCurrentPage(),this.ui.shiftGuideLayer.hide()},_renderToEmptyView:function(){this._hidden||(this._hidden=!0,this.render())},_emptyViewIfOutOfScreen:function(e){this._offsetTop+160<e-5e3||e+7e3<this._offsetTop?this._renderToEmptyView():this._hidden&&(this._hidden=!1,this.render())}})}.call(t,n,t,e))||(e.exports=i)},1934:function(e,t){e.exports='<a href="#" role="button" class="_thumbnailImage"><img src="<%- msg_thumbnailUrl() %>" alt=""><span class="sf_tBorder _border" <% if ( check ) { %>style="display:block;"<% } %>></span></a>\n<% if ( emotion_count > 0 || comment_count > 0 ) { %>\n<div class="count">\n    <% if ( emotion_count > 0 ) { %><span class="emotion"><%= emotion_count %></span><% } %>\n    <% if ( comment_count > 0 ) { %><span class="comment"><%= comment_count %></span><% } %>\n</div>\n<% } %>\n<% if (isVisibleAlbumDetailActionMenu) { %>\n<label for="check_<%= cid %>" class="uCheck -checkbox -photo">\n    <input type="checkbox" id="check_<%= cid %>" class="checkInput _checkBoxInput" <% if ( check ) { %> checked="checked" <% } %> >\n    <span class="checkLabel">\n        <span class="shape sf_tAfterBg"></span>\n    </span>\n</label>\n<% } %>\n\n<div class="tooltipLayer _shiftGuideLayer" style="display:none;" >\n    <dl class="uHelpGuide -close">\n        <dd style="display: block; width:265px"><%= IM(\'album.shift_selection_description\') %>\n            <button type="button" class="btnLyClose _closeShiftGuideButton"><span class="gSrOnly"><%- IM(\'web.ui.button.label.close\') %></span></button>\n        </dd>\n    </dl>\n</div>\n'},1935:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(16),o=n(9),l=n(568),r=n(159),d=n(1936),c=s.View.extend({attributes:{"data-viewname":"DBandAlbumDetailMenuView"},className:"detailSort",template:i.template(d),behaviors:{CourierBehavior:""},ui:{sortOptionButton:"._sortOptionButton",yearMonthOption:"._yearMonthOption",selectButton:"._selectButton",menuView:"._menuView",sendPhotoButton:"._sendPhotoButton",deletePhotoButton:"._deletePhotoButton",downloadPhotoButton:"._downloadPhotoButton"},events:{"click @ui.selectButton":function(){this.spawn(r.MSG.DALBUM_MENU_VIEW_SELECT_CLICK)},"click @ui.downloadPhotoButton":function(){this.spawn(r.MSG.DALBUM_MENU_VIEW_DOWNLOAD_PHOTO)},"click @ui.sendPhotoButton":function(){this.spawn(r.MSG.DALBUM_MENU_VIEW_SEND_PHOTO)},"click @ui.deletePhotoButton":function(){this.spawn(r.MSG.DALBUM_MENU_VIEW_DELETE_PHOTO)},"change @ui.sortOptionButton":function(e){var n=l.ALBUM_DETAIL_SORT_TYPE.findById(t(e.currentTarget).val());this._sortType==n||this._preventChange||(this._preventChange=!0,this.spawn(r.MSG.DALBUM_MENU_VIEW_SORT_CHANGE,{sortType:n,from:this._selectedTimeMillis}))},"change @ui.yearMonthOption":function(e){var n=parseInt(t(e.currentTarget).val());this._preventChange||n==this._selectedTimeMillis||(this._preventChange=!0,this.spawn(r.MSG.DALBUM_MENU_VIEW_SORT_CHANGE,{sortType:l.ALBUM_DETAIL_SORT_TYPE.MONTHLY_DATE,from:n}))}},initialize:function(e){this._firstPhotoTimeMillis=e.firstPhotoTimeMillis,this._generateYearMonthArray(),this._selectedTimeMillis=this._yearMonthArray[0].timeMillis,this._sortType=e.sortType,this._isVisibleAlbumDetailActionMenu=e.isVisibleAlbumDetailActionMenu},serializeData:function(){return{monthlyView:l.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(this._sortType),yearMonthArray:this._yearMonthArray,selectedTimeMillis:this._selectedTimeMillis,selectedYearMonthText:this._selectedYearMonthText,recentOrder:l.ALBUM_DETAIL_SORT_TYPE.RECENT_PHOTO,dateOrder:l.ALBUM_DETAIL_SORT_TYPE.MONTHLY_DATE,sortText:this._sortType.TEXT,cid:this.cid,isVisibleAlbumDetailActionMenu:this._isVisibleAlbumDetailActionMenu}},onAttach:function(){},toggleSelectButton:function(e){e?(this.ui.menuView.show(),this.ui.selectButton.hide()):(this.ui.menuView.hide(),this.ui.selectButton.show())},changePhotoMenuButtons:function(e){this.ui.downloadPhotoButton.prop("disabled",!e),this.ui.sendPhotoButton.prop("disabled",!e),this.ui.deletePhotoButton.prop("disabled",!e)},renderMenuView:function(e,t){this._selectedTimeMillis=t;var n=a(this._selectedTimeMillis).startOf("month");this._selectedYearMonthText=IM("from_date",{dateString:o.format.date(n,"year_month")}),this._sortType=e,this.render(),this._preventChange=!1},getCurrentFrom:function(){return this._selectedTimeMillis},getCurrentSortType:function(){return this._sortType},isCurrentMonthlySortType:function(){return l.ALBUM_DETAIL_SORT_TYPE.isMonthlyDateType(this.getCurrentSortType())},_generateYearMonthArray:function(){this._yearMonthArray=[];for(var e=a(this._firstPhotoTimeMillis).startOf("month"),t=a();t.isAfter(e);)this._yearMonthArray.push({timeMillis:e.valueOf(),text:IM("from_date",{dateString:o.format.date(e,"year_month")})}),e.add(1,"M")}});return c.buildDetailMenuView=function(e,t,n){return new c({sortType:e,firstPhotoTimeMillis:t,isVisibleAlbumDetailActionMenu:n})},c}.call(t,n,t,e))||(e.exports=i)},1936:function(e,t){e.exports='<div class="uSelectArea">\n    <div class="uSelect -h20 -textType">\n        <label for="sort" class="gSrOnly"><%- sortText %></label>\n        <select id="sort" class="_sortOptionButton">\n            <option value="<%= recentOrder.ID %>" <% if ( !monthlyView ) { %> selected <% } %>><%= recentOrder.TEXT %></option>\n            <option value="<%= dateOrder.ID %>" <% if ( monthlyView ) { %> selected <% } %>><%= dateOrder.TEXT %></option>\n        </select>\n    </div>\n    <% if ( monthlyView ) { %>\n    <div class="uSelect -h20 -textType">\n        <label for="sortMonthSelect" class="gSrOnly"><%= selectedYearMonthText %></label>\n        <select id="sortMonthSelect" class="_yearMonthOption">\n            <%\n                var selected = null;\n                _.each(yearMonthArray, function(yearMonthData) {\n                    selected = (yearMonthData.timeMillis == selectedTimeMillis) ? \'selected\':\'\';\n            %>\n            <option <%= selected %> value="<%= yearMonthData.timeMillis %>"><%= yearMonthData.text %></option>\n            <% }); %>\n        </select>\n    </div>\n    <% } %>\n</div>\n<% if (isVisibleAlbumDetailActionMenu) { %>\n<div class="action">\n    <div class="item">\n        <button type="button" class="uButton -text -manage _selectButton"><%= IM(\'ui.label.manage\') %></button>\n        <div class="btns _menuView" style="display:none">\n            <button type="button" class="uButton -text _downloadPhotoButton" disabled><%= IM(\'ui.label.save\') %></button>\n            <span class="bar"></span>\n            <button type="button" class="uButton -text _sendPhotoButton" disabled><%= IM(\'ui.label.move\') %></button>\n            <span class="bar"></span>\n            <button type="button" class="uButton -text _deletePhotoButton" disabled><%= IM(\'ui.label.del\') %></button>\n        </div>\n    </div>\n</div>\n<% } %>'},1937:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(198),s=n(540),a=n(59);n(591);function o(e,t){if(t&&t.currentTarget){var n={body:e,statusCode:t.currentTarget.status,xhrReadyState:t.currentTarget.readyState};a.sendWarn(n)}}return{downloadMultipleMedias:function(e,n){return s.getAccessToken("/t/v1/download_photo").then((function(s){return function(e,n,s){var a=t.Deferred(),l=new XMLHttpRequest;return l.open("POST",i.makeApiBaseUrl("https://up.band.us/t/v1/download_photo"),!0),l.timeout=36e5,l.responseType="blob",l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onload=function(){if(200===this.status){var e=l.getResponseHeader("Content-Type"),i=new Blob([this.response],{type:e}),s=window.URL||window.webkitURL;if(void 0!==window.navigator.msSaveBlob)return window.navigator.msSaveBlob(i,n+".zip"),void a.resolve();var o=s.createObjectURL(i),r=document.createElement("a");void 0===r.download?window.location=o:(r.href=o,r.download=n+".zip",document.body.appendChild(r),r.click()),a.resolve(),setTimeout((function(){s.revokeObjectURL(o),t(r).remove()}),100)}else a.reject()},l.onerror=function(e){a.reject(e),o("multiple photos download error",e)},l.ontimeout=function(e){a.reject(e),o("multiple photos download timeout",e)},l.send(t.param({url:e,access_token:s,name:n})),a.promise()}(e,n,s.access_token)}))}}}.call(t,n,t,e))||(e.exports=i)},1938:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%= IM("band_address") %></h1>\n        </header>\n        <div class="main">\n            <div>\n                <div class="p -tSpace -bLine">\n                    <div class="uInputTableWrap">\n                        <label for="bigBandURL" class="uInputLabel -h38 gWsNr">\n                            <span class="gSrOnly"><%= IM("band_address") %> : </span>\n                            <%= URL_DOMAIN %>\n                        </label>\n                        <div class="uInput -h38">\n                            <input class="_inputShortcut" type="text" id="bigBandURL" placeholder="URL" maxlength="<%= maxLengthBandShortcut %>">\n                            <span class="border"></span>\n                        </div>\n                    </div>\n                </div>\n                <p class="title -sub"><%= IM("bandsetting.band_shortcut.txt.notice.title") %></p>\n                <ul class="p -fs13 -dotList">\n                    <li><%= IM("bandsetting.band_shortcut.txt.notice2") %></li>\n                    <li><%= IM("bandsetting.band_shortcut.txt.notice3") %></li>\n                    <li><%= IM("bandsetting.band_shortcut.txt.notice4") %></li>\n                </ul>\n            </div>\n        </div>\n        <footer class="footer">\n            <div class="btnArea4">\n                <button type="button" class="_btnClose uButton -cancel"><%= IM("ui.label.cancel") %></button>\n                <button type="button" class="_btnConfirm uButton -disabled"><%= IM("ui.label.confirm") %></button>\n            </div>\n        </footer>\n    </div>\n</section>'},1939:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(1940),o=n(153),l=n(26),r=n(1941),d=n(1943),c=n(1947),h=n(1950),u=n(1954),p=n(1086),m=n(495),_=n(487),b=n(190),g=n(497),f=n(606),v=n(156),A=n(174),M=n(154),C=n(499),I=n(488),E=n(498),y=n(553),T=n(1098),N=n(1036);n(591);var D=/\*|\\|\/|\?|\[|\]/g,S=s.View.extend({className:"sMemberSection gContentCardShadow",attributes:{"data-viewname":"DBandMemberLayoutView","aria-live":"polite"},getTemplate:function(){return this._dataFetched?t.template(a):t.template(E)},templateContext:function(){return this._dataFetched?{isInvitationPermitted:function(e){return e.isInvitationPermitted()},joinQnAListUri:o.GROUP_BAND_JOIN_QNAS.makeUrl({band_no:this.model.getBandNo()}),manageLeaveMemberUri:y.memberWithdrawal(this.model.get("bandData").getBandCore()).url}:{_loading_size:C.Size.MEDIUM,middleClass:I.ELEMENT.SCREEN_VERTICAL_MIDDLE}},behaviors:[{behaviorClass:m,sceneId:m.SCENE.BAND_MEMBERS},{behaviorClass:_}],ui:{virtualMemberListWrap:"._virtualMemberListWrap",memberListWrap:"._memberListWrap",searchResultRegion:"._searchResultWrap",simpleApplicationsRegion:"._simpleApplicationsRegion",btnShowInvitation:"._btnShowInvitation",invitationListWrap:"._invitationListWrap",memberSearchWrap:"._memberSearchWrap",sortGuide:"._sortGuide",btnHasMoreMember:"._btnHasMoreMember",memberCount:"._memberCount",btnMore:"._btnMore",btnExcelDownload:"._btnExcelDownload",btnPrint:"._btnPrint",moreMenuLayer:"._moreMenuLayer",btnJoinQnAList:"._btnJoinQnAList",joinQnARoomCount:"._joinQnARoomCount"},regions:{memberListRegion:"@ui.memberListWrap",virtualMemberListWrap:"@ui.virtualMemberListWrap",invitationListRegion:"@ui.invitationListWrap",searchRegion:{el:"@ui.memberSearchWrap",replaceElement:!0},searchResultRegion:"@ui.searchResultRegion",simpleApplicationsRegion:"@ui.simpleApplicationsRegion"},events:{"click @ui.btnShowInvitation":"_showInvitation","click @ui.btnHasMoreMember":"_focusSearchInput","click @ui.btnMore":"_toggleMoreMenu","click @ui.btnPrint":"_goBandMemberPrintView","click @ui.btnExcelDownload":"_downloadAsExcelFile"},modelEvents:{"update:search":"_setSearchResultView","change:query":function(e,t){t||(this.getUI("searchResultRegion").hide(),this.getUI("simpleApplicationsRegion").show(),this.getUI("memberListWrap").show(),this.getUI("invitationListWrap").show())},"change:memberCount":"_renderMemberCount"},initialize:function(){this._bandNo=this.model.getBandNo()},onDomRefresh:function(){this._dataFetched&&(this._renderRegions(),this._renderMemberCount(),this._renderJoinQnAListBtn())},onAttach:function(){this._sendBandMembersSceneEnterJackpotLog(),this._fetchMemberListThenRender(this.model.get("sortOption")),this.listenTo(l.getDGlobalChannel(),l.EVENT.MEMBER_ADDED,(function(e){e===this._bandNo&&this._refreshBandDataAndMemberListAndRender()})),this.listenTo(l.getDGlobalChannel(),l.EVENT.MEMBER_REMOVED,(function(e,t){e===this._bandNo&&this.model.removeMember(t)})),this.listenTo(l.getBandJoinQnAChannel(),l.BAND_JOIN_QNA_EVENT.ACCEPT_APPLICATION,(function(e,t){t.bandNo==this._bandNo&&this._refreshBandDataAndMemberListAndRender()})),this.listenTo(l.getBandJoinQnAChannel(),l.BAND_JOIN_QNA_EVENT.REJECT_APPLICATION,(function(e,t){t.bandNo==this._bandNo&&this._refreshBandDataAndMemberListAndRender()})),this.listenTo(l.getBandJoinQnAChannel(),l.BAND_JOIN_QNA_EVENT.FIRST_COMMENT_CREATED,(function(e,n){if(n.bandNo==this._bandNo){var i=this.model.get("bandData");M.wrapActivePromise(i.fetchBandData(),this).then(t.bind((function(){this._renderJoinQnAListBtn()}),this))}})),this.listenTo(l.getDGlobalChannel(),l.EVENT.HTML_CLICK,(function(){this.getUI("moreMenuLayer").hide()}))},_renderRegions:function(){this.getRegion("searchRegion").show(r.build(this.model)),this._renderSimpleApplicationsRegion();var e=this.getRegion("memberListRegion");e.show(c.build({model:this.model})),this.model.get("bandData").isManageVirtualMemberPermitted()&&this.getRegion("virtualMemberListWrap").show(h.build(this.model.get("bandNo"),this.model.get("bandData"))),this.listenTo(e.currentView,"members:search:focus",this._focusSearchInput),this.model.get("invitations")&&this.model.get("invitations").length>0&&this.getRegion("invitationListRegion").show(u.build(this.model))},_renderSimpleApplicationsRegion:function(){var e=this.model.get("bandData");e.isAcceptApplicationPermitted()&&this.getRegion("simpleApplicationsRegion").show(d.buildBandApplicationsSimpleView(e))},_renderMemberCount:function(){this.getUI("memberCount").html(this.model.get("memberCount"))},_renderJoinQnAListBtn:function(){this.getUI("btnJoinQnAList").toggle(this.model.isAcceptableJoinQnARoomExist()),this.getUI("joinQnARoomCount").text(this.model.getApplicantJoinQnARoomCountText())},_setSearchResultView:function(){var e=this.model.get("searchResult");this.getRegion("searchResultRegion").show(c.build({model:e,mode:"search",bandData:this.model.get("bandData")})),this.getUI("memberListWrap").hide(),this.getUI("invitationListWrap").hide(),this.getUI("simpleApplicationsRegion").hide(),this.getUI("searchResultRegion").show()},_showInvitation:function(e){e.preventDefault(),this.model.get("bandData").isInvitationPermitted()?o.GROUP_BAND_MEMBER_INVITE.goDForced({band_no:this.model.get("bandNo")}):alert(IM("invitation.message.authorized_member_only"))},_focusSearchInput:function(){this.getRegion("searchRegion").currentView.focus()},_sendBandMembersSceneEnterJackpotLog:function(){try{this.jplSceneEnter(_.CLASSIFIER.BAND_MEMBERS,{band_no:this._bandNo})}catch(e){}},_toggleMoreMenu:function(){return this.getUI("moreMenuLayer").toggle(),!1},_goBandMemberPrintView:function(){var e,t=this.getRegion("memberListRegion").currentView;"function"==typeof t.isRecentJoinTypeSelected&&t.isRecentJoinTypeSelected()?e=b.MEMBER_RECENT_JOIN_SORT_TYPE:"function"==typeof t.isLastWordTypeSelected&&t.isLastWordTypeSelected()?e=b.MEMBER_LAST_WORD_SORT_TYPE:"function"==typeof t.isOldestVisitedTypeSelected&&t.isOldestVisitedTypeSelected()&&(e=b.MEMBER_OLDEST_VISITED_SORT_TYPE);var n=y.memberPrint(this.model.get("bandData").getBandCore(),e).url;window.open(n)},_downloadAsExcelFile:function(){var e=[];this._addExcelMemberDataTo(e),this._addExcelVirtualMemberDataTo(e);var t=["A","B","C","D","E"],n=T.makeMaxColumnWidthData(e,t),i=N.utils.book_new(),s=N.utils.json_to_sheet(e,{header:t,skipHeader:!0});s["!cols"]=n;var a=this.model.get("bandData").getBandCore().name||"BAND";a.length>31&&(a=a.substring(0,31)),a=a.replace(D," "),N.utils.book_append_sheet(i,s,a);var o=N.write(i,{bookType:"xlsx",bookSST:!0,type:"binary"}),l=v.convertToSafeFileNameAgainstOS(a+".xlsx");f.saveAs(new Blob([v.stringToArrayBuffer(o)],{type:"application/octet-stream"}),l)},_addExcelMemberDataTo:function(e){var n=this.model.get("members");e.push({A:IM("web.bandmember.title")}),t.each(n,(function(t){var n={A:t.name,B:t.description,D:A.makePhoneNumberWithCountryCodeIfDifferentRegion(t.cellphoneOriginal)},i=g.parseRole(t.role);(i.leader||i.coleader)&&(n.C=i.label),e.push(n)}))},_addExcelVirtualMemberDataTo:function(e){var t=this.getRegion("virtualMemberListWrap").currentView;if(this.model.get("bandData").isManageVirtualMemberPermitted()&&t&&"function"==typeof t.getVirtualMemberCollection){var n=t.getVirtualMemberCollection();n.length<=0||(e.push({A:""}),e.push({A:IM("virtual.member.list.title")}),n.each((function(t){e.push({A:t.get("name"),D:A.makePhoneNumberWithCountryCodeIfDifferentRegion(t.get("cellphone")),E:t.get("email")})})))}},_fetchMemberListThenRender:function(e){this._dataFetched=!1,M.wrapActivePromise(this.model.fetchBandMemberList(e),this).then(t.bind((function(){this._dataFetched=!0,this.render()}),this))},_refreshBandDataAndMemberListAndRender:function(){this._dataFetched=!1,M.wrapActivePromise(i.when(this.model.fetchBandMemberList(),this.model.get("bandData").fetchBandData()),this).then(t.bind((function(){this._dataFetched=!0,this.render()}),this))}});return S.build=function(e,t){var n=p.buildWithSortType(e,t);return new S({model:n})},S}.call(t,n,t,e))||(e.exports=i)},1940:function(e,t){e.exports='<div class="uHeaderWrap">\n    <header class="header">\n        <h1 class="title"><%- IM("web.bandmember.title") %><em class="count sf_color _memberCount"></em></h1>\n\n        <div class="btnsWrap">\n            <% if (isInvitationPermitted(bandData)) { %>\n            <button type="button" class="btn uButton sf_tBorderOpacity sf_color _btnShowInvitation"><%- IM(\'web.bandmember.member_invitation\') %></button>\n            <% } %>\n\n            <%\n                // 엑셀다운로드/인쇄하기 권한 또는 멤버관리권한(탈퇴/차단 권한)\n                if ( isSavableMemberList || isMemberSelectableForBan ) {\n            %>\n            <div class="moreWrap">\n                <button type="button" class="btnMore _btnMore"><span class="gSrOnly"><%- IM(\'ui.label.more.short\') %></span></button>\n                <div class="lyMenu _moreMenuLayer" style="margin-top:13px; display:none;">\n                    <ul>\n                        <% if ( isMemberSelectableForBan ) { %>\n                        <li><a href="<%= manageLeaveMemberUri %>" class="btnListItem"><%- IM(\'web.bandsetting.home.btn.manage_leave_member\') %></a></li>\n                        <% } %>\n                        <% if ( isSavableMemberList ) { %>\n                        <li><button class="btnListItem _btnExcelDownload"><%- IM(\'ui.label.excel_download\') %></button></li>\n                        <li><button class="btnListItem _btnPrint"><%- IM(\'ui.label.print\') %></button></li>\n                        <% } %>\n                    </ul>\n                </div>\n            </div>\n            <% } %>\n        </div>\n\n    </header>\n\n    <div class="_memberSearchWrap"></div>\n</div>\n<div class="_simpleApplicationsRegion"></div>\n<a href="<%- joinQnAListUri %>" role="button" class="buttonRequest gPal20 gPar20 _btnJoinQnAList" style="display: none;"><span class="memberRequestIcon"></span><span class="text"><%- IM(\'bandjoin.join_question_and_answer\') %></span><span class="sf_color _joinQnARoomCount"></span></a>\n<div class="memberWrap">\n    <div class="_searchResultWrap"></div>\n    <div class="_memberListWrap"></div>\n    <div class="_virtualMemberListWrap"></div>\n    \x3c!-- 초대가 있어야만 노출 --\x3e\n    <div class="_invitationListWrap"></div>\n</div>'},1941:function(e,t,n){var i,s;i=[n(2),n(0),n(6),n(4),n(488),n(1942),n(555)],void 0===(s=function(e,t,n,i,s,a,o){var l=i.View.extend({tagName:"div",className:"uInputSearch",attributes:{"data-viewname":"DMemberSearchView"},template:t.template(a),ui:{queryInput:"._queryInput",searchBtn:"._searchBtn"},events:{"focus @ui.queryInput":"_toggleActive","blur @ui.queryInput":"_toggleActive","click @ui.searchBtn":"_searchMember","keyup @ui.queryInput":function(e){e.keyCode===o.ENTER&&this._searchMember()}},_toggleActive:function(){this.$el.toggleClass("-active",this.getUI("queryInput").is(":focus")||!t.isEmpty(this.getUI("queryInput").val()))},_searchMember:function(){this.model.fetchMembersBy(this.getUI("queryInput").val())},focus:function(){e("html, body").animate({scrollTop:0},300,t.bind((function(){this.ui.queryInput.focus()}),this))}});return l.build=function(e){return new l({model:e})},l}.apply(t,i))||(e.exports=s)},1942:function(e,t){e.exports='<% var inputId = _.uniqueId(\'input_search_\'); %>\n<label class="gSrOnly" for="<%- inputId %>"><%- IM(\'web.bandmember.search_member\') %></label>\n<input class="_queryInput" type="text" id="<%- inputId %>" placeholder="<%- IM(\'web.bandmember.search_member\') %>">\n<button type="button" class="search _searchBtn"><span class="gSrOnly"><%- IM(\'ui.label.search\') %></span></button>\n<span class="border"></span>\n'},1943:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(153),o=n(1944),l=n(1273),r=n(1945),d=n(82),c=n(154),h=s.View.extend({_openedApplicationView:null,bandData:null,tagName:"div",className:"joinRequestWrap",attributes:{"data-viewname":"DBandApplicationsSimpleView"},template:i.template(o),ui:{linkApplicationsPage:"._linkApplicationsPage",btnApplication:"._btnApplication",applicationDetailRegion:"._applicationDetailRegion"},regions:{applicationDetailRegion:"@ui.applicationDetailRegion"},events:{"click @ui.linkApplicationsPage":"_goApplicationsPage","click @ui.btnApplication":"_showApplication"},initialize:function(e){this.bandData=e.bandData},serializeData:function(){var e=this.collection.toJSON();return i.each(e,(function(e){e.profileImageUrl=d.makeProfileThumbnailUrl(e.applicantProfileImageUrl),e.profileInnerClass=d.makeProfileInnerClass(e.profileImageUrl)})),{items:e,applicationCount:this.collection.applicationCount}},onAttach:function(){this._resetApplications()},_resetApplications:function(){c.wrapActivePromise(t.when(this.collection.fetchApplicationCount(),this.collection.fetchBandApplicationCollection()),this).then(i.bind((function(e){0!=e?this.render():this.$el.hide()}),this))},_goApplicationsPage:function(){a.GROUP_BAND_APPLICATIONS.goDForced({band_no:this.bandData.getBandNo()})},_showApplication:function(e){var n=t(e.currentTarget),s=this.bandData.getBandNo(),a=n.data("member-key");n.addClass("selected");var o=this.getRegion("applicationDetailRegion"),l=n.parents("ul:first"),d=Math.floor(n.offset().left-this.$el.offset().left+n.outerWidth()/2-1),c=r.buildBandApplicationDetailLayerView(s,a,d);return this.listenTo(c,"application:accept",i.bind((function(){this._removeApplication(a)}),this)),this.listenTo(c,"application:deny",i.bind((function(){this._removeApplication(a)}),this)),this.listenTo(c,"destroy",i.bind((function(){l.find(".selected").removeClass("selected")}),this)),o.show(c),!1},_removeApplication:function(e){var t=this.collection.get(e);this.collection.remove(t),this.collection.length<=10&&this._resetApplications()}});return h.buildBandApplicationsSimpleView=function(e){return new h({bandData:e,collection:new l([],{bandNo:e.getBandNo()})})},h}.call(t,n,t,e))||(e.exports=i)},1944:function(e,t){e.exports='<% if (items.length > 0) { %>\n<div class="joinRequest">\n    <button type="button" class="_linkApplicationsPage goRequestMember"><%- IM(\'web.bandmember.applications\') %> <em class="sf_color"><%= applicationCount %></em></button>\n    <ul class="requestMemberList">\n        <% _.each(items, function(item) { %>\n        <li>\n            <a href="#" role="button" class="uProfile -size25 _btnApplication" data-member-key="<%- item.memberKey %>" >\n                <span class="profileInner <%- item.profileInnerClass %>">\n                    <img src="<%- item.profileImageUrl %>" width="25" height="25" alt="<%- item.applicantName %>">\n                </span>\n            </a>\n        </li>\n        <% }); %>\n    </ul>\n</div>\n<div class="_applicationDetailRegion"></div>\n<% } %>'},1945:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(1946),a=n(1102),o=n(9),l=n(82),r=n(486),d=n(1111),c=n(154),h=n(26),u=n(488),p=n(499),m=n(510),_=n(443),b=n(547),g=n(1058),f=n(498);n(502);var v=i.View.extend({tagName:"section",className:"lyWrap -posA",attributes:{"data-viewname":"DBandApplicationDetailLayerView"},getTemplate:function(){return this._dataFetched?t.template(s):t.template('<div class="lyContent -w280 -arrow"><div style="height:261px">'+f+"</div></div>")},templateContext:function(){if(!this._dataFetched)return{_loading_size:p.Size.MEDIUM,middleClass:u.ELEMENT.AREA_VERTICAL_MIDDLE};var e=l.makeGifSupportedProfileUrl(this.model.getApplicantProfileImageUrl(),l.TYPE.s276_gif),t=null;return this.model.isJoinAnswerImagesExist()&&(t=l.make(this.model.getFirstJoinAnswerImage().url,l.TYPE.s150)),{profileImageUrl:e,profileInnerClass:l.makeProfileInnerClass(e),formattedCreatedAt:o.format.date(this.model.getCreatedAt(),"long"),thumbnailExist:this.model.isThumbnailExist(),viewId:this.cid,isJoinQuestionExist:this.model.isJoinQuestionExist(),joinQuestionText:this._joinQuestionText,joinQuestionAsHtml:this.model.getJoinQuestionAsHtml(),joinAnswerAsHtml:this.model.getJoinAnswerAsHtml(),isJoinAnswerImagesExist:this.model.isJoinAnswerImagesExist(),joinAnswerThumbnail:t}},ui:{closeBtn:"._closeBtn",denyBtn:"._denyBtn",acceptBtn:"._acceptBtn",profileImg:"._profileImg",joinQuestionBtn:"._joinQuestionBtn",moreMenuBtn:"._moreMenuBtn",reportBtn:"._reportBtn",menuBox:"._menuBox",showMediaViewer:"._showMediaViewer",joinAnswerThumbnail:"._joinAnswerThumbnail"},events:{"click @ui.closeBtn":"destroy","click @ui.denyBtn":"_deny","click @ui.acceptBtn":"_accept","click @ui.profileImg":function(e){e.preventDefault(),this.model.isThumbnailExist()&&this._showProfileImage()},"click @ui.joinQuestionBtn":function(e){var n=m.openLayer({headerTitle:this._joinQuestionText,bodyDesc:IM("bandjoin.join_question_confirm_text",{applicantName:t.escape(this.model.getApplicantName())}),stopPropagation:!0});this.listenTo(n,m.EVENTS.CONFIRM,(function(){_.openJoinQnAApp(this.model.getBandNo(),this.model.getMemberKey())})),e.preventDefault()},"click @ui.moreMenuBtn":function(e){this.ui.menuBox.toggle(),e.stopPropagation()},"click @ui.reportBtn":function(){},"click @ui.showMediaViewer":function(e){var t=this.model.getFirstJoinAnswerImage();g.openJoinApplicationSingleViewer(this.model.getBandNo(),[{photo_url:t.url,width:t.width,height:t.height}]),e.preventDefault()},click:function(e){this.isDestroyed()||this.ui.menuBox.hide(),e.stopPropagation()}},initialize:function(e){this._left=e.center-140,this._dataFetched=!1},onDomRefresh:function(){this.$el.css("left",this._left),this._dataFetched&&this.model.isJoinAnswerImagesExist()&&this.ui.joinAnswerThumbnail.setLoading()},onAttach:function(){c.wrapActivePromise(b.getApplicationDetailInfo(this.model.getBandNo(),this.model.getMemberKey()),this).then(t.bind((function(e){this.model.setApplicationModelFromApi(e.application),this._dataFetched=!0,this._joinQuestionText=this.model.isJoinQuestionExist()?IM("bandjoin.extra_question_asking"):IM("bandjoin.join_question_asking"),this.render()}),this),t.bind(this.destroy,this)),c.wrapDeferPromise(this).then(t.bind((function(){this.listenTo(h.getDGlobalChannel(),h.EVENT.HTML_CLICK,(function(){this.destroy()}))}),this))},_deny:function(){this.model.denyJoinApplication().then(t.bind((function(){this.trigger("application:deny"),this.destroy()}),this))},_accept:function(){this.model.acceptJoinApplicationWithRefresh().then(t.bind((function(){this.trigger("application:accept"),this.destroy()}),this))},_showProfileImage:function(){var e=d.buildDProfilePhotoView(this.model.getApplicantProfileImageUrl(),this.model.getApplicantName(),!0);r.open(e)}});return v.buildBandApplicationDetailLayerView=function(e,t,n){return new v({center:n,model:a.buildBandApplicationModel(e,t)})},v}.call(t,n,t,e))||(e.exports=i)},1946:function(e,t){e.exports='<div class="lyContent -w280 -arrow">\n    <header class="modalHeader -noTitlebar -profile gPat14 gPar20">\n        <div class="profileInfo gTaC -tSpace14">\n            <p class="roundCover gMat0">\n                <% if (thumbnailExist) { %>\n                <a href="#" role="button" class="uProfile -size90 -border _profileImg">\n                    <span class="profileInner <%- profileInnerClass %>"><img src="<%- profileImageUrl %>" width="90" height="90" alt="<%- applicantName %>"></span>\n                </a>\n                <% } else { %>\n                <span class="uProfile -size90 -border"><span class="profileInner"></span></span>\n                <% } %>\n            </p>\n\n            <div class="userInfo -lrSpaceNone -tSpace15 gPat15">\n                <h1 class="userName"><%- applicantName %></h1>\n                <p class="joinDate gMat2"><%= IM(\'application_detail.label.request\', {\'requestDate\': formattedCreatedAt}) %></p>\n            </div>\n            <a href="#" class="linkText gBandColor gMat6 _joinQuestionBtn"><%- joinQuestionText %></a>\n        </div>\n        <% /* 신고하기 스펙이 다음버전으로 변경되어 일시적으로 주석 처리합니다. %>\n        <% if (isJoinQuestionExist) { %>\n        <div class="moreMenuWrap -reportLeft">\n            <button class="btnMoreMenu _moreMenuBtn" ><%- IM(\'ui.label.more.short\') %></button>\n            <div class="menuBox _menuBox" style="display: none;">\n                <ul class="menuList">\n                    <li class="menuItem"><button type="button" class="btnMenuText _reportBtn"><%- IM(\'ui.label.report\') %></button></li>\n                </ul>\n            </div>\n        </div>\n        <% } %>\n        <% */ %>\n    </header>\n\n    <div class="modalBody">\n        <div class="modalContentWrap">\n            <div class="joinQnaBox -noBorder gPat3">\n            <% if (isJoinQuestionExist) { %>\n                <div class="title -fColorBk2 gMat4 gPar5"><%= joinQuestionAsHtml %></div>\n                <div class="answerInfoBox  gMat8">\n                    <div class="answerInfoText"><%= joinAnswerAsHtml %></div>\n                    <% if ( isJoinAnswerImagesExist ) { %>\n                    <div class="photoBox gMat9">\n                        <a href="#" role="button" class="answerImageItem _showMediaViewer">\n                            <img src="<%- joinAnswerThumbnail %>" class="_joinAnswerThumbnail" alt="answerImage"/>\n                        </a>\n                    </div>\n                     <% } %>\n\n                    <% /* 신고하기 스펙이 다음버전으로 변경되어 일시적으로 주석 처리합니다. %>\n\n                    \x3c!-- [D] 신고 됐을 경우\n                    <textarea id="joinAnswer" cols="30" placeholder="혐오를 조장하는 내용으로 신고되어 차단되었습니다."  style="height: 38px" disabled></textarea>--\x3e\n\n                    <% */ %>\n                </div>\n            <% } %>\n            </div>\n        </div>\n    </div>\n\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _denyBtn"><%= IM(\'application_detail.label.deny_join\') %></button>\n        <button type="button" class="uButton -confirm _acceptBtn"><%= IM(\'application_detail.label.accept_join\') %></button>\n        <button type="button" class="btnLyClose uButton -iconClose _closeBtn"><span class="gSrOnly"><%= IM(\'ui.label.close_layer\') %></span></button>\n    </footer>\n</div>'},1947:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(82),o=n(9),l=n(174),r=n(534),d=n(13),c=n(1948),h=n(1949),u=n(589),p=n(512),m=n(720),_=n(497),b=n(153),g=n(491),f=n(1033),v=n(26),A=n(154),M=n(1113),C=n(1057),I={ALPHABETICAL:null,RECENTLY_JOINED:"recently_joined",LAST_WORD:"last_word",OLDEST_VISITED:"oldest_visited"},E=s.View.extend({attributes:{"data-viewname":"DMemberListView"},template:i.template(c),templateContext:{ThumbnailUtil:a,PhoneNumberUtil:l,dateFormat:function(e){return o.format.date(e,"year_month_day")},msg_leader:IM("web.memberlist.label.leader"),msg_coleader:IM("web.memberlist.label.coleader"),MemberRole:_},ui:{btnProfile:"._btnProfile",memberList:"._memberList",btnSetting:"._btnSetting",btnOneAndOneChat:"._btnOneAndOneChat",memberListSortWrap:"._memberListSortWrap",memberListSort:"._memberListSort",btnHasMoreMember:"._btnHasMoreMember",btnInviteMember:"._btnInviteMember",btnMemberMenu:"._btnMemberMenu",btnShowJoinInfo:"._btnShowJoinInfo",btnBanMember:"._btnBanMember",btnMemberGroup:"._btnMemberGroup"},events:{"click @ui.btnProfile":function(e){e.preventDefault();var n=t(e.currentTarget).closest("[data-user_no]").data("user_no"),i=this.model.get("bandNo");u.openProfileView(i,n)},"click @ui.btnSetting":function(e){e.preventDefault();var t=this.model.get("bandNo"),n=d.getUserData().getUserNo();u.openProfileView(t,n)},"click @ui.btnOneAndOneChat":function(e){e.preventDefault();var n=t(e.currentTarget).closest("[data-user_no]").data("user_no"),i=t(e.currentTarget).closest("[data-user_no]").data("user_name"),s=this.model.get("bandNo");m.startChattingWithUsers([{userNo:n,name:i}],s)},"click @ui.btnHasMoreMember":function(e){return this.trigger("members:search:focus"),!1},"change @ui.memberListSort":"_sortMemberList","click @ui.btnInviteMember":"_showInvitation","click @ui.btnMemberMenu":function(e){var t=this._findParentMember$El(e);if(!t.find("._memberMenuArea").is(":visible")){var n=t.data("user_no"),i=f.createEmptyBandMemberProfileModel(this.model.get("bandNo"),n);A.wrapActivePromise(i.fetchBandMember(),this).then((function(){t.find("._btnConditionalMenu").attr("disabled",!0).parent().hide(),t.data("member-key",i.getBandMemberProfileMemberKey()).data("name",i.getName()).data("created-at",i.getCreatedAt());var e=i.canViewJoinInfo(),n=i.canSendMessage(),s=i.canBanMember();t.find("._btnShowJoinInfo").prop("disabled",!e).parent().toggle(e),t.find("._btnOneAndOneChat").prop("disabled",!n).parent().toggle(n),t.find("._btnBanMember").prop("disabled",!s).parent().toggle(s),t.find("._memberMenuArea").show()}))}},"click @ui.btnShowJoinInfo":function(e){var t=this._findParentMember$El(e);M.openDGroupBandJoinHistoryView({bandNo:this.model.get("bandNo"),memberKey:t.data("member-key"),name:t.data("name"),createdAt:t.data("created-at")})},"click @ui.btnBanMember":function(e){var t=this._findParentMember$El(e),n=this.model.get("bandNo"),i=t.data("user_no"),s=C.openLayer({bandData:this._bandData,userNo:i,memberKey:t.data("member-key")});this.listenTo(s,"memberWithdrawal:updateMember",(function(){this._bandData.fetchBandData(),v.getDGlobalChannel().trigger(v.EVENT.MEMBER_REMOVED,n,i)}))}},modelEvents:{"remove:member":function(e){i.isEmpty(this.model.get("members"))?this.render():this.getUI("memberList").find("[data-user_no="+e+"]").remove()}},initialize:function(e){this._mode=e.mode||"list",this._bandData=e.bandData?e.bandData:e.model.get("bandData")},onRender:function(){this.getUI("memberListSortWrap")["list"===this._mode?"show":"hide"](),this._bindInfinityMemberList()},serializeData:function(){var e=this.model.toJSON(),t=this.model.get("members"),n=this.model.get("bandNo");return i.extend(e,{isEmptySearchResult:i.isEmpty(t),isInvitationPermitted:this._bandData.isInvitationPermitted(),MEMBER_SORT:I,memberSortOptions:this._getMemberSortOptions(),selectedSortOption:this.model.get("sortOption")?this.model.get("sortOption"):I.ALPHABETICAL,memberGroupUrl:b.GROUP_BAND_MEMBER_GROUPS.makeUrl({band_no:n}),canShowMemberGroup:this.model.get("hasMemberGroup")})},onAttach:function(){this.listenTo(v.getDGlobalChannel(),v.EVENT.HTML_CLICK,(function(){this.$el.find("._memberMenuArea").hide()}))},_getMemberSortOptions:function(){var e=this.model.get("availableSortOrders"),t=[];return t.push({key:I.ALPHABETICAL,text:IM("member_list.sort.abc")}),i.each(e,(function(e){switch(e){case I.RECENTLY_JOINED:t.push({key:I.RECENTLY_JOINED,text:IM("member_list.sort.latest")});break;case I.LAST_WORD:t.push({key:I.LAST_WORD,text:IM("member_list.sort.last_word")});break;case I.OLDEST_VISITED:t.push({key:I.OLDEST_VISITED,text:IM("member_list.sort.visit_at")})}})),t},isRecentJoinTypeSelected:function(){return this.getUI("memberListSort").val()==I.RECENTLY_JOINED},isLastWordTypeSelected:function(){return this.getUI("memberListSort").val()==I.LAST_WORD},isOldestVisitedTypeSelected:function(){return this.getUI("memberListSort").val()==I.OLDEST_VISITED},_bindInfinityMemberList:function(){var e=this.model.get("members")||[],t=0,n=e.length,s=i.template(h),o=i.bind((function(){for(var o="",d=0;d<100;d++){var c=d+t;if(c>=n){this.stopListening(p);break}var h=e[c],u=l.makePhoneNumberWithCountryCodeIfDifferentRegion(h.cellphone);h.me&&!i.isEmpty(h.cellphone)&&(u=r.transformInternationalPhoneNumber(u)),h.cellphoneOriginal=h.cellphone,h.cellphone=u;var m=a.makeProfileThumbnailUrl(h.profileImageUrl);o+=s(i.extend({m:h,profileThumbnail:m,profileInnerClass:a.makeProfileInnerClass(m),latest:this.model.get("latest"),isSortOldestVisited:"oldest_visited"===this.model.get("sortOption")},this.templateContext))}t+=d,this.getUI("memberList").append(o),c>=n&&this._attachLastMessage()}),this);o(),this.stopListening(p),this.listenTo(p,"window:scroll:bottom",o)},_attachLastMessage:function(){if(this.model.get("hasMoreMember"))switch(this.model.get("sortOption")){case I.ALPHABETICAL:case I.LAST_WORD:this.getUI("memberList").append('<li><button type="button" class="uFlexItem -tLine buttonSearch _btnHasMoreMember"><span class="searchIcon gMar12"></span><span class="text">'+IM("member_list.label.group_band.has_more_member")+"</span></span></button></li>");break;case I.RECENTLY_JOINED:this.getUI("memberList").after('<p class="desc">'+IM("member_list.sort.guide")+"</p>")}},_showInvitation:function(e){e.preventDefault(),g.getCachedBandData(this.model.get("bandNo")).then(i.bind((function(e){e.isInvitationPermitted()?b.GROUP_BAND_MEMBER_INVITE.goDForced({band_no:this.model.get("bandNo")}):alert(IM("invitation.message.authorized_member_only"))}),this))},_findParentMember$El:function(e){return t(e.currentTarget).closest("._eachMember")},_sortMemberList:function(){var e=null;switch(this.getUI("memberListSort").val()){case I.ALPHABETICAL||"":this.model.set("sortOption",I.ALPHABETICAL),e=this.model.fetchSortedMembersOnNameOrder();break;case I.RECENTLY_JOINED:this.model.set("sortOption",I.RECENTLY_JOINED),e=this.model.fetchSortedMembersOnLatestOrder();break;case I.OLDEST_VISITED:this.model.set("sortOption",I.OLDEST_VISITED),e=this.model.fetchSortedMembersOnOldestVisited();break;case I.LAST_WORD:this.model.set("sortOption",I.LAST_WORD),e=this.model.fetchSortedMembersOnLastWordOrder()}e.then(i.bind((function(){this.render()}),this))}});return E.build=function(e){return new E({model:e.model,mode:e.mode,bandData:e.bandData})},E}.call(t,n,t,e))||(e.exports=i)},1948:function(e,t){e.exports='<div class="subTitle">\n    <h2 class="title"><%- IM("web.bandmember.title") %></h2>\n    <div class="uSelect -textType -taR -h20 _memberListSortWrap">\n        <label for="sort" class="gSrOnly">list sort</label>\n        <select id="sort" class="_memberListSort" title="<%= IM(\'member_list.sort.title\') %>">\n            <% _.each(memberSortOptions, function(sortOption) { %>\n            <option value="<%- sortOption.key %>" <% if (sortOption.key == selectedSortOption) { %> selected<% } %>><%= sortOption.text %></option>\n            <% }); %>\n        </select>\n    </div>\n</div>\n<% if(canShowMemberGroup) { %>\n<div class="groupMemberViewBox gMat15 gMab1">\n    <a href="<%- memberGroupUrl %>" class="btnMemberGroupView"><%- IM(\'band.member.group.view_group\') %></a>\n</div>\n<% } %>\n<% if (members) { %>\n<ul class="cMemberList _memberList">\n    <% // Member 목록은 Lazy-loading 처리를 위해서 DMemberListItemSnippetTemplate.html 파일 생성하여 추가한다 %>\n</ul>\n<% } %>\n\n<% // 멤버 초대하기 %>\n<% if (isInvitationPermitted) { %>\n<button type="button" class="buttonInvite _btnInviteMember"><span class="memberAddIcon gMar12"></span><span class="text"><%- IM(\'web.bandmember.member_invitation\') %></span></button>\n<% } %>\n\n<% // 검색 결과 없는 경우 %>\n<% if (isEmptySearchResult) { %>\n<p class="uEmpty" style="height:545px">\n    <span class="gColorGr3"><%= IM("ui.message.no_search_result") %></span>\n</p>\n<% } %>\n'},1949:function(e,t){e.exports='<li class="uFlexItem _eachMember" data-user_no="<%- m.userNo %>" data-user_name="<%- m.name %>">\n    <a href="#" role="button" class="uProfile -size50 _btnProfile">\n        <span class="profileInner <%- profileInnerClass %>">\n            <img src="<%- profileThumbnail %>" width="50" height="50" alt="<%- m.name %>" loading="lazy">\n        </span>\n    </a>\n    <div class="body">\n        <span class="text -flex">\n            <span class="ellipsis"><%- m.name %></span>\n            <%\n                var role = m.role ? MemberRole.parseRole(m.role) : \'\';\n                if (role && (role.leader || role.coleader)) {\n            %>\n            <em class="<%- m.role %>"><%- role.label %></em>\n            <% } %>\n        </span>\n\n        <% if (m.description) { %><span class="subText -ellipsis"><%- m.description %></span><% } %>\n        <% if (m.cellphone) { %><span class="lastInfo -ellipsis"><%- m.cellphone %></span><% } %>\n        <% if (latest && m.createdAt) { %><span class="lastInfo -ellipsis"><%- IM("member_list.sort.joined_at", {joinedAt: dateFormat(m.createdAt)}) %></span><% } %>\n        <% if (isSortOldestVisited) { %>\n            <% if (!m.visitedAt || m.visitedAt == 0) { %>\n            <date class="date -ellipsis -colorLight gMat2"><%= IM("member_list.sort.oldest_visited_at_befoer_20190924") %></date>\n            <% } else { %>\n            <date class="date -ellipsis -colorLight gMat2"><%= IM("member_list.sort.oldest_visited_at", {visitedAt: dateFormat(m.visitedAt)}) %></date>\n            <% } %>\n        <% } %>\n    </div>\n    <div class="etc">\n        <% if (m.me) { %>\n        <button type="button" class="bntSetting _btnSetting"><span class="gSrOnly"><%- IM(\'web.bandmember.setting\') %></span></button>\n        <% } else { %>\n        <button type="button" class="btnMemberSetting _btnMemberMenu" data-user-no="<%- m.userNo %>">\n            <span class="gSrOnly"><%- IM(\'web.bandmember.one_and_one_chat\') %></span>\n            <svg class="svgIcon sf_color" aria-hidden="true">\n                <use xlink:href="#ico-member-setting"></use>\n            </svg>\n        </button>\n        <div class="lyMenu _memberMenuArea" style="display:none;right:22px;margin-top:5px">\n            <ul>\n                <li><button class="btnListItem _btnProfile"><%- IM(\'web.profile.basic.title\') %></button></li>\n                <li><button class="btnListItem _btnShowJoinInfo _btnConditionalMenu" data-user-no="<%- m.userNo %>"><%- IM(\'bandjoin.join_info_show\') %></button></li>\n                <li><button class="btnListItem _btnOneAndOneChat _btnConditionalMenu"><%- IM(\'web.bandmember.one_and_one_chat\') %></button></li>\n                <li><button class="btnListItem _btnBanMember _btnConditionalMenu"><%- IM(\'profile_layer.label.ban_member\') %></button></li>\n            </ul>\n        </div>\n        <% } %>\n    </div>\n</li>'},1950:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1046),a=n(1951),o=n(1639),l=n(1953),r=i.View.extend({attributes:{"data-viewname":"DVirtualMemberListView"},template:t.template(l),ui:{btnRegisterVirtualMember:"._btnRegisterVirtualMember",virtualMemberListTitle:"._virtualMemberListTitle"},events:{"click @ui.btnRegisterVirtualMember":"_addVirtualMember"},regions:{virtualMemberList:{el:"._virtualMemberList",replaceElement:!0}},collectionEvents:{reset:function(){this._toggleTitle(),this._canBeAdded()?this.getUI("btnRegisterVirtualMember").attr("disabled",!1).show():this.getUI("btnRegisterVirtualMember").attr("disabled",!0).hide()}},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData},onRender:function(){var e=new d({collection:this.collection,bandNo:this._bandNo});this.getRegion("virtualMemberList").show(e),this.listenTo(e,"fetch:collection",(function(){this._fetchCollection()})),this._fetchCollection()},getVirtualMemberCollection:function(){return this.collection},_canBeAdded:function(){return!!this._bandData.isManageVirtualMemberPermitted()},_toggleTitle:function(){this.getUI("virtualMemberListTitle").toggle(this.collection.length>0)},_fetchCollection:function(){this.collection.fetchVirtualMemberCollection(this._bandNo)},_addVirtualMember:function(){if(this._canBeAdded()){var e=o.buildAsLayer(this._bandNo);this.listenTo(e,"add:VirtualMember",t.bind((function(){this._fetchCollection(this._bandNo)}),this))}}}),d=i.CollectionView.extend({tagName:"ul",className:"cMemberList",childView:a,childViewEvents:{modifyVirtualMember:function(e){var t=o.buildAsLayer(this.options.bandNo,e.model);this.listenTo(t,"modify:VirtualMember",(function(){this.trigger("fetch:collection")})),this.listenTo(t,"delete:VirtualMember",(function(){alert(IM("ui.label.alert_delete")),this.trigger("fetch:collection")}))}}});return r.build=function(e,t){return new r({collection:new s,bandNo:e,bandData:t})},r}.call(t,n,t,e))||(e.exports=i)},1951:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(174),a=n(1952);return i.View.extend({tagName:"li",className:"uFlexItem",attributes:{"data-viewname":"DVirtualMemberListItemView"},template:t.template(a),templateContext:function(){return{name:this.model.get("name"),email:this.model.get("email")||"",cellphone:s.makePhoneNumberWithCountryCodeIfDifferentRegion(this.model.get("cellphone"))}},ui:{bntSetting:"._bntSetting"},triggers:{"click @ui.bntSetting":"modifyVirtualMember"}})}.call(t,n,t,e))||(e.exports=i)},1952:function(e,t){e.exports='<span href="#" role="button" class="uProfile -size50">\n    <span class="profileInner"></span>\n</span>\n<span class="body">\n    <span class="text -flex"><span class="ellipsis"><%- name %></span></span>\n    <% if (cellphone && email) { %>\n    <span class="subText -ellipsis"><%- cellphone %></span>\n    <% } if ((!cellphone && email) || email) { %>\n    <span class="lastInfo -ellipsis"><%- email %></span>\n    <% } if (!email && cellphone) { %>\n    <span class="lastInfo -ellipsis"><%- cellphone %></span>\n    <% } %>\n</span>\n<span class="etc">\n    <button type="button" class="bntSetting _bntSetting"><span class="gSrOnly"><%- IM("web.bandmember.setting") %></span></button>\n</span>\n'},1953:function(e,t){e.exports='<div class="subTitle -tLine _virtualMemberListTitle">\n    <h2 class="title"><%- IM("virtual.member.list.title") %></h2>\n</div>\n\n<ul class="cMemberList _virtualMemberList"></ul>\n\n<div class="guideBox -borderTop gPat17 gMab20">\n    <p class="guideBoxText"><%= IM("member.register.virtual_member.help_guide") %></p>\n    <button type="button" class="buttonRegistration _btnRegisterVirtualMember"><%= IM("member.register.virtual_member") %></button>\n</div>'},1954:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(4),o=n(488),l=n(1955),r=n(13),d=n(82),c=n(548),h=n(1956),u=a.View.extend({attributes:{"data-viewname":"DInvitationListView"},className:o.PAGE.BAND_POST_DETAIL,template:i.template(l),templateContext:{isMyInvitation:function(e){return e.inviter.userNo===r.getUserData().getUserNo()},ThumbnailUtil:d},ui:{btnReInvite:"._btnReInvite",btnCancelInvitation:"._btnCancelInvitation",invitation:"li[data-invitation_card_id]"},events:{"click @ui.btnReInvite":"_reInvite","click @ui.btnCancelInvitation":"_cancelInvitation","click @ui.invitation":"_showInvitationLayer"},__getInvitationCardId:function(e){return t(e.currentTarget).closest("[data-invitation_card_id]").data("invitation_card_id")},__getInvitationName:function(e){return t(e.currentTarget).closest("[data-invitation_name]").data("invitation_name")},_refresh:function(){s.history.loadUrl()},_reInvite:function(e){e.preventDefault(),e.stopPropagation();var t=this.__getInvitationCardId(e),n=this.model.get("bandNo");c.reinvite(n,t).then(i.bind((function(e){alert(IM("web.bandmember.alert.reinvitation_sent")),this._refresh()}),this))},_cancelInvitation:function(e){e.preventDefault(),e.stopPropagation();var t=this.__getInvitationCardId(e);c.deleteInvitationCard(t,!1).then(i.bind((function(){alert(IM("web.bandmember.alert.invitation_canceled")),this._refresh()}),this))},_showInvitationLayer:function(e){if(e.preventDefault(),!t(e.currentTarget).data("reinvitable"))return!1;var n=t(e.currentTarget).find("img[src]").attr("src"),s=h.openLayer({title:this.__getInvitationName(e),desc:IM("bandmember.label.my_invitation"),confirm:IM("web.bandmember.invitation_again"),cancel:IM("web.bandmember.invitation_cancel"),image:n});this.listenTo(s,"modal:confirm",i.bind((function(){this._reInvite(e)}),this)),this.listenTo(s,"modal:cancel",i.bind((function(){this._cancelInvitation(e)}),this))}});return u.build=function(e){return new u({model:e})},u}.call(t,n,t,e))||(e.exports=i)},1955:function(e,t){e.exports='<% if (invitations.length > 0) { %>\n\x3c!-- 초대가 있어야만 노출 --\x3e\n<div class="subTitle -tLine gMat30">\n    <% // 초대 중인 인원 노출이 필요하다면 invitations.length %>\n    <h2 class="title"><%- IM(\'web.bandmember.invited_member\') %></h2>\n</div>\n<ul class="cMemberList">\n    \x3c!-- 초대 --\x3e\n    <% _.each(invitations, _.bind(function (invitation) { %>\n    <li class="uFlexItem <%- invitation.isReinvitable ? \'clickable\' : \'\' %>" data-invitation_card_id="<%- invitation.invitationCardId %>" data-invitation_name="<%- invitation.invitee.name %>" data-reinvitable="<%- invitation.isReinvitable %>">\n        <a href="#" role="button" class="uProfile -size50">\n            <span class="profileInner">\n                <img src="<%- ThumbnailUtil.makeProfileThumbnailUrl(null) %>" width="50" height="50" alt="<%- invitation.invitee.name %>">\n            </span>\n        </a>\n        <span class="body">\n            <span class="text -flex"><span class="ellipsis"><%- invitation.invitee.name %></span></span>\n            <span class="subText -ellipsis">\n                <% if (isMyInvitation(invitation)) { %>\n                    <%- IM(\'bandmember.label.my_invitation\') %>\n                <% } else { %>\n                    <%- IM(\'bandmember.label.invited_by\', {"name": invitation.inviter.name}) %>\n                <% } %>\n\n                \x3c!-- 라인과 카카오톡에 관련해서는 노출하는 스펙이 앱에서 존재하지 않아서 노출되지 않음. --\x3e\n                <% if (invitation.invitationType === "line_messenger") { %>\n                    <%- IM(\'web.bandmember.invitation_by_line\') %>\n                <% } %>\n\n                <% if (invitation.invitationType === "kakao") { %>\n                <%- IM(\'web.bandmember.invitation_by_kakao\') %>\n                <% } %>\n\n                <% if (invitation.invitationType === "sms") { %>\n                    (SMS)\n                <% } %>\n            </span>\n        </span>\n        <span class="etc">\n            <% if (invitation.isReinvitable) { %>\n            <button type="button" class="uButton -sizeS sf_color sf_tBorderOpacity _btnReInvite"><%- IM(\'web.bandmember.invitation_again\') %></button>\n            <% } else { %>\n            <button type="button" class="uButton -sizeS -cancel _btnCancelInvitation"><%- IM(\'web.bandmember.invitation_cancel\') %></button>\n            <% } %>\n        </span>\n    </li>\n    <% }, this)) %>\n    \x3c!-- // 초대 --\x3e\n</ul>\n<% if (invitations.length >= 100) { %>\n<p class="desc"><%- IM(\'web.memberinvite.invited_user_list.display_count_over_msg\') %></p>\n<% } %>\n<% } %>'},1956:function(e,t,n){var i,s;i=[n(2),n(6),n(4),n(1957),n(486)],void 0===(s=function(e,t,n,i,s){var a=n.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DInvitationLayerView"},template:_.template(i),templateContext:{},ui:{closeBtn:"._closeBtn",cancelBtn:"._cancelBtn",confirmBtn:"._confirmBtn"},events:{"click @ui.closeBtn":"destroy"},triggers:{"click @ui.cancelBtn":"modal:cancel","click @ui.confirmBtn":"modal:confirm"}});return a.openLayer=function(e){var n=new a({model:new t.Model(e)});return s.open(n),n},a}.apply(t,i))||(e.exports=s)},1957:function(e,t){e.exports='<div class="lyContent -w320">\n    <header class="gSrOnly">\n        <h1><%= IM(\'web.bandmember.my_invitation\') %></h1>\n    </header>\n\n    <div class="main">\n        <div class="profileInfo -tSpace14">\n            <p class="roundCover gMat0">\n                <span class="uProfile -size90 -border"><span class="profileInner"></span></span>\n            </p>\n\n            <div class="userInfo -lrSpaceNone -tSpace16">\n                <h1 class="userName"><%- title %></h1>\n                <p class="joinDate"><%- desc %></p>\n            </div>\n        </div>\n    </div>\n\n    <footer class="footer -invitaionFooter">\n        <div class="btnWrap">\n            <button type="button" class="uButton -cancel _cancelBtn"><%- cancel %></button>\n            <button type="button" class="uButton -confirm _confirmBtn"><%- confirm %></button>\n        </div>\n        <button type="button" class="btnLyClose uButton -iconClose _closeBtn"><span class="gSrOnly"><%= IM(\'ui.label.close_layer\') %></span></button>\n    </footer>\n</div>'},1958:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1959),a=n(1960),o=n(1962),l=n(26),r=n(153),d=t.template('<div class="uEmpty gBoxShadow _reservedPostEmpty" style="height:450px"><span class="gFs14 gColorGr3"><%-IM("web.reserved.no_result")%></span></div>'),c=i.View.extend({className:"reservedWrap",attributes:{"data-viewname":"DReservedPostLayoutView"},template:t.template(s),ui:{reservedPostCount:"._reservedPostCount",reservedPostEmpty:"._reservedPostEmpty",reservedPostsContainer:"._reservedPostsContainer",reservedDesc:"._reservedDesc"},regions:{reservedPostsContainer:{el:"@ui.reservedPostsContainer",replaceElement:!1}},initialize:function(e){this.bandData=e.bandData,this.bandNo=this.bandData.getBandCore().bandNo,this.reservedPostCollection=new a,this.listenTo(l.getPostChannel(),l.EVENT.RESERVED_POST_ADDED,(function(){this.render()})),this.listenTo(l.getPostChannel(),l.EVENT.POST_UPDATED,(function(){this.render()}))},onAttach:function(){this.bandData.isCreateReservedPostPermitted()||r.GROUP_BAND_HOME.goDForced({band_no:this.bandNo})},onDomRefresh:function(){this.reservedPostCollection.fetchReservedPosts(this.bandNo).then(t.bind((function(){var e=this.reservedPostCollection.getReservedPostCount();if(this.ui.reservedPostCount.text(e),e>0){var t=o.buildDReservedPostCollectionView(this.reservedPostCollection,this.bandNo);this.getRegion("reservedPostsContainer").show(t)}else this._renderEmptyView();this.listenTo(t,"update:reservedPostCount",(function(e){this.ui.reservedPostCount.text(e),0==e&&this._renderEmptyView()}))}),this))},_renderEmptyView:function(){this.ui.reservedDesc.hide(),this.ui.reservedPostsContainer.after(d)}});return c.buildDReservedPostLayoutView=function(e){return new c({bandData:e})},c}.call(t,n,t,e))||(e.exports=i)},1959:function(e,t){e.exports='<div class="uHeaderWrap -bLineNone gBoxShadow gMab12">\n    <header class="header">\n        <h1 class="title" data-uiselector="reservedPostTitle"><%- IM(\'web.reserved.title\') %> <em class="count sf_color _reservedPostCount"></em></h1>\n    </header>\n</div>\n\n<div class="sReserveList">\n    <div class="_reservedPostsContainer"></div>\n\n    <p class="desc _reservedDesc"><%-IM(\'web.postwrite.reserve_desc\')%></p>\n</div>\n'},1960:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(1961),a=n(783);return i.Collection.extend({model:s,fetchReservedPosts:function(e){return a.getReservedPosts(e).then(t.bind((function(e){this.reset(e.items,{parse:!0})}),this))},getReservedPostCount:function(){return this.length}})}.call(t,n,t,e))||(e.exports=i)},1961:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(158),a=n(52);return i.Model.extend({idAttribute:"reservedPostId",parse:function(e){e=a.camelizeKeys(e);var n=s.removeAllBandTag(e.title);return n=t.unescape(n).replace(/\&nbsp;/g," "),{reservedPostId:e.reservedPostId,title:n,thumbnail:e.thumbnail,hasFailed:e.hasFailed,isPlayButtonVisible:e.isPlayButtonVisible,isMajorNotice:e.isMajorNotice,isNotice:e.isNotice,publishesAt:e.publishesAt,reservationTimeZoneId:e.reservationTimeZoneId}},getThumbnail:function(){return this.get("thumbnail")},getReservedPostId:function(){return this.get("reservedPostId")},isReservedPost:function(){return!!this.getReservedPostId()}})}.call(t,n,t,e))||(e.exports=i)},1962:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1963),a=n(26),o=i.CollectionView.extend({attributes:{"data-viewname":"DReservedPostCollectionView"},tagName:"ul",className:"reservedWrap list",childView:s,childViewOptions:function(){return{bandNo:this.bandNo}},childViewEvents:{"remove:reservedPost":function(e){this.collection.remove(e),this.trigger("update:reservedPostCount",this.collection.getReservedPostCount())}},initialize:function(e){this.bandNo=e.bandNo},onAttach:function(){this.listenTo(a.getPostChannel(),a.EVENT.RESERVED_POST_UPDATED,(function(){this.collection.fetchReservedPosts(this.bandNo).then(t.bind((function(){this.render()}),this))}))}});return o.buildDReservedPostCollectionView=function(e,t){return new o({collection:e,bandNo:t})},o}.call(t,n,t,e))||(e.exports=i)},1963:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1964),a=n(82),o=n(26),l=n(783),r=n(53),d=n(153),c=n(162),h=n(1260),u=n(556),p=n(1634);return i.View.extend({tagName:"li",className:"gBoxShadow more",attributes:{"data-viewname":"DReservedPostItemView"},template:t.template(s),templateContext:function(){var e=IM("web.reserved.post");h.isNotificationTypePost(this.model)&&(e=h.isMajorNoticePost(this.model)?IM("web.reserved.major_notice"):IM("web.reserved.notice"));var t=this.model.getThumbnail();return{msg_pubDate:p.makeDateTimeHtmlForReservePostList(this.model.get("publishesAt"),"month_day_time",this.model.get("reservationTimeZoneId"),e),thumbnailUrl:t?a.make(t,a.TYPE.s150):""}},ui:{divMenu:"._divMenu",btnMore:"._btnMore",publishReservedPost:"._linkPublishReservedPost",modifyReservedPost:"._linkModifyReservedPost",deleteReservedPost:"._linkDeleteReservedPost",btnModifyReservedPost:"._btnModifyReservedPost"},events:{"click @ui.modifyReservedPost":"modifyPost","click @ui.btnModifyReservedPost":"modifyPost","click @ui.publishReservedPost":function(){if(!confirm(IM("web.reserved.publish.confirm")))return!1;var e=r.getCurrentRouteInfo().routeInfo==c.PAGE_BAND_RESERVED?c.PAGE_BAND_POST:d.GROUP_BAND_HOME,n=this.model.get("reservedPostId");return l.publishReservedPost(this.bandNo,n).then(t.bind((function(){e.goDForced({band_no:this.bandNo})}),this)),!1},"click @ui.deleteReservedPost":function(){if(!confirm(IM("web.reserved.delete.confirm")))return!1;var e=this.model.getReservedPostId();return l.deleteReservedPost(this.bandNo,e).then(t.bind((function(){this.trigger("remove:reservedPost",e)}),this)),!1},"click @ui.btnMore":function(){return this.ui.divMenu.is(":hidden")&&o.getDGlobalChannel().trigger(o.EVENT.HTML_CLICK),this.ui.divMenu.toggle(),this.ui.btnMore.addClass("menuOn"),!1}},initialize:function(e){this.bandNo=e.bandNo},onAttach:function(){this.listenTo(o.getDGlobalChannel(),o.EVENT.HTML_CLICK,(function(){this.ui.divMenu.hide(),this.ui.btnMore.removeClass("menuOn")}))},modifyPost:function(){return(new u).fetchReservedPost(this.bandNo,this.model.getReservedPostId(),!0).then(t.bind((function(e){o.getPostChannel().trigger(o.EVENT.MODIFY_POST,this.bandNo,this.model.getReservedPostId(),e)}),this))}})}.call(t,n,t,e))||(e.exports=i)},1964:function(e,t){e.exports='<h2 class="title"><%= msg_pubDate %></h2>\n\n<div class="contentWrap">\n    <div class="text">\n        <p><%- title %></p>\n\n        <% if (hasFailed) { %>\n        <p class="fail"><%- IM(\'web.reserved.post.failed\') %></p>\n        <% } %>\n    </div>\n\n    <% if (thumbnailUrl) { %>\n    <div class="thumb<% if (isPlayButtonVisible) { %> -iconPlay<% } %>">\n        <img src="<%- thumbnailUrl %>" alt="<%= title %>">\n    </div>\n    <% } %>\n</div>\n\n<a href="#" role="button" class="btnDetailView _btnModifyReservedPost"><span class="gSrOnly"><%= IM(\'web.bandboard.btn.detail\') %></span></a>\n\n<div class="option">\n    <button type="button" class="btnMore _btnMore"><span class="gSrOnly"><%- IM(\'web.postdetail.btn.post_more\') %></span></button>\n    <div class="lyMenu _divMenu" style="">\n        <ul>\n            <% if (!hasFailed) { %>\n            <li><a href="#" role="button" class="_linkPublishReservedPost"><%= IM(\'web.reserved.publish.btn\') %></a></li>\n            <% } %>\n            <li><a href="#" role="button" class="_linkModifyReservedPost"><%= IM(\'web.reserved.modify.btn\') %></a></li>\n            <li><a href="#" role="button" class="_linkDeleteReservedPost"><%= IM(\'web.reserved.delete.btn\') %></a></li>\n        </ul>\n    </div>\n</div>'},1965:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1966),a=n(510),o=n(83),l=n(1550),r=n(157),d=i.View.extend({behaviors:[l],options:{bandData:null,memberManageUrl:""},attributes:{"data-viewname":"DBandBoardBlockedView"},template:t.template(s),templateContext:function(){return{name:this.options.bandData.getBandCore().name,isBlockedBandWithLeader:this.options.bandData.isBlockedBandWithLeader(),isBlockedBandWithMember:this.options.bandData.isBlockedBandWithMember(),bandManageLeaveMemberUrl:this.options.memberManageUrl}},ui:{btnBandLeave:"._btnBandLeave",btnBandDelete:"._btnBandDelete"},events:{"click @ui.btnBandLeave":"_onClickBandLeave","click @ui.btnBandDelete":"_onClickBandDelete"},_onClickBandLeave:function(){return a.openLayer({headerTitle:IM("web.bandsetting.bandleave.txt.band_leave_title"),bodyDesc:IM("blocked_band.leave.desc"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")}).once(a.EVENTS.CONFIRM,t.bind((function(){o.deleteOrLeaveBand(this.options.bandData.getBandCore().bandNo).then(t.bind((function(){this.options.bandData.resetBandDataState(),r.GLOBAL_HOME.goDForced()}),this))}),this)),!1},_onClickBandDelete:function(){return this.deleteGroupBand(this.options.bandData),!1}});return d.buildDBandBoardBlockedView=function(e,t){return new d({bandData:e,memberManageUrl:t})},d}.call(t,n,t,e))||(e.exports=i)},1966:function(e,t){e.exports='<div class="gBoxShadow sBlockedBand">\n    <div class="cell">\n        <h1 class="tit"><%- name %></h1>\n\n        <p class="desc"><%-IM(\'blocked_band.home.desc\')%></p>\n\n        <div class="btnWrap">\n            <span>\n                <% if ( isBlockedBandWithLeader ) { %>\n                <a href="<%-bandManageLeaveMemberUrl%>" class="uButton -confirm _btnManageMember"><%-IM(\'web.bandsetting.home.btn.manage_leave_member\')%></a>\n                <button type="button" class="uButton -cancel _btnBandDelete"><%-IM(\'blocked_band.btn.band_delete\')%></button>\n                <% } else { %>\n                <button type="button" class="uButton -point -cancel _btnBandLeave"><%-IM(\'blocked_band.btn.band_leave\')%></button>\n                <% } %>\n            </span>\n        </div>\n    </div>\n</div>'},1967:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(1968),s=n(82),a=n(486),o=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandJoinModalView"},template:_.template(i),ui:{cancelBtn:"._cancelBtn",confirmBtn:"._confirmBtn"},events:{"click @ui.cancelBtn":function(){this.trigger("modal:cancel"),this.destroy()},"click @ui.confirmBtn":function(){this.trigger("modal:confirm"),this.destroy()}},initialize:function(e){this._bandData=e.bandData,this._message=e.message},serializeData:function(){return{name:this._bandData.getBandName(),cover:s.makeMediumSquareCoverUrl(this._bandData.getCoverUrl()),certified:this._bandData.isCertified(),message:this._message}}});return o.buildAsLayer=function(e){var t=new o(e);return a.open(t),t},o}.call(t,n,t,e))||(e.exports=i)},1968:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="gSrOnly">\n        <h1><%= IM(\'band.join.form.title\') %></h1>\n    </header>\n\n    <div class="main">\n        <div class="profileInfo">\n            <div class="boxCover">\n                <div class="uCoverImage -w93">\n                    <span class="coverInner">\n                        <img src="<%- cover %>" class="coverImg" alt="<%- name %>">\n                    </span>\n                </div>\n            </div>\n\n            <div class="userInfo">\n                <h1 class="userName -multiLine<% if (certified) { %> -official<% } %>"><%- name %></h1>\n                <% if (message) { %>\n                <p class="msg"><%= message %></p>\n                <% } %>\n                <span class="joinMsg"><%= IM(\'board.no_member.hint.post\') %></span>\n            </div>\n        </div>\n    </div>\n\n    <footer class="footer">\n        <button type="button" class="uButton -cancel -sizeL -lrSpace20 _cancelBtn"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm -sizeL -lrSpace20 _confirmBtn"><%= IM(\'ui.label.join\') %></button>\n    </footer>\n</div>'},1969:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=(n(16),n(4)),s=n(1970),a=n(153),o=n(499),l=n(498),r=n(538),d=n(543),c=n(1554),h=n(1177),u=n(1106),p=n(26),m=n(155),_=n(82),b=n(83),g=n(939),f=n(544),v=n(1275),A=n(1971),M=n(1972),C=n(942),I=n(1541),E=n(1974),y=n(510),T=n(685),N=n(1538),D=n(1238),S=n(1021),w=n(590),B=i.View.extend({tagName:"div",className:"sSettingBand gBoxShadow",attributes:{"data-viewname":"DGroupBandEditIntroView"},getTemplate:function(){return this._loading?t.template(s):t.template(l)},templateContext:function(){return this._loading?{isPermittedManageDescription:this.bandOptionModel.isPermittedManageDescription(),isPermittedManageShortcut:this.bandOptionModel.isPermittedManageShortcut(),isPermittedManageLocation:this.bandOptionModel.isPermittedManageLocation(),contentMaxLength:S.DESCRIPTION.MAX_LENGTH,introDescription:this.bandIntroModel.getBandDescription(),isLimitedMemberCount:this.isLimitedMemberCount,bandAddress:this.bandData.getBandAddress(),canShowBusinessIdentificationInfo:this.bandData.canShowBusinessIdentificationInfo(),businessRegistrationNo:this.bandIntroModel.getBandBusinessRegistrationNo(),getSchoolInfo:this.bandIntroModel.getBandSchoolInfo(),getBandIntroMedias:this.bandIntroModel.getBandMediaList(),ThumbnailUtil:_,canManageLocalBand:this.localBandPermission.canManageLocalBand(),isLocalBand:this.bandOptionModel.isLocalBand()}:{_loading_size:o.Size.MEDIUM}},ui:{introDescriptionWrapper:"._introDescriptionWrapper",introDescription:"._introDescription",btnSaveIntroDescription:"._btnSaveIntroDescription",locationButtonWrapper:"._locationButtonWrapper",locationTextWrapper:"._locationTextWrapper",locationText:"._locationText",btnSelectLocation:"._btnSelectLocation",btnSetBandAddress:"._btnSetBandAddress",btnOpenBusinessIDInfoButton:"._btnOpenBusinessIDInfoButton",btnSetLocalBand:"._btnSetLocalBand"},regions:{selectedKeywordListRegion:{el:"._selectedKeywordListRegion",replaceElement:!0},mediaListRegion:{el:"._mediaListRegion",replaceElement:!0},fileListRegion:{el:"._fileListRegion",replaceElement:!0},localBandInfoRegion:{el:"._localBandInfoRegion",replaceElement:!0},upcomingLocalMeetupScheduleListRegion:{el:"._upcomingLocalMeetupScheduleListRegion",replaceElement:!0}},events:{"click @ui.btnSaveIntroDescription":function(e){w.isContentCreationPunished()||this._setBandIntro().then(t.bind((function(){this._goBandIntroHome()}),this))},"click @ui.btnSetBandAddress":"_openBandShortcutSettingLayer","click @ui.btnSelectLocation":"_openSelectLocationLayer","click @ui.btnOpenBusinessIDInfoButton":"_openBusinessIDInfoLayer","click @ui.btnSetLocalBand":"_goLocalBandSetting"},initialize:function(e){this._loading=!1,this.bandData=e.bandData,this.bandNo=e.bandData.getBandCore().bandNo,this.localBandPermission=T.build(this.bandData),this.bandData.canEditGroupIntro()?(this.isBandIntroDescription=!1,this.isBandKeywordsChange=!1,this.isBandLocationChange=!1,this.isBandShortcutUrlChange=!1,this.isBandIntroFileDescription=!1,this.isLimitedMemberCount=this.bandData.getMemberCount()>=d.COMMON.BASE_MEMBER_COUNT_FOR_CHANGE,this._initEventListening()):a.GROUP_BAND_HOME.historyBackOrGoTargetUrl({band_no:this.bandNo})},onRender:function(){this._loading&&(this._showSelectedKeywordListView(),this._showMediaList(),this._showFileList(),this._showLocalBandInfoView(),this._showUpcomingLocalMeetupScheduleList(),this._renderLocation())},onAttach:function(){this._fetchData().then(t.bind((function(){this._loading=!0,this.render()}),this))},_initEventListening:function(){this.listenTo(this.bandData,m.UPDATE_EVENT.ANY,(function(){this._fetchData().then(this.render,this)}));var e=[p.EVENT.BAND_INTRO_DESCRIPTION_CHANGED,p.EVENT.BAND_SHORTCUT_SETUP,p.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED].join(" ");this.listenTo(p.getDGlobalChannel(),e,(function(){this.bandData.resetBandDataState(),this.bandData.loadBandData()}))},_fetchData:function(){return $.when(r.getBandOption(this.bandNo),b.getBand_({band_no:this.bandNo,fields:"band_no,type,is_recruiting,description,school_info,location,keyword,business_registration_no,media_list,band_files"})).then(t.bind((function(e,t){this.bandOptionModel=e,this.bandIntroModel=new g,this.bandIntroModel.setAttributes(t)}),this))},_showSelectedKeywordListView:function(){if(this.bandOptionModel.isPermittedManageKeyword()&&!this.bandOptionModel.isLocalBand()){var e=this.getRegion("selectedKeywordListRegion");this._selectedKeywordListCollection=v.buildFromBandKeywordsWithKeywordGroups(this.bandIntroModel.getBandKeywordsWithKeywordGroups()),this.listenTo(this._selectedKeywordListCollection,"update reset",(function(e,t){var n=v.convertToBandApiObject(this._selectedKeywordListCollection.toJSON());this.bandIntroModel.setBandKeywords(n.bandKeywords),this.bandIntroModel.setBandKeywordsWithKeywordGroups(n.bandKeywordsWithKeywordGroups),this.isBandKeywordsChange=!0})),A.show(e,this.bandNo,this._selectedKeywordListCollection)}},_showMediaList:function(){var e=this.bandIntroModel.getBandMediaList();this._mediaListCollection=new D(e);var t=this.getRegion("mediaListRegion");N.show(t,{bandNo:this.bandNo,mediaListCollection:this._mediaListCollection,wrapperClassNames:"introPhoto -bLine"})},_showFileList:function(){var e=this.bandIntroModel.get("bandFiles").fileList,t=this.bandIntroModel.get("bandFiles").dropboxList;this._fileListCollection=C.buildFromBandIntroFiles(e,t);var n=this.getRegion("fileListRegion");this._attachedFileListView=M.show(n,{bandNo:this.bandNo,fileDesc:this.bandIntroModel.getBandIntroFilesDescription(),fileListCollection:this._fileListCollection})},_showLocalBandInfoView:function(){if(this.bandOptionModel.isLocalBand()){var e=this.getRegion("localBandInfoRegion");I.show(e,{bandData:this.bandData})}},_showUpcomingLocalMeetupScheduleList:function(){var e=this.getRegion("upcomingLocalMeetupScheduleListRegion");E.show(e,this.bandData)},_renderLocation:function(){var e=this.bandIntroModel.getBandLocation();if(e&&(e.name||e.address)||(e=this.bandData.getLocation(),this.bandIntroModel.setBandLocation(e)),e&&(e.name||e.address)){var t=e.name?e.name:e.address;this.getUI("locationText").text(t),this.getUI("locationTextWrapper").css("display","flex"),this.getUI("locationButtonWrapper").css("display","none")}else this.getUI("locationTextWrapper").css("display","none"),this.getUI("locationButtonWrapper").css("display","flex")},_bandIntroValidator:function(){return this.isBandIntroDescription=this.bandIntroModel.getBandDescription()!==this.getUI("introDescription").val(),this.isBandIntroFileDescription=this.bandIntroModel.getBandIntroFilesDescription()!==this._attachedFileListView.getFileDesc(),this.isBandIntroDescription||this.isBandKeywordsChange||this.isBandLocationChange||this.isBandShortcutUrlChange||this._mediaListCollection.isUpdated()||this.isBandIntroFileDescription||this._fileListCollection.isUpdated()},_setBandIntro:function(){if(!this._bandIntroValidator())return $.Deferred().resolve().promise();var e=!1;this.isBandKeywordsChange||this.bandIntroModel.isRecruiting()||window.confirm(IM("band_intro.edit.change.auto_share_post"))&&(e=!0);var n={band_no:this.bandNo,auto_post:e},i=this.getUI("introDescription").val();this.isBandIntroDescription&&!this.isLimitedMemberCount&&(n.description=i);var s=!!this.isBandKeywordsChange&&this.bandIntroModel.getBandKeywords();s&&(n.keywords=s.join(","));var a=!!this.isBandLocationChange&&this.bandIntroModel.getBandLocation();a&&(n.location=JSON.stringify(a));var o=!!this.isBandShortcutUrlChange&&this.bandIntroModel.getBandShortcutUrl();if(o&&(n.shortcut=o),this._mediaListCollection.isUpdated()&&(n.media_list=JSON.stringify(this._mediaListCollection.toJSONForSave())),this._fileListCollection.isUpdated()||this.isBandIntroFileDescription){var l=this._fileListCollection.toJSONForSave();this.isBandIntroFileDescription&&(l=t.extend({},l,{description:this._attachedFileListView.getFileDesc()})),n.band_files=JSON.stringify(l)}return b.setBandConfig(n).then(t.bind((function(){p.getDGlobalChannel().trigger(p.EVENT.BAND_INTRO_DESCRIPTION_CHANGED),p.getDGlobalChannel().trigger(p.EVENT.BAND_SHORTCUT_SETUP)}),this))},_goBandIntroHome:function(){this.bandIntroModel.isRecruiting()?f.LFG_BAND_HOME.goDForced({band_no:this.bandNo}):a.GROUP_BAND_INTRO.goDForced({band_no:this.bandNo})},_goLocalBandSetting:function(){if(!w.isContentCreationPunished()){var e=$.Deferred();this._bandIntroValidator()?y.openLayer({bodyTitle:IM("bandsetting.band_intro.save_confirm"),confirm:IM("ui.label.confirm"),cancel:IM("ui.label.cancel")}).once(y.EVENTS.CONFIRM,t.bind((function(){this._setBandIntro().then((function(){e.resolve()}))}),this)):e.resolve(),e.then(t.bind((function(){a.GROUP_BAND_SETTING_LOCAL_BAND.goDForced({band_no:this.bandNo})}),this))}},_openSelectLocationLayer:function(){w.isContentCreationPunished()||h.asyncOpenDSelectLocationLayer(this.bandIntroModel.getBandLocation()).then(t.bind((function(e){e&&this.listenTo(e,"locationSelected",t.bind((function(t){this.bandIntroModel.setBandLocation(t),this.isBandLocationChange=!0,e.destroy(),this._renderLocation()}),this))}),this))},_openBandShortcutSettingLayer:function(){if(!w.isContentCreationPunished()){var e=c.buildAsLayer({bandNo:this.bandNo,notSaveNow:!0});this.listenTo(e,"bandUrlCreated",t.bind((function(e){this.bandIntroModel.setBandShortcutUrl(e),this.isBandShortcutUrlChange=!0,this.getUI("btnSetBandAddress").text(d.BAND_SHORTCUT_URL_DOMAIN+e)}),this))}},_openBusinessIDInfoLayer:function(){w.isContentCreationPunished()||u.openDBusinessIdentificationInfoView({bandNo:this.bandNo})}});return B.build=function(e){return new B({bandData:e})},B}.call(t,n,t,e))||(e.exports=i)},1970:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("groupband.band_intro_description.title") %></h1>\n    </header>\n</div>\n\n<div class="cBandIntro cIntroEditor">\n\n    \x3c!-- 주제 선택 --\x3e\n    <div class="_selectedKeywordListRegion"></div>\n\n    \x3c!-- 소개글 입력 --\x3e\n    <% if (isPermittedManageDescription) { %>\n    <div class="textareaBox _introDescriptionWrapper">\n        <div class="uTextarea">\n            <textarea class="_introDescription"\n                      id="bandIntroduce"\n                      cols="30"\n                      rows="10"\n                      maxlength="<%= contentMaxLength %>"\n                      placeholder="<%= IM(\'groupband.band_intro_description.help_guide.input_description\') %>"\n                      style="height:100%"\n                      <%= isLimitedMemberCount ? \'disabled="disabled"\' : \'\' %>><%= introDescription %></textarea>\n            <span class="border"></span>\n        </div>\n    </div>\n    <% if (isLimitedMemberCount) { %>\n    <div class="guideArea gMat-10 gMab20">\n        <p class="guideAreaText"><%= IM("groupband.band_intro_description.help_guide.limited_member") %></p>\n        <a href="/cs/notice/4095" class="moreTextLink"><%= IM("bandsetting.member_count.txt.more_info") %></a>\n    </div>\n    <% } %>\n    <% } %>\n\n    \x3c!-- 소개 사진등록 --\x3e\n    <div class="_mediaListRegion"></div>\n\n    \x3c!-- 신학기 밴드의 개설정보 --\x3e\n    <% if(getSchoolInfo) { %>\n    <div class="introOption -tLine">\n        <div class="introOptionBox">\n            <div class="schoolGradeText"><span class="newSchoolInfo"><%- getSchoolInfo %></span></div>\n        </div>\n    </div>\n    <% } %>\n\n    \x3c!-- 위치 등록 --\x3e\n    <% if (isPermittedManageLocation) { %>\n    <div class="introOption _locationButtonWrapper" style="display: none;">\n        <div class="introOptionBox">\n            <div class="addressText">\n                <button type="button" class="textButton _btnSelectLocation"><%= IM("groupband.band_intro_description.help_guide.input_location2") %></button>\n            </div>\n        </div>\n    </div>\n    <div class="introOption _locationTextWrapper" style="display: none;">\n        <div class="introOptionBox">\n            <div class="addressText _locationText"></div>\n        </div>\n        <div class="introOptionButton">\n            <button class="uButton -sizeS -confirm2 _btnSelectLocation"><%- IM("ui.label.change") %></button>\n        </div>\n    </div>\n    <% } %>\n\n    \x3c!-- 사업자등록증 등록한 경우만 노출 --\x3e\n    <% if ( canShowBusinessIdentificationInfo ) { %>\n    <div class="introOption">\n        <div class="introOptionBox">\n            <div class="registrationText">\n                사업자등록번호 <%- businessRegistrationNo %>\n                <button type="button" class="iconButton _btnOpenBusinessIDInfoButton"><span class="gSrOnly">사업자등록정보 보기</span></button>\n            </div>\n        </div>\n        <div class="introOptionButton">\n            <button class="uButton -sizeS -confirm2 _btnOpenBusinessIDInfoButton"><%= IM("ui.label.change") %></button>\n        </div>\n    </div>\n    <% } %>\n\n    \x3c!-- 밴드 URL 등록 --\x3e\n    <% if (isPermittedManageShortcut && !bandAddress) { %>\n    <div class="introOption">\n        <div class="introOptionBox">\n            <div class="urlText">\n                <button type="button" class="textButton _btnSetBandAddress"><%= IM("groupband.band_intro_description.help_guide.input_band_address2") %></button>\n            </div>\n        </div>\n    </div>\n    <% } %>\n\n    \x3c!-- 첨부 파일 등록--\x3e\n    <div class="_fileListRegion"></div>\n\n    \x3c!-- 지역 소모임 설정 --\x3e\n    <% if (canManageLocalBand) { %>\n    <div class="introOption -tLine -bLine">\n        <div class="introOptionBox">\n            <button type="button" class="buttonArrow _btnSetLocalBand"><%= isLocalBand ? IM(\'bandsetting.local_band.label.local_band_info\') : IM(\'bandsetting.local_band.title\') %></button>\n        </div>\n    </div>\n    <div class="_localBandInfoRegion"></div>\n    <div class="_upcomingLocalMeetupScheduleListRegion"></div>\n    <% } %>\n\n    <div class="introOption">\n        <div class="introOptionBox gTaC gPat15 gPab17">\n            <button type="button" class="uButton -confirm _btnSaveIntroDescription"><%= IM("ui.label.save") %></button>\n        </div>\n    </div>\n</div>'},1971:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(1279),a=i.View.extend({tagName:"li",className:function(){return this.options.isEmptyView?"selectedKeywordItem":"selectedKeywordItem -selectedItem"},template:t.template('<button type="button" class="keywordButton _btnSelectKeyword"><%- keyword %></button>'),templateContext:function(){return{cid:this.model.cid}},events:{"click ._btnSelectKeyword":function(e){s.openLayer({bandNo:this.options.bandNo,selectedKeywords:this.model.collection.toJSON(),withoutSaving:!0,guideTitle:IM("bandsetting.keyword.guide_title.group_band")}).once(s.EVENTS.CONFIRM,t.bind((function(e){this.model.collection.reset(e)}),this))}}}),o=i.CollectionView.extend({tagName:"ul",className:"selectedKeywordList",attributes:{"data-viewname":"DGroupBandIntroEditSelectedKeywordListView"},childView:a,childViewOptions:function(e,t){return{bandNo:this.options.bandNo}},emptyView:a,emptyViewOptions:function(){return{model:new Backbone.Model({keywordGroup:"",keyword:IM("bandsetting.keyword.select_keyword")},{collection:this.collection}),bandNo:this.options.bandNo,isEmptyView:!0}}});return o.show=function(e,t,n){if(e){e.hasView()&&e.empty();var i=new o({collection:n,bandNo:t});return e.show(i),i}},o}.call(t,n,t,e))||(e.exports=i)},1972:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(52),s=n(4),a=n(1973),o=n(600),l=n(507),r=n(537),d=n(1542),c=n(1021),h=n(590),u=s.View.extend({tagName:"div",className:"introOption introFile",attributes:{"data-viewname":"DBandIntroEditFileListView"},template:t.template(a),templateContext:function(){return{fileDescMaxLength:c.FILE.DESC_MAX_LENGTH,fileCount:this._fileListCollection.length,fileDesc:this._fileDesc}},ui:{inputFilesDescription:"._inputFilesDescription",wrapFileUploader:"._wrapFileUploader",btnFileUpload:"._btnFileUpload"},events:{"click @ui.btnFileUpload":function(e){h.isContentCreationPunished()&&e.preventDefault()}},regions:{fileListRegion:{el:"._fileListRegion",replaceElement:!0}},initialize:function(e){this._bandNo=e.bandNo,this._fileDesc=e.fileDesc,this._fileListCollection=e.fileListCollection},onRender:function(){this._showFileListView()},onAttach:function(){this._initFileListCollectionEventListener()},onDomRefresh:function(){this._createFileUploader()},onBeforeDetach:function(){this._fileUploader&&this._fileUploader.destroy()},getFileDesc:function(){return this.getUI("inputFilesDescription")&&this.getUI("inputFilesDescription").val()?this.getUI("inputFilesDescription").val().trim():""},_initFileListCollectionEventListener:function(){this.listenTo(this._fileListCollection,"add",(function(e,t,n){1===this._fileListCollection.length&&this.render()})),this.listenTo(this._fileListCollection,"remove",(function(e,t,n){0===this._fileListCollection.length&&this.render()}))},_createFileUploader:function(){this._fileUploader&&this._fileUploader.destroy(),this._fileUploader=o.createFileUploader(this.getUI("btnFileUpload")),this.listenTo(this._fileUploader,l.BEFORE_VALIDATE,this._onBeforeUploadValidate),this.listenTo(this._fileUploader,l.UPLOAD_COMPLETE,this._onUploadCompleted)},_onBeforeUploadValidate:function(){var e=this._fileListCollection.length,n=this._getTotalAttachedFileSize();this._fileUploader.setValidators([t.partial(r.FILE_VALIDATOR,t,e,c.FILE.MAX_COUNT,c.FILE.MAX_SIZE_PER_FILE,c.FILE.MAX_SIZE_TOTAL,n)])},_onUploadCompleted:function(e){e=i.camelizeKeys(e),t.isEmpty(e)||t.isEmpty(e.resultList)||(t.map(e.resultList,t.bind((function(e){this._fileListCollection.add({isDropboxFile:!1,sosId:e.id,fileSize:e.fileSize,fileName:e.name},{parse:!0})}),this)),this._toggleFileUploader())},_toggleFileUploader:function(){this.getUI("wrapFileUploader").toggle(this._fileListCollection.length<10)},_getTotalAttachedFileSize:function(){return this._fileListCollection.reduce((function(e,t){return e+t.get("fileSizeNumber")}),0)},_showFileListView:function(){if(!this._fileListCollection.isEmpty()){var e=new s.CollectionView({tagName:"ul",className:"cFileList gMat5",childView:d,childViewOptions:function(e,t){return{bandNo:this.options.bandNo,isEditMode:!0}},collection:this._fileListCollection,bandNo:this._bandNo});this.showChildView("fileListRegion",e)}}});return u.show=function(e,t){if(e){e.hasView()&&e.empty();var n=new u({bandNo:t.bandNo,fileDesc:t.fileDesc,fileListCollection:t.fileListCollection});return e.show(n),n}},u}.call(t,n,t,e))||(e.exports=i)},1973:function(e,t){e.exports='<% if (fileCount > 0) { %>\n<h3 class="subTitle">\n    <span class="iconFile"></span><%= IM("band_intro.edit.upload.file.text") %>\n</h3>\n<div class="textareaBox gMat15 gMab0" style="height: 50px">\n    <div class="uTextarea" style="height: 48px;min-height: 48px">\n        <textarea id="fileDescription"\n                  placeholder="<%= IM(\'band_intro.edit.upload.file.description.placeholder\') %>"\n                  class="_inputFilesDescription"\n                  cols="30" rows="10"\n                  maxlength="<%= fileDescMaxLength %>"\n                  style="height:100%"><%- fileDesc %></textarea>\n        <span class="border"></span>\n    </div>\n</div>\n\x3c!-- 파일 목록 --\x3e\n<div class="_fileListRegion"></div>\n<% } %>\n\n<div class="<%= fileCount > 0 ? \'buttonDottedLineBox\' : \'\' %> _wrapFileUploader" style="<%= fileCount >= 10 ? \'display:none\' : \'\' %>">\n    <div class="fileUploadWrap _btnFileUpload">\n        <label for="file1" class="inputLabelFile">\n            <span class="iconFile"></span><span class="labelText"><%= fileCount > 0 ? IM("web.postwrite.attach.title.file") : IM("band_intro.edit.upload.file.text") %></span>\n        </label>\n        <input type="file" id="file1" class="inputFile">\n    </div>\n</div>\n'},1974:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(16),s=n(4),a=n(1975),o=n(26),l=n(937),r=n(1976),d=n(1258),c=n(1646),h=n(1645),u=n(549),p=n(154),m=n(685),_=n(1549),b=s.View.extend({tagName:"div",className:"introPublicSchedule",attributes:{"data-viewname":"DUpcomingLocalMeetupScheduleListView"},template:t.template(a),ui:{btnModify:"._btnModify",btnDelete:"._btnDelete",upcomingSchedule:"._upcomingSchedule",btnAddLocalMeetupSchedule:"._btnAddLocalMeetupSchedule"},events:{"click @ui.btnModify":"_modifySchedule","click @ui.btnDelete":"_deleteSchedule","click @ui.upcomingSchedule":"_openScheduleDetailLayer","click @ui.btnAddLocalMeetupSchedule":"_openLocalMeetupScheduleCreationLayer"},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo},onAttach:function(){var e=[o.EVENT.SCHEDULE_DELETED,o.EVENT.SCHEDULE_UPDATED].join(" ");this.listenTo(o.getDGlobalChannel(),e,(function(e){this.model.fetchUpcomingLocalMeetupSchedules(this._bandNo).then(t.bind((function(){this.render()}),this))}))},_modifySchedule:function(e){var n=$(e.currentTarget).data("scheduleId"),i=u.createExistingScheduleModel(this._bandNo,n);return p.wrapActivePromise(i.fetchSchedule(),this).then(t.bind((function(){c.buildDScheduleModificationViewOpener({scheduleEditModel:d.createScheduleEditModelBy(i,!1),bandData:this._bandData}).openScheduleEditLayerForModification(this)}),this)),!1},_deleteSchedule:function(e){var n=$(e.currentTarget).data("scheduleId"),i=u.createExistingScheduleModel(this._bandNo,n);return p.wrapActivePromise(i.fetchSchedule(),this).then(t.bind((function(){h.checkRecurrenceThenDeleteSchedule(i,this)}),this)),!1},_openScheduleDetailLayer:function(e){var t=$(e.currentTarget).data("scheduleId");l.openScheduleDetailLayerView({showBandNameTitle:!1,bandNo:this._bandNo,scheduleId:t})},_openLocalMeetupScheduleCreationLayer:function(){var e=d.createLocalMeetupModel(i());_.openScheduleEditAsLayerForCreation({scheduleEditModel:e,shouldHideSecretSelect:e.isLocalMeetup(),bandData:this._bandData,postAttachable:!0},this)}});return b.show=function(e,t){if(m.build(t).canShowUpcomingLocalBandMeetupSchedule()&&e){e.hasView()&&e.empty();var n=t.getBandCore().bandNo,i=new r;return i.fetchUpcomingLocalMeetupSchedules(n).then((function(){if(0!==i.get("schedules").length){var n=new b({bandData:t,model:i});return e.show(n),n}}))}},b}.call(t,n,t,e))||(e.exports=i)},1975:function(e,t){e.exports='<h3 class="subTitle"><%= IM(\'local_band.upcoming_meetup_schedules.title\') %></h3>\n\n<% _.each(schedules, function(schedule) { %>\n<div class="publicScheduleItem _upcomingSchedule" data-schedule-id="<%= schedule.scheduleId %>">\n    <div class="contentEditor cke_editable cke_editable_inline cke_contents_ltr">\n        <div class="cke_widget_wrapper cke_widget_block" type="schedule">\n            <band:attachment class="cke_widget_element">\n                <div class="bandWidgetBtnWrap">\n                    <button type="button" class="bandWidgetBtn uButton -sizeS -modify _btnModify" data-schedule-id="<%= schedule.scheduleId %>"><%= IM(\'ui.label.modify\') %></button>\n                    <button type="button" class="bandWidgetBtn -del uButton -sizeS sf_bg _btnDelete" data-schedule-id="<%= schedule.scheduleId %>"><%= IM(\'ui.label.delete\') %></button>\n                </div>\n                <div class="bandWidgetContent sf_tOutline">\n                    <div class="uWidget">\n                        <div class="item -calendar">\n                            <div class="addHead scheduleHead">\n                                <span class="day">\n                                    <strong class="date"><%- schedule.day %></strong>\n                                    <span class="week sf_color"><%- schedule.dayName %></span>\n                                </span>\n                                <div class="contWrap">\n                                    <div class="scheduleContWrap">\n                                        <span class="addTitle"><%- schedule.name %></span>\n                                        <time class="date"><%= schedule.scheduleDateTime %></time>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </band:attachment>\n        </div>\n    </div>\n</div>\n<% }); %>\n\n<div class="buttonDottedLineBox">\n    <button type="button" class="buttonAdd _btnAddLocalMeetupSchedule"><%= IM(\'schedule.local_meetup_schedule_creation\') %></button>\n</div>\n<div class="guideArea -column gMat11">\n    <p class="guideAreaText -dot"><%= IM(\'local_band.upcoming_meetup_schedules.guide.desc1\') %></p>\n    <p class="guideAreaText -dot"><%= IM(\'local_band.upcoming_meetup_schedules.guide.desc2\') %></p>\n</div>'},1976:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(16),a=n(52),o=n(9),l=n(6),r=n(653),d=n(503);return l.Model.extend({defaults:{schedules:[]},parse:function(e){return e=a.camelizeKeys(e),{schedules:t.map(e.items,(function(e){var t=e.startAt;return{scheduleId:e.scheduleId,name:e.name,day:i.lpad(s(t).format("D"),2,"0"),dayName:t?s(t).format(o.isKoreanLanguage()?"dddd":"ddd"):"",scheduleDateTime:r.multilineMessageForString(e)}}))}},fetchUpcomingLocalMeetupSchedules:function(e){return d.getUpcomingLocalMeetupSchedules(e).then(t.bind((function(e){return this.set(this.parse(e)),this}),this))}})}.call(t,n,t,e))||(e.exports=i)},1977:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(6),a=n(162),o=n(153),l=n(512),r=n(538),d=n(1978),c=n(1980),h=n(22),u=s.Collection.extend({model:d.Model,initialize:function(e,t){this.after=null,this.bandNo=t.bandNo},fetchMemberActivityHistories:function(){this._fetch(!0)},fetchNextMemberActivityHistories:function(){this._fetch(!1)},_fetch:function(e){if((e||this.after)&&!this.isFetching)return this.isFetching=!0,r.SETTING.getMemberActivityHistories(this.bandNo,this.after).then(t.bind((function(t){var n=t.paging.next_params;n&&n.after?this.after=n.after:this.after=null,e?this.reset(t.items,{parse:!0}):t.items.length>0&&this.add(t.items,{parse:!0}),this.isFetching=!1,this.trigger("collection:fetch:end")}),this))}}),p=i.CollectionView.extend({tagName:"ul",className:"cMemberList",childView:d,initialize:function(){this.listenTo(l,"window:scroll:bottom",this._fetchNextPage)},_fetchNextPage:function(){this.collection.fetchNextMemberActivityHistories()}}),m=i.View.extend({attributes:{"data-viewname":"DBandMemberActivityHistoryView"},className:"sSettingBand gContentCardShadow",template:t.template(c),templateContext:function(){return{getTitle:t.bind((function(){return this.type===h.BAND_TYPE.GROUP?IM("bandsetting.home.band_activity_log.title"):IM("pageband.page_setting.member_activity_history.title")}),this)}},ui:{activityRegion:"._activityRegion"},regions:{activityRegion:{el:"@ui.activityRegion",replaceElement:!0}},initialize:function(e){this.bandNo=e.bandNo,this.type=e.type,this.collection=new u([],{bandNo:this.bandNo})},onDomRefresh:function(){var e=new p({collection:this.collection,bandNo:this.bandNo});this.getRegion("activityRegion").show(e)},onAttach:function(){return r.getBandOption(this.bandNo).then(t.bind((function(e){e.isPermittedAccessMemberActivityHistories()?this.collection.fetchMemberActivityHistories():this._goSettingHome()}),this)).fail(t.bind((function(){this._goSettingHome()}),this))},_goSettingHome:function(){this.type!==h.BAND_TYPE.GROUP?a.PAGE_BAND_SETTING.goDForced({band_no:this.bandNo}):o.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo})}});return m.build=function(e,t){return new m({bandNo:e,type:t||h.BAND_TYPE.GROUP})},m}.call(t,n,t,e))||(e.exports=i)},1978:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(6),a=n(9),o=n(82),l=n(1979),r=i.View.extend({attributes:{"data-viewname":"DBandMemberActivityItemView"},tagName:"li",className:"uFlexItem historyListItem",template:t.template(l),serializeData:function(){return{title:this.model.getTitle(),content:this.model.getContent(),profileImage:this.model.getProfileImage(),profileInnerClass:o.makeProfileInnerClass(this.model.getProfileImage()),createdAt:this.model.getCreatedAt()}}});return r.Model=s.Model.extend({parse:function(e){var t={};return t.title=e.title,t.content=e.content,e.image&&(t.image=e.image),e.created_at&&(t.createdAt=e.created_at),t},getTitle:function(){return this.get("title")},getContent:function(){return this.get("content")},getProfileImage:function(){return o.makeProfileMiddleThumbnailUrl(this.get("image"))},getCreatedAt:function(){return this.get("createdAt")?a.format.date(this.get("createdAt"),"short_date_time"):null}}),r}.call(t,n,t,e))||(e.exports=i)},1979:function(e,t){e.exports='<span class="body">\n    <span class="subText -point"><%- title %></span>\n    <span class="text"><%- content %></span>\n<% if (createdAt) { %>\n    <date class="date"><%- createdAt %></date>\n<% } %>\n</span>\n<span class="uProfile -size60">\n    <span class="profileInner <%- profileInnerClass %>">\n        <img src="<%- profileImage %>" width="60" height="60">\n    </span>\n</span>'},1980:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%- getTitle() %></h1>\n    </header>\n</div>\n\n<div class="activityHistory">\n    <ul class="cMemberList _activityRegion"></ul>\n    <div class="guideArea -borderTop">\n        <p class="guideAreaText -alignC"><%= IM("pageband.page_setting.member_activity_history.description") %></p>\n    </div>\n</div>'},1981:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(0),s=n(52),a=n(804),o=n(529),l=n(739),r={CONFIRMED_AT_ASC:"confirmed_at_asc",CONFIRMED_AT_DESC:"confirmed_at_desc",COUNT_ASC:"count_asc",COUNT_DESC:"count_desc",NEVER_CONFIRMED:"never_confirmed"},d={UPDATE_SEARCH_RESULT:"update_search_result",RESULT_TYPE:{EXIST:"exist",NONE:"none",EMPTY:"empty"}},c=t.Model.extend({defaults:{actor:null,confirmCount:null,latestConfirmedAt:null,isShow:null,updateMemberInfo:null},parse:function(e){return(e=s.camelizeKeys(e)).actor=o.buildContentAuthorModel(e.actor),e.updateMemberInfo=!1,e.isShow=!0,e},isShow:function(){return this.get("isShow")},updateMemberInfo:function(e){this.set("updateMemberInfo",e)},search:function(e){var t=!1;return e&&(e=e.toLowerCase()),(this.getName().toLowerCase().indexOf(e)>=0||!e)&&(t=!0),this.set("isShow",t),t},getActor:function(){return this.get("actor")},getMemberType:function(){return this.getActor().getContentAuthorMemberType()},getUserNo:function(){return this.getActor().getUserNo()},getBandNo:function(){return this.getActor().getBandNo()},getName:function(){return this.getActor().getContentAuthorName()},getMemberKey:function(){return this.getActor().getContentAuthorMemberKey()},getProfileImageUrl:function(){return this.getActor().getContentAuthorProfileImageUrl()},getDescription:function(){return this.getActor().getContentAuthorDescription()},getLatestConfirmDate:function(){return l.getBandMissionDateText(this.get("latestConfirmedAt"))},getConfirmCount:function(){return this.get("confirmCount")}}),h=t.Collection.extend({model:c,initialize:function(e){this._bandNo=e.bandNo,this._missionId=e.missionId,this._bandData=e.bandData,this._searchResult=null,this._fetched=!1,this.setShowRankingIcon(!0),this._setSearchQuery(null)},fetchMissionConfirmSummaries:function(e){e=e||{},this._fetched=!1,this.reset([]);var t={bandNo:this._bandNo,missionId:this._missionId,orderBy:e.orderBy||r.COUNT_DESC,startAt:e.startAt,endAt:e.endAt,sortType:r};return a.getMissionConfirmSummaries(t).then(i.bind((function(e){this._fetched=!0;var t=e.items||[];this.isSortTypeNeverConfirmed()||this._setConfirmCount(t),this.reset(t,{parse:!0}),this.search()}),this),i.bind((function(e){if(this._fetched=!0,this.reset([]),e.message)return e.message}),this))},_setConfirmCount:function(e){var t=i.unique(i.pluck(e,"confirm_count"));this._uniqueConfirmCount=i.sortBy(t,(function(e){return-1*e}))},isLoading:function(){return!this._fetched},getMissionId:function(){return this._missionId},getBandNo:function(){return this._bandNo},getBandData:function(){return this._bandData},showConfirmDate:function(){return this._orderBy===r.CONFIRMED_AT_ASC||this._orderBy===r.CONFIRMED_AT_DESC},isSortTypeNeverConfirmed:function(){return this._orderBy===r.NEVER_CONFIRMED},getRanking:function(e){var t=this._uniqueConfirmCount.indexOf(e);return-1===t?"":t+1},canShowMoreButton:function(){return this._showMoreButton&&this._bandData.canManageMission()},setShowMoreButton:function(e){this._showMoreButton=e},canShowRankingIcon:function(){return this._showRankingIcon},setShowRankingIcon:function(e){return this._showRankingIcon=e},getSearchQuery:function(){return this._searchQuery},search:function(){if(0!==this.size()){var e=this.filter(i.bind((function(e){return e.search(this.getSearchQuery())}),this));this._setSearchResult(d.RESULT_TYPE.EXIST),this.size()>0&&0===e.length?this._setSearchResult(d.RESULT_TYPE.NONE):0===this.size()&&this._setSearchResult(d.RESULT_TYPE.EMPTY)}},updateSearchQuery:function(e){this._setSearchQuery(e),this.search()},getSearchResult:function(){return this._searchResult},removeBandMember:function(e){e.getConfirmCount()>0?e.updateMemberInfo(!0):this.remove(e)},_setSearchResult:function(e){this._searchResult=e,this.trigger(d.UPDATE_SEARCH_RESULT)},_setSearchQuery:function(e){this._searchQuery=e}});return h.SORT_TYPE=r,h.SEARCH_EVENT=d,h.build=function(e,t,n){return new h({bandNo:e,missionId:t,bandData:n})},h}.call(t,n,t,e))||(e.exports=i)},1982:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(1983),o=(n(782),n(618)),l=n(739),r=n(1552),d=n(84),c=n(889),h=n(26),u=n(611),p=n(486),m=n(516),_=n(554),b=n(495),g=n(487),f=n(164),v=n(82),A=n(158),M=n(514),C=n(13),I=n(1153),E={MODIFY:{id:"MODIFY",title:IM("ui.label.modify_long")},REPORT:{id:"REPORT",title:IM("ui.label.report_mission")}},y={NORMAL:i.template(a),RESTRICTED:i.template('<div class="missionBlindGuide"><p class="missionBlindGuideText"><%- IM("band_mission.restricted") %></p></div>')},T=s.View.extend({className:"cMission gPab17 gContentCardShadow",attributes:{"data-viewname":"DMissionDetailView"},behaviors:[{behaviorClass:b,sceneId:b.SCENE.MISSION_INFO},g],getTemplate:function(){return this.model.isRestrictedBandMission()?y.RESTRICTED:y.NORMAL},templateContext:function(){var e=this._bandData.getBandCore().isRecruiting;return{hasGoodExample:this.model.hasGoodExample(),hasBadExample:this.model.hasBadExample(),hasMissionContent:this.model.hasContent()||e,isMissionEnded:this.model.isMissionEnded(),missionStateClassName:this._getMissionStateClassName(),missionStateText:this._getMissionStateText(),frequencyText:l.getBandMissionConfirmFrequencyText(this.model.getBandMissionConfirmFrequency()),durationText:l.getBandMissionDurationText(this.model.getBandMissionDuration()),periodText:e?"":l.getBandMissionTimezonePeriodText(this.model.getBandMissionStartAt(),this.model.getBandMissionEndAt(),this.model.getBandMissionTimeZoneId(),!1),timezoneText:e?"":l.getBandMissionTimezoneNameText(this.model.getBandMissionTimeZoneId()),isRecruitingBand:e,canManageMission:!this.model.isMissionEnded()&&this._bandData.canManageMission(),getImageThumbnailUrl:function(e){return v.make(e,f.w520)},convertDescriptionText:function(e){return A.convertDescriptionText(e)},hasMoreOptionMenu:this._hasMoreOptionMenu(),nl2br:A.nl2br}},ui:{missionCreatorProfileRegion:"._missionCreatorProfileRegion",moreOptionListRegion:"._moreOptionListRegion",missionWriteBox:"._missionWriteBox"},regions:{missionCreatorProfileRegion:{el:"@ui.missionCreatorProfileRegion",replaceElement:!0},moreOptionListRegion:"@ui.moreOptionListRegion"},events:{"click ._btnMoreOption":function(e){e.stopPropagation(),this.getRegion("moreOptionListRegion").hasView()?this._hideMoreOptionList():(h.getDGlobalChannel().trigger(h.EVENT.HTML_CLICK),this._showMoreOptionList())},"click ._btnMissionModify":function(e){e.preventDefault(),this._openMissionModifyLayer()},"click ._goodExampleMedia":function(e){if(C.isLogedIn()){var n=t(e.currentTarget).data("index");this._openMediaWithImageViewer(this.model.getMissionGoodExamplePhotoOrVideo(),_.EXAMPLE_TYPE.GOOD_EXAMPLE,n)}},"click ._badExampleMedia":function(e){if(C.isLogedIn()){var n=t(e.currentTarget).data("index");this._openMediaWithImageViewer(this.model.getMissionBadExamplePhotoOrVideo(),_.EXAMPLE_TYPE.BAD_EXAMPLE,n)}},"click ._btnWriteConfirmPost":function(){h.getPostChannel().trigger(h.EVENT.NEW_POST_WITH_MISSION,{bandData:this._bandData,bandMissionModel:this.model})}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandNo(),this.listenTo(h.getDGlobalChannel(),h.EVENT.HTML_CLICK,this._hideAllLayer)},serializeData:function(){return this.model.toJSON()},onAttach:function(){this.jplSceneEnter(g.CLASSIFIER.MISSION_INFO,{band_no:this._bandNo}),this.model.isRestrictedBandMission()||(this._showMissionCreatorProfileView(),this._renderConfirmPostButton(),this.listenTo(h.getPostChannel(),h.EVENT.POST_ADDED,i.bind((function(){this._renderConfirmPostButton()}),this)))},_renderConfirmPostButton:function(){var e=this._bandData.getBandCore().isRecruiting,t=this.model.isOngoingMission();this._bandData.canAccessMissionConfirm()?this._fetchMissionConfirmSummary().then(i.bind((function(n){e||!t||_.CONFIRM_STATUS.NOT_YET_CONFIRMED!==n.getBandMissionConfirmSummaryConfirmStatus()?this.getUI("missionWriteBox").remove():this.getUI("missionWriteBox").html('<button type="button" class="uButton -sizeM -active gMat12 gPal20 gPar20 _btnWriteConfirmPost">'+IM("create.confirm_post.editor.title")+"</button>")}),this)):this.getUI("missionWriteBox").remove()},_fetchMissionConfirmSummary:function(){var e=C.getUserData().getUserNo(),t=I.createBandMissionConfirmSummaryModel(this._bandNo,this.model.getMissionId(),e);return t.fetchBandMissionConfirmSummary().then(i.bind((function(){return t}),this))},_getMissionStateClassName:function(){return this._bandData.getBandCore().isRecruiting?"":this.model.isUpcomingMission()?"-before":this.model.isOngoingMission()?"-ing":""},_getMissionStateText:function(){return this._bandData.getBandCore().isRecruiting?"":this.model.isUpcomingMission()?IM("band_mission.upcoming"):this.model.isOngoingMission()?l.getDaysInProgressText(this.model):""},_hideAllLayer:function(){this._hideMoreOptionList()},_showMissionCreatorProfileView:function(){if(!(this.getUI("missionCreatorProfileRegion").length<1)){var e=this.model.getBandMissionCreator();this.showChildView("missionCreatorProfileRegion",o.buildContentCreatorProfileImageView({bandCore:this._bandData.getBandCore(),userNoOrMemberKey:this.model.getBandMissionCreator().getUserNo(),memberProfile:e.getContentAuthorMemberProfile(),role:e.getContentAuthorRole(),size:30}))}},_getMoreOptionMenus:function(){var e=[];return!this.model.isMissionEnded()&&this._bandData.canManageMission()&&e.push(E.MODIFY),this.model.canReportBandMission()&&this._bandData.canReportBand()&&e.push(E.REPORT),e},_hasMoreOptionMenu:function(){return!i.isEmpty(this._getMoreOptionMenus())},_showMoreOptionList:function(){this.getUI("moreOptionListRegion").addClass("lyMenu").css("min-width","145px");var e=this.getRegion("moreOptionListRegion");if(!e.hasView()){var t=c.build(this._getMoreOptionMenus());this.listenToOnce(t,c.EVENTS.MENU_SELECTED,(function(e){switch(e){case E.MODIFY.id:this._openMissionModifyLayer();break;case E.REPORT.id:this._openMissionReportPopup()}})),e.show(t)}},_hideMoreOptionList:function(){this.getUI("moreOptionListRegion").removeClass("lyMenu").css("min-width","");var e=this.getRegion("moreOptionListRegion");e.hasView()&&e.empty()},_openMissionModifyLayer:function(){var e,t=this.model.getBandNo();if(this._bandData.getBandCore().isRecruiting)e=r.buildLayerRecruitingBandMissionModify(t,"copy");else{var n=this.model.getMissionId();e=r.buildLayerMissionModify(t,n,"copy")}e.then(i.bind((function(e){this.listenTo(e,"editConfirmMission",(function(){d.refreshCurrentPage()}))}),this))},_openMediaWithImageViewer:function(e,t,n){var s=u.buildImageViewer({result_data:{photos:i.map(e,(function(e){var t=!1;return e.isVideo&&(t={is_gif:e.isGif}),{height:e.height,width:e.width,photo_url:e.url,video:t}})),total_count:i.size(e)},bandNo:this.model.getBandNo(),openIndex:n});this.listenTo(s,u.EVENT.FETCH_VIDEO_URL,(function(e,n){var i=this._bandData.getBandCore().isRecruiting,a=this.model.getBandNo(),o=this.model.getMissionId(),l=s.collection.get(e).getImageIndex();m.getVideoUrlByMissionExample(i,a,o,t,l).then((function(t){s.setVideoUrlFromAPI(t,e)}))})),p.open(s)},_openMissionReportPopup:function(){var e=this._bandData.getBandCore(),t=e.bandNo,n=e.isRecruiting,i=this.model.getMissionId();M.openBandMissionReportPopup(t,n,i)}});return T.buildBandMissionDetailView=function(e,t){return new T({bandData:e,model:t})},T}.call(t,n,t,e))||(e.exports=i)},1983:function(e,t){e.exports='<h2 class="title gSrOnly"><%= IM(\'band_mission.introduce.title\') %></h2>\n<% if (!isRecruitingBand) { %>\n\x3c!-- 미션 타이틀 영역 --\x3e\n<div class="missionTitleWrap -bLine">\n    <div class="orderByInfo -flexLayout">\n        <div class="_missionCreatorProfileRegion"></div>\n        <div class="orderByInfoProfileName gMal8"><%= IM(\'band_mission.creator_profile_text\', {creatorName: _.escape(creator.name)}) %></div>\n    </div>\n    <h2 class="missionTitle gMat7"><%- title %></h2>\n    <div class="missionDateInfo">\n        <% if (!!missionStateText) { %>\n        <span class="missionState <%= missionStateClassName %>"><%= missionStateText %>,</span>\n        <span class="frequencyInfo"><%= frequencyText %>,</span>\n\n        <% } %>\n        <span class="periodInfo"><%= durationText %></span>\n\n        <% if (!!periodText) { %>\n        <span class="periodInfoDetail">(<%= periodText %>)</span>\n        <% } %>\n    </div>\n    <% if (!!timezoneText) { %>\n    <div class="missionTimezoneInfo"><%= timezoneText %></div>\n    <% } %>\n\n    <div class="missionWriteBox _missionWriteBox"></div>\n</div>\n<% } %>\n\n\x3c!-- 미션 상세 내용 --\x3e\n<% if (hasMissionContent) { %>\n\x3c!-- 미션 상세 내용 영역 --\x3e\n<div class="missionRuleWrap <% if (isRecruitingBand) { %>-waitingBand<% } %>">\n    <% if (isRecruitingBand || !!description) { %>\n    <div class="missionContentBox">\n        <h3 class="missionSubTitle"><%= IM(\'band_mission.setting.rule\') %></h3>\n        <% if (isRecruitingBand) { %>\n        <div class="missionDateInfo gMat15">\n            <span class="frequencyInfo"><%= frequencyText %></span>\n            <span class="periodInfo"><%= durationText %></span>\n        </div>\n        <h3 class="missionSubTitle gMat15"><%- title %></h3>\n        <% } %>\n        <div class="missionText gMat14"><%= convertDescriptionText(description) /* 태그 있음 */ %></div>\n    </div>\n    <% } %>\n    <% if (!!hasGoodExample) { %>\n    \x3c!-- 인증 Good Example --\x3e\n    <div class="missionContentBox">\n        <h3 class="missionSubTitle -goodCase"><%= IM(\'band_mission.setting.good_case.title\') %></h3>\n        <div class="missionText gMat14"><%= convertDescriptionText(goodExample.content) /* 태그 있음 */ %></div>\n\n        <% _.each(goodExample.photoOrVideo, function(media, index) { %>\n        <div class="_goodExampleMedia missionMedia <%= media.isVideo ? \'-iconPlay80 gMat9\' : \'gMat9\' %>" data-index="<%= index %>">\n            <img src="<%- getImageThumbnailUrl(media.url) %>" width="100%" alt="good example image">\n        </div>\n        <% }); %>\n    </div>\n    <% } %>\n\n    <% if (!!hasBadExample) { %>\n    \x3c!-- 인증 Bad Example --\x3e\n    <div class="missionContentBox">\n        <h3 class="missionSubTitle -badCase"><%= IM(\'band_mission.setting.bad_case.title\') %></h3>\n        <div class="missionText gMat14"><%= convertDescriptionText(badExample.content) /* 태그 있음 */ %></div>\n        <% _.each(badExample.photoOrVideo, function(media, index) { %>\n        <div class="_badExampleMedia missionMedia <%= media.isVideo ? \'-iconPlay80 gMat9\' : \'gMat9\' %>" data-index="<%= index %>">\n            <img src="<%- getImageThumbnailUrl(media.url) %>" width="100%" alt="bad example image">\n        </div>\n        <% }); %>\n    </div>\n    <% } %>\n</div>\n<% } %>\n\n<% if (!hasMissionContent && canManageMission) { %>\n<% if (isRecruitingBand) { %>\n\x3c!-- 대기 밴드 > 미션 내용 없을 때 --\x3e\n<button type="button" class="btnMissionCreate gMat-2 _btnMissionModify"><%= IM(\'recruiting_band.mission.no_content.creator_guide_text\') %></button>\n<% } else { %>\n\x3c!-- 그룹 밴드 > 미션 내용 없을 때 --\x3e\n<a href="#" class="uEmpty _btnMissionModify" style="height:400px">\n    <div class="uEmptyWrap">\n        <span class="uEmptyIcon -missionDetail"></span>\n        <p class="uEmptyTitle"><%= IM(\'band_mission.no_content.creator_guide.title\') %></p>\n        <p class="uEmptyDesc"><%= IM(\'band_mission.no_content.creator_guide.desc\') %></p>\n    </div>\n</a>\n<% } %>\n<% } else { %>\n\x3c!--미션 인증글 첨부 사진 촬영정보 표시 안내 가이드--\x3e\n\x3c!--._btnMissionModify 영역이 노출될 때는 노출하지 않는데, 클릭해서 열리는 편집 레이어에 동일 안내가 있기 때문--\x3e\n\x3c!-- http://bts.campmobile.com/browse/BAND-97232 --\x3e\n<div class="missionGuideBox">\n    <p class="missionGuideText gMat9 gFs12 gColorBk4">\n        <%=nl2br(IM(\'band_mission.setting.showing_photographed_at_guide\')) %>\n    </p>\n</div>\n<% } %>\n\n\n<% if (isRecruitingBand && !hasMissionContent && !canManageMission) { %>\n<div class="uEmpty gMat10" style="height:457px">\n    <span class="gColorGr3"><%= IM(\'band_mission.no_content.non_creator_guide\') %></span>\n</div>\n<% } %>\n\n<% if (hasMoreOptionMenu) { %>\n\x3c!--  미션 상세 더보기 옵션  --\x3e\n<div class="postFunction">\n    <button type="button" class="postSet _btnMoreOption"><%= IM(\'ui.label.more.short\') %></button>\n    <div class="_moreOptionListRegion">\n    </div>\n</div>\n<% } %>'},2102:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(486),a=n(545),o=n(666),l=n(3364),r=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DExternalCalendarManageView"},template:i.template(l),ui:{externalUrl:"._externalUrl",calendarName:"._calendarName",calendarColor:"._calendarColor",calendarWrapper:"._calendarWrapper",supportColorItem:"._supportColorItem",btnCancel:"._btnCancel",btnConfirm:"._btnConfirm"},events:{"keyup @ui.externalUrl":"_adaptButtonStyle","keyup @ui.calendarName":"_adaptButtonStyle","click @ui.calendarWrapper":"_toggleColorSelectbox","click @ui.supportColorItem":"_setCalendarColor","click @ui.btnCancel":"destroy","click @ui.btnConfirm":"_createCalendar"},initialize:function(e){this.calendarType=e.calendarType,this.bandNo=e.bandNo,this.model=e.model},serializeData:function(){return{MAX_LENGTH_OF_CALENDAR_NAME:a.MAX_LENGTH_OF_CALENDAR_NAME,supportColorList:a.CALENDAR_COLOR}},_createCalendar:function(){var e={type:this.calendarType,url:this.getUI("externalUrl").val(),name:this.getUI("calendarName").val(),color:this.getUI("calendarColor").data("color")};return this.model.createCalendar(e).then(i.bind((function(e){this.trigger("bandCalendar:createCalendar",e),this.destroy()}),this))},_adaptButtonStyle:function(){var e=this.getUI("externalUrl").val(),t=this.getUI("calendarName").val();!i.isEmpty(e.trim())&&e.length>0&&!i.isEmpty(t.trim())&&t.length>0?(this.getUI("btnConfirm").removeClass("-disabled"),this.getUI("btnConfirm").removeAttr("disabled")):(this.getUI("btnConfirm").addClass("-disabled"),this.getUI("btnConfirm").attr("disabled","true"))},_toggleColorSelectbox:function(e){e.preventDefault();var t=$(e.currentTarget);t.hasClass("-dropDownOn")?t.removeClass("-dropDownOn"):t.addClass("-dropDownOn")},_setCalendarColor:function(e){var t=$(e.currentTarget).data("color");this.getUI("calendarColor").attr("style","background-color: #"+t),this.getUI("calendarColor").attr("data-color",t)}});return r.openAsLayer=function(e,t){var n=o.createNewCalendar(e),i=new r({bandNo:e,calendarType:t,model:n});return s.open(i),i},r}.call(t,n,t,e))||(e.exports=i)},2103:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3365),a=(n(541),n(486)),o=n(600),l=n(537),r=n(167),d=n(166),c=(n(488),n(83)),h=n(590),u=n(507),p=n(545),m=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandCalendarImportView"},template:t.template(s),ui:{btnLyClose:"._btnClose",scheduleFileInputLabel:"._scheduleFileInputLabel",inputFileWrapper:"._inputFileWrapper",scheduleFileInput:"._scheduleFileInput",uploadedFileWrapper:"._uploadedFileWrapper",uploadedCalendarFileName:"._uploadedCalendarFileName",btnFileUpload:"._btnFileUpload",btnUploadedFileRemove:"._btnUploadedFileRemove",calendarWrapper:"._calendarWrapper",supportColorItem:"._supportColorItem",calendarColor:"._calendarColor",calendarName:"._calendarName"},events:{"click @ui.btnLyClose":"destroy","click @ui.btnUploadedFileRemove":"_selectFileReset","click @ui.btnFileUpload":"_importFileUpload","click @ui.scheduleFileInput":function(){if(h.isContentCreationPunished())return!1},"click @ui.calendarWrapper":"_toggleColorSelectbox","click @ui.supportColorItem":"_setCalendarColor","keyup @ui.calendarName":"_adaptButtonStyle"},initialize:function(e){this._bandNo=e.bandNo,this._fileUploadSubmit=!1,this._sending=!1,this._sosId=null,this._calendar=null},serializeData:function(){return{MAX_LENGTH_OF_CALENDAR_NAME:p.MAX_LENGTH_OF_CALENDAR_NAME,supportColorList:p.CALENDAR_COLOR}},onAttach:function(){var e=window.URL?" ":"";this._createFileUploader(e)},onBeforeDetach:function(){this._destroyUploaders()},_selectFileReset:function(){return this.ui.scheduleFileInputLabel.val(""),this.getUI("inputFileWrapper").show(),this.getUI("uploadedFileWrapper").hide(),this._adaptButtonStyle(),this._fileUploadSubmit=!1,!1},_importFileUpload:function(){if(!this._fileUploadSubmit||this._sending)return!1;this._sending=!0;var e={sosId:this._sosId,bandNo:this._bandNo,calendar:this._getCalendar()};return c.setBandImportSchedules(e).then(t.bind((function(){this._successImportSchedules()}),this)).fail(t.bind((function(){this._sending=!1,this._failImportSchedules()}),this)).always(t.bind((function(){this._sending=!1}),this)),!1},_successImportSchedules:function(){r.getCurrentUserEnvStorage().remove([d.ScheduleImportNotificationClose]),this.trigger("bandSchedule:import"),this.destroy()},_failImportSchedules:function(){alert(IM("calendar.import_schedule.fail")),this.trigger("bandSchedule:import:fail"),this.destroy()},_createFileUploader:function(e){this._destroyUploaders(),this._fileUploader=o.createFileUploader(this.ui.scheduleFileInputLabel,{multiple:!1,autoUpload:!0,accept:".ics,.csv",validators:[t.partial(l.SCHEDULE_IMPORT_VALIDATOR,t,0,1)],fileInputTitle:e}),this.listenTo(this._fileUploader,u.UPLOAD_COMPLETE,t.bind((function(e){var t=e.resultList[0];this._fileUploadSubmit=!0,this._sosId=t.id,this.getUI("inputFileWrapper").hide(),this.getUI("uploadedCalendarFileName").text(t.name),this.getUI("uploadedFileWrapper").show(),this._adaptButtonStyle()}),this))},_destroyUploaders:function(){this._fileUploader&&(this._fileUploader.destroy(),this._fileUploader=null,this._sosId=null)},_getCalendar:function(){return{type:p.TYPE.INTERNAL,color:this.getUI("calendarColor").data("color"),name:this.getUI("calendarName").val()}},_adaptButtonStyle:function(){var e=this.getUI("calendarName").val();this.getUI("uploadedCalendarFileName").text().length>0&&!t.isEmpty(e.trim())&&e.length>0?(this.getUI("btnFileUpload").removeClass("-disabled"),this.getUI("btnFileUpload").removeAttr("disabled")):(this.getUI("btnFileUpload").addClass("-disabled"),this.getUI("btnFileUpload").attr("disabled","true"))},_toggleColorSelectbox:function(e){e.preventDefault();var t=$(e.currentTarget);t.hasClass("-dropDownOn")?t.removeClass("-dropDownOn"):t.addClass("-dropDownOn")},_setCalendarColor:function(e){var t=$(e.currentTarget).data("color");this.getUI("calendarColor").attr("style","background-color: #"+t),this.getUI("calendarColor").attr("data-color",t)}});return m.openAsLayer=function(e){var t=new m({bandNo:e});return a.open(t),t},m}.call(t,n,t,e))||(e.exports=i)},2104:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(16),s=n(570),a=n(503),o=t.Model.extend({idAttribute:"schedule_id"}),l=t.Collection.extend({model:o,initialize:function(e){this.bandNo=e.bandNo,this.startAt=e.startAt,this.futureEndAt=e.futureEndAt,this.calendars=e.calendars},fetchSchedules:function(){return a.getSchedules({bandNo:this.bandNo,startAt:this.startAt,futureEndAt:this.futureEndAt,calendars:this.calendars})},getDailyScheduleCollection:function(){var e="",n=new t.Collection;this.each((function(t){var a=s.getContinuationSchedulesLength({endAt:t.get("end_at"),startAt:t.get("start_at")}),o=i(t.get("start_at"));o.format("YYYYMMDD")<this.startAt.format("YYYYMMDD")&&(a-=Math.ceil(this.startAt.diff(o,"days","true")));for(var l=0;l<=a;l++){var r=t.clone(),d=i(r.get("start_at"));if(d.format("YYYYMMDD")>=this.startAt.format("YYYYMMDD")&&l>0)d=d.add(l,"day");else if(d.format("YYYYMMDD")<this.startAt.format("YYYYMMDD")){var c=Math.ceil(this.startAt.diff(d,"days","true"))+l;d=d.add(c,"day")}if(d.format("YYYYMMDD")>this.futureEndAt.format("YYYYMMDD"))return;r.set("_custom_start_at",d),e!==d.format("YYYYMM")&&r.set("_custom_monthlyInfo",d),e=d.format("YYYYMM"),r.set("_custom_sortBy",s.getScheduleSort({endAt:r.get("end_at"),startAt:r.get("start_at"),isAllDay:r.get("is_all_day"),scheduleType:r.get("schedule_type"),scheduleDayStartAt:i(r.get("_custom_start_at"))})),n.push(r)}}),this);var a=n.groupBy((function(e){return e.get("_custom_start_at").format("YYYYMMDD")})),o=_.map(a,(function(e,t){return{date:t,schedules:e}}));return new t.Collection(o)}});return l.collectionBuild=function(e){return new l({bandNo:e.bandNo,startAt:i(e.startAt,"YYYY-MM-DD"),futureEndAt:i(e.futureEndAt,"YYYY-MM-DD"),calendars:e.calendars})},l}.call(t,n,t,e))||(e.exports=i)},2105:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=i.template(['<style class="printStyle">',"@page {","    <% _.each(pageStyleHash, function(value, key) { %>","    <%-key %>:<%-value%>;","    <% }); %>","}","@media print{ #wrap { display:none; } }","</style>"].join("\n")),o=s.Application.extend({region:"._printRegion",initialize:function(e){this.view=e.view,this._pageStyles={size:e.size||"A4",margin:e.margin||"1.1cm 0.74cm"}},onStart:function(){this.showView(this.options.view),this._afterPrintEvent()},_setWindowPrintEventListenerOnce:function(e,n){var i=window.matchMedia("print"),s=n?"beforeprint":"afterprint";if(window.matchMedia&&t.browser.safari){var a=function(t){t.matches===n&&(e(),i.removeListener(a))};i.addListener(a)}else t(window).one(s,e)},_afterPrintEvent:function(){var e,n=i.bind((function(){e=t(a({pageStyleHash:this._pageStyles})).appendTo("head")}),this),s=i.bind((function(){this.getRegion().destroy(),this._setWindowPrintEventListenerOnce(i.bind((function(){e.remove()}),this),!0)}),this);this._setWindowPrintEventListenerOnce(n,!0),this._setWindowPrintEventListenerOnce(s,!1)}});return o.printView=function(e,t){new o(i.extend({view:e,landscapePrint:"landscape"},t)).start()},o}.call(t,n,t,e))||(e.exports=i)},2106:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0);return t.Behavior.extend({options:{onAllImgTagLoaded:""},onRender:function(){this._$allImage=this.$el.find("img"),this._imagesLoadResultCount=0,this._$allImage.on("load",i.bind(this._handleImageLoaded,this)),this._$allImage.on("error",i.bind(this._handleImageLoaded,this))},_handleImageLoaded:function(){this._imagesLoadResultCount++,this._imagesLoadResultCount===this._$allImage.length&&this._invokeEventHandler()},_invokeEventHandler:function(){i.isFunction(this.options.onAllImgTagLoaded)?this.options.onAllImgTagLoaded.call(this.view):i.isString(this.options.onAllImgTagLoaded)&&(i.isFunction(this.view[this.options.onAllImgTagLoaded])?this.view[this.options.onAllImgTagLoaded]():this.view.trigger(this.options.onAllImgTagLoaded))}})}.call(t,n,t,e))||(e.exports=i)},2107:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(543),a=n(1171),o=n(1280),l=n(1551),r=(s.PERMISSION_ROLES,a.PERMISSION_GROUP,a.PERMISSION),d=i.CollectionView.extend({tagName:"ul",className:"sSettingList",attributes:{"data-viewname":"DMemberPermissionSettingItemListView"},childView:l,childViewOptions:function(e,t){return{index:t,bandNo:this.options.bandNo,bandOptionModel:this._bandOptionModel,selectedOption:o.getSelectedOption(r[e.get("id")],this._bandOptionModel)}},initialize:function(e){this._bandOptionModel=e.bandOptionModel}});return d.show=function(e,n){if(e&&(e.hasView()&&e.empty(),!t.isEmpty(n.permissions))){var i=new Backbone.Collection(n.permissions,{model:Backbone.Model}),s=new d({bandNo:n.bandNo,collection:i,bandOptionModel:n.bandOptionModel});return e.show(s),s}},d}.call(t,n,t,e))||(e.exports=i)},2108:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(3458),o=n(190),l=n(568),r=n(153),d=n(82),c=n(164),h=n(156),u=n(9),p=n(590),m=n(487),_=n(1261),b=s.View.extend({attributes:{"data-viewname":"DBandAlbumItemView"},tagName:function(){return this.model.isTotalView()?"div":"li"},className:function(){return this.model.isTotalView()?"albumWrap":""},behaviors:[m],template:t.template(a),templateContext:function(){return{_s:i,ThumbnailUtil:d,ThumbnailType:c,FileUtil:h,Localize:u,albumUrl:this._makeAlbumUrl()}},ui:{photoUpload:"._photoUpload",fileInput:"._fileInput",image:"._image"},events:{"click @ui.fileInput":function(e){if(p.isContentCreationPunished())return!1;this._bandData.isUploadPhotoToAlbumPermitted()||(e.preventDefault(),e.stopPropagation(),alert(IM("permission.not_appointed_member_submit_denied")))}},initialize:function(e){this._bandData=e.bandData},onAttach:function(){this.ui.image.setLoading(),this._bindPhotoUploader()},_makeAlbumUrl:function(){return r.GROUP_BAND_ALBUM_DETAIL.makeUrl({band_no:this._bandData.getBandNo(),album_no:this.model.getAlbumNo()==l.TOTAL_ALBUM_NO?o.TOTAL_ALBUM_NO:this.model.getAlbumNo()})},_bindPhotoUploader:function(){this._photoUploader=_.createPhotoOrVideoUploader({inputElement:this.ui.photoUpload,inputClick:t.bind(this._sendUploadClickJackpotLog,this),bandNo:this._bandData.getBandNo(),albumNo:this.model.getAlbumNo(),addToAlbum:!0})},_destroyPhotoUploader:function(){this._photoUploader&&(this._photoUploader.destroy(),this._photoUploader=null)},_preventDefaultAndStopPropagation:function(){return!1},onBeforeDetach:function(){this._destroyPhotoUploader()},_sendUploadClickJackpotLog:function(){try{this.jplClick(m.CLASSIFIER.UPLOAD_PHOTO,{band_no:this._bandData.getBandNo(),album_no:this.model.getAlbumNo()})}catch(e){}}});return b.buildDAlbumItemView=function(e,t,n){return new b({model:e,bandNo:t,bandData:n})},b}.call(t,n,t,e))||(e.exports=i)},2109:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3465),a=n(153),o=n(82),l=n(1143),r=i.View.extend({options:{bandData:null},className:"sideCover",attributes:{"data-viewname":"DGroupBandSideCoverView"},template:t.template(s),templateContext:function(){return{bandCore:this.options.bandData.getBandCore(),bandHomeUrl:a.GROUP_BAND_HOME.makeUrl({band_no:this.options.bandData.getBandCore().bandNo}),coverUrl:o.makeMediumCoverUrl(this.options.bandData.getBandCore().cover),isBlocked:this.options.bandData.isBlockedBand()}},onAttach:function(){this.trigger(l.EVENT.RESTART)}});return r.buildDGroupBandSideCoverView=function(e){return new r({bandData:e})},r}.call(t,n,t,e))||(e.exports=i)},2110:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(3475),a=n(1229),o=i.Collection.extend({model:s,initialize:function(e,t){this._bandNo=t.bandNo},fetchCommentSet:function(){return a.getApplicantCommentSet(this._bandNo).then(t.bind((function(e){e&&!t.isEmpty(e.applicant_comment_set)&&this.reset(e.applicant_comment_set,{parse:!0})}),this))}});return o.buildDBandJoinMiniQnARoomCollection=function(e){return new o([],{bandNo:e})},o}.call(t,n,t,e))||(e.exports=i)},2111:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3493),a=n(153),o=n(26),l=n(1595),r=n(1047),d=n(13),c=n(782),h=n(1153),u={JOIN_BAND:"JOIN_BAND"},p=t.View.extend({attributes:{"data-viewname":"DBandMissionConfirmPostLayoutView "},template:i.template(s),templateContext:function(){return{canShowTitle:this._bandData.canAccessMissionConfirm(),missionTitle:this._bandMissionModel?this._bandMissionModel.getBandMissionTitle():""}},ui:{createMissionConfirmPost:"._createMissionConfirmPost",missionConfirmPostRegion:"._missionConfirmPostRegion"},regions:{missionConfirmPostRegion:{el:"@ui.missionConfirmPostRegion"}},events:{"click @ui.createMissionConfirmPost":function(){o.getPostChannel().trigger(o.EVENT.NEW_POST_WITH_MISSION,{bandData:this._bandData,bandMissionModel:this._bandMissionModel})}},initialize:function(e){this._bandData=e.bandData,this._bandNo=e.bandData.getBandNo(),this._missionId=e.missionId,this._dataFetched=!1,this._userData=d.getUserData(),this._missionConfirmPostCollection=l.buildConfirmPostsWithMission(this._bandNo,this._missionId),this.listenTo(o.getPostChannel(),o.EVENT.POST_ADDED,(function(e){e.missionId==this._missionId&&(this.ui.createMissionConfirmPost.css("display","none"),this._showPostList())}))},onDomRefresh:function(){this._dataFetched&&(this._bandMissionConfirmSummaryModel&&this._bandMissionConfirmSummaryModel.isMyNotYetConfirmedBandMissionConfirmSummary()&&this.ui.createMissionConfirmPost.css("display",""),this._showPostList())},onAttach:function(){!this._bandData.canAccessPost()||this._dataFetched?this.showChildView("missionConfirmPostRegion",this._postListEmptyView()):c.fetchBandMission(this._bandNo,this._missionId).then(i.bind((function(e){return this._bandMissionModel=e,this._bandData.canAccessMissionConfirm()?(this._bandMissionConfirmSummaryModel=h.createBandMissionConfirmSummaryModel(this._bandNo,this._missionId,this._userData.getUserNo()),this._bandMissionConfirmSummaryModel.fetchBandMissionConfirmSummary().then(i.bind((function(){this._dataFetched=!0,this.render()}),this))):(this._dataFetched=!0,void this.render())}),this),i.bind((function(){a.GROUP_BAND_HOME.goDForced({band_no:this._bandNo})}),this))},_showPostList:function(){this.isDestroyed()||this._missionConfirmPostCollection.fetchConfirmPostWithMission().then(i.bind((function(){this._isPublicBandAndNotMember()&&this._missionConfirmPostCollection.isEmpty()?this._confirmPostCollectionView=this._postListEmptyView():this._confirmPostCollectionView=r.buildMissionConfirmPostListWithMissionView(this._bandData,this._missionConfirmPostCollection),this.showChildView("missionConfirmPostRegion",this._confirmPostCollectionView)}),this))},_isPublicBandAndNotMember:function(){return!this._bandData.canAccessMissionConfirm()&&this._bandData.canAccessPost()},_postListEmptyView:function(){var e=IM("board.no_member.hint"),n=IM("board.no_member.hint.post"),s="-join";this._isPublicBandAndNotMember()&&(e=IM("band_mission.confirm_post.empty"),n=IM("band_mission.confirm_post.empty_desc"),s="-first");var a=new t.View({className:"uEmpty gContentCardShadow gPr",attributes:{style:"height:547px"},template:i.template('<a href="#" role="button" class="_btnJoinBand">\n    <span class="uEmptyIcon '+s+'"></span>\n    <h1 class="uEmptyTitle">'+e+'</h1>\n    <p class="uEmptyDesc">'+n+"</p></a>"),ui:{btnJoinBand:"._btnJoinBand"},events:{"click @ui.btnJoinBand":function(){this.trigger(u.JOIN_BAND)}}});return this.listenTo(a,u.JOIN_BAND,(function(){this.trigger(u.JOIN_BAND)})),a}});return p.EVENT=u,p.buildDBandMissionConfirmPostLayoutView=function(e,t){var n=new p({bandData:e,missionId:t});return $.Deferred().resolve(n)},p}.call(t,n,t,e))||(e.exports=i)},2112:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(6),s=n(782),a=n(155),o=n(168),l=n(153),r=n(1003),d=n(1153),c=i.Model.extend({initialize:function(e,t){this._bandNo=t.bandNo,this._missionId=t.missionId,this._userNo=t.userNo,this._memberKey=t.memberKey,this._startDayNum=t.startDayNum,this._bandData=t.bandData,this._bandMissionModel=t.bandMissionModel,this._bandMissionConfirmSummaryModel=t.bandMissionConfirmSummaryModel},getBandMissionConfirmSummaryModel:function(){return this._bandMissionConfirmSummaryModel},getBandMissionConfirmSummaryBandData:function(){return this._bandData},getBandMissionConfirmSummaryBandMissionModel:function(){return this._bandMissionModel},getBandMissionConfirmSummaryMemberPostUrl:function(){return l.GROUP_BAND_MEMBER_CONTENT.makeUrl({band_no:this._bandNo,member_key:this._memberKey,type:"confirm-post"})},getBandMissionConfirmSummaryStartDayNum:function(){return this._startDayNum}});return c.buildBandMissionConfirmSummaryViewModel=function(e,n,i){return s.fetchBandMission(e,n).then((function(s){return s.isRestrictedBandMission()?(alert(IM("band_mission.restricted")),t.Deferred().reject().promise()):function(e,n,i,s){var l=a.get(e),h=d.createBandMissionConfirmSummaryModel(e,n,i);return t.when(o.getMember(e,i),r.getCachedStartDayNum(),l.loadBandData(),h.fetchBandMissionConfirmSummary()).then((function(t,a){return new c(void 0,{bandData:l,bandMissionModel:s,bandNo:e,missionId:n,userNo:i,memberKey:t.member_key,startDayNum:a,bandMissionConfirmSummaryModel:h})}))}(e,n,i,s)}))},c}.call(t,n,t,e))||(e.exports=i)},2113:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(16),a=n(3503),o=n(2114),l=n(2115),r=n(3506),d=n(3508),c=n(739),h=n(618),u=n(26),p=n(154),m=n(3510),_=n(1126),b=n(540),g=n(486),f=n(1602),v=n(156),A=n(9),M=n(487),C="NORMAL",I="LAYER",E=i.View.extend({tagName:"div",attributes:{"data-viewname":"DBandMissionConfirmSummaryView"},template:t.template(a),behaviors:[M],ui:{mission:"._mission",profile:"._profile",menu:"._menu",calendar:"._calendar",checkboxRemindEnabled:"._checkboxRemindEnabled",monthlyStatusRegion:"._monthlyStatusRegion",allCaptureArea:"._allCaptureArea",calendarCaptureArea:"._calendarCaptureArea",missionCalDescWrap:"._missionCalDescWrap",textEllipsis:"._textEllipsis",textEllipsis2:"._textEllipsis2",btnShareStatus:"._btnShareStatus"},events:{"change @ui.checkboxRemindEnabled":function(){var e=this.getUI("checkboxRemindEnabled").is(":checked");this._bandMissionConfirmSummaryModel.setBandMissionConfirmSummaryRemindState(e).then(t.bind(this._refreshView,this))},"click @ui.btnShareStatus":function(){var e=this.getRegion("calendarRegion");e.isDestroyed()||(this._openScreenCaptureSelectView(e.currentView),this.jplClick(M.CLASSIFIER.SHARE_MY_MISSION_RECORD,{band_no:this._bandMissionModel.getBandNo()}))}},regions:{mission:{el:"@ui.mission",replaceElement:!0},profile:{el:"@ui.profile",replaceElement:!0},menu:{el:"@ui.menu",replaceElement:!0},calendarRegion:{el:"@ui.calendar",replaceElement:!0},monthlyStatusRegion:{el:"@ui.monthlyStatusRegion",replaceElement:!0}},initialize:function(e){this._viewType=e.viewType,this._bandMissionConfirmSummaryModel=e.bandMissionConfirmSummaryModel,this._bandMissionModel=this.model.getBandMissionConfirmSummaryBandMissionModel(),this._bandData=this.model.getBandMissionConfirmSummaryBandData()},serializeData:function(){var e=this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryActor(),t=this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryConfirmCount()||"0";return{isLayer:this._isLayerView(),name:e.getContentAuthorName(),description:e.getContentAuthorDescription(),latestConfirmedAt:c.getBandMissionDateText(this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryLatestConfirmedAt()),confirmCount:this._bandMissionModel.isUpcomingMission()?null:t,memberConfirmPostUrl:this.model.getBandMissionConfirmSummaryMemberPostUrl(),showConfirmRemindSetting:this._bandMissionModel.isOngoingMission()&&!this._isLayerView(),isBandMissionConfirmSummaryRemindEnabled:this._bandMissionConfirmSummaryModel.isBandMissionConfirmSummaryRemindEnabled(),participatedMission:this._bandMissionConfirmSummaryModel.isParticipatedBandMission(),remindDescription:c.getRemindDescriptionText(this._bandMissionConfirmSummaryModel.isParticipatedBandMission(),this._bandMissionModel.getBandMissionConfirmFrequency()),canUseShareMyStatus:this._canUseShareMyStatus()}},onRender:function(){this._renderMission(),this._renderProfile(),this._renderMenu(),this._renderCalendar(),this._renderMonthlyStatus()},onAttach:function(){function e(e){this._bandMissionConfirmSummaryModel.isMatchedBandMissionConfirmSummary(e.bandNo,e.missionId,e.postNo)&&this._refreshView()}this.listenTo(u.getPostChannel(),u.EVENT.POST_ADDED,e),this.listenTo(u.getPostChannel(),u.EVENT.CANCEL_MISSION_CONFIRM,e),this.listenTo(u.getPostChannel(),u.EVENT.POST_DELETED,e)},onBeforeDetach:function(){this.stopListening(u.getPostChannel())},_sendClickSaveImageLog:function(e){this.jplClick(M.CLASSIFIER.SAVE_MISSION_RECORD_IMAGE,{band_no:this._bandMissionModel.getBandNo(),location:e})},_canUseShareMyStatus:function(){return!this._bandMissionModel.isUpcomingMission()&&!this._isLayerView()&&this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryActor().isMyself()},_renderMission:function(){var e;e=this._isLayerView()?o.buildLayerTypeDBandMissionConfirmMissionView(this._bandMissionModel):o.buildBottomLineTypeDBandMissionConfirmMissionView(this._bandMissionModel),this.showChildView("mission",e)},_renderProfile:function(){var e=this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryActor(),t=this._bandData.getBandCore();this.showChildView("profile",h.buildContentCreatorProfileImageView({bandCore:t,memberProfile:e.getContentAuthorMemberProfile(),userNoOrMemberKey:e.getUserNo(),role:e.getContentAuthorRole(),size:50,useCORS:!0}))},_renderMenu:function(){var e=this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryActor();e.isContentAuthorMe()||this.showChildView("menu",l.buildConfirmSummaryTypeDBandMissionMemberStatusMoreOptionsView(e,this._bandData))},_isLayerView:function(){return this._viewType===I},_renderCalendar:function(){var e=r.buildDBandMissionConfirmSummaryView(this.model,this._month,this._canUseShareMyStatus());this.listenToOnce(e,"destroy",(function(){this._month=e.getBandMissionConfirmSummaryCalendarMonth()})),this.listenTo(e,f.CAPTURE_EVENT.CLICK_SHARE_MY_STATUS,(function(){this._sendClickSaveImageLog("top"),this._screenCaptureStart(f.CAPTURE_AREA.CALENDAR,!0)})),this.showChildView("calendarRegion",e)},_renderMonthlyStatus:function(){var e=d.build(this.model,this._canUseShareMyStatus());this.listenTo(e,f.CAPTURE_EVENT.CLICK_SHARE_MY_STATUS,(function(){this._sendClickSaveImageLog("bottom"),this._screenCaptureStart(f.CAPTURE_AREA.GRAPH,!0)})),this.showChildView("monthlyStatusRegion",e)},_refreshView:function(){p.wrapActivePromise(this._bandMissionConfirmSummaryModel.fetchBandMissionConfirmSummary(),this).then(t.bind((function(){this.render()}),this))},_openScreenCaptureSelectView:function(e){var t=m.buildAsLayer();this.listenTo(t,m.EVENT.CAPTURE_START,(function(e){this._screenCaptureStart(e,!1)}))},_renderImageUploadLoadingView:function(e){this._imageUploadLoadingView&&this._imageUploadLoadingView.destroy(),e||(this._imageUploadLoadingView=new i.View({template:t.template('<div class="lyWrap"><div class="lyContent -bgTransparency -noBorder"><div class="modalBody"><p class="uLoading"><img src="'+window.resBaseUrl+'/images/common/loading.gif" width="32" height="32" alt="loading"></p></div></div></div>')}),g.open(this._imageUploadLoadingView))},_screenCaptureStart:function(e,n){this._renderImageUploadLoadingView();var i=null;e===f.CAPTURE_AREA.ALL?i=this.getUI("allCaptureArea").get(0):e===f.CAPTURE_AREA.CALENDAR?i=this.getUI("calendarCaptureArea").get(0):e===f.CAPTURE_AREA.GRAPH&&(i=this.getChildView("monthlyStatusRegion").$el.get(0)),this._toggleCaptureUIState(!1,e);var s={width:i.offsetWidth,height:i.offsetHeight,useCORS:!0,logging:!1,scale:1,scrollX:0,scrollY:0};_(i,s).then(t.bind((function(t){this._toggleCaptureUIState(!0,e);var i=t.toDataURL("image/jpeg",1);n?this._saveAsImageFile(i,e):this._uploadImageAndMoveToWrite(i)}),this))},_toggleCaptureUIState:function(e,t){this.getUI("btnShareStatus").toggle(e),this.getChildView("calendarRegion").toggleCaptureExcludeUI(e),this.getChildView("monthlyStatusRegion").toggleCaptureExcludeUI(e),this.getUI("textEllipsis").toggleClass("ellipsis",!e),this.getUI("textEllipsis2").toggleClass("-ellipsis",!e),t===f.CAPTURE_AREA.ALL&&this.getUI("missionCalDescWrap").toggle(e)},_saveAsImageFile:function(e,n){var i=n===f.CAPTURE_AREA.CALENDAR?IM("band_mission.screen_capture_select.calendar"):IM("band_mission.screen_capture_select.graph"),a=A.format.date(s(),"short_noweekday").replace(/[^0-9]/g,""),o=[this._bandData.getBandCore().name,i,a].join("_");v.saveAs(e,o,"jpg").then(t.bind((function(){this._renderImageUploadLoadingView(!0)}),this))},_uploadImageAndMoveToWrite:function(e){b.uploadDataUriImage(e).then(t.bind((function(e){u.getPostChannel().trigger(u.EVENT.NEW_POST_WITH_SHARE_MISSION_CONFIRM_RANK,{bandData:this._bandData,photoInfo:e}),this._renderImageUploadLoadingView(!0)}),this),t.bind((function(){alert(IM("ui.alert.temporary_error")),this._renderImageUploadLoadingView(!0)}),this))}});function y(e,t){return new E({viewType:e,model:t,bandMissionConfirmSummaryModel:t.getBandMissionConfirmSummaryModel()})}return E.buildDBandMissionConfirmSummaryView=function(e){return y(C,e)},E.buildLayerTypeDBandMissionConfirmSummaryView=function(e){return y(I,e)},E}.call(t,n,t,e))||(e.exports=i)},2114:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3504),a=n(739),o="NORMAL",l="BOTTOM_LINE",r="LAYER",d=i.View.extend({tagName:"div",className:function(){switch(this.options.viewType){case l:return"missionTitleWrap -bLine gPat19 gPab22 gPal22 gPar22";case r:return"missionTitleWrap gPat19 gPab19 gPal30 gPar30";default:return"missionTitleWrap gPat19 gPab0 gPal22 gPar22"}},attributes:{"data-viewname":"DBandMissionConfirmMissionView"},template:t.template(s),initialize:function(e){},serializeData:function(){return{title:this.model.getBandMissionTitle(),state:this._getState(),frequency:a.getBandMissionConfirmFrequencyText(this.model.getBandMissionConfirmFrequency()),duration:a.getBandMissionDurationText(this.model.getBandMissionDuration()),period:a.getBandMissionTimezonePeriodText(this.model.getBandMissionStartAt(),this.model.getBandMissionEndAt(),this.model.getBandMissionTimeZoneId(),!1),timezone:a.getBandMissionTimezoneNameText(this.model.getBandMissionTimeZoneId())}},_getState:function(){return this.model.isUpcomingMission()?{label:IM("band_mission.upcoming"),className:"-before"}:this.model.isOngoingMission()?{label:a.getDaysInProgressText(this.model),className:"-ing"}:null}});function c(e,t){return new d({viewType:e,model:t})}return d.buildDBandMissionConfirmMissionView=function(e){return c(o,e)},d.buildBottomLineTypeDBandMissionConfirmMissionView=function(e){return c(l,e)},d.buildLayerTypeDBandMissionConfirmMissionView=function(e){return c(r,e)},d}.call(t,n,t,e))||(e.exports=i)},2115:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3505),a=n(720),o=n(1057),l=n(1113),r=n(589),d=n(163),c=n(1033),h=n(154),u=n(26),p={MORE_OPTION_BUTTON_CLICKED:"bandMissionConfirmStatusMoreOptionButtonClicked",MEMBER_WITH_DRAWAL_UPDATE_MEMBER:"memberWithdrawal:updateMember"},m=t.View.extend({tagName:"span",className:function(){return this.options.isConfirmSummaryType?"etc gMat12":"etc gMat-10"},attributes:{"data-viewname":"DBandMissionMemberStatusMoreOptionsView"},template:i.template(s),ui:{btnMoreOption:"._btnMoreOption",btnShowProfile:"._btnShowProfile",btnShowJoinInfo:"._btnShowJoinInfo",btnOneOnOneChat:"._btnOneOnOneChat",btnBanMember:"._btnBanMember",moreLyMenu:"._moreLyMenu"},events:{click:function(){u.getDGlobalChannel().trigger(p.MORE_OPTION_BUTTON_CLICKED)},"click @ui.btnMoreOption":function(){return this._settingOptionMenu().then(i.bind((function(){u.getDGlobalChannel().trigger(p.MORE_OPTION_BUTTON_CLICKED,this.cid)}),this)),!1},"click @ui.btnShowProfile":function(e){e.preventDefault();var t=new d({name:this._memberProfileModel.getName(),profileImageUrl:this.model.getContentAuthorProfileImageUrl(),memberType:this.model.getMemberType()});r.openMemberProfileLayer(t,this.model.getUserNo(),this.model.getBandNo())},"click @ui.btnShowJoinInfo":function(e){e.preventDefault(),l.openDGroupBandJoinHistoryView({bandNo:this._memberProfileModel.getBandNo(),memberKey:this._memberProfileModel.getBandMemberProfileMemberKey(),name:this._memberProfileModel.getName(),createdAt:this._memberProfileModel.getCreatedAt()})},"click @ui.btnOneOnOneChat":function(e){e.preventDefault(),a.startChattingWithUsers([{userNo:this._memberProfileModel.getBandMemberProfileUserNo(),name:this._memberProfileModel.getName()}],this._memberProfileModel.getBandNo())},"click @ui.btnBanMember":function(e){e.preventDefault();var t=o.openLayer({bandData:this.options.bandData,userNo:this._memberProfileModel.getBandMemberProfileUserNo(),memberKey:this._memberProfileModel.getBandMemberProfileMemberKey(),isDeleted:this._memberProfileModel.isReallyNotMember()});this.listenTo(t,p.MEMBER_WITH_DRAWAL_UPDATE_MEMBER,i.bind((function(){this.trigger(p.MEMBER_WITH_DRAWAL_UPDATE_MEMBER)}),this))}},initialize:function(e){},onAttach:function(){this.listenTo(u.getDGlobalChannel(),u.EVENT.HTML_CLICK,(function(){this.hideLyMoreMenu()})),this.listenTo(u.getDGlobalChannel(),p.MORE_OPTION_BUTTON_CLICKED,(function(e){this.hideLyMoreMenu(e)}))},hideLyMoreMenu:function(e){e!==this.cid?this.getUI("moreLyMenu").hide():this.getUI("moreLyMenu").toggle()},_settingOptionMenu:function(){return this._memberProfileModel?$.Deferred().resolve():(this._memberProfileModel=c.createEmptyBandMemberProfileModel(this.model.getBandNo(),this.model.getUserNo()),h.wrapActivePromise(this._memberProfileModel.fetchBandMember(),this).then(i.bind((function(){this._memberProfileModel.canViewJoinInfo()||this.getUI("btnShowJoinInfo").parent().remove(),this._memberProfileModel.canSendMessage()||this.getUI("btnOneOnOneChat").parent().remove(),this._memberProfileModel.canBanMember()?this._memberProfileModel.canBanMember()&&this._memberProfileModel.isReallyNotMember()&&this.getUI("btnBanMember").text(IM("profile_layer.label.block_join")):this.getUI("btnBanMember").parent().remove()}),this)))}});return m.EVENT=p,m.build=function(e,t){return new m({model:e,bandData:t})},m.buildConfirmSummaryTypeDBandMissionMemberStatusMoreOptionsView=function(e,t){return new m({model:e,isConfirmSummaryType:!0,bandData:t})},m}.call(t,n,t,e))||(e.exports=i)},2116:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3514),a=n(1981),o=n(26),l=t.CollectionView.extend({attributes:{"data-viewname":"DBandMissionMembersStatusListView"},tagName:"ul",className:function(){return this.isEmpty()?"":"listLine"},childView:s,childViewOptions:function(){return{missionId:this.collection.getMissionId(),bandData:this.collection.getBandData(),renderType:this._renderType}},childViewEvents:function(){var e={};return e[s.EVENT.MEMBER_WITH_DRAWAL_UPDATE_MEMBER]=function(e){this.collection.removeBandMember(e)},e},collectionEvents:function(){var e={};return e[a.SEARCH_EVENT.UPDATE_SEARCH_RESULT]=this._toggleSearchResultView,e.reset=function(){this.$el.toggleClass("listLine",!this.isEmpty())},e},emptyView:function(){return this._hideSearchNoneView(),this.collection.isLoading()?t.View.extend({tagName:"p",className:"uLoading",template:i.template('<img src="<%- resBaseUrl %>/images/common/loading.gif" width="32" height="32" alt="loading">')}):t.View.extend({attributes:{style:"height:545px"},tagName:"li",className:"uEmpty",template:i.template('<span class="gColorGr3"><%- IM("ui.message.empty_conents") %></span>')})},initialize:function(e){this._renderType=e.renderType||s.RENDER_TYPE.NORMAL},onAttach:function(){this._startListeningRemoveBanMemberEvent()},_toggleSearchResultView:function(){this.collection.getSearchResult()!==a.SEARCH_EVENT.RESULT_TYPE.NONE?this._hideSearchNoneView():this._showSearchNoneView()},_hideSearchNoneView:function(){this.$el.prev(".uEmpty").length&&this.$el.prev(".uEmpty").hide()},_showSearchNoneView:function(){if(this.$el.prev(".uEmpty").length)this.$el.prev(".uEmpty").show();else{var e=i.template('<p class="uEmpty" style="height:545px"><span class="gColorGr3"><%- IM("ui.message.no_search_result") %></span></p>');this.$el.before(e)}},_startListeningRemoveBanMemberEvent:function(){this.listenTo(o.getDGlobalChannel(),o.EVENT.MEMBER_REMOVED,i.bind((function(e,t){if(e===this.collection.getBandNo()){var n=this.collection.find((function(e){return e.getUserNo()===t}));this.collection.removeBandMember(n)}}),this))}});return l.RENDER_TYPE=s.RENDER_TYPE,l}.call(t,n,t,e))||(e.exports=i)},2117:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(3540),o=n(555),l="DEFAULT_VIEW",r="FOLDER_INNER_VIEW",d=s.View.extend({tagName:"div",className:function(){switch(this.options.viewType){case r:return"uInputSearch gMab20";default:return"uInputSearch gMat20 gMab20"}},attributes:{"data-viewname":"DBandAttachmentFileSearchInputView"},template:t.template(a),ui:{queryInput:"._queryInput",searchBtn:"._searchBtn"},events:{"keyup @ui.queryInput":function(e){e.keyCode===o.ENTER&&this._search()},"input @ui.queryInput":function(){this._query&&!this.ui.queryInput.val()&&this._search()},"click @ui.searchBtn":function(){this._search()}},initialize:function(e){this._viewType=e.viewType},serializeData:function(){return{viewId:this.cid,placeholder:this._getPlaceholder()}},_getPlaceholder:function(){switch(this.options.viewType){case r:return IM("web.bandfile.filesearch.input_message");default:return IM("file.file_folder_search_placeholder")}},_search:function(){this._query=i.trim(this.ui.queryInput.val()),this.trigger("search",this._query)}});return d.buildFileSearchInputView=function(){return new d({viewType:l})},d.buildFolderFileSearchInputView=function(){return new d({viewType:r})},d}.call(t,n,t,e))||(e.exports=i)},2118:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(3545),o=s.View.extend({tagName:"div",className:"statusBox",attributes:{"data-viewname":"DBandAttachmentFileSearchCountView"},template:t.template(a),initialize:function(e){this._folderCount=e.folderCount,this._fileCount=e.fileCount},serializeData:function(){return{folderCount:t.isFinite(this._folderCount)?i.numberFormat(this._folderCount):null,fileCount:t.isFinite(this._fileCount)?i.numberFormat(this._fileCount):null}}});return o.buildFileSearchCountView=function(e){return new o(e)},o}.call(t,n,t,e))||(e.exports=i)},3340:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(2),a=n(16),o=n(3341),l=n(153),r=n(491),d=n(3342),c=n(1170),h=n(1790),u=n(1854),p=n(1858),m=n(1861),_=n(1870),b=n(1873),g=n(1879),f=n(937),v=n(3359),A=n(3394),M=n(1888),C=n(3414),I=n(1892),E=n(3418),y=n(1898),T=n(1902),N=n(3425),D=n(3435),S=n(3437),w=n(3441),B=n(3443),L=n(1917),P=n(3445),O=n(3447),R=n(3456),x=n(1928),k=n(1104),V=n(3461),U=n(1939),F=n(3466),G=n(3470),W=n(1274),z=n(26),H=n(3476),Y=n(512),K=n(1958),j=n(3478),J=n(167),Q=n(166),q=n(13),Z=n(1965),X=n(572),$=n(53),ee=n(1144),te=n(798),ne=n(1967),ie=n(486),se=n(1076),ae=n(495),oe=n(2109),le=n(1539),re=n(1969),de=n(3488),ce=n(1977),he=n(22),ue=(n(2111),n(3494)),pe=n(3499),me=n(3520),_e=n(3522),be=n(3525),ge=n(3527),fe=n(3529),ve=n(3534),Ae=n(3560),Me=n(1599),Ce=n(3568),Ie=n(3569),Ee=n(1125),ye=n(553),Te=n(3575);return i.View.extend({attributes:{"data-viewname":"DBandMainLayoutView",id:"container"},template:t.template(o),behaviors:[{behaviorClass:c},{behaviorClass:ae,sceneId:ae.SCENE.BAND_COMMON}],ui:{lnbRegion:"#lnb",leftSection:"#info",mainSection:"#content",summaryRegion:"#banner"},regions:{lnbRegion:"@ui.lnbRegion",bandCoverRegion:"@ui.leftSection",contentRegion:"@ui.mainSection",summaryRegion:"@ui.summaryRegion"},childViewEvents:{"DBandMainLayoutView:startBandJoin":function(){this._startBandJoin()}},initialize:function(){this._currentBandData=null,this._body=s("body"),this.$win=s(window)},_scrollLeftTop:function(){window.scrollTo(0,0),this.$win.trigger("scroll")},clearPageLayoutContent:function(){this.getRegion("contentRegion").empty()},renderPageLayout:function(e,n,i){var s=this._currentBandData?this._currentBandData.getBandCore().bandNo:null,o=n.band_no;s!=o&&this._emptyAllRegion(),s&&this.stopListening(z.getBandChannel(s)),r.getCachedBandData(o).then(t.bind((function(s){var o=s.getBandCore().bandNo;if(this._currentBandData=s,this.$el.addClass("topMargin"),this.$el.toggleClass("topBarVisible",s.isNormal()),this._body.toggleClass("bandTypePreview",s.isNotNormal()),q.isLogedIn()&&s.isGuide()){var l=q.getUserData().getUserNo();J.getCurrentUserEnvStorage().set([Q.BandGuideAccessTime,l],a().format("x"))}if(s.isBlockedBand())this._renderBlockedBand(e,n,i,s);else{k.setSkinColorToBody(s.getBandCore().getSkinColorClass());var r=this.getRegion("contentRegion");r.currentView&&r.currentView.$el.hide(),Y.pauseDetection(),window.scrollTo(0,0),Y.resumeDetection(),this.listenTo(z.getBandChannel(o),z.EVENT.START_BAND_JOIN,this._startBandJoin),this.listenTo(z.getBandChannel(o),z.EVENT.OPEN_LAYER_CONTENT,this._openLayerContent),this._renderView(e,n,i,s).then(t.bind((function(){this._isCurrentRoute(n)&&(s.isNormal()?(this.ui.lnbRegion.show(),this.getChildView("lnbRegion")&&this.getChildView("lnbRegion").checkSameBand(s)||this.showChildView("lnbRegion",H.buildDDLnbMenuView(s,e)),this.getChildView("lnbRegion").renderLnbMenu(e)):this.ui.lnbRegion.hide(),this.getChildView("bandCoverRegion")||this.showChildView("bandCoverRegion",V.buildDBandCoverItemView()),this.getChildView("bandCoverRegion").renderDBandCoverView(s),this.getChildView("summaryRegion")||this.showChildView("summaryRegion",d.buildDBandSummaryItemView(s)),this._scrollLeftTop())}),this))}}),this))},_emptyAllRegion:function(){this.getRegion("lnbRegion").empty(),this.getRegion("bandCoverRegion").empty(),this.getRegion("summaryRegion").empty(),this.getRegion("contentRegion").empty()},_renderView:function(e,n,i,a){var o=this.getRegion("contentRegion");if(e.getViolatedAccessPermissionType(n,i,a))return o.show(new Te),s.when();var r=a.getBandCore(),d=r.bandNo,c=q.isLogedIn()?null:i.token;switch(e){case l.GROUP_BAND_POST_DETAIL:case l.GROUP_BAND_POST_DETAIL_COMMENT:case l.GROUP_BAND_POST_DETAIL_COMMENT_REPLY:return a.touchContentAccess(),a.isCardView()&&!c?(this._renderBandHome(a,e,n,i),s.when()):g.buildPostDetailWebPageView(a,d,n.post_no,n.comment_id,n.comment_reply_id,c,i).then(t.bind((function(e){this._isCurrentRoute(n)&&o.show(e)}),this));case l.GROUP_BAND_MEDIA_DETAIL:case l.GROUP_BAND_MEDIA_DETAIL_COMMENT:case l.GROUP_BAND_MEDIA_DETAIL_COMMENT_REPLY:case l.GROUP_BAND_POST_CREATE:case l.GROUP_BAND_REVERIFY_EMAIL:case l.GROUP_BAND_HOME:case l.GROUP_BAND_LIVE:a.touchContentAccess(he.CONTENT_TYPE.POST),this._renderBandHome(a,e,n,i);break;case l.GROUP_BAND_CALENDAR:a.touchContentAccess(he.CONTENT_TYPE.SCHEDULE),o.show(v.buildDCalendarView(a,i.currentDate));break;case l.GROUP_BAND_SCHEDULE:case l.GROUP_BAND_SCHEDULE_COMMENT:case l.GROUP_BAND_SCHEDULE_COMMENT_REPLY:var h={bandNo:a.getBandNo(),scheduleId:n.schedule_id,initCommentId:n.comment_id,initCommentReplyId:n.comment_reply_id,scrollTo:i.scrollTo,token:c};o.show(f.buildScheduleDetailView(h));break;case l.GROUP_BAND_PERIOD_SEARCH:o.show(new p.buildDBandBoardPeriodSearchLayoutView(a));break;case l.GROUP_BAND_HASHTAG:if(!a.canAccessPost()){ye.latestContents(a.getBandCore()).go();break}o.show(_.buildDBandBoardHashtagPostsView(a,n.query));break;case l.GROUP_BAND_POPULAR:if(!a.canAccessPopularPost()){ye.latestContents(a.getBandCore()).go();break}o.show(_.buildDBandBoardPopularPostsView(a));break;case l.GROUP_BAND_SCHEDULE_ATTACHED_POST:o.show(_e.buildDScheduleAttachedPostLayoutView(a,n.schedule_id));break;case l.GROUP_BAND_SEARCH:o.show(m.buildDBandBoardSearchLayoutView(a,n.query));break;case l.GROUP_BAND_NOTICES:o.show(u.buildDBandNoticeListView(a));break;case l.GROUP_BAND_SETTING:z.getDGlobalChannel().trigger(z.EVENT.LNB_NEW_MARK_REFRESH),o.show(A.build(a));break;case l.GROUP_BAND_SETTING_BAND_TYPE:o.show(M.build(d));break;case l.GROUP_BAND_SETTING_QUOTA_UNFIXED:o.show(C.build(d));break;case l.GROUP_BAND_SETTING_JOIN_CONDITION:o.show(I.build(r));break;case l.GROUP_BAND_SETTING_CHATTING:o.show(E.buildBandChattingItemView(d));break;case l.GROUP_BAND_SETTING_SCHEDULE:o.show(N.buildBandScheduleItemView(d));break;case l.GROUP_BAND_SETTING_EXPORT_CALENDAR:o.show(D.build(d));break;case l.GROUP_BAND_SETTING_HOLIDAY:o.show(S.buildHolidayScheduleItemView(d));break;case l.GROUP_BAND_SETTING_MEMBER_PERMISSION:o.show(w.buildBandMemberPermissionView(d));break;case l.GROUP_BAND_SETTING_MANAGE_COLEADER:o.show(B.build(a));break;case l.GROUP_BAND_SETTING_MEMBER_ACTIVITY_HISTORIES:o.show(ce.build(d));break;case l.GROUP_BAND_SETTING_MEMBER_WITHDRAWAL:o.show(L.buildBandMemberWithdrawalListView({bandNo:d,sortType:i.sortType}));break;case l.GROUP_BAND_SETTING_MANAGE_MEDIA:o.show(be.build(d));break;case l.GROUP_BAND_MEMBER:a.touchContentAccess(he.CONTENT_TYPE.APPLICATION),o.show(U.build(a.getBandNo(),i.sortType));break;case l.GROUP_BAND_APPLICATIONS:a.touchContentAccess(he.CONTENT_TYPE.APPLICATION),o.show(F.build(a));break;case l.GROUP_BAND_JOIN_QNAS:a.touchContentAccess(he.CONTENT_TYPE.APPLICATION),o.show(G.buildDGroupBandJoinMiniQnARoomLayoutView(a));break;case l.GROUP_BAND_MEMBER_INVITE:z.getDGlobalChannel().trigger(z.EVENT.LNB_NEW_MARK_REFRESH),o.show(W.buildDInvitationTypeView(a));break;case l.GROUP_BAND_ALBUM:a.touchContentAccess(he.CONTENT_TYPE.PHOTO),o.show(R.buildDDBandAlbumView(a));break;case l.GROUP_BAND_ALBUM_DETAIL:if(a.canJoin()){o.show(Me.buildGroupBandGuestView({bandNo:d}));break}a.touchContentAccess(),o.show(x.buildDBandAlbumDetailView(d,n.album_no));break;case l.GROUP_BAND_RESERVED_POST:o.show(K.buildDReservedPostLayoutView(a));break;case l.GROUP_BAND_SETTING_MEDIA_QUOTA:o.show(y.buildDBandQuotaSettingView(a));break;case l.GROUP_BAND_SETTING_MEDIA_QUOTA_STORAGE:o.show(T.buildDBandQuotaStorageView(a));break;case l.GROUP_BAND_CHATTING_ROOM:this._renderBandHome(a,e,n,i),this._startBandJoinForChattingRoom(a,i);break;case l.GROUP_BAND_INTRO:var k=le.build({bandData:a,isSummaryView:!1,showMoreOptionMenu:!0,jplSceneId:ae.SCENE.BAND_HOME});this.listenTo(k,"DBandMainLayoutView:startBandJoin",(function(){this._startBandJoin()})),this.listenTo(k,le.EVENT.MODIFY_INTRO,(function(){ye.settingBandIntro(a.getBandCore()).go()})),o.show(k);break;case l.GROUP_BAND_SETTING_INTRO:o.show(re.build(a));break;case l.GROUP_BAND_SETTING_LOCAL_BAND:o.show(de.buildDGroupBandLocalBandSettingView(a));break;case l.GROUP_BAND_MEMBER_CONTENT:return b.buildGroupBandMemberContentLayoutView({bandData:a,memberKey:n.member_key,type:n.type}).then(t.bind((function(e){this._isCurrentRoute(n)&&o.show(e)}),this),t.bind((function(){this._isCurrentRoute(n)&&l.GROUP_BAND_HOME.goDForced({band_no:d})}),this));case l.GROUP_BAND_POST_WRITING_SETTING:o.show(P.buildDGroupBandPostWriteSettingLayoutView(d));break;case l.GROUP_BAND_APPROVABLE_POST:case l.GROUP_BAND_MY_APPROVABLE_POST:o.show(j.buildDApprovablePostLayoutView(a));break;case l.GROUP_BAND_SETTING_MISSION:case l.GROUP_BAND_MISSION_ENDED:o.show(O.buildBandMissionView(d));break;case l.GROUP_BAND_MISSION:o.show(ue.build(a));break;case l.GROUP_BAND_MISSION_DETAIL:case l.GROUP_BAND_MISSION_MY_STATUS:case l.GROUP_BAND_MISSION_MEMBERS:case l.GROUP_BAND_MISSION_CONFIRM_POST:o.show(pe.build(a,n.mission_id));break;case l.GROUP_BAND_PARTICIPATED_MISSIONS:o.show(me.DBandMissionParticipatedListView(d));break;case l.GROUP_BAND_NOT_POSTED_LIVES:o.show(ge.buildNotPostedLiveListView(a));break;case l.GROUP_BAND_SETTING_DO_NOT_DISTURB:o.show(fe.buildDBandDoNotDisturbSettingView(a));break;case l.GROUP_BAND_ATTACHMENT:a.touchContentAccess(he.CONTENT_TYPE.FILE),o.show(ve.buildBandAttachmentLayoutView(a));break;case l.GROUP_BAND_ATTACHMENT_FILES:case l.GROUP_BAND_ATTACHMENT_FOLDER:if(a.canJoin()){o.show(Me.buildGroupBandGuestView({bandNo:d}));break}o.show(Ae.buildFolderLayoutView({bandData:a,folderId:n.folder_id}));break;case l.GROUP_BAND_MEMBER_GROUPS:Ie.buildAsyncMemberGroup({bandNo:d}).then((function(e){e?o.show(e):l.GROUP_BAND_MEMBER.goDForced({band_no:d})}));break;case l.GROUP_BAND_MEMBER_GROUPS_GROUP:Ie.buildAsyncMemberGroup({bandNo:d}).then((function(e){e?(o.show(e),Ee.buildAsyncLayerView(n.band_no,n.group_id)):l.GROUP_BAND_MEMBER.goDForced({band_no:d})}));break;default:l.GROUP_BAND_HOME.goDForced({band_no:d})}return s.when()},_renderBandHome:function(e,t,n,i){var s={};t!=l.GROUP_BAND_MEDIA_DETAIL&&t!=l.GROUP_BAND_MEDIA_DETAIL_COMMENT&&t!=l.GROUP_BAND_MEDIA_DETAIL_COMMENT_REPLY||(s={bandMediaInfo:{photoNo:n.photo_no,initCommentId:n.comment_id,initCommentReplyId:n.comment_reply_id,goPostSupport:i.goPostSupport,goAlbumSupport:i.goAlbumSupport}}),t==l.GROUP_BAND_POST_CREATE&&(s.writeLayerOpened=!0),this.getRegion("contentRegion").show(h.buildDBandBoardLayoutView({bandData:e,firstActOption:s,boardType:se.TYPE.GROUP_BAND_HOME}))},_renderBlockedBand:function(e,n,s,a){switch(k.resetSkin(),X.changePageTitle(ee.newRoute(e,n,s),{bandName:a.getBandCore().name}),this.ui.lnbRegion.hide(),this.getChildView("bandCoverRegion")||this.showChildView("bandCoverRegion",new i.View({tagName:"section",className:"infoInner",template:t.template('<span class="_child"></span>'),regions:{child:{el:"._child",replaceElement:!0}},onRender:function(){this.showChildView("child",oe.buildDGroupBandSideCoverView(a))},bandData:a})),e){case l.GROUP_BAND_SETTING_MEMBER_WITHDRAWAL:this.getRegion("contentRegion").show(L.buildBandMemberWithdrawalListView({bandNo:a.getBandNo(),isBlockedBand:!0}));break;default:this.getRegion("contentRegion").show(Z.buildDBandBoardBlockedView(a,l.GROUP_BAND_SETTING_MEMBER_WITHDRAWAL.makeUrl({band_no:a.getBandCore().bandNo})))}},_startBandJoinForChattingRoom:function(e,t){if(e&&!e.isUserJoinApplied()&&!e.canAccessChatMessage())if("join"!==t.step){var n=ne.buildAsLayer({bandData:e,message:IM("chat.message.members_only")});this.listenToOnce(n,"modal:confirm",(function(){this._startBandJoin()}))}else this._startBandJoin()},_startBandJoin:function(e){var t=this._currentBandData,n=t.getBandCore().bandNo,i={onBandJoinCompleted:function(e){e&&alert(e),t.resetBandDataState(),z.getDGlobalChannel().trigger(z.EVENT.REFRESH_CURRENT_ROUTE_INFO)},onRefreshPage:function(e){e&&alert(e),ie.closeAll(),t.resetBandDataState(),t.loadBandData()}};return e&&(i.nextUrlAfterLogin=e),te.build(i).startJoinFromBand(n),!1},_isCurrentRoute:function(e){return e==$.getCurrentRouteInfo().pathVariables},_openLayerContent:function(e){Ce.openContentLayer({bandNo:this._currentBandData.getBandCore().bandNo,contentKey:e.contentKey,openerView:e.openerView})}})}.call(t,n,t,e))||(e.exports=i)},3341:function(e,t){e.exports='<% // lnb영역 %>\n<nav id="lnb" class="sf_bg" role="navigation"></nav>\n\n<% // 왼쪽 영역 %>\n<aside id="info"></aside>\n\n<% // 컨텐츠 영역 %>\n<main id="content" role="main" class="midContent" data-uiselector="contentRegion"></main>\n\n<% // 오른쪽 영역 %>\n<aside id="banner"></aside>'},3342:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3343),a=n(26),o=n(3344),l=n(3347),r=n(3349),d=n(1788),c=n(3351),h=n(3354),u=n(1105),p=i.View.extend({attributes:{"data-viewname":"DBandSummaryItemView",id:"bannerInner"},className:"bannerInner",template:t.template(s),behaviors:[{behaviorClass:u}],ui:{upcomingSchedulesRegion:"._upcomingSchedulesRegion",bandChannelsRegion:"._bandChannelsRegion",bandFilesRegion:"._bandFilesRegion",bandPhotosRegion:"._bandPhotosRegion",connectedPageSummaryRegion:"._connectedPageSummaryRegion",locationSharingMemberRegion:"._locationSharingMemberRegion"},regions:{bandChannelsRegion:{el:"@ui.bandChannelsRegion",replaceElement:!0},upcomingSchedulesRegion:{el:"@ui.upcomingSchedulesRegion",replaceElement:!0},bandFilesRegion:{el:"@ui.bandFilesRegion",replaceElement:!0},bandPhotosRegion:{el:"@ui.bandPhotosRegion",replaceElemnt:!0},connectedPageSummaryRegion:{el:"@ui.connectedPageSummaryRegion",replaceElement:!0},locationSharingMemberRegion:{el:"@ui.locationSharingMemberRegion",replacement:!0}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._fnDebouncedRenderFiles=t.debounce(this._renderFiles,100),this.listenTo(a.getPostChannel(),a.EVENT.POST_DELETED,this._renderPostContainableContent),this.listenTo(a.getPostChannel(),a.EVENT.POST_UPDATED,this._renderPostContainableContent),this.listenTo(a.getPostChannel(),a.EVENT.POST_ADDED,this._renderPostContainableContent),this.listenTo(a.getAlbumChannel(),a.EVENT.ALBUM_PHOTO_DELETED,this._renderPhotos),this.listenTo(a.getAlbumChannel(),a.EVENT.ALBUM_PHOTO_ADDED,this._renderPhotos),this.listenTo(a.getCommentChannel(),a.EVENT.BAND_FILE_UPDATED,this._renderFiles),this.listenTo(a.getDGlobalChannel(),a.EVENT.CHAT_SETTINGS_CHANGED,this._renderChannels),this.listenTo(a.getBandChannel(this._bandNo),a.EVENT.BAND_FILE_UPDATED,this._renderFiles),this.listenTo(a.getDGlobalChannel(),a.EVENT.SCHEDULE_UPDATED,this._fnDebouncedRenderFiles),this.listenTo(a.getDGlobalChannel(),a.EVENT.SCHEDULE_DELETED,this._fnDebouncedRenderFiles)},onRender:function(){this._showUpcomingSchedule(),this._renderPostContainableContent(),this._renderChannels(),this._showConnectedPageSummaryView(),this._renderLocationSharingMember()},_renderChannels:function(){var e=this.getRegion("bandChannelsRegion");this._bandData.canChatInGroup()?e.show(o.buildDBandChattingChannelListView(this._bandData)):e.empty()},_renderPostContainableContent:function(){this._fnDebouncedRenderFiles(),this._renderPhotos()},_renderFiles:function(){this._bandData.isNormal()&&this.showChildView("bandFilesRegion",r.buildDBandSummaryFileListView(this._bandData))},_renderPhotos:function(){this._bandData.isNormal()&&this.showChildView("bandPhotosRegion",d.buildDBandSummaryPhotoListView(this._bandData.getBandCore()))},_showUpcomingSchedule:function(){l.show(this.getRegion("upcomingSchedulesRegion"),this._bandData)},_showConnectedPageSummaryView:function(){c.show(this.getRegion("connectedPageSummaryRegion"),this._bandData)},_renderLocationSharingMember:function(){if(this._bandData.canShowLocationSharingMembers()){var e=h.build(this._bandData.getBandNo());this.getRegion("locationSharingMemberRegion").show(e)}}});return p.buildDBandSummaryItemView=function(e){return new p({bandData:e})},p}.call(t,n,t,e))||(e.exports=i)},3343:function(e,t){e.exports='<div class="_locationSharingMemberRegion"></div>\n<div class="_upcomingSchedulesRegion"></div>\n<div class="_bandChannelsRegion"></div>\n<div class="_connectedPageSummaryRegion"></div>\n<div class="_bandFilesRegion"></div>\n<div class="_bandPhotosRegion"></div>\n'},3344:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(3345),o=n(3346),l=n(564),r=n(720),d=n(26),c=n(499),h=n(1027),u=n(2073),p=n(1178),m=n(154),_=n(1743),b=n(590),g=s.View.extend({tagName:"li",template:c.template(a),ui:{chatLink:"._chatLink"},events:{"click @ui.chatLink":function(e){e.preventDefault(),r.open(this.model.getChatChannelBandNo(),this.model.getChatChannelId())}},initialize:function(e){this._bandData=e.bandData},templateContext:function(){return{image:h.getUrl(this.model),name:this.model.getChannelName(),message:this.model.getChatChannelDisplayMessage()}},onRender:function(){this.$el.toggleClass("pinned",this.model.isPinnedChatChannel())}}),f=s.CollectionView.extend({tagName:"ul",className:"chat",childView:g,childViewOptions:function(){return{bandData:this._bandData}},behaviors:[{behaviorClass:_}],initialize:function(e){this._bandData=e.bandData}}),v={NEW_PRIVATE:"new_private",NEW_PUBLIC:"new_public"},A=s.View.extend({tagName:"section",className:"chatting gBoxShadow",attributes:{"data-viewname":"DBandChattingChannelListView"},template:t.template(o),ui:{newChatBtn:"._newChatBtn",menuWrap:"._menuWrap",menuLink:"._menuLink",scrollWrap:"._scrollWrap",channels:"._channels",emptyWrap:"._emptyWrap",btnSelectOption:"._btnSelectOption",groupCallOptionLayer:"._groupCallOptionLayer",btnVoiceCall:"._btnVoiceCall",btnVideoCall:"._btnVideoCall"},regions:{channels:{el:"@ui.channels",replaceElement:!0}},events:{"click @ui.newChatBtn":function(){this.ui.menuWrap.is(":hidden")&&t.defer(t.bind(this._openMenu,this))},"click @ui.menuLink":function(e){e.preventDefault(),this._handleMenu(i(e.currentTarget).data("menu"))},"update @ui.scrollWrap":"_renderNextChannels","click @ui.btnSelectOption":function(){b.isContentCreationPunished()||this.getUI("groupCallOptionLayer").is(":hidden")&&t.defer(t.bind((function(){this.getUI("groupCallOptionLayer").show()}),this))},"click @ui.btnVoiceCall":function(){u.startNewChatFromBandWithGroupCall(this._bandData,"voiceCall")},"click @ui.btnVideoCall":function(){u.startNewChatFromBandWithGroupCall(this._bandData,"videoCall")}},behaviors:[{behaviorClass:p}],initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._collection=l.build()},templateContext:function(){return{MENU:v,isCreatePublicChatEnabled:this._bandData.isCreatePublicChatEnabled(),isInviteChatEnabled:this._bandData.isInviteChatEnabled()}},onBeforeRender:function(){this.isAttached()&&this._destroyScroll()},onAttach:function(){this.listenTo(d.getDGlobalChannel(),d.EVENT.HTML_CLICK,this._closeAllLayers),this.listenTo(d.getDGlobalChannel(),d.EVENT.DBAND_LEAVED,this.destroy),this.listenTo(d.getDGlobalChannel(),d.EVENT.CHAT_ROOM_LIST_UPDATED,this._fetchChannels),this._fetchChannels()},onBeforeDetach:function(){this.stopListening(d.getDGlobalChannel())},onDomRefresh:function(){this._renderChannels()},_renderChannels:function(){this._channelListView=new f({collection:this._collection,bandData:this._bandData}),this.showChildView("channels",this._channelListView),this._initScroll()},_openMenu:function(){this._bandData.canChatInGroup()&&(this._bandData.isCreatePublicChatEnabled()&&this._bandData.isInviteChatEnabled()?this.ui.menuWrap.css("display",""):this._bandData.isInviteChatEnabled()?this._handleMenu(v.NEW_PRIVATE):this._bandData.isCreatePublicChatEnabled()?this._handleMenu(v.NEW_PUBLIC):alert(IM("web.chatting.not_allowed_by_leader")))},_handleMenu:function(e){switch(e){case v.NEW_PRIVATE:u.startNewChatFromBand(this._bandNo);break;case v.NEW_PUBLIC:u.startNewPublicChatFromBand(this._bandNo,t.bind(this._fetchChannels,this))}},_fetchChannels:function(){return m.wrapActivePromise(this._collection.fetchBandChattingChannels(this._bandNo),this).then(t.bind((function(){var e=this._channelListView.collection,t=e.findWhere({loading:!0}),n=e.size();t||0==n?this._renderNextChannels():(e.set(this._collection.slice(0,Math.max(n,15)),{add:!0,merge:!0,remove:!0}),this._initScroll())}),this))},_renderNextChannels:function(e,t){this._channelListView.triggerMethod("loadNext",e,t),this._initScroll()},_initScroll:function(){var e=this._channelListView.collection.size();0==e?(this.ui.emptyWrap.css("display",""),this.ui.scrollWrap.css("display","none")):(this.ui.emptyWrap.css("display","none"),this.ui.scrollWrap.css("display","").toggleClass("heightAuto",e<6)),this.triggerMethod("customScroll:init")},_destroyScroll:function(){this.triggerMethod("customScroll:destroy")},_closeAllLayers:function(){this.ui.menuWrap.css("display","none"),this.getUI("groupCallOptionLayer").hide()}});return A.buildDBandChattingChannelListView=function(e){return new A({bandData:e})},A}.call(t,n,t,e))||(e.exports=i)},3345:function(e,t){e.exports='<a href="#" class="_chatLink">\n    <span class="thum"><img src="<%- image %>" width="30" height="30" alt=""></span>\n    <span class="cont">\n        <strong class="text"><%- name %></strong>\n        <span class="sub"><%- message %></span>\n    </span>\n</a>\n'},3346:function(e,t){e.exports='<h2 class="tit"><%- IM(\'web.chatting.title\') %></h2>\n\n<div class="newChatWrap">\n    <button type="button" class="newChat sf_color _newChatBtn"><%- IM(\'web.chatting.btn.new_chatting\') %></button>\n    <div class="lyMenu _menuWrap" style="min-width:145px;display:none;">\n        <ul>\n            <% if(isInviteChatEnabled) { %>\n            <li><a href="#" role="button" class="_menuLink" data-menu="<%- MENU.NEW_PRIVATE %>"><%- IM(\'chat.create_private_chat_room\') %></a></li>\n            <% } %>\n            <% if(isCreatePublicChatEnabled) { %>\n            <li><a href="#" role="button" class="_menuLink" data-menu="<%- MENU.NEW_PUBLIC %>"><%- IM(\'chat.create_public_chat_room\') %></a></li>\n            <% } %>\n        </ul>\n    </div>\n</div>\n\n<div class="body">\n    <div class="groupCallWrap">\n        <button class="btnSelectOption _btnSelectOption"><%- IM(\'band.chat_with_group_call\') %></button>\n        <div class="groupCallOptionLayer _groupCallOptionLayer" style="display: none;">\n            <button class="btnGroupCall _btnVoiceCall"><%- IM(\'group_call.voice_call\') %></button>\n            <button class="btnGroupCall _btnVideoCall"><%- IM(\'group_call.video_call\') %></button>\n        </div>\n    </div>\n    <div class="nano maxHeight has-scrollbar _scrollWrap">\n        <div class="nano-content">\n            <div class="_channels"></div>\n        </div>\n    </div>\n    <div class="nodata _emptyWrap" style="display:none;">\n        <p><%= IM(\'web.chat.channel.empty\') /* 태그 있음 */ %></p>\n    </div>\n</div>\n\n'},3347:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(4),s=n(0),a=n(16),o=n(503),l=n(153),r=n(526),d=n(3348),c=n(653),h=n(26),u=n(52),p=n(511),m=t.Model.extend({defaults:{count:0,isCountless:!1,items:[]},parse:function(e){e=u.camelizeKeys(e);var t={};return t.count=e.count,t.isCountless=e.isCountless,t.items=e.items,t},fetchUpcomingSchedules:function(){var e={bandNo:this.get("bandNo")};return o.getUpcomingSchedules(e).then(s.bind((function(e){return this.set(this.parse(e)),this}),this))}}),_=i.View.extend({tagName:"section",className:"calendar",attributes:{"data-viewname":"DUpcomingSchedulesView"},template:s.template(d),modelEvents:{change:"render"},initialize:function(e){this._fnDebouncedRefreshContents=s.debounce(this._refreshContents,100),this.listenTo(h.getPostChannel(),h.EVENT.POST_DELETED,this._refreshContents),this.listenTo(h.getPostChannel(),h.EVENT.POST_UPDATED,this._fnDebouncedRefreshContents),this.listenTo(h.getPostChannel(),h.EVENT.POST_ADDED,this._refreshContents),this.listenTo(h.getDGlobalChannel(),h.EVENT.SCHEDULE_UPDATED,this._fnDebouncedRefreshContents),this.listenTo(h.getDGlobalChannel(),h.EVENT.SCHEDULE_DELETED,this._fnDebouncedRefreshContents)},serializeData:function(){var e=this.model.get("bandNo"),t=s.map(this.model.get("items"),(function(t){var n=a(t.startAt),i=null;t.location&&(i={locationName:t.location.name||t.location.address});var o=null;if(t.rsvp&&(o={attendeeCount:t.rsvp.attendeeCount,absenteeCount:t.rsvp.absenteeCount,maybeCount:t.rsvp.maybeCount,pendingAttendeeCount:t.rsvp.pendingAttendeeCount,isRsvpState:t.rsvp.viewerRsvpState,isMaybeEnabled:t.rsvp.isMaybeEnabled},!s.isEmpty(t.rsvp.customStates))){var d=0;t.rsvp.customStates.forEach((function(e){e.count&&(d+=e.count)})),o.customState={count:d,title:p.getRsvpStateText(p.CUSTOM)}}return{scheduleName:t.name,month:n.format("MMM"),day:n.format("DD"),dateTimeDetail:c.upcomingMessage(t.startAt,t.endAt,t.isAllDay),isBirthdayType:t.scheduleType==r.BIRTHDAY,isBandOpen:t.scheduleType==r.BAND_OPEN,isHoliday:t.scheduleType==r.HOLIDAY,locationInfo:i,rsvpInfo:o,scheduleUrl:l.GROUP_BAND_SCHEDULE.makeUrl({band_no:e,schedule_id:t.scheduleId})}}));return{upcomingScheduleCount:this.model.get("count"),isCountless:this.model.get("isCountless"),upcomingSchedules:t,isConfigureSchedulePermitted:this.model.get("isConfigureSchedulePermitted"),bandCalendarUrl:l.GROUP_BAND_CALENDAR.makeUrl({band_no:e}),bandScheduleSettingUrl:l.GROUP_BAND_SETTING_SCHEDULE.makeUrl({band_no:e})}},onRender:function(){this.model.get("items").length>0?this.$el.show():this.$el.hide()},_refreshContents:function(){this.model.fetchUpcomingSchedules()}});return _.show=function(e,t){e&&t.isNormal()&&t.isSchedulePermitted()&&(e.hasView()&&e.empty(),new m({bandNo:t.getBandNo(),isConfigureSchedulePermitted:t.isConfigureSchedulePermitted()}).fetchUpcomingSchedules().then((function(t){e.show(new _({model:t}))})))},_}.call(t,n,t,e))||(e.exports=i)},3348:function(e,t){e.exports='<div class="calendar gBoxShadow">\n    <h2 class="tit">\n        <%= IM("schedule.coming_schedule") %>\n        <% if (isConfigureSchedulePermitted) { %>\n        <a href="<%- bandScheduleSettingUrl %>" class="setting"><span class="gSrOnly"><%= IM("web.more.menu.settings") %></span></a>\n        <% } %>\n    </h2>\n    <div class="body">\n        <ul>\n        <% _.each(upcomingSchedules, function(schedule) { %>\n            <li>\n                <a href="<%- schedule.scheduleUrl %>">\n                    <time class="date"><%- schedule.month %><span><%- schedule.day %></span></time>\n                    <div class="cont">\n                        <strong class="text"><%- schedule.scheduleName %></strong>\n                        <span class="gEllipsis">\n                            <time class="sub"><%- schedule.dateTimeDetail %></time>\n                            <% if (schedule.locationInfo) { %>\n                            <span class="map"><%- schedule.locationInfo.locationName %></span>\n                            <% } %>\n                        </span>\n                    <%\n                        var message = "";\n\n                        if (schedule.isBirthday || schedule.isBandOpen) {\n                            message= IM("schedule.msg.recommend_post_celebration");\n                        } else if (schedule.isHoliday) {\n                            message = IM("schedule.holiday");\n                        }\n                    %>\n                        <span class="sub"><%= message %></span>\n\n                    <% if (schedule.rsvpInfo) { %>\n                        <span class="attendance">\n                            <em class="<% if(schedule.rsvpInfo.isRsvpState == \'ATTENDANCE\') { %>sf_color<% } %>"><%= IM("schedule.rsvp.attendance") %> <%- schedule.rsvpInfo.attendeeCount %></em>\n                         <% if (schedule.rsvpInfo.pendingAttendeeCount > 0) { %>\n                            <span class="<% if(schedule.rsvpInfo.isRsvpState == \'PENDING_ATTENDANCE\') { %>sf_color<% } %>"><%= IM("schedule.rsvp.pending_attendee") %> <%- schedule.rsvpInfo.pendingAttendeeCount %></span>\n                         <% } %>\n                            <span class="<% if(schedule.rsvpInfo.isRsvpState == \'ABSENCE\') { %>sf_color<% } %>"><%= IM("schedule.rsvp.absentee") %> <%- schedule.rsvpInfo.absenteeCount %></span>\n                        <% if (schedule.rsvpInfo.isMaybeEnabled) { %>\n                            <span class="<% if(schedule.rsvpInfo.isRsvpState == \'MAYBE\') { %>sf_color<% } %>"><%= IM("schedule.rsvp.maybe") %> <%- schedule.rsvpInfo.maybeCount %></span>\n                        <% } %>\n                        <% if (schedule.rsvpInfo.customState) { %>\n                            <span class="<% if(schedule.rsvpInfo.isRsvpState == \'CUSTOM\') { %>sf_color<% } %>"><%= schedule.rsvpInfo.customState.title %> <%= schedule.rsvpInfo.customState.count %></span>\n                        <% } %>\n                        </span>\n                    <% } %>\n                    </div>\n                </a>\n            </li>\n        <% }) %>\n        </ul>\n    </div>\n\n    <a href="<%- bandCalendarUrl %>" class="more">\n        <% if (isCountless) { %>\n        <%- upcomingScheduleCount %>+\n        <% } else { %>\n        <%- upcomingScheduleCount %>\n        <% } %>\n    </a>\n</div>'},3349:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3350),o=n(1007),l=n(156),r=n(153),d=n(1052),c=s.View.extend({tagName:"section",className:"files gBoxShadow",attributes:{"data-viewname":"DBandSummaryFileListView"},template:i.template(a),ui:{downloadLink:"._downloadLink",originLink:"._originLink"},events:{"click @ui.downloadLink":"_onClickDownloadLink","click @ui.originLink":"_onClickOriginLink"},collectionEvents:{fetched:"render"},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this.collection=o.build()},serializeData:function(){return{fileList:this._serializeFileList(),moreUrl:r.GROUP_BAND_ATTACHMENT.makeUrl({band_no:this._bandNo})}},onRender:function(){this.$el.toggle(!this.collection.isEmpty())},onAttach:function(){this.collection.fetchFiles({bandNo:this._bandNo,limit:2})},_serializeFileList:function(){return this.collection.map((function(e,t){var n=e.getFileName(),i=l.getFileType(e.getFileExtension(),e.getFileExpiresAt(),n),s=null,a=null,o=e.isRestrictedFile();return o?n=IM("file.restricted_file_name"):(s=d.getOriginUrl(this._bandData.getBandCore(),e),a=d.getOriginLabel(e)),{index:t,iconClass:"icon-file"+i+"-s",isRestricted:o,fileName:n,originUrl:s,originLabel:a}}),this)},_onClickDownloadLink:function(e){var n=this.collection.at(t(e.currentTarget).data("index"));e.preventDefault(),!this._downloading&&n&&(this._downloading=!0,d.downloadFile(this._bandNo,n).then(i.bind((function(){this._downloading=!1}),this)))},_onClickOriginLink:function(e){var n=this.collection.at(t(e.currentTarget).data("index"));e.preventDefault(),n&&d.openOriginContent(this._bandData.getBandCore(),n,this)}});return c.buildDBandSummaryFileListView=function(e){return new c({bandData:e})},c}.call(t,n,t,e))||(e.exports=i)},3350:function(e,t){e.exports='<h2 class="tit"><%- IM(\'file\') %></h2>\n<div class="body">\n    <ul class="fileList">\n        <% _.each(fileList, function(file) { %>\n        <li>\n            <span><a href="#" class="fileIcon <%- file.iconClass %> _downloadLink" data-index="<%- file.index %>"></a></span>\n            <span class="cont">\n                <a href="#" class="text <%- file.isRestricted ? \'-blockedFile\' : \'\' %> _downloadLink" title="<%- file.fileName %>" data-index="<%- file.index %>"><%- file.fileName %></a>\n                <% if (file.originUrl) { %>\n                <a href="<%- file.originUrl %>" class="sub _originLink" data-index="<%- file.index %>"><%- file.originLabel %></a>\n                <% } %>\n            </span>\n        </li>\n        <% }); %>\n    </ul>\n</div>\n<a href="<%- moreUrl %>" class="more"><%- IM(\'ui.label.more.short\') %></a>\n'},3351:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(0),s=n(52),a=n(6),o=n(4),l=n(3352),r=n(1531),d=n(162),c=n(159),h=n(26),u=n(181),p=n(82),m=n(798),_=n(3353),b=n(487),g=o.View.extend({attributes:{"data-viewname":"DConnectedPageSummaryItemView"},tagName:"li",className:"cCoverItem",template:i.template(_),templateContext:function(){var e=this.model.get("band").profileImage;return{profileImageThumbnail:!!e&&p.makeMediumSquareCoverUrl(e)||null,pageBandHomeUrl:d.PAGE_BAND_HOME.makeUrl({band_no:this.model.get("band").bandNo})}},behaviors:[b,r,c],ui:{subscribePageButton:"._subscribePageButton",unsubscribePageButton:"._unsubscribePageButton",imgCover:"._imgCover",pageBandLink:"._pageBandLink"},events:{"click @ui.subscribePageButton":function(){var e=this.model.get("band").bandNo;this.jplClick(b.CLASSIFIER.JOIN_PAGE,{band_no:e,container_classifier:b.CLASSIFIER.LINKED_PAGE},e),m.build({onBandJoinCompleted:i.bind((function(){this.spawn(c.MSG.CONNECTED_PAGE_LIST_CHANGED)}),this)}).startJoinFromBand(this.model.get("band").bandNo)},"click @ui.unsubscribePageButton":function(){var e=this.model.get("band").bandNo;this.leavePageBandWithoutConfirmAndPageMove(e).then(i.bind((function(){this.spawn(c.MSG.CONNECTED_PAGE_LIST_CHANGED)}),this))},"click @ui.pageBandLink":function(e){this.jplClick(b.CLASSIFIER.LINKED_PAGE,{band_no:this.model.get("band").bandNo})}},onDomRefresh:function(){this.getUI("imgCover").on("error",i.bind((function(e){$(e.currentTarget).remove()}),this))}}),f=o.View.extend({tagName:"section",className:"connectingPage gBoxShadow",attributes:{"data-viewname":"DConnectedPageSummaryView"},behaviors:[c],template:i.template(l),templateContext:function(){return{connectedPageBandCount:this._connectedPageBandCount}},ui:{btnConnectedPageHelp:"._btnConnectedPageHelp",connectedPageHelpPopover:"._connectedPageHelpPopover"},events:{"click @ui.btnConnectedPageHelp":function(e){e.stopPropagation(),"none"==this.getUI("connectedPageHelpPopover").css("display")?(this.getUI("connectedPageHelpPopover").show(),this.listenToOnce(h.getDGlobalChannel(),h.EVENT.HTML_CLICK,(function(){this.getUI("connectedPageHelpPopover").hide()}))):this.getUI("connectedPageHelpPopover").hide()},"click @ui.connectedPageHelpPopover":function(e){e.stopPropagation()}},onMessages:(t={},t[c.MSG.CONNECTED_PAGE_LIST_CHANGED]=function(){this._refreshConnectedPageBandListData()},t),regions:{connectedPageListRegion:{el:"._connectedPageListRegion",replaceElement:!0}},initialize:function(e){this._bandData=e.bandData,this._groupBandNo=this._bandData.getBandCore().bandNo,this._connectedPageBandCount=e.connectedPageBandCount;var t=a.Collection.extend({modelId:function(e){return e.band.bandNo}});this.collection=new t(!!e.collection&&e.collection.models||[]),this.listenTo(h.getBandConnectionChannel(),h.EVENT.BAND_CONNECTION_CONNECTED,this._refreshConnectedPageBandListData),this.listenTo(h.getBandConnectionChannel(),h.EVENT.BAND_CONNECTION_DISCONNECTED,this._refreshConnectedPageBandListData)},onRender:function(){this.showChildView("connectedPageListRegion",new o.CollectionView({tagName:"ul",className:"cCoverList pageBandCover",childView:g,collection:this.collection}))},_refreshConnectedPageBandListData:function(){u.getConnectedPageBandList(this._groupBandNo).then(i.bind((function(e){if(i.isEmpty(e))this.destroy();else{e=s.camelizeKeys(e),this._connectedPageBandCount=e.length;var t=i.first(e,3);this.collection.reset(t),this.render()}}),this))}});return f.show=function(e,t){if(e&&!e.hasView()&&t.canShowConnectedPageSummaryView()){var n=t.getBandCore().bandNo;u.getConnectedPageBandList(n).then((function(n){if(!i.isEmpty(n)){var o=(n=s.camelizeKeys(n)).length,l=i.first(n,3),r=new f({bandData:t,connectedPageBandCount:o,collection:new a.Collection(l,{modelId:function(e){return e.band.bandNo}})});e.show(r)}}))}},f}.call(t,n,t,e))||(e.exports=i)},3352:function(e,t){e.exports='<h2 class="tit"><%= IM(\'group_band.summary.connected_page.title\') %> <%= connectedPageBandCount ? connectedPageBandCount : \'\' %></h2>\n<div class="body">\n    <div class="_connectedPageListRegion"></div>\n</div>\n<dl class="uHelpGuide -small">\n    <dt><button type="button" class="_btnConnectedPageHelp"><span class="gSrOnly"><%= IM(\'ui.label.help\') %></span></button></dt>\n    <dd class="_connectedPageHelpPopover" style="display: none; width:233px">\n        <p class="dotGuideText"><%= IM(\'group_band.summary.connected_page.help.desc1\') %></p>\n    </dd>\n</dl>'},3353:function(e,t){e.exports='<div class="bandUri">\n    <div class="cover">\n        <div class="uCoverImage -w30 -border -circle">\n            <% if (!!profileImageThumbnail) { %>\n            <span class="coverInner"><img src="<%- profileImageThumbnail %>" class="coverImg _imgCover" alt="cover image"></span>\n            <% } else { %>\n            <span class="coverInner"></span>\n            <% } %>\n        </div>\n    </div>\n    <div class="bandName">\n        <div class="name">\n            <a href="<%= pageBandHomeUrl %>" class="text  -multiLine _pageBandLink" target="_blank">\n                <% if (band.certified) { %><span class="uOfficialBand -sizeS"><%= IM(\'ui.official_band\') %></span><% } %> <%- band.name %>\n            </a>\n        </div>\n        <% if (!member.isMember) { %>\n        <a href="#" role="button" class="moreBandTextLink -arrow _subscribePageButton"><%-IM("page_band.label.subscribe_long")%></a>\n        <% } else if(member.isMember) { %>\n        <a href="#" role="button" class="moreBandTextLink _unsubscribePageButton"><%- IM(\'pageband.band_setting.subscribe_page.item.release_subscription\') %></a>\n        <% } %>\n    </div>\n</div>\n<a href="<%= pageBandHomeUrl %>" class="bandLink _pageBandLink" target="_blank"><span class="gSrOnly">바로가기</span></a>\n'},3354:function(e,t,n){var i=n(0),s=n(4),a=n(6),o=n(2003),l=n(499),r=n(498),d=n(3355),c=a.Model.extend({initialize:function(e){this._bandNo=e},parse:function(e){var t={};t.totalCount=e.total_count;var n=[],i=e.items.length>1?2:e.items.length;if(e.items.length>0)for(var s=i;s>0;s--){var a={};a.name=e.items[i-s].location_sharing.name,a.imageUrl=e.items[i-s].location_sharing.image_url,n.push(a)}return t.sharingInfos=n,t},fetchLocationSharingMembers:function(){var e={band_no:this._bandNo,fields:"location_sharing.name,location_sharing.image_url"};return o.getLocationShaeringMembers(e).then(i.bind((function(e){return this.set(this.parse(e)),this}),this))}}),h=s.View.extend({attributes:{"data-viewname":"DLocationSharingMemberView"},tagName:"section",getTemplate:function(){return this._loaded?i.template(d):i.template(r)},ui:{appUsingAlertLink:"._appUsingAlertLink"},events:{"click @ui.appUsingAlertLink":function(){alert(IM("web.post.subpost.alert.not_supported_in_web"))}},initialize:function(e){this._loaded=!1,this._bandNo=e.bandNo},templateContext:function(){return this._loaded?{memberTotalCount:this.model.get("totalCount"),sharingInfos:this.model.get("sharingInfos")}:{_loading_size:l.Size.MEDIUM}},onRender:function(){if(this._loaded){var e=this.model.get("totalCount");this.$el.toggle(e>0)}},onAttach:function(){return new c(this._bandNo).fetchLocationSharingMembers().then(i.bind((function(e){this._loaded=!0,this.model=e,this.render()}),this))}});h.build=function(e){return new h({bandNo:e})},e.exports=h},3355:function(e,t){e.exports='<section class="location gBoxShadow">\n    <h2 class="tit"><%= IM("location.sharing.members.title") %></h2>\n    <div class="body">\n        <button class="btnAlertMessage _appUsingAlertLink"><span class="gSrOnly"><%- IM(\'location.sharing.members.guide.use_band_app\') %></span></button>\n        <ul class="locationList gMat-1">\n            <li class="locationItem">\n                <div class="contThum gMal-2">\n                <% _.each(sharingInfos, function(info) { %>\n                    <span class="thum"><img src="<%- info.imageUrl %>" width="30" height="30" alt="<%- info.name %>" class="thumImg"></span>\n                <% }); %>\n                </div>\n                <div class="contText">\n                    <span class="infoText"><%= IM("location.sharing.members.sharing_member_count", {sharingMemberCount: memberTotalCount}) %></span>\n                    <span class="desc"><%= IM("location.sharing.members.guide.use_band_app") %></span>\n                </div>\n            </li>\n        </ul>\n    </div>\n</section>'},3359:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(4),s=n(0),a=n(2),o=n(16),l=n(159),r=n(26),d=n(1219),c=n(3360),h=n(1258),u=n(2007),p=n(3362),m=n(590),_=n(3386),b=n(3390),g=n(937),f=n(153),v=n(3393),A=n(495),M=n(487),C=n(538),I=n(1003),E=n(154),y=n(499),T=n(488),N=n(498),D=n(1221),S=n(1549),w=i.View.extend({tagName:"section",className:"sCalendar",attributes:{"data-viewname":"DBandCalendarLayoutView","aria-live":"polite"},getTemplate:function(){return this._loading?s.template(N):s.template(v)},templateContext:function(){return this._loading?{_loading_size:y.Size.MEDIUM,middleClass:T.ELEMENT.SCREEN_VERTICAL_MIDDLE}:{}},behaviors:[{behaviorClass:A,sceneId:A.SCENE.BAND_SCHEDULE},{behaviorClass:M},l],onMessages:(t={},t[l.MSG.CALENDAR_CREATE_SCHEDULE]=function(e){this._openScheduleEditLayer(e.targetDate)},t),ui:{notificationRegion:"._notificationRegion",calendarHeaderRegion:"._calendarHeaderRegion",monthlyRegion:"._monthlyRegion",dailyRegion:"._dailyRegion"},regions:{notificationRegion:{el:"@ui.notificationRegion",replaceElement:!0},calendarHeaderRegion:{el:"@ui.calendarHeaderRegion",replaceElement:!0},monthlyRegion:{el:"@ui.monthlyRegion",replaceElement:!0},dailyRegion:{el:"@ui.dailyRegion",replaceElement:!0}},initialize:function(e){this._loading=!0,this._bandData=e.bandData,this._monthDateCollection=e.monthDateCollection,D.bindResetSelectionIfOutOfCalendarRoute()},onDomRefresh:function(){this._loading||(this.getRegion("notificationRegion").show(this._notificationView),this.getRegion("calendarHeaderRegion").show(this._headerView),this.getRegion("monthlyRegion").show(this._monthlyView),this.getRegion("dailyRegion").show(this._dailyView))},onAttach:function(){E.wrapActivePromise(a.when(C.getBandOption(this._bandData.getBandNo()),I.getCachedStartDayNum(),this._fetchMonthDateCollection(this._monthDateCollection.getCurrentMonth())),this).then(s.bind((function(e,t){this._loading=!1,this.bandOptionModel=e,this._startDayNum=t,this._buildChildViews(),this.render(),this._sendBandScheduleSceneEnterJackpotLog()}),this))},_buildChildViews:function(){this._notificationView=c.build(this._monthDateCollection,this.bandOptionModel),this._headerView=p.build(this._monthDateCollection,this._bandData,this.bandOptionModel),this._monthlyView=_.build(this._monthDateCollection,this._startDayNum),this._dailyView=b.build(this._monthDateCollection),this.listenTo(this._headerView,"bandSchedule:import",(function(){return C.getBandOption(this._bandData.getBandNo()).then(s.bind((function(e){this.bandOptionModel=e,this.getChildView("notificationRegion").refreshNotice()}),this))})),this.listenTo(this._headerView,"changeSchedule:calendarCategory",s.bind((function(e){D.setSelectedCalendarCategories(e,this._bandData.getBandNo()),this._fetchAndRenderCalendar()}),this)),this.listenTo(this._monthlyView,"openSchedule",this._openSchedule),this.listenTo(this._dailyView,"openSchedule",this._openSchedule),this.listenTo(r.getDGlobalChannel(),r.EVENT.HTML_CLICK,(function(){this.getChildView("notificationRegion").hideHelpGuide()})),this.listenTo(r.getDGlobalChannel(),r.EVENT.SCHEDULE_UPDATED,(function(){this._fetchAndRenderCalendar()})),this.listenTo(r.getDGlobalChannel(),r.EVENT.SCHEDULE_DELETED,(function(){this._fetchAndRenderCalendar()}))},_renderCalendarLayout:function(){this._notificationView.renderCalendarNotificationView(),this._headerView.renderCalendarHeaderView(),this._monthlyView.renderCalendarMonthlyView(),this._dailyView.renderCalendarDailyView()},_openSchedule:function(e){e.scrollTo&&e.scrollTo;var t={bandNo:this._bandData.getBandNo(),scheduleId:e.scheduleId,scrollTo:e.scrollTo};g.openScheduleDetailLayerView(t)},_fetchAndRenderCalendar:function(){E.wrapActivePromise(this._fetchMonthDateCollection(this._monthDateCollection.getCurrentMonth()),this).then(s.bind((function(){this._renderCalendarLayout()}),this))},getCurrentMonth:function(){return this._monthDateCollection.getCurrentMonth()},_fetchMonthDateCollection:function(e){var t=e,n=D.getSelectedCalendarCategories(this._bandData.getBandNo());return this._monthDateCollection.fetchMonthDateCollection(t,n).fail(s.bind((function(){f.GROUP_BAND_HOME.goDForced({band_no:this._bandData.getBandNo()})}),this))},_sendBandScheduleSceneEnterJackpotLog:function(){try{this.jplSceneEnter(M.CLASSIFIER.BAND_SHCEDULE,{band_no:this._bandData.getBandNo()})}catch(e){}},_openScheduleEditLayer:function(e){if(!m.isContentCreationPunished())if(this._bandData.isSchedulePermitted()){var t=e.add(1,"hour").startOf("hour");this._chooseLocalOrNormalSchedule(t)}else alert(IM("web.schedule.alert.schedule_permission_required"))},_chooseLocalOrNormalSchedule:function(e){if(this._bandData.canRegisterLocalMeetup()){var t=u.openScheduleCreationTypeSelectView(!0,!1);this.listenTo(t,u.EVENT.SCHEDULE_CREATION,(function(t){switch(t){case u.CREATION_TYPE.NORMAL_SCHEDULE:this._openScheduleCreationLayer(h.createScheduleEditModel(e));break;case u.CREATION_TYPE.LOCAL_MEETUP_SCHEDULE:this._openScheduleCreationLayer(h.createLocalMeetupModel(e))}}))}else this._openScheduleCreationLayer(h.createScheduleEditModel(e))},_openScheduleCreationLayer:function(e){S.openScheduleEditAsLayerForCreation({scheduleEditModel:e,shouldHideSecretSelect:e.isLocalMeetup(),bandData:this._bandData,forModification:!1,postAttachable:!0},this)}});return w.buildDCalendarView=function(e,t){var n=o(t,["YYYY-MM","YYYY-MM-DD"]);n.isValid()||(n=o());var i=d.build(e.getBandNo(),n);return new w({bandData:e,monthDateCollection:i})},w}.call(t,n,t,e))||(e.exports=i)},3360:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(2),s=n(0),a=n(16),o=n(9),l=n(167),r=n(166),d=n(545),c=n(666),h=n(3361),u=n(538),p=t.View.extend({className:"notification",attributes:{"data-viewname":"DBandCalendarNotificationView","aria-live":"assertive"},template:s.template(h),ui:{btnClose:"._btnClose",btnHelpGuide:"._btnHelpGuide",helpGuideWrap:"._helpGuideWrap",deleteErrorStatusPanel:"._deleteErrorStatusPanel"},events:{"click @ui.btnClose":"_closeNotification","click @ui.btnHelpGuide":"_showNotificationGuideMessage","click @ui.deleteErrorStatusPanel":"_retryDeleteCalendar"},initialize:function(e){this.collection=e.collection,this.bandOptionModel=e.bandOptionModel,this.bandCalendarModel=e.bandCalendarModel,this._loadingStatus=!1},serializeData:function(){var e=this._getCalendarDeleteStatus(),t=this._getCalendarImportStatus();return e||t?e?{_loadingStatus:this._loadingStatus,isCalendarNotice:!0,noticeStatus:e.status.toUpperCase(),noticeContent:e.content,calendarNoticeStatus:d.CALENDAR_PERSONAL_NOTICE_STATUS}:t?{_loadingStatus:this._loadingStatus,isCalendarNotice:!1,noticeStatus:t.status,noticeContent:t.content,noticeContentAdditional:t.contentAdditional?t.contentAdditional:"",isPartialFail:t.isPartialFail,relativeTime:t.relativeTime?t.relativeTime:"",calendarImportStatus:d.CALENDAR_IMPORT_STATUS}:void 0:{_loadingStatus:this._loadingStatus}},renderCalendarNotificationView:function(){this.render()},_getCalendarImportStatus:function(){var e="",t="",n=null,i=!1,s=this.bandOptionModel.getScheduleImport();if(s&&s.finished_at&&!(n=this._getRelativeTime(s.finished_at)))return null;if(s&&s.import_status){var a=s.import_status;if(""!=a){switch(this._loadingStatus=!0,a){case d.CALENDAR_IMPORT_STATUS.PROCESSING:e=IM("schedule.import.processing");break;case d.CALENDAR_IMPORT_STATUS.FINISHED:s.total_count===s.success_count?e=IM("schedule.import.finished",{count:s.success_count+""}):(e=IM("schedule.import.partial_fail.success",{count:s.success_count+""}),t=IM("schedule.import.partial_fail.fail",{count:s.fail_count+""}),i=!0);break;case d.CALENDAR_IMPORT_STATUS.ERROR:e=IM("schedule.import.error")}return{status:a,isPartialFail:i,content:e,contentAdditional:t,relativeTime:n}}}return null},_getRelativeTime:function(e){var t=a(),n=a(e).format(),i=e===l.getCurrentUserEnvStorage().get([r.ScheduleImportNotificationClose]);return t.diff(n,"minute")>=30||i?null:o.format.relative(n,"month_day")},_getCalendarDeleteStatus:function(){var e=this.collection.getCalendarNotice();return e&&e.content&&e.status?(this._loadingStatus=!0,{status:e.status,content:e.content}):null},_closeNotification:function(e){e.preventDefault(),e.stopPropagation();var t=null;this.bandOptionModel.getScheduleImport()&&this.bandOptionModel.getScheduleImport().finished_at&&(t=this.bandOptionModel.getScheduleImport().finished_at),l.getCurrentUserEnvStorage().set([r.ScheduleImportNotificationClose],t),this.$el.hide()},_showNotificationGuideMessage:function(e){e.preventDefault(),e.stopPropagation(),this.getUI("helpGuideWrap").toggleClass("gBlock")},_retryDeleteCalendar:function(){if(confirm(IM("bandcalendar.calendar_list.alert.retry_delete_default_calendar")))return this.bandCalendarModel.clearDefaultCalendar().then(s.bind((function(e){this._loadingStatus=!0,this.collection.setCalendarNotice(e),this.render()}),this))},refreshNotice:function(){var e=this.bandCalendarModel.getCalendarPersonalNotice(this.collection.getBandNo()),t=u.getBandOption(this.collection.getBandNo());return i.when(e,t).then(s.bind((function(e,t){this._loadingStatus=!0,this.collection.setCalendarNotice(e),this.bandOptionModel=t,this.render(),this.$el.show()}),this))},hideHelpGuide:function(){this.getUI("helpGuideWrap").removeClass("gBlock")}});return p.build=function(e,t){var n=new c.createNewCalendar(e.getBandNo());return new p({collection:e,bandOptionModel:t,bandCalendarModel:n})},p}.call(t,n,t,e))||(e.exports=i)},3361:function(e,t){e.exports='<% if (_loadingStatus) { %>\n\n    <% if (isCalendarNotice) { %>\n        <% // 기본 캘린더 일정 삭제 진행중 %>\n        <% if (noticeStatus == calendarNoticeStatus.READY) { %>\n            <p class="processing"><%= noticeContent %></p>\n\n        <% // 기본 캘린더 일정 삭제 실패  %>\n        <% } else if (noticeStatus == calendarNoticeStatus.FAIL) { %>\n            <div class="error _deleteErrorStatusPanel">\n                <button type="button" class="btn"><%= noticeContent %></button>\n                <span class="etc">\n                    <button type="button" class="btnClose uButton -iconCloseS _btnClose"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n                </span>\n            </div>\n        <% } %>\n\n    <% } else { %>\n        <% // 일정 가져오기 진행중 %>\n        <% if (noticeStatus == calendarImportStatus.PROCESSING) { %>\n            <p class="processing"><%= noticeContent %></p>\n\n        <% // 일정 가져오기 완료 (전체 완료) %>\n        <% } else if (noticeStatus == calendarImportStatus.FINISHED && !isPartialFail) { %>\n            <p class="finished"><%= noticeContent %>\n                <span class="etc">\n                    <em><%= relativeTime %></em>\n                    <button type="button" class="btnClose uButton -iconCloseS _btnClose"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n                </span>\n            </p>\n\n        <% // 일정 가져오기 완료 (부분 완료) %>\n        <% } else if (noticeStatus == calendarImportStatus.FINISHED && isPartialFail) { %>\n            <div class="partialFail"><%= noticeContent %>\n                <span class="bar"></span>\n                <span class="errorTxt"><%= noticeContentAdditional %>\n                    <dl class="uHelpGuide -small">\n                        <dt><button type="button" class="_btnHelpGuide"><span class="gSrOnly"><%= IM("ui.label.help")%></span></button></dt>\n                        <dd class="_helpGuideWrap" style="width:200px"><%= IM("schedule.import.fail.help") %></dd>\n                    </dl>\n                </span>\n                <span class="etc">\n                    <em><%= relativeTime %></em>\n                    <button type="button" class="btnClose uButton -iconCloseS _btnClose"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n                </span>\n            </div>\n\n        <% // 일정 가져오기 실패 %>\n        <% } else if (noticeStatus == calendarImportStatus.ERROR) { %>\n            <div class="error"><%= noticeContent %>\n                <dl class="uHelpGuide -small">\n                    <dt><button type="button" class="_btnHelpGuide"><span class="gSrOnly"><%= IM("ui.label.help")%></span></button></dt>\n                    <dd class="_helpGuideWrap" style="width:200px"><%= IM("schedule.import.fail.help") %></dd>\n                </dl>\n                <span class="etc">\n                    <em><%= relativeTime %></em>\n                    <button type="button" class="btnClose uButton -iconCloseS _btnClose"><span class="gSrOnly"><%= IM("ui.label.close") %></span></button>\n                </span>\n            </div>\n        <% } %>\n    <% } %>\n\n<% } %>'},3362:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(16),a=n(159),o=n(153),l=n(538),r=n(545),d=n(3363),c=n(3367),h=n(3383),u=n(3384),p=n(9),m=n(167),_=n(166),b=t.View.extend({attributes:{"data-viewname":"DBandCalendarHeaderView"},template:i.template(h),behaviors:[a],ui:{currentMonthLabel:"._currentMonthLabel",btnPrev:"._btnPrev",btnNext:"._btnNext",btnToday:"._btnToday",btnBandScheduleSetting:"._btnBandScheduleSetting",btnAddSchedule:"._btnAddSchedule",calendarImport:"._calendarImport",calendarExport:"._calendarExport",calendarPrint:"._calendarPrint",btnBandScheduleCategory:"._btnBandScheduleCategory",onceHelpGuide:"._onceHelpGuide",btnLyClose:"._btnLyClose"},events:{"click @ui.btnPrev":"_showCalendarForPrevMonth","click @ui.btnNext":"_showCalendarForNextMonth","click @ui.btnToday":"_showCalendarForToday","click @ui.btnBandScheduleSetting":"_moveToScheduleSetting","click @ui.btnAddSchedule":function(){this.spawn(a.MSG.CALENDAR_CREATE_SCHEDULE,{targetDate:s().startOf("day")})},"click @ui.calendarImport":"_showExternalCalendarOptionLayer","click @ui.calendarExport":"_moveToSelectCalendarCategory","click @ui.calendarPrint":"_showCalendarPrintSettingLayer","click @ui.btnBandScheduleCategory":function(){u.buildAsyncLayer(this.bandNo,this.collection.getSelectedCalendarCategories()).then(i.bind((function(e){this.listenTo(e,"setCalendarCategory:confirm",i.bind((function(e){this.trigger("changeSchedule:calendarCategory",e)}),this))}),this))},"click @ui.btnLyClose":function(){this.getUI("onceHelpGuide").hide(),m.getCurrentUserEnvStorage().set([_.ScheduleCalendarCategoryHelpGuide],!0)}},initialize:function(e){this.bandData=e.bandData,this.bandOptionModel=e.bandOptionModel,this.bandNo=this.bandData.getBandNo()},serializeData:function(){return{isHideHelpGuide:m.getCurrentUserEnvStorage().get([_.ScheduleCalendarCategoryHelpGuide]),isPermittedRegisterCalendar:this.bandOptionModel.isPermittedRegisterCalendar()}},onRender:function(){var e=this.collection.getCurrentMonth();e&&this.ui.currentMonthLabel.html(p.format.date(e,"year_month")),this.bandOptionModel.isPermittedRegisterCalendar()&&this._checkScheduleImportStatus()},renderCalendarHeaderView:function(){this.render()},_checkScheduleImportStatus:function(){var e=this.bandOptionModel.getScheduleImport();e&&e.import_status==r.CALENDAR_IMPORT_STATUS.PROCESSING&&(this.getUI("calendarImport").prop("disabled",!0),this.getUI("calendarImport").addClass("-disabled"))},_showCalendarForPrevMonth:function(){var e=s(this.collection.getCurrentMonth()).subtract(1,"month").format("YYYY-MM");o.GROUP_BAND_CALENDAR.goDForced({band_no:this.bandNo},{currentDate:e})},_showCalendarForNextMonth:function(){var e=s(this.collection.getCurrentMonth()).add(1,"month").format("YYYY-MM");o.GROUP_BAND_CALENDAR.goDForced({band_no:this.bandNo},{currentDate:e})},_showCalendarForToday:function(){var e=s().format("YYYY-MM");o.GROUP_BAND_CALENDAR.goDForced({band_no:this.bandNo},{currentDate:e})},_moveToScheduleSetting:function(){o.GROUP_BAND_SETTING_SCHEDULE.goDForced({band_no:this.bandNo})},_showExternalCalendarOptionLayer:function(){var e=d.openAsLayer(this.bandNo);this.listenTo(e,"bandSchedule:import",i.bind((function(){o.GROUP_BAND_CALENDAR.goDForced({band_no:this.bandNo}),this.trigger("bandSchedule:import"),this._refreshBandOptionModel()}),this)),this.listenTo(e,"bandCalendar:createCalendar",(function(){o.GROUP_BAND_SETTING_SCHEDULE.goDForced({band_no:this.bandNo})}))},_moveToSelectCalendarCategory:function(){o.GROUP_BAND_SETTING_EXPORT_CALENDAR.goDForced({band_no:this.bandNo})},_showCalendarPrintSettingLayer:function(){c.openLayerBuild(this.bandData.getBandCore(),this.collection.getCurrentMonth())},_refreshBandOptionModel:function(){return l.getBandOption(this.bandNo).then(i.bind((function(e){this.bandOptionModel=e,this.render()}),this))}});return b.build=function(e,t,n){return new b({collection:e,bandData:t,bandOptionModel:n})},b}.call(t,n,t,e))||(e.exports=i)},3363:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(486),a=n(545),o=n(2102),l=n(2103),r=n(3366),d="url",c="file",h=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DExternalCalendarOptionView"},template:i.template(r),ui:{checkImportType:"._checkImportType",btnCancel:"._btnCancel",btnConfirm:"._btnConfirm"},events:{"click @ui.btnCancel":"destroy","click @ui.btnConfirm":"_moveToTargetPage"},initialize:function(e){this.bandNo=e.bandNo},_moveToTargetPage:function(){var e=this.getUI("checkImportType").filter(":checked").val();return e==d?this._moveToExternalCalendarSetting():e==c&&this._moveToFileImportSetting(),!1},_moveToExternalCalendarSetting:function(){var e=o.openAsLayer(this.bandNo,a.TYPE.EXTERNAL);this.listenTo(e,"bandCalendar:createCalendar",i.bind((function(){this.trigger("bandCalendar:createCalendar")}),this))},_moveToFileImportSetting:function(){var e=l.openAsLayer(this.bandNo);this.listenTo(e,"bandSchedule:import",i.bind((function(){this.trigger("bandSchedule:import")}),this)),this.listenTo(e,"bandSchedule:import:fail",i.bind((function(){this.destroy()}),this))}});return h.openAsLayer=function(e){var t=new h({bandNo:e});return s.open(t),t},h}.call(t,n,t,e))||(e.exports=i)},3364:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="header">\n        <h1 class="title"><%= IM("calendar.external_calendar.option.txt.url") %></h1>\n    </header>\n    <div class="main">\n        <label for="externalUrl" class="title -fwN gMab6"><%= IM("calendar.external_calendar.desc.url") %></label>\n        <div class="uInput">\n            <input type="text" id="externalUrl" class="_externalUrl" value="" placeholder="<%= IM(\'calendar.external_calendar.desc.input_url\') %>">\n            <span class="border"></span>\n        </div>\n        <label for="inputCalendarName" class="title -fwN gMat22 gMab6"><%= IM("calendar.external_calendar.desc.input_calendar_name") %></label>\n        <div class="flexList -tbSpaceNone gMat10">\n            <div style="width:61px;">\n                \x3c!-- [D] 드랍다운박스 토글 : -dropDownOn 클래스 사용 --\x3e\n                <div class="uInput -dropDown -bg -block _calendarWrapper">\n                    <%\n                        var randomColorIndex = _.random(0, supportColorList.length - 1);\n                    %>\n                    <button type="button" class="btnCalendarName">\n                        <span class="calendarColor _calendarColor" data-color="<%- supportColorList[randomColorIndex] %>" style="background:#<%- supportColorList[randomColorIndex] %>"></span>\n                        <span class="gSrOnly"><%= IM("calendar.external_calendar.desc.select_calendar_color") %></span>\n                    </button>\n                    \x3c!-- [D] 인풋 위쪽으로 출력 : -up 클래스 사용 --\x3e\n                    <ul class="dropDown">\n                    <% _.each(supportColorList, function(color, index) { %>\n                        <li class="_supportColorItem" data-color="<%- color %>">\n                            <button type="button" class="btnSelectCalendar">\n                                <span class="calendarColor" style="background:#<%- color %>"><%= IM("calendar.band_calendar.txt.calendar_color") %> : #<%- color %></span>\n                            </button>\n                        </li>\n                    <% }); %>\n                    </ul>\n                </div>\n            </div>\n            <div class="flexible gMal8">\n                <div class="uInput">\n                    <input type="text" id="inputCalendarName" class="_calendarName" value="" maxlength="<%- MAX_LENGTH_OF_CALENDAR_NAME %>" placeholder="<%= IM(\'calendar.band_calendar.txt.calendar_name.default\') %>">\n                    <span class="border"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <footer class="footer">\n        <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("calendar.external_calendar.option.url.button.subscription") %></button>\n        <button type="button" class="uButton -iconClose btnLyClose _btnCancel"><span class="gSrOnly"><%= IM("ui.label.close_layer") %></span></button>\n    </footer>\n</div>'},3365:function(e,t){e.exports='<div class="lyContent -w380">\n        <header class="header">\n            <h1 class="title"><%-IM(\'calendar.external_calendar.option.txt.file\')%></h1>\n        </header>\n\n        <div class="main">\n            <p class="p gMab16"><%=IM(\'bandsetting.calendar_import.desc\')%></p>\n            <div class="uFileUpload _inputFileWrapper">\n                <label for="schedule_import_file" class="upload scheduleFileInputLabel _scheduleFileInputLabel">\n                    <span class="label"><%-IM(\'bandsetting.calendar_import.find_file_text\')%></span>\n                    <input type="file" id="schedule_import_file" accept=".ics,.csv" class="fileInput scheduleFileInput _scheduleFileInput">\n                </label>\n            </div>\n\n            <div class="uFileUpload _uploadedFileWrapper" style="display: none;">\n                <div class="file">\n                <span class="_uploadedCalendarFileName"></span>\n                <button type="button" class="btnRemove _btnUploadedFileRemove">\n                    <span class="gSrOnly">remove file</span>\n                    </button>\n                </div>\'\n            </div>\n\n            <p class="sDesc gMat10"><%=IM(\'bandsetting.calendar_import.desc2\')%></p>\n\n            <label for="inputCalendarName" class="title -fwN gMat22 gMab6"><%= IM("calendar.external_calendar.desc.input_calendar_name") %></label>\n            <div class="flexList -tbSpaceNone gMat10">\n                <div style="width:61px;">\n                    \x3c!-- [D] 드랍다운박스 토글 : -dropDownOn 클래스 사용 --\x3e\n                    <div class="uInput -dropDown -bg -block _calendarWrapper">\n                        <%\n                            var randomColorIndex = _.random(0, supportColorList.length - 1);\n                        %>\n                        <button type="button" class="btnCalendarName">\n                            <span class="calendarColor _calendarColor" data-color="<%- supportColorList[randomColorIndex] %>" style="background:#<%- supportColorList[randomColorIndex] %>"></span>\n                            <span class="gSrOnly"><%= IM("calendar.external_calendar.desc.select_calendar_color") %></span>\n                        </button>\n                        \x3c!-- [D] 인풋 위쪽으로 출력 : -up 클래스 사용 --\x3e\n                        <ul class="dropDown">\n                            <% _.each(supportColorList, function(color, index) { %>\n                            <li class="_supportColorItem" data-color="<%- color %>">\n                                <button type="button" class="btnSelectCalendar">\n                                    <span class="calendarColor" style="background:#<%- color %>"><%= IM("calendar.band_calendar.txt.calendar_color") %> : #<%- color %></span>\n                                </button>\n                            </li>\n                            <% }); %>\n                        </ul>\n                    </div>\n                </div>\n                <div class="flexible gMal8">\n                    <div class="uInput">\n                        <input type="text" id="inputCalendarName" class="_calendarName" value="" maxlength="<%- MAX_LENGTH_OF_CALENDAR_NAME %>" placeholder="<%= IM(\'calendar.band_calendar.txt.calendar_name.default\') %>">\n                        <span class="border"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <footer class="footer">\n            <button type="button" class="uButton -cancel _btnClose"><%-IM("ui.label.cancel")%></button>\n            <button type="button" class="uButton _btnFileUpload -disabled" disabled><%-IM("bandsetting.calendar_import.btn_import_text")%></button>\n        </footer>\n</div>'},3366:function(e,t){e.exports='<div class="lyContent">\n    <div class="main">\n        <ul class="selectArea">\n            <li>\n                <label for="checkSubscribeUrl" class="uCheck -radio">\n                    <input type="radio" id="checkSubscribeUrl" name="importType" class="checkInput _checkImportType" value="url" checked>\n                    <span class="checkLabel">\n                        <span class="shape sf_afterBg"></span>\n                        <span class="text"><%= IM("calendar.external_calendar.option.txt.url") %></span>\n                    </span>\n                </label>\n            </li>\n            <li>\n                <label for="checkImportFile" class="uCheck -radio">\n                    <input type="radio" id="checkImportFile" name="importType" class="checkInput _checkImportType" value="file">\n                    <span class="checkLabel">\n                        <span class="shape sf_afterBg"></span>\n                        <span class="text"><%= IM("calendar.external_calendar.option.txt.file") %></span>\n                    </span>\n                </label>\n            </li>\n        </ul>\n    </div>\n    <footer class="footer">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM("ui.label.confirm") %></button>\n    </footer>\n</div>'},3367:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(16),a=n(486),o=n(1092),l=n(531),r=n(9),d=n(1116),c=n(3368),h=n(3374),u=n(3380),p=n(3381),m=n(498),_=n(499),b=n(488),g=n(154);function f(e){return s(l.SUPPORT_RANGE.FROM).isBefore(e)&&s(l.SUPPORT_RANGE.TO).isAfter(e)}var v=0,A=-1,M=-2;function C(e,t,n){if(e=s(e),t=s(t),n){if(e.isAfter(t,"month"))return A;if(Math.abs(t.diff(e,"month",!0))>12)return M}else{if(e.isAfter(t,"day"))return A;if(Math.abs(t.diff(e,"month",!0))>6)return M}return v}var I=t.View.extend({options:{bandCore:null,initialMoment:s(),defaultDayDiffForDailyPeriod:6},tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandCalendarPrintSettingView"},template:i.template(u),getTemplate:function(){return this._dataFetched?i.template(u):i.template(m)},ui:{btnSubmit:"._btnSubmit",btnCancel:"._btnCancel",viewType:"._viewType",monthlyStartWrap:"._monthlyStartWrap",dailyStartWrap:"._dailyStartWrap",monthlyEndWrap:"._monthlyEndWrap",dailyEndWrap:"._dailyEndWrap",checkCalendar:"._checkCalendar",landscapeGuide:"._landscapeGuide"},events:{"click @ui.btnCancel":"destroy","click @ui.btnSubmit":"_submitAndCalendarPrint","click @ui.viewType":function(){this._updatePeriodSelectorType(),this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment())},"change @ui.checkCalendar":function(e){if("all"===e.target.value)this.getUI("checkCalendar").prop("checked",this.$(e.target).is(":checked"));else{var t=i.every(this.getUI("checkCalendar").filter('[value!="all"]'),(function(e){return e.checked}),this);this.getUI("checkCalendar").filter("[value=all]").prop("checked",t)}this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment())}},templateContext:function(){return this._dataFetched?{cid:this.cid,calendarList:this.calendarCollection.toJSON(),dateFormatOrder:r.getDateFormatOrder()}:{_loading_size:_.Size.MEDIUM,middleClass:b.ELEMENT.AREA_VERTICAL_MIDDLE}},regions:{monthlyStartWrap:"@ui.monthlyStartWrap",monthlyEndWrap:"@ui.monthlyEndWrap",dailyStartWrap:"@ui.dailyStartWrap",dailyEndWrap:"@ui.dailyEndWrap"},childViewEvents:{selectday:function(){this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment())}},initialize:function(){this.calendarType=["internal","external"],this.calendarCollection=o.build()},onDomRefresh:function(){this._dataFetched&&(this._updatePeriodSelectorType(),this.showChildView("monthlyStartWrap",new p({selectedDate:this._getMonthlyStartInitialMoment().startOf("month"),changeHandler:i.bind((function(e){return C(e,this._getUIEndMoment(),!0)!==v&&this.getChildView("monthlyEndWrap").setValue(this._calculateMonthlyEndInitialMoment(e)),this._updatePrintStartButtonAvailable(e,this._getUIEndMoment()),!0}),this)})),this.showChildView("monthlyEndWrap",new p({selectedDate:this._calculateMonthlyEndInitialMoment(this._getMonthlyStartInitialMoment()),changeHandler:i.bind((function(e){switch(C(this._getUIStartMoment(),e,!0)){case A:return alert(IM("calendar.print_setting.alert.end_must_after_start")),!1;case M:return alert(IM("calendar.print_setting.alert.period_exceed_monthly_range")),!1;case v:default:return this._updatePrintStartButtonAvailable(this._getUIStartMoment(),e),!0}}),this)})),this.showChildView("dailyStartWrap",d.buildDDateInputView({date:this._getDailyStartInitialMoment(),canTextEdit:!1})),this.listenTo(this.getChildView("dailyStartWrap"),d.EVENT.DATE_CHANGED,(function(){C(this._getUIStartMoment(),this._getUIEndMoment(),!1)!==v&&this.getChildView("dailyEndWrap").setValue(this._calculateDailyEndInitialMoment(this._getUIStartMoment()).format("YYYY-MM-DD")),this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment())})),this.showChildView("dailyEndWrap",d.buildDDateInputView({date:this._calculateDailyEndInitialMoment(this._getDailyStartInitialMoment()),canTextEdit:!1,dateValidator:{isValid:i.bind((function(e){switch(C(this._getUIStartMoment(),e,!1)){case A:return alert(IM("calendar.print_setting.alert.end_must_after_start")),!1;case M:return alert(IM("calendar.print_setting.alert.period_exceed_daily_range")),!1;case v:default:return!0}}),this)}})),this.listenTo(this.getChildView("dailyEndWrap"),d.EVENT.DATE_CHANGED,(function(){this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment())})),this._updatePrintStartButtonAvailable(this._getUIStartMoment(),this._getUIEndMoment()))},onAttach:function(){g.wrapActivePromise(this.calendarCollection.fetchCalendar(this.options.bandCore.bandNo,this.calendarType),this).then(i.bind((function(){this._dataFetched=!0,this.render()}),this))},_updatePeriodSelectorType:function(){this.getUI("monthlyStartWrap").toggle(this._isUIPrintTypeMonthly()),this.getUI("monthlyEndWrap").toggle(this._isUIPrintTypeMonthly()),this.getUI("dailyStartWrap").toggle(!this._isUIPrintTypeMonthly()),this.getUI("dailyEndWrap").toggle(!this._isUIPrintTypeMonthly()),this.getUI("landscapeGuide").toggle(this._isUIPrintTypeMonthly())},_updatePrintStartButtonAvailable:function(e,t){var n=C(e,t,this._isUIPrintTypeMonthly());v===n&&f(e)&&f(t)&&this.getUI("checkCalendar").filter(":checked").length>0?this.getUI("btnSubmit").removeAttr("disabled"):this.getUI("btnSubmit").attr("disabled","disabled")},_submitAndCalendarPrint:function(){var e={bandNo:this.options.bandCore.bandNo,startAt:this._getUIStartMoment().format("YYYY-MM-DD"),futureEndAt:this._getUIEndMoment().format("YYYY-MM-DD")};this.getUI("checkCalendar").filter("[value=all]").is(":checked")||(e.calendars=i.map(this.getUI("checkCalendar").filter(":checked"),(function(e){return"default"===e.value?{is_default:!0}:{calendar_id:e.value}}))),this._isUIPrintTypeMonthly()?c.printMonthlyCalendar(e,this.options.bandCore):h.printDailyCalendar(e,this.options.bandCore),a.closeTop()},_isUIPrintTypeMonthly:function(){return"monthlyView"===this.$("._viewType:checked").val()},_getUIStartMoment:function(){return this._isUIPrintTypeMonthly()?s(this.getChildView("monthlyStartWrap").getValue()):s(this.getChildView("dailyStartWrap").getValue())},_getUIEndMoment:function(){return this._isUIPrintTypeMonthly()?s(this.getChildView("monthlyEndWrap").getValue()):s(this.getChildView("dailyEndWrap").getValue())},_getMonthlyStartInitialMoment:function(){return s(this.options.initialMoment)},_calculateMonthlyEndInitialMoment:function(e){return s(e).startOf("month")},_getDailyStartInitialMoment:function(){return s(this.options.initialMoment).startOf("month")},_calculateDailyEndInitialMoment:function(e){return s(e).add(this.options.defaultDayDiffForDailyPeriod,"days")}});return I.openLayerBuild=function(e,t){var n=new I({bandCore:e,initialMoment:t});return a.open(n),n},I}.call(t,n,t,e))||(e.exports=i)},3368:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3369),a=n(16),o=n(2104),l=n(523),r=n(2105),d=n(2106),c=n(3373),h=n(1003),u=t.CollectionView.extend({behaviors:[{behaviorClass:d,onAllImgTagLoaded:function(){window.print()}}],options:{bandCore:null,monthDatas:[]},attributes:{"data-viewname":"DBandCalendarPrintMonthlyView"},onRender:function(){i.each(this.options.monthDatas,(function(e,t){this.showMonthView(e,t,this.options.startDayNum)}),this)},showMonthView:function(e,t,n){this.addChildView(s.buildDBandCalendarPrintMonthlyItemView({bandCore:this.options.bandCore,dailyDatas:e.monthData,scheduleCollection:this.options.scheduleCollection,month:e.month,startDayNum:n}),t)}});return u.printMonthlyCalendar=function(e,t){var n=e.startAt,i=e.futureEndAt;h.getCachedStartDayNum().then((function(s){e.startAt=l.getCalendarRange(e.startAt,s).start,e.futureEndAt=l.getCalendarRange(e.futureEndAt,s).end;var d=o.collectionBuild(e);d.fetchSchedules().then((function(e){d.reset(e.items);var o=c.generateMonthlyCalendarDisplayDataForPeriod(d,a(n),a(i),s),l=new u({scheduleCollection:d,monthDatas:o,bandCore:t,startDayNum:s});r.printView(l,{size:"A4 landscape",margin:"0.9cm 0.74cm"})}))}))},u}.call(t,n,t,e))||(e.exports=i)},3369:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(9),a=n(3370),o=n(16),l=n(3371),r=n(82),d=n(567),c=i.View.extend({options:{bandCore:null,month:o(),data:[]},tagName:"section",attributes:{"data-viewname":"DBandCalendarPrintMonthlyItemView"},className:"sPrint -landscape -onlyPage skin",template:t.template(a),templateContext:function(){return{bandCoverThumbnail:r.makeSmallCoverUrl(this.options.bandCore.cover),bandName:this.options.bandCore.name,monthTitle:s.format.date(this.options.month,"year_month"),numberOfWeeks:this.options.data.length/7,daysOfTheWeek:d.makeDayNameArrayOrderBy(this.options.startDayNum,"dd")}},onRender:function(){t.times(this.options.data.length,(function(e){var n="r"+e;this.addRegion(n,{el:"."+n,replaceElement:!0}),this.showChildView(n,new l(t.extend({},this.options.data[e],{calendarMonth:this.options.month,scheduleCollection:this.options.scheduleCollection,scheduleCountLimitForMultiLineTitle:this.options.data.length/7==6?2:3,defaultColorSkin:this.options.bandCore.getSkinColorClass()})))}),this)}});return c.buildDBandCalendarPrintMonthlyItemView=function(e){return new c({bandCore:e.bandCore,data:e.dailyDatas,scheduleCollection:e.scheduleCollection,month:e.month,startDayNum:e.startDayNum})},c}.call(t,n,t,e))||(e.exports=i)},3370:function(e,t){e.exports='<div class="inner -wide">\n    <header class="header">\n        <p class="bandName">\n            <img src="<%-bandCoverThumbnail %>" width="24" alt="">\n            <span class="name"><%-bandName %></span>\n        </p>\n        <h1 class="title -calendar"><%-monthTitle%></h1>\n    </header>\n    <div class="main -noLine">\n        <div class="calendarWrap">\n            <table class="scheduleTable <%-(numberOfWeeks === 6 ? \'-week6\': \'\') %>" cellpadding="0" cellspacing="0">\n                <colgroup>\n                    <%  _.each(daysOfTheWeek, function(dayOfTheWeek) { %>\n                    <col style="width: 163px">\n                    <% }) %>\n                </colgroup>\n                <thead>\n                <tr>\n                    <%  _.each(daysOfTheWeek, function(dayOfTheWeek) { %>\n                    <th class="scheduleTh"><div class="dayOfWeek"><%= dayOfTheWeek %></div><img src="<%-resBaseUrl%>/images/common/calendarthBg.gif" class="thbgImg"/></th>\n                    <% }) %>\n                </tr>\n                </thead>\n                <tbody>\n                <%\n                for(var i = 0; i < numberOfWeeks; i++){\n                %>\n                <tr>\n                    <% for(var j = 0; j < 7; j++) { %>\n                        <td class="<%=\'r\' + ((i * 7) + j) %>"></td>\n                    <% } %>\n                </tr>\n                <% } %>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},3371:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(570),a=n(3372),o=n(16),l={1:"-serialDay1",2:"-serialDay2",3:"-serialDay3",4:"-serialDay4",5:"-serialDay5",6:"-serialDay6",7:"-serialDay7"},r=i.View.extend({options:{index:0,calendarMonth:o(),date:o(),items:[{scheduleId:"1",serialDay:0,overPrev:!1,overNext:!1,type:""}],scheduleCollection:null,scheduleCountLimitForMultiLineTitle:3,defaultColorSkin:"skin1"},tagName:"td",className:function(){var e="";return this.options.date.isBefore(this.options.calendarMonth,"month")&&(e="-prevMonth"),this.options.date.isAfter(this.options.calendarMonth,"month")&&(e="-nextMonth"),"scheduleTd "+e},attributes:{"data-viewname":"DBandCalendarPrintMonthlyItemTdView"},template:t.template(a),templateContext:function(){return{date:o(this.options.date).format("D"),items:this._generateEventItemsData(),moreScheduleCount:this._getHidingCount(),multilineApplicable:this._isMultiLineApplicable()}},_generateEventItemsData:function(){return t.map(t.initial(this.options.items,this._getHidingCount()),(function(e){var t=this.options.scheduleCollection.get(e.scheduleId),n="";return"blank"===e.type||"serial-pass"===e.type?{skip:!0}:("serial-start"===e.type&&(n=l[e.displaySerialSize]),{serialDayClass:n,showPrevArrow:e.overPrev,showNextArrow:e.overNext,title:t.get("name"),time:o(t.get("start_at")).format("LT"),showTime:!t.get("is_all_day"),scheduleCalendar:t.get("calendar")?t.get("calendar"):null,colorSkin:s.getCalendarSkin(t,this.options.defaultColorSkin),skip:!1})}),this)},_getHidingCount:function(){return this.options.hidingCount?this.options.hidingCount:0},_isMultiLineApplicable:function(){return this.options.items.length<=this.options.scheduleCountLimitForMultiLineTitle&&t.every(this.options.items,(function(e){return"blank"===e.type||"single"===e.type}))}});return r.buildDBandCalendarPrintMonthlyItemTdView=function(){return new r},r}.call(t,n,t,e))||(e.exports=i)},3372:function(e,t){e.exports='<img src="<%-resBaseUrl%>/images/common/dimmed.png" alt="" class="dimmedImg">\n<div class="scheduleDate"><%-date %></div>\n<% if (items.length > 0) { %>\n<ul class="scheduleList">\n    <% _.each(items, function(item) { %>\n    <% if (item.skip) { %>\n    <li class="scheduleListItem"></li>\n    <% } else { %>\n\n    <li class="scheduleListItem <%-item.serialDayClass %> <%-multilineApplicable ? \'-multiLine\' : \'\' %> <%-item.colorSkin%>">\n        <div class="scheduleItem">\n            <% if (item.showPrevArrow) { %>\n            <span class="scheduleArrow -addPrev"><img src="<%-resBaseUrl%>/images/common/ico_schedule_arrow.png" alt="" class="arrowImgPrev"></span>\n            <% } %>\n            <% if (item.scheduleCalendar) { %>\n            <span class="scheduleType"><img src="<%-resBaseUrl%>/images/common/ico_schedule_<%- item.colorSkin %>.png" alt="" class="scheduleTypeImg"/> </span>\n            <% } %>\n            <% if (item.showTime) { %>\n            <span class="scheduleTime"><%-item.time %></span>\n            <% } %>\n            <span class="scheduleText"><%- item.title %></span>\n            <% if (item.showNextArrow) { %>\n            <span class="scheduleArrow -addNext"><img src="<%-resBaseUrl%>/images/common/ico_schedule_arrow.png" alt="" class="arrowImgNext"></span>\n            <% } %>\n        </div>\n    </li>\n\n    <% } %>\n    <% }); %>\n\n    <% if (moreScheduleCount) { %>\n    \x3c!--더보기 노출시 간격을 맞추기 위해 빈 LI 태그를 뒤에 하나 추가함--\x3e\n    <li class="scheduleListItem"></li>\n    <% } %>\n</ul>\n<% } %>\n<% if (moreScheduleCount) { %>\n<div class="scheduleMore"><span class="scheduleText">and <%-moreScheduleCount %> more</span></div>\n<% } %>'},3373:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(16),s=n(570),a=n(523),o=n(567);function l(e,t,n,s){var a,o=i(e).startOf("day");a=t?i(t).startOf("day"):i(o),this.weekDayCount=s||7,this.dayRange=a.diff(o,"day"),this.diffBetweenStartDayAndWeekStart=o.diff(n,"day")}return l.prototype.isOutOfThisWeek=function(){return this.diffBetweenStartDayAndWeekStart>=this.weekDayCount||this.dayRange+this.diffBetweenStartDayAndWeekStart<0},l.prototype.getWeekdayRange=function(){var e=Math.max(this.diffBetweenStartDayAndWeekStart,0),n=Math.min(this.dayRange+this.diffBetweenStartDayAndWeekStart,this.weekDayCount-1);return t.range(e,n+1)},{calculateHidingCount:function(e,n){function i(e,n){return t.chain(e).rest(n-1).map((function(e){return"blank"===e.type?null:e.scheduleId})).compact().size().value()}var s=6===a.countWeeksOf(n)?4:5;return t.each(e,(function(n,a){if(!n.hidingCount&&n.items.length>s){n.hidingCount=i(n.items,s);var o=s-2;if("blank"===n.items[o].type)return;var l=n.items[o].scheduleId;t.each(t.rest(e,a+1),(function(e){e.items[o]&&e.items[o].scheduleId===l&&(e.hidingCount=i(e.items,s))}))}})),e},generateCalendarRangeDispalyData:function(e,n,s){var a=[[],[],[],[],[],[],[]];return t.each(s,(function(e){!function(e,n,i){if(e){var s=new l(e.get("start_at"),e.get("end_at"),n,i.length);if(!s.isOutOfThisWeek()){var a=function(e,n){for(var i=0;!t.every(n.getWeekdayRange(),(function(t){return!(n=e[t])[s=i]||"blank"===n[s].type;var n,s}));)i++;return i}(i,s);t.each(s.getWeekdayRange(),(function(n){var o=function(e,t){if(0===t.dayRange)return{type:"single",skip:!1,displaySerialSize:0,overPrev:!1,overNext:!1};var n=e-t.diffBetweenStartDayAndWeekStart;if(0!==n&&0!==e)return{skip:!0,type:"serial-pass"};var i=t.dayRange,s=0!==n&&0===e,a=t.dayRange-n+e>=7;return s&&(i=t.dayRange-n),a&&(i=6-e),{type:"serial-start",skip:!1,displaySerialSize:i+1,overPrev:s,overNext:a}}(n,s);i[n][a]=t.extend({scheduleId:e.get("schedule_id")},o)}))}}}(e,n,a)})),t.map(a,(function(e,s){return{date:i(n).add(s,"day"),items:t.map(e,(function(e){return e||{skip:!0,type:"blank"}}))}}))},generateMonthlyCalendarDisplayDataForPeriod:function(e,n,i,l){var r=e.getDailyScheduleCollection(),d=t.object(r.map((function(e){var n=t.chain(e.get("schedules")).sortBy((function(e){return e.get("_custom_sortBy")})).map((function(e){return e.get("schedule_id")})).value();return[e.get("date"),n]}))),c=s.extractOccuredUnitInDateRange(n,i,"month");return t.map(c,(function(n){var i=a.getCalendarRange(n,l),r=s.extractWeekStartDatesInDateRange(i.start,i.end,l),c=t.map(r,(function(n){var i=s.extractOccuredUnitInDateRange(o.getFirstDateOfWeek(n,l),o.getEndDateOfWeek(n,l),"day");return{weekMoment:n,scheduleModels:t.chain(i).map((function(e){return d[e.format("YYYYMMDD")]})).flatten().compact().uniq().map((function(t){return e.get(t)})).value()}})),h=t.flatten(t.map(c,(function(t){var i=this.generateCalendarRangeDispalyData(e,t.weekMoment.format("YYYY-MM-DD"),t.scheduleModels);return this.calculateHidingCount(i,n)}),this));return{month:n,monthData:h}}),this)}}}.call(t,n,t,e))||(e.exports=i)},3374:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3375),a=n(3379),o=n(2104),l=n(2105),r=n(82),d=n(2106),c=t.View.extend({behaviors:[{behaviorClass:d,onAllImgTagLoaded:function(){window.print()}}],tagName:"div",className:"sPrint",attributes:{"data-viewname":"DBandCalendarPrintDailyView"},ui:{scheduleListWrap:"._scheduleListWrap"},regions:{scheduleListWrap:{replaceElement:!0,el:"@ui.scheduleListWrap"}},template:i.template(a),templateContext:function(){return{bandName:this.options.bandCore.name,bandCover:r.makeSmallCoverUrl(this.options.bandCore.cover)}},onRender:function(){var e=new h({collection:this.collection.getDailyScheduleCollection(),bandSkinColor:this.options.bandCore.getSkinColorClass()});this.showChildView("scheduleListWrap",e)}}),h=t.CollectionView.extend({tagName:"section",className:"calendarListPrint",attributes:{"data-viewname":"DBandCalendarPrintDailyCollectionView"},childViewOptions:function(){return{bandSkinColor:this.options.bandSkinColor}},childView:s});return c.printDailyCalendar=function(e,t){var n=o.collectionBuild(e);t=t;n.fetchSchedules().then((function(e){n.reset(e.items);var i=c.printDailyBuild({collection:n,bandCore:t});l.printView(i,{margin:"1.5cm 0cm"})}))},c.printDailyBuild=function(e){return new c({collection:e.collection,bandCore:e.bandCore})},c}.call(t,n,t,e))||(e.exports=i)},3375:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(4),s=n(0),a=n(9),o=n(3376),l=n(3378),r=i.View.extend({className:function(){return"wrap "+(this._getMonthlyInfo()?"-noTopBorder":"")},attributes:{"data-viewname":"DBandCalendarPrintDailyListView"},ui:{dailyListWrap:"._dailyListWrap"},regions:{dailyListWrap:{replaceElement:!0,el:"@ui.dailyListWrap"}},template:s.template(l),templateContext:function(){return{monthlyInfo:this._getMonthlyInfo()?a.format.date(this._getMonthlyInfo(),"year_month"):null}},onRender:function(){var e=new d;e.add(this.model.get("schedules"));var t=new c({collection:e,bandSkinColor:this.options.bandSkinColor});this.showChildView("dailyListWrap",t)},_getMonthlyInfo:function(){var e=null;return s.each(this.model.get("schedules"),(function(t){t.get("_custom_monthlyInfo")&&(e=t.get("_custom_monthlyInfo"))})),e}}),d=t.Collection.extend({comparator:"_custom_sortBy"}),c=i.CollectionView.extend({tagName:"ul",className:"scheduleList",attributes:{"data-viewname":"DBandCalendarPrintDailyCollectionView"},childViewOptions:function(){return{bandSkinColor:this.options.bandSkinColor}},childView:o});return r}.call(t,n,t,e))||(e.exports=i)},3376:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(156),a=n(82),o=n(570),l=n(526),r=n(511),d=n(653),c=n(3377);return t.View.extend({tagName:"li",className:"scheduleListItem",attributes:{"data-viewname":"DBandCalendarPrintDailyItemView"},template:i.template(c),templateContext:function(){var e,t=d.makeScheduleTimeOfDailyMessage(this.model.toJSON(),this.model.get("_custom_start_at")),n=o.getCalendarSkin(this.model,this.options.bandSkinColor),i=this.model.get("location"),s=this.model.get("schedule_type");return i&&(e=i.name||i.address),{mapName:e,item:this.model,rsvpInfo:this._getRsvpInfo(),calendarInfo:this._getCalendarInfo(),fileInfo:this._getFileInfo(),hasExpiredFile:this._hasExpiredFile(),photoInfo:this._getPhotoInfo(),ownerName:this.model.get("owner")?this.model.get("owner").name:"",scheduleType:{isBirthday:l.isBirthday(s),isBandOpen:l.isBandOpen(s),isNormal:l.isNormal(s),isHoliday:l.isHoliday(s),isExternal:l.isExternal(s)},scheduleTime:t,skinColor:n,dayOfMonth:this.model.get("_custom_start_at").format("DD"),dayOfWeek:this.model.get("_custom_start_at").format("dddd")}},ui:{photos:"._photos",photo:"._photo"},_getRsvpInfo:function(){var e=this.model.get("rsvp");return i.isEmpty(e)?null:{isAttendanceStatus:e.viewer_rsvp_state==r.ATTENDANCE,isPendingAttendanceStatus:e.viewer_rsvp_state==r.PENDING_ATTENDANCE,isAbsenceStatus:e.viewer_rsvp_state==r.ABSENCE,isMaybeStatus:e.viewer_rsvp_state==r.MAYBE,attendeeCount:e.attendee_count,absenteeCount:e.absentee_count,maybeCount:e.maybe_count,pendingAttendeeCount:e.pending_attendee_count}},_getCalendarInfo:function(){var e=this.model.get("calendar");return i.isEmpty(e)?null:{name:e.name,serviceProvider:e.service_provider?e.service_provider:""}},_getFileInfo:function(){var e=this.model.get("files"),t=this.model.get("dropbox_files"),n=this.model.get("external_files");return i.isEmpty(e)&&i.isEmpty(t)&&i.isEmpty(n)?null:{fileCount:e.length+t.length+n.length}},_hasExpiredFile:function(e){return i.find(e,(function(e){return s.isExpiredFile(e.expiresAt)}))},_getPhotoInfo:function(){var e=this.model.get("photos"),t="";if(!i.isEmpty(e)){var n=e[0].url;return t=a.makeSmallCoverUrl(n),{photoCount:e.length,thumbnailUrl:t}}return null}})}.call(t,n,t,e))||(e.exports=i)},3377:function(e,t){e.exports='<time class="time" datetime=""><em class="day"><%- dayOfMonth %></em><%- dayOfWeek %></time>\n<div class="scheduleItem">\n    <strong class="title"><%- item.get(\'name\') %></strong>\n    <p class="scheduleInfo">\n        <span class="scheduleEndTime">\n            <% if (scheduleType.isBirthday || scheduleType.isBandOpen) { %>\n            <% //기념일 일 경우 메세지 표시 %>\n            <%- IM("schedule.msg.recommend_post_celebration") %>\n            <% } else if (!scheduleType.isHoliday) { %>\n            <% //휴일은 시간 표시하지 않음, isNormal 일 경우만 시간 표시 %>\n            <%- scheduleTime %>\n            <% } %>\n        </span>\n        <% if (mapName) { %>\n        <span class="location"><img src="<%- resBaseUrl %>/images/common/ico_map_11.png" class="locationImg" alt="<%- IM(\'schedule.edit.location.label\')%>"><%- mapName %></span>\n        <% } %>\n    </p>\n    <% // 캘린더 정보 %>\n    <% if (calendarInfo) { %>\n    <span class="desc">\n        <img src="<%- resBaseUrl %>/images/common/ico_schedule_<%- skinColor %>.png" class="calendarSkinImg" alt=""><i><%- calendarInfo.name %></i>\n        <% if (scheduleType.isNormal && ownerName != \'\') { %>\n        <%- ownerName %>\n        <% } else if (scheduleType.isExternal && calendarInfo.serviceProvider != \'\') { %>\n        <%- calendarInfo.serviceProvider %>\n        <% } %>\n    </span>\n    <% } %>\n    <% if (rsvpInfo) { %>\n    <span class="rsvp">\n        <em <% if(rsvpInfo.isAttendanceStatus){ %>class="<%- skinColor %> sf_color"<% } %>><%- IM("schedule.rsvp.attendance") %> <%- rsvpInfo.attendeeCount %></em>\n        <% if (rsvpInfo.pendingAttendeeCount > 0) { %>\n        <em <% if(rsvpInfo.isPendingAttendanceStatus){ %>class="<%- skinColor %> sf_color"<% } %>><%- IM("schedule.rsvp.pending_attendee") %> <%- rsvpInfo.pendingAttendeeCount %></em>\n        <% } %>\n        <em <% if(rsvpInfo.isAbsenceStatus){ %>class="<%- skinColor %> sf_color"<% } %>><%- IM("schedule.rsvp.absentee") %> <%- rsvpInfo.absenteeCount %></em>\n        <em <% if(rsvpInfo.isMaybeStatus){ %>class="<%- skinColor %> sf_color"<% } %>><%- IM("schedule.rsvp.maybe") %> <%- rsvpInfo.maybeCount %></em>\n    </span>\n    <% } %>\n\n    <% if (fileInfo) { %>\n    <span class="attachment"><img src="<%- resBaseUrl %>/images/common/ico_list_file_12.png" class="icon" alt="<%- IM(\'schedule.attached.files\')%>"><%- (fileInfo.fileCount) %></span>\n    <% } %>\n    <% if(comment_count > 0) { %>\n    <span class="scheduleComment"><img src="<%- resBaseUrl %>/images/common/ico_comment_12.png" class="icon" alt="<%- IM(\'schedule.comment\') %>"><%- item.get(\'comment_count\') %></span>\n    <% } %>\n</div>\n<span class="scheduleInfoEtc <%= photoInfo ? \'-photo\' : \'\' %>">\n    <% if (photoInfo) { %>\n    <img src="<%- photoInfo.thumbnailUrl %>" class="_photo" width="80" alt="">\n    <em class="moreCount"><%- photoInfo.photoCount %></em>\n    <% } %>\n\n    <% if (scheduleType.isHoliday) { %>\n    <img src="<%- resBaseUrl %>/images/common/ico_holiday.png">\n    <% } else if (scheduleType.isBirthday) { %>\n    <img src="<%- resBaseUrl %>/images/common/ico_birthday.png">\n    <% } else if (scheduleType.isBandOpen) { %>\n    <img src="<%- resBaseUrl %>/images/common/ico_celebration.png">\n    <% } %>\n</span>'},3378:function(e,t){e.exports='<% if(monthlyInfo) { %>\n<header class="header">\n    <h1 class="title"><%- monthlyInfo %></h1>\n    <img src="<%- resBaseUrl %>/images/common/calendarTitleBg.png" alt="" class="bg">\n</header>\n<% } %>\n\n<div class="_dailyListWrap"></div>'},3379:function(e,t){e.exports='<div class="inner">\n    <header class="header">\n        <p class="bandName">\n            <img src="<%- bandCover %>" width="24" alt="">\n            <span class="name"><%- bandName %></span>\n        </p>\n    </header>\n    <div class="_scheduleListWrap"></div>\n</div>\n'},3380:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="modalHeader">\n        <h1 class="title"><%-IM(\'calendar.print_setting.title\')%></h1>\n    </header>\n    <div class="modalBody">\n        <div class="formWrap">\n            <div class="labelLow">\n                <label for="monthlyView_<%-cid%>" class="uCheck -radio scheduleTypeSelect">\n                    <input type="radio" id="monthlyView_<%-cid%>" name="viewType" class="checkInput _viewType" value="monthlyView" checked>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"><%-IM(\'calendar.print_setting.label.view_monthly\')%></span>\n                    </span>\n                </label>\n\n                <label for="dailyView_<%-cid%>" class="uCheck -radio scheduleTypeSelect">\n                    <input type="radio" id="dailyView_<%-cid%>" name="viewType" class="checkInput _viewType" value="dailyView">\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"><%-IM(\'calendar.print_setting.label.view_daily\')%></span>\n                    </span>\n                </label>\n            </div>\n\n            <div class="labelLow">\n                <span class="priodTitle"><%-IM(\'calendar.print_setting.label.period_start\')%></span>\n                \x3c!-- 월별뷰 시작 월--\x3e\n                <div class="labelLowInner _monthlyStartWrap"></div>\n\n                \x3c!-- 일별뷰 시작일 --\x3e\n                <div class="labelLowInner _dailyStartWrap" style="width: 173px;"></div>\n            </div>\n\n            <div class="labelLow gMat10">\n                <span class="priodTitle"><%-IM(\'calendar.print_setting.label.period_end\')%></span>\n                \x3c!-- 월별뷰 종료 월--\x3e\n                <div class="labelLowInner _monthlyEndWrap"></div>\n\n                \x3c!-- 일별뷰 종료일 --\x3e\n                <div class="labelLowInner _dailyEndWrap" style="width: 173px;"></div>\n            </div>\n\n            <div class="scrollYBox -tLine gMat20" style="height: 120px">\n                <ul class="inputList">\n                    \x3c!--전체 캘린더--\x3e\n                    <li class="inputItem">\n                        <label for="checkAll_<%-cid%>" class="uCheck -checkbox -fs13">\n                            <input type="checkbox" id="checkAll_<%-cid%>" class="checkInput _checkCalendar" value="all" checked>\n                            <span class="checkLabel">\n                                <span class="shape "></span>\n                                <span class="text"><%-IM(\'calendar.print_setting.label.check_all_calendar\')%></span>\n                            </span>\n                        </label></li>\n                    <% _.each(calendarList, function(calendar) {\n                        var calendarIdentifier;\n                        if (calendar.isDefault) {\n                            calendarIdentifier = \'default\';\n                        } else {\n                            calendarIdentifier = calendar.calendarId;\n                        }\n                    %>\n                    <li class="inputItem">\n                        <label for="<%-calendarIdentifier%>_<%-cid%>" class="uCheck -checkbox -fs13">\n                            <input type="checkbox" id="<%-calendarIdentifier%>_<%-cid%>" class="checkInput _checkCalendar" value="<%-calendarIdentifier%>" checked>\n                            <span class="checkLabel">\n                                <span class="shape "></span>\n                                <span class="text"><%-calendar.name %></span>\n                            </span>\n                        </label></li>\n                    <% }); %>\n                </ul>\n            </div>\n\n        </div>\n    </div>\n    <footer class="modalFooter -tLongLine">\n        <div class="attendText gTaL gMal20 gMat-13 gMab19 _landscapeGuide"> <%- IM(\'calendar.print_setting.guide.set_landscape_orientation\') %></div>\n        <button type="button" class="uButton -cancel _btnCancel"><%- IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnSubmit"><%- IM(\'ui.label.confirm\') %></button>\n        <button type="button" class="uButton -iconClose btnLyClose _btnCancel"><span class="gSrOnly"><%- IM(\'ui.label.close\') %></span></button>\n    </footer>\n</div>'},3381:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3382),a=n(9),o=n(16),l=n(531);return i.View.extend({options:{selectedDate:o(),changeHandler:function(){return!0}},attributes:{"data-viewname":"DYearMonthInputView"},initialize:function(){this._selectedDate=o(this.options.selectedDate)},template:t.template(s),templateContext:function(){return{selectableYears:(e=o(l.SUPPORT_RANGE.FROM).year(),n=o(l.SUPPORT_RANGE.TO).year(),t.map(t.range(e,n+1),(function(e){return{label:IM("calendar.print_setting.monthly_year_select.option_text",{year:o().year(e).format("YYYY")}),value:e}}))),selectableMonths:t.map(t.range(0,12),(function(e){return{label:a.format.date(o().month(e),"month"),value:e}})),selectedYear:this._selectedDate.year(),selectedMonth:this._selectedDate.month(),dateFormatOrder:a.getDateFormatOrder()};var e,n},ui:{yearSelect:"._yearSelect",monthSelect:"._monthSelect"},events:{"change @ui.yearSelect":"_onSelectChanged","change @ui.monthSelect":"_onSelectChanged"},_onSelectChanged:function(){var e=o(this._selectedDate).year(parseInt(this.getUI("yearSelect").val())).month(parseInt(this.getUI("monthSelect").val()));this.options.changeHandler(e)?this._selectedDate=e:this.render()},getValue:function(){return this._selectedDate},setValue:function(e){this._selectedDate=o(e),this.render()}})}.call(t,n,t,e))||(e.exports=i)},3382:function(e,t){e.exports='<% _.each(dateFormatOrder, function(dateFormatOrderLetter) { %>\n\x3c!--연,월 표시 순서 로케일에 맞게 정렬 --\x3e\n<% if (dateFormatOrderLetter === \'y\') { %>\n\x3c!--연--\x3e\n<span class="uSelect -h32 -bg gColorBk2">\n    <select style="width: 126px" class="_yearSelect">\n        <% _.each(selectableYears, function(item) { %>\n            <option value="<%-item.value %>" <%-item.value === selectedYear ? \'selected\': \'\' %>><%-item.label %></option>\n        <% }); %>\n    </select>\n</span>\n<% } %>\n<% if (dateFormatOrderLetter === \'M\') { %>\n\x3c!--월--\x3e\n<span class="uSelect -h32 -bg gColorBk2">\n    <select style="width: 125px" class="_monthSelect">\n        <% _.each(selectableMonths, function(item) { %>\n            <option value="<%-item.value %>" <%-item.value === selectedMonth ? \'selected\': \'\' %>><%-item.label %></option>\n        <% }); %>\n    </select>\n</span>\n<% } %>\n<% }); %>'},3383:function(e,t){e.exports='<div class="calendarHeader">\n    <div class="month">\n        <strong class="monthTxt _currentMonthLabel"></strong>\n        <button type="button" class="prev _btnPrev"><span class="gSrOnly"><%= IM("schedule.list.button.prev_month") %></span></button>\n        <button type="button" class="next _btnNext"><span class="gSrOnly"><%= IM("schedule.list.button.next_month") %></span></button>\n        <button type="button" class="today _btnToday"><%= IM("schedule.list.button.today") %></button>\n    </div>\n    <div class="btnWrap">\n        <button type="button" class="icon -schedule _btnBandScheduleCategory"><span class="gSrOnly"><%- IM("band.calendar.category") %></span></button>\n        <% if (isPermittedRegisterCalendar) { %>\n        <button type="button" class="icon -setting _btnBandScheduleSetting"><span class="gSrOnly"><%= IM("bandsetting.band_schedule.title") %></span></button>\n        <% } %>\n        <button class="uButton sf_color sf_tBorderOpacity _btnAddSchedule"><%= IM("schedule.list.button.add_schedule") %></button>\n        <% if(!isHideHelpGuide){ %>\n        <dl class="uHelpGuide -right -close _onceHelpGuide" role="alert" aria-live="assertive">\n            <dt><span class="gSrOnly"><%- IM("ui.label.help") %></span></dt>\n            <dd style="display: block; width:160px;top:24px;">\n                <%- IM("band.calendar.category.help_guide") %>\n                <button type="button" class="btnLyClose _btnLyClose"><span class="gSrOnly"><%- IM("ui.label.close") %></span></button>\n            </dd>\n        </dl>\n        <% } %>\n    </div>\n</div>\n\n<div class="btns">\n    <% if (isPermittedRegisterCalendar) { %>\n    <button type="button" class="btnTextType _calendarImport"><%- IM(\'schedule.more.option.import\')%></button>\n    <span class="bar"></span>\n    <% } %>\n    <button type="button" class="btnTextType _calendarExport"><%- IM(\'schedule.more.option.export\')%></button>\n    <span class="bar"></span>\n    <button type="button" class="btnTextType _calendarPrint"><%- IM(\'schedule.more.option.print\') %></button>\n\n</div>'},3384:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3385),a=n(635),o=n(486),l=n(52),r=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandCalendarScheduleCategoryLayerView"},ui:{internalCalendarCheck:"._internalCalendarCheck",externalCalendarCheck:"._externalCalendarCheck",subscribedCalendarCheck:"._subscribedCalendarCheck",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"change @ui.internalCalendarCheck":"_internalCalendarCheckToggle","change @ui.externalCalendarCheck":"_externalCalendarCheckToggle","change @ui.subscribedCalendarCheck":"_subscribedCalendarCheckToggle","click @ui.btnCancel":function(){this.destroy()},"click @ui.btnConfirm":function(){this._checkCalendarList(),this.trigger("setCalendarCategory:confirm",{internalCalendarCheckList:this._internalCalendarCheckList,externalCalendarCheckList:this._externalCalendarCheckList,subscribedCalendarCheckList:this._subscribedCalendarCheckList}),this.destroy()}},_checkCalendarList:function(){this._internalCalendarsCollection.each(i.bind((function(e){e.get("isChecked")&&this._internalCalendarCheckList.push(e.get("calendarId"))}),this)),this._externalCalendarsCollection.each(i.bind((function(e){e.get("isChecked")&&this._externalCalendarCheckList.push(e.get("calendarId"))}),this)),this._subscribedCalendarsCollection.each(i.bind((function(e){e.get("isChecked")&&this._subscribedCalendarCheckList.push(e.get("calendarId"))}),this))},_internalCalendarCheckToggle:function(e){var t=$(e.currentTarget).val();this._internalCalendarsCollection.each((function(e){e.get("calendarId")==t&&e.set("isChecked",!e.get("isChecked"))}))},_externalCalendarCheckToggle:function(e){var t=$(e.currentTarget).val();this._externalCalendarsCollection.each((function(e){e.get("calendarId")==t&&e.set("isChecked",!e.get("isChecked"))}))},_subscribedCalendarCheckToggle:function(e){var t=$(e.currentTarget).val();this._subscribedCalendarsCollection.each((function(e){e.get("calendarId")==t&&e.set("isChecked",!e.get("isChecked"))}))},template:i.template(s),templateContext:function(){return{externalCalendars:this._externalCalendarsCollection,internalCalendars:this._internalCalendarsCollection,subscribedCalendars:this._subscribedCalendarsCollection}},initialize:function(e){this._bandNo=e.bandNo,this._externalCalendarsCollection=e.externalCalendarsCollection,this._internalCalendarsCollection=e.internalCalendarsCollection,this._subscribedCalendarsCollection=e.subscribedCalendarsCollection,this._internalCalendarCheckList=[],this._externalCalendarCheckList=[],this._subscribedCalendarCheckList=[]}}),d=Backbone.Model.extend({defaults:{calendarId:"",calendarName:"",isDefault:!1,color:null,type:null,isChecked:!0},initialize:function(e){},parse:function(e){return{calendarId:(e=l.camelizeKeys(e)).isDefault?"default":e.calendarId,calendarName:e.name?e.name:e.calendarName,isDefault:!!e.isDefault&&e.isDefault,color:i.isEmpty(e.color)?"00b994":e.color,type:e.type?e.type:"subscribedCalendars",isChecked:e.isChecked}},getCalendarTypeAndId:function(){return this.get("type")+"_"+this.get("calendarId")}}),c=Backbone.Collection.extend({model:d});return r.buildAsyncLayer=function(e,t){return a.getCalendarsWithSubscribed(e).then(i.bind((function(n){var s,a,l,d=n.externalCalendars,h=n.internalCalendars,u=n.subscribedCalendars;t&&(i.each(d,(function(e){i.indexOf(t.externalCalendarCheckList,e.calendar_id)>=0?i.extend(e,{isChecked:!0}):i.extend(e,{isChecked:!1})})),i.each(h,(function(e){i.indexOf(t.internalCalendarCheckList,e.calendar_id)>=0||e.is_default&&i.indexOf(t.internalCalendarCheckList,"default")>=0?i.extend(e,{isChecked:!0}):i.extend(e,{isChecked:!1})})),i.each(u,(function(e){i.indexOf(t.subscribedCalendarCheckList,e.calendar_id)>=0?i.extend(e,{isChecked:!0}):i.extend(e,{isChecked:!1})}))),s=new c(d,{parse:!0}),a=new c(h,{parse:!0}),l=new c(u,{parse:!0});var p=new r({bandNo:e,externalCalendarsCollection:s,internalCalendarsCollection:a,subscribedCalendarsCollection:l});return o.open(p),p}),this))},r}.call(t,n,t,e))||(e.exports=i)},3385:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="modalHeader">\n        <h1 class="title"><%- IM("band.calendar.category") %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap -spaceNone -mH440">\n            <div class="calendarCategory">\n            <h2 class="title"><%- IM("bandsetting.calendar.band_calendar.title") %></h2>\n            <ul class="listLine gMal20 gMar20">\n                <% internalCalendars.each(function(internalCalendar){ %>\n                <li class="tLine">\n                    \x3c!-- 체크 아이콘 style background에 get_calendars API resulteData.internal_calendars.color 배경 값을 넣어준다 --\x3e\n                    <label class="flexList -h50" for="calendar_<%- internalCalendar.getCalendarTypeAndId() %>">\n                        <span class="uCheck -checkbox -noLabel">\n                        <input type="checkbox" id="calendar_<%- internalCalendar.getCalendarTypeAndId() %>" value="<%- internalCalendar.get(\'calendarId\') %>" class="checkInput _internalCalendarCheck" <% if(internalCalendar.get(\'isChecked\')){ %>checked="checked"<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape  -calendarColor" style="background-color:#<%- internalCalendar.get(\'color\') %>"></span>\n                        </span>\n                        </span>\n                        <span class="text"><%- internalCalendar.get(\'calendarName\') %></span>\n                    </label>\n                </li>\n                <% }); %>\n            </ul>\n            <% //국가별 캘린더가 있는 경우만 노출한다. %>\n            <% if (!subscribedCalendars.isEmpty()) { %>\n            <h2 class="title"><%- IM("band.calendar.subscribed_national_calendars") %></h2>\n            <ul class="listLine gMal20 gMar20">\n                <% subscribedCalendars.each(function(subscribedCalendar){ %>\n                <li class="tLine">\n                    \x3c!-- 체크 아이콘 style background에 get_calendars API resulteData.internal_calendars.color 배경 값을 넣어준다 --\x3e\n                    <label class="flexList -h50" for="calendar_<%- subscribedCalendar.getCalendarTypeAndId() %>">\n                        <span class="uCheck -checkbox -noLabel">\n                        <input type="checkbox" id="calendar_<%- subscribedCalendar.getCalendarTypeAndId() %>" value="<%- subscribedCalendar.get(\'calendarId\') %>" class="checkInput _subscribedCalendarCheck" <% if(subscribedCalendar.get(\'isChecked\')){ %>checked="checked"<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape  -calendarColor" style="background-color:#<%- subscribedCalendar.get(\'color\') %>"></span>\n                        </span>\n                        </span>\n                        <span class="text"><%- subscribedCalendar.get(\'calendarName\') %></span>\n                    </label>\n                </li>\n                <% }); %>\n            </ul>\n            <% } %>\n            <% //외부 캘린더는 기본으로 제공되지 않기 때문에 있을때만 노출한다. %>\n            <% if (!externalCalendars.isEmpty()) { %>\n            <h2 class="title"><%- IM("band.calendar.external_calendars") %></h2>\n            <ul class="listLine gMal20 gMar20">\n                <% externalCalendars.each(function(externalCalendar){ %>\n                <li class="tLine">\n                    \x3c!-- 체크 아이콘 style background에 get_calendars API resulteData.internal_calendars.color 배경 값을 넣어준다 --\x3e\n                    <label class="flexList -h50" for="calendar_<%- externalCalendar.getCalendarTypeAndId() %>">\n                        <span class="uCheck -checkbox -noLabel">\n                        <input type="checkbox" id="calendar_<%- externalCalendar.getCalendarTypeAndId() %>" value="<%- externalCalendar.get(\'calendarId\') %>" class="checkInput _externalCalendarCheck" <% if(externalCalendar.get(\'isChecked\')){ %>checked="checked"<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape  -calendarColor" style="background-color:#<%- externalCalendar.get(\'color\') %>"></span>\n                        </span>\n                        </span>\n                        <span class="text"><%- externalCalendar.get(\'calendarName\') %></span>\n                    </label>\n                </li>\n                <% }); %>\n            </ul>\n            <% } %>\n        </div>\n        </div>\n    </div>\n    <footer class="modalFooter -tLongLine">\n        <button type="button" class="uButton -cancel _btnCancel"><%- IM("ui.label.cancel") %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%- IM("ui.label.confirm") %></button>\n    </footer>\n</div>'},3386:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(16),o=n(3387),l=n(159),r=n(570),d=n(526),c=n(3388),h=n(567),u=n(488),p=n(26);function m(e){for(var t=0;t<e.length;t++)if(!e[t])return t;return e.length}function _(e,n,i){var s,o,l,d=a(),c=a(t.first(e).date).startOf("day"),h=(s={startAt:n.get("startAt"),endAt:n.get("endAt")},l=a(s.startAt),o=s.endAt?a(s.endAt):a(l),r.extractOccuredUnitInDateRange(l,o,"day")),u=t.first(h),p=t.last(h);t.each(h,(function(t){var s,a=t.diff(c,"day"),o=p.diff(c,"day");a<0||a>=e.length||(n.get("calendar")&&n.get("calendar").get("color")&&(s=n.get("calendar").get("color")),e[a].position[i]={name:n.get("name"),scheduleId:n.get("scheduleId"),calendarColor:s,isMoreOneDay:h.length>1,scheduleType:n.get("scheduleType"),passedEvent:d.isAfter(p,"day"),scheduleDayIndex:t.diff(u,"day"),endDayCalendarIndex:o})}))}function b(e){var n,i,s,a,o={};for(function(e){t.each(e,(function(e){e.position=[]}))}(e),n=0;n<e.length;n++)for(i=e[n],s=0;s<i.events.length;s++){if(!o[(a=i.events[s]).get("scheduleId")])_(e,a,m(i.position)),o[a.get("scheduleId")]=a}return e}var g=s.View.extend({tagName:"DIV",className:"calendarView",attributes:{"data-viewname":"DBandCalendarScheduleMonthlyView"},template:t.template(o),templateContext:function(){return t.extend({moment:a,isScheduleTypeNormal:function(e){return e==d.NORMAL},isScheduleTypeExternal:function(e){return e==d.EXTERNAL},daysOfTheWeek:h.makeDayNameArrayOrderBy(this._startDayNum,"dd"),numberOfRows:this.collection.length/7,days:b(this.collection.toJSON()),currentMonth:this.collection.getCurrentMonth()})},behaviors:[l],ui:{moreButton:"._moreButton",moreRegion:"._moreRegion",schedule:"._schedule",btnCreateSchedule:"._btnCreateSchedule",closeMoreViewButton:"._closeMoreViewButton",moreView:"._moreView"},regions:{moreRegion:{el:"@ui.moreRegion",replaceElement:!0}},events:{"click @ui.moreButton":function(e){e.preventDefault(),e.stopPropagation();var t=i(e.currentTarget),n=parseInt(t.attr("data-dayindex"));if(this._dayIndex==n)this._clearMoreLayer();else{this._clearMoreLayer(),this._dayIndex=n;var s=this._getDayRenderingData(n);this.showChildView("moreRegion",c.build(s)),this._locateLayer(e.currentTarget),t.addClass(u.ELEMENT.ON)}},"click @ui.btnCreateSchedule":function(e){e.preventDefault(),e.stopPropagation(),this.spawn(l.MSG.CALENDAR_CREATE_SCHEDULE,{targetDate:a(i(e.currentTarget).data("date"),"YYYY-MM-DD")})},"click @ui.schedule":function(e){e.preventDefault(),e.stopPropagation();var t=i(e.currentTarget).attr("data-scheduleId");this._openSchedule(t)},"click @ui.closeMoreViewButton":function(){return this._clearMoreLayer(),!1},"click @ui.moreView":function(){return!1}},_openSchedule:function(e){this.trigger("openSchedule",{scheduleId:e})},initialize:function(e){this._startDayNum=e.startDayNum,this.listenTo(p.getDGlobalChannel(),p.EVENT.HTML_CLICK,this._clearMoreLayer)},_clearMoreLayer:function(){var e=this.getRegion("moreRegion");e.hasView()&&(this._dayIndex=-1,this.ui.moreButton.removeClass(u.ELEMENT.ON),e.empty())},_locateLayer:function(e){var t=i(e),n=t.width()/2-1,s=t.offset(),a=this.$el.offset(),o=s.left+n-a.left,l=s.top-a.top;t.addClass(u.ELEMENT.ON);var r=this.getChildView("moreRegion").$el,d=r.height(),c=o-r.width()/2+5,h=l-d-5-2;d>l&&(h=l+t.height()+5+2+2,r.addClass(u.ELEMENT.UP)),r.css({top:h,left:c})},_getDayRenderingData:function(e){return b(this.collection.toJSON())[e]},renderCalendarMonthlyView:function(){this.render()}});return g.build=function(e,t){return new g({collection:e,startDayNum:t})},g}.call(t,n,t,e))||(e.exports=i)},3387:function(e,t){e.exports='<table class="calendar">\n<thead>\n<tr>\n    <% for(var i = 0; i < daysOfTheWeek.length; i++) { %>\n    <th><%= daysOfTheWeek[i] %></th>\n    <% } %>\n</tr>\n</thead>\n<tbody>\n<%\n    // event config\n    var eventRowSize = 2;\n    var today = moment();\n%>\n<% for(var i = 0; i < numberOfRows; i++){ %>\n<tr>\n    <% for(var j = 0; j < 7; j++){\n        var d = j + i * 7;\n        var tdClass = "";\n        var isPastDay = days[d].date.isBefore(today, \'day\');\n\n        if (days[d].date.isBefore(currentMonth, \'month\')) {\n            tdClass = "prevMonth";\n        } else if (days[d].date.isAfter(currentMonth, \'month\')) {\n            tdClass = "nextMonth";\n        } else if (isPastDay){\n            tdClass = "passDay";\n        }\n        var thisDay = {};\n        thisDay.isToday = days[d].date.isSame(today, \'day\');\n        thisDay.isMoreEventDay = days[d].position.length > eventRowSize;\n        thisDay.showingEventLength = eventRowSize;\n        thisDay.hidingEventLength = days[d].position.length - thisDay.showingEventLength;\n    %>\n    <td class="<%=tdClass ? tdClass : \'\' %> <%=thisDay.isToday ? \'todayWrap\' : \'\' %>">\n        <div class="dayWrap <%=thisDay.isToday ? \'today sf_tOutline sf_tAfterBg\' : \'\' %>">\n            <time datetime="<%=days[d].date.format(\'YYYY-MM-DD\')%>" class="day"><%- days[d].date.date() %></time>\n            <button type="button" class="btnCreateSchedule _btnCreateSchedule" data-date="<%=days[d].date.format(\'YYYY-MM-DD\')%>"><span class="gSrOnly"><%- IM("schedule.list.button.add_schedule") %></span></button>\n\n            <% for(var eventRow = 0; eventRow < thisDay.showingEventLength ; eventRow++) { %>\n                <% var positionEvent = days[d].position[eventRow];\n\n                    if (!positionEvent) {\n                        continue;\n                    }\n\n                   var isSkip = false,\n                    colspanSize = 1,\n                    overToNextWeek = false,\n                    overFromPrevWeek = false,\n                    isBlock = positionEvent.isMoreOneDay;\n\n                    if (positionEvent.scheduleDayIndex != 0 && j != 0) {\n                        isSkip = true;\n                    } else {\n\n                        if (positionEvent.scheduleDayIndex != 0) {\n                            overFromPrevWeek = true;\n                        }\n\n                        if (positionEvent.endDayCalendarIndex > (((i + 1) * 7) - 1)) { // 토요일 over\n                            colspanSize = 6 - j;\n                            overToNextWeek = true;\n                        } else if (positionEvent.endDayCalendarIndex == (((i + 1) * 7) - 1)) { // 토요일까지\n                            colspanSize = 6 - j;\n                        } else {\n                            colspanSize = positionEvent.endDayCalendarIndex - d;\n                        }\n                        colspanSize++;\n                    }\n                %>\n                <% if(!isSkip) { %>\n            <a href="#" role="button" data-scheduleId="<%=positionEvent.scheduleId%>" class="scheduleItem <%= (!isPastDay && isBlock) ? \'sf_bg\' : \'\' %> _schedule" data-index="<%=(eventRow + 1)%>" <% if(isBlock) {  %> data-days="true" <%  } %> data-continue="<%-(overFromPrevWeek ? \'prev\' : \'\') %> <%-(overToNextWeek ? \'next\' : \'\') %>"  style="width:<%=colspanSize * 100 %>%" title="<%-positionEvent.name%>">\n                            <span class="boundaryLine"></span>\n                    <% if (isScheduleTypeNormal(positionEvent.scheduleType) || isScheduleTypeExternal(positionEvent.scheduleType)) { %>\n                        <% if (positionEvent.calendarColor) { %>\n                            <span class="scheduleColor" style="background:#<%- positionEvent.calendarColor %>">\n                                <span class="gSrOnly">#<%- positionEvent.calendarColor %></span>\n                            </span>\n                        <% } else { %>\n                            <span class="scheduleColor sf_bg">\n                                <span class="gSrOnly"></span>\n                            </span>\n                         <% } %>\n                <% } %>\n                <%-positionEvent.name%>\n            </a>\n                <% } %>\n            <% } %>\n            <% if (thisDay.isMoreEventDay) { %>\n            <button type="button" class="more _moreButton" data-dayindex="<%=d%>"><%=thisDay.hidingEventLength%></button>\n            <% } %>\n        </div>\n    </td>\n    <% } %>\n</tr>\n<% } %>\n</tbody>\n</table>\n\n<div class="lySchedule _moreRegion" style="display:none;"></div>\n'},3388:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(4),a=n(3389),o=n(570),l=n(9),r=n(526),d=s.View.extend({tagName:"article",attributes:{"data-viewname":"DBandCalendarScheduleMonthlyMoreView"},className:"lySchedule _moreView",template:t.template(a),templateContext:{isScheduleTypeNormal:function(e){return e==r.NORMAL},isScheduleTypeExternal:function(e){return e==r.EXTERNAL},makeDateMessage:function(e){return l.format.date(e,"month_day_week")}}});return d.build=function(e){return new d({model:new i.Model({events:o.adjustEventListOrder(e.events,e.date),targetDate:e.date})})},d}.call(t,n,t,e))||(e.exports=i)},3389:function(e,t){e.exports='<h1 class="title"><strong><%= makeDateMessage(targetDate) %></strong></h1>\n\n<div class="main">\n    <div class="list">\n<%\nfor(var i = 0; i < events.length; i++) {\n    var eachEvent = events[i];\n\n    if (!eachEvent) {\n        continue;\n    }\n\n    var classValue = \'scheduleItem\';\n    var dataDaysAttr = \'\';\n    var scheduleType = eachEvent.get(\'scheduleType\');\n\n    if ( isScheduleTypeNormal(scheduleType) ) {\n        if ( eachEvent.moreOptions.isMoreOneDay ) {\n            dataDaysAttr = \'data-days="true"\';\n\n            if (!eachEvent.moreOptions.passedEvent) {\n                classValue += \' sf_bg\';\n            }\n        }\n    }\n\n    var calendarColor = null;\n    if (eachEvent.get(\'calendar\') && eachEvent.get(\'calendar\').get(\'color\')) {\n        calendarColor = eachEvent.get(\'calendar\').get(\'color\');\n    }\n\n    var dataContinueAttr = \'\';\n\n    if (eachEvent.moreOptions.prevDayExist && eachEvent.moreOptions.nextDayExist ) {\n        dataContinueAttr = \'data-continue="prev next"\';\n    } else if (eachEvent.moreOptions.prevDayExist) {\n        dataContinueAttr = \'data-continue="prev"\';\n    } else if (eachEvent.moreOptions.nextDayExist) {\n        dataContinueAttr = \'data-continue="next"\';\n    }\n%>\n        <a href="#" data-scheduleId="<%=eachEvent.get(\'scheduleId\') %>" class="_schedule">\n            <span><%= eachEvent.moreOptions.dailyScheduleTimeMessage %></span>\n            <strong>\n                <span <%= dataContinueAttr %> <%= dataDaysAttr %> class="<%= classValue %>">\n                <% if (isScheduleTypeNormal(scheduleType) || isScheduleTypeExternal(scheduleType)) { %>\n                    <% if (calendarColor) { %>\n                        <span class="scheduleColor" style="background:#<%- calendarColor %>">\n                            <span class="gSrOnly">#<%- calendarColor %></span>\n                        </span>\n                    <% } else { %>\n                        <span class="scheduleColor sf_bg">\n                            <span class="gSrOnly"></span>\n                        </span>\n                    <% } %>\n                <% } %>\n                <%-eachEvent.get(\'name\') %>\n                </span>\n            </strong>\n        </a>\n<% } %>\n    </div>\n</div>\n<button type="button" class="btnLyClose uButton -iconCloseS _closeMoreViewButton"><span class="gSrOnly"><%= IM(\'ui.label.close_layer\') %></span></button>\n'},3390:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3391),a=t.CollectionView.extend({tagName:"ul",className:"dailyScheduleList",attributes:{"data-viewname":"DBandCalendarScheduleDailyView"},childView:s,childViewTriggers:{openSchedule:"openSchedule"},onRender:function(){this.$el.height()},filter:function(e,t,n){return n.getCurrentMonth().isSame(e.get("date"),"month")&&!i.isEmpty(e.get("events"))},renderCalendarDailyView:function(){this.render()}});return a.build=function(e){return new a({collection:e})},a}.call(t,n,t,e))||(e.exports=i)},3391:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(9),a=n(16),o=n(1625),l=n(3392);return t.View.extend({tagName:"li",className:function(){var e=a();return this.options.model.get("date").isBefore(e,"day")?"scheduleListItem -passDay":"scheduleListItem"},attributes:{"data-viewname":"DBandCalendarScheduleDailyItemView"},template:i.template(l),ui:{eventListRegion:"._eventListRegion"},regions:{eventListRegion:{el:"@ui.eventListRegion",replaceElement:!0}},childViewTriggers:{openSchedule:"openSchedule"},initialize:function(e){var t=e.model.get("date"),n=e.model.get("events");this.scheduleDate=t,this.eventListView=o.build({scheduleDate:t,scheduleEvents:n})},serializeData:function(){return{dateTime:s.format.date(this.scheduleDate,"short_noweekday"),day:this.scheduleDate.format("D"),dayName:this.scheduleDate.format("dddd")}},onRender:function(){this.eventListView.render()},onAttach:function(){this.getRegion("eventListRegion").show(this.eventListView)}})}.call(t,n,t,e))||(e.exports=i)},3392:function(e,t){e.exports='<time class="date" datetime="<%= dateTime %>">\n    <span><%= day %> <em><%= dayName %></em></span>\n</time>\n<div class="_eventListRegion"></div>'},3393:function(e,t){e.exports='<h1 class="gSrOnly"><%= IM("schedule.title") %></h1>\n<div class="_notificationRegion"></div>\n<div class="calendarViewWrap gContentCardShadow">\n    <div class="_calendarHeaderRegion"></div>\n    <div class="_monthlyRegion"></div>\n</div>\n<div class="scheduleList gContentCardShadow">\n    <h2 class="gSrOnly"><%= IM("schedule.txt.schedule_list") %></h2>\n    <div class="_dailyRegion"></div>\n</div>'},3394:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(16),a=n(4),o=n(9),l=n(3395),r=n(499),d=n(498),c=n(82),h=n(555),u=n(160),p=n(543),m=n(155),_=n(538),b=n(1746),g=n(1142),f=n(153),v=n(589),A=n(3396),M=n(2075),C=n(3398),I=n(3400),E=n(1881),y=n(1598),T=n(3402),N=n(1089),D=n(514),S=n(562),w=n(935),B=n(907),L=n(527),P=n(3404),O=n(3406),R=n(3408),x=n(1237),k=n(1243),V=n(1022),U=n(804),F=n(853),G=n(1550),W=n(1165),z=n(3410),H=n(510),Y=n(26),K=n(158),j=n(1097),J=n(22),Q=n(157),q=n(3412),Z=n(85),X=n(523),$=n(154),ee=n(53),te=n(590),ne=n(166),ie=n(167),se=a.View.extend({behaviors:[G],attributes:{"data-viewname":"DGroupBandSettingHomeView"},tagName:"section",className:"sSettingBand gContentCardShadow",getTemplate:function(){return this._fetched?i.template(l):i.template(d)},templateContext:function(){return{nl2br:K.nl2br}},ui:{btnProfile:"._btnProfile",btnPageConnection:"._btnPageConnection",btnNewNotification:"._btnNewNotification",btnEmailNotification:"._btnEmailNotification",emailNotificationStatus:"._emailNotificationStatus",chkChatInvitation:"._chkChatInvitation",chkBandInvitation:"._chkBandInvitation",btnRegisterBusiness:"._btnRegisterBusiness",chkJoinMethod:"._chkJoinMethod",chkJoinQuestion:"._chkJoinQuestion",joinQuestionTextarea:"._joinQuestionTextarea",chkMemberJoinPost:"._chkMemberJoinPost",btnMemberPrivacyOption:"._btnMemberPrivacyOption",btnDelegateColeader:"._btnDelegateColeader",btnDelegateLeader:"._btnDelegateLeader",btnManageTag:"._btnManageTag",chkSecretCommentUse:"._chkSecretCommentUse",chkPopularPost:"._chkPopularPost",btnLeaveBand:"._btnLeaveBand",btnDeleteBand:"._btnDeleteBand",btnDeleteBandCancel:"._btnDeleteBandCancel",btnReportBand:"._btnReportBand",chkMemberKidJoin:"._chkMemberKidJoin",chkDefaultAllowBandInvitation:"._chkDefaultAllowBandInvitation",btnCopyBandSetting:"._btnCopyBandSetting",chkOpenMission:"._chkOpenMission",btnBandForKidsOff:"._btnBandForKidsOff",btnBandForKidsOffCancel:"._btnBandForKidsOffCancel",btnContentCleanFilterLayer:"._btnContentCleanFilterLayer",checkboxShowRecentPost:"#showRecentPost",bandCoverUpdateLink:"._bandCoverUpdateLink",bandIntroEditLink:"._bandIntroEditLink",wrapShowRecentPostSettingGuide:"._wrapShowRecentPostSettingGuide",btnCloseShowRecentPostSettingGuide:"._btnCloseShowRecentPostSettingGuide"},regions:{missionRemind:{el:"._missionRemind",replaceElement:!0}},events:{"click @ui.btnProfile":"_openProfileLayer","click @ui.btnPageConnection":"_openPageConnectionSettingLayer","click @ui.btnNewNotification":"_openNewsNotificationSettingLayer","click @ui.btnEmailNotification":"_openEmailNotificationSettingLayer","click @ui.chkChatInvitation":"_setChatInvitation","click @ui.chkBandInvitation":"_setBandInvitation","click @ui.btnRegisterBusiness":"_openBusinessIdentificationInfoSettingLayer","click @ui.chkJoinMethod":"_setNeedApproval","click @ui.chkJoinQuestion":"_setJoinQuestion","click @ui.joinQuestionTextarea":"_openJoinQuestionSettingLayer","keydown @ui.joinQuestionTextarea":function(e){e.keyCode===h.ENTER&&this._openJoinQuestionSettingLayer()},"click @ui.chkMemberJoinPost":"_setMemberJoinPost","click @ui.btnMemberPrivacyOption":"_openMemberPrivacyOptionSettingLayer","click @ui.btnDelegateLeader":"_openLeaderDelegationSettingLayer","click @ui.btnDelegateColeader":"_openDelegateColeaderSettingLayer","click @ui.btnManageTag":"_openTagSettingLayer","click @ui.btnLeaveBand":"_openBandLeaveSettingLayer","click @ui.btnDeleteBand":"_openBandDeleteSettingLayer","click @ui.btnDeleteBandCancel":"_openBandDeleteCancelLayer","click @ui.btnReportBand":"_openBandReport","click @ui.chkSecretCommentUse":"_setSecretCommentUse","click @ui.chkPopularPost":"_setBandPopularPostShow","click @ui.chkMemberKidJoin":"_setKidJoin","click @ui.chkDefaultAllowBandInvitation":"_setDefaultAllowBandInvitation","change @ui.chkOpenMission":"_setOpenMission","click @ui.btnCopyBandSetting":"_openCopyBandSettingLayer","click @ui.btnBandForKidsOff":"_openBandForKidsOffView","click @ui.btnBandForKidsOffCancel":"_openBandForKidsOffCancelView","click @ui.btnContentCleanFilterLayer":"_openContentCleanFilterLayer","click @ui.checkboxShowRecentPost":"_setShowRecentPost","click @ui.bandCoverUpdateLink, @ui.bandIntroEditLink":function(e){te.isContentCreationPunished()&&e.preventDefault()},"click @ui.btnCloseShowRecentPostSettingGuide":"_closeShowRecentPostSettingGuide"},initialize:function(e){this._fetched=!1,this._bandData=e.bandData,this.bandNo=this._bandData.getBandNo(),this.bandMemberConfigModel=new g,this._participatedMissionCount=0,this._isShowRecentPostSettingGuideClosed=ie.getCurrentUserEnvStorageHelper([ne.ShowRecentPostSettingGuideClosed],!1)},serializeData:function(){return this._fetched?this._getSettingItems():{_loading_size:r.Size.MEDIUM}},onAttach:function(){this._bandData.isBandSettingPermitted()||f.GROUP_BAND_HOME.goDForced({band_no:this.bandNo});var e=[b.build(this.bandNo),_.getBandOption(this.bandNo),this.bandMemberConfigModel.fetchMemberConfig(this.bandNo),this._fetchParticipatedMissionCount()];return t.when.apply(t,e).then(i.bind((function(e,t,n,i){this._fetched=!0,this.bandNotificationModel=e,this.bandOptionModel=t,this.notEndedMission=this.bandOptionModel.getNotEndedMissionCount(),this.render()}),this))},onDomRefresh:function(){var e=ee.getCurrentRouteInfo().params.target,n=t("#"+e);n.length>0&&t(window).scrollTop(n.position().top)},_setOpenMission:function(){var e=this.getUI("chkOpenMission").is(":checked");_.SETTING.setOpenMission(this.bandNo,e)},_getSettingItems:function(){var e=[{cid:this.cid},{userName:i.escape(this.bandMemberConfigModel.getUserName()),profileImageUrl:this._getProfileImageUrl(),profileInnerClass:c.makeProfileInnerClass(this._getProfileImageUrl()),isPermittedModifyOpenBirthday:this.bandMemberConfigModel.isPermittedModifyOpenBirthday(),isPermittedModifyOpenCellphone:this.bandMemberConfigModel.isPermittedModifyOpenCellphone(),openCellphoneRolesLabel:this._getOpenCellphoneRolesLabels(),isOpenUserBirthday:this.bandMemberConfigModel.isOpenUserBirthday()},{isPermittedRemovePageLink:this.bandOptionModel.isPermittedRemovePageLink(),isExistPageLink:this.bandOptionModel.isExistPageLink()},{newsNotificationLabel:this.bandNotificationModel.getNewsNotificationLabel(),isReceiveEmailNotification:this.bandNotificationModel.isReceiveEmailNotification()},{isPermittedModifyAllowChatInvitation:this.bandMemberConfigModel.isPermittedModifyAllowChatInvitation(),isAllowChatInvitation:this.bandMemberConfigModel.isAllowChatInvitation()},{isPermittedModifyAllowOtherBandInvitation:this.bandMemberConfigModel.isPermittedModifyAllowOtherBandInvitation(),isAllowOtherBandInvitation:this.bandMemberConfigModel.isAllowOtherBandInvitation()},{participatedMissionCount:this._participatedMissionCount,participatedMissionUrl:f.GROUP_BAND_PARTICIPATED_MISSIONS.makeUrl({band_no:this.bandNo})},{isPermittedManageNameCover:this.bandOptionModel.isPermittedManageNameCover(),bandCoverUpdateUrl:f.GROUP_BAND_COVER_UPDATE.makeUrl({band_no:this.bandNo})},{isExistPropsOpenType:this.bandOptionModel.isExistPropsOpenType(),bandOpenTypeUrl:f.GROUP_BAND_SETTING_BAND_TYPE.makeUrl({band_no:this.bandNo}),isClosedBand:this.bandOptionModel.isClosedBand(),bandOpenTypeLabel:this._getBandOpenTypeLabel(),showRecentPost:this.bandOptionModel.showRecentPost(),isShowRecentPostSettingGuideOpened:this._isShowRecentPostSettingGuideOpened()},{isPermittedManageDescription:this.bandOptionModel.isPermittedManageDescription(),manageIntroDescriptionUrl:f.GROUP_BAND_SETTING_INTRO.makeUrl({band_no:this.bandNo}),introDescription:this.bandOptionModel.getDescription()},{canRegisterBusinessIdentificationInfo:this.bandOptionModel.canRegisterBusinessIdentificationInfo()},{isExistPropsUnfixQuota:this.bandOptionModel.isExistPropsUnfixQuota(),isQuotaUnfixed:this.bandOptionModel.isQuotaUnfixed(),bandMemberMaxCount:p.BAND_TYPE_CONDITION.BAND_MEMBER_MAX_COUNT,bandQuotaUnfixedSetUrl:f.GROUP_BAND_SETTING_QUOTA_UNFIXED.makeUrl({band_no:this.bandNo})},{isExistPropsJoinMethod:this.bandOptionModel.isExistPropsJoinMethod(),isNeedJoinApproval:this.bandOptionModel.isNeedJoinApproval()},{isExistPropsAskJoinQuestion:this.bandOptionModel.isExistPropsAskJoinQuestion(),isAskJoinQuestion:this.bandOptionModel.isAskJoinQuestion(),maxLengthJoinQuestion:p.BAND_JOIN_CONDITION.JOIN_QUESTION_MAX_LENGTH,joinQuestion:this.bandOptionModel.getJoinQuestion(),joinConditionLabel:this._getJoinConditionLabel()},{isPermittedManageJoinAssertion:this.bandOptionModel.isPermittedManageJoinAssertion(),bandJoinConditionUrl:f.GROUP_BAND_SETTING_JOIN_CONDITION.makeUrl({band_no:this.bandNo})},{isPermittedConfigureMemberJoinPost:this.bandOptionModel.isPermittedConfigureMemberJoinPost(),isPostBandJoinEnabled:this.bandOptionModel.isPostBandJoinEnabled()},{isPermittedConfigureMemberPermission:this.bandOptionModel.isPermittedConfigureMemberPermission(),bandMemberPermissionUrl:f.GROUP_BAND_SETTING_MEMBER_PERMISSION.makeUrl({band_no:this.bandNo})},{isPermittedManagePersonalInfo:this.bandOptionModel.isExistPropsOpenBirthday()||this.bandOptionModel.isExistPropsOpenCellphone()||this.bandOptionModel.isExistPropsPostMembersBirthday()},{isExistDefaultAllowBandInvitation:this.bandOptionModel.isExistDefaultAllowBandInvitation(),isDefaultAllowBandInvitation:this.bandOptionModel.isDefaultAllowBandInvitation()},{isPermittedManageCoLeader:this.bandOptionModel.isPermittedManageCoLeader(),bandManageCoLeaderUrl:f.GROUP_BAND_SETTING_MANAGE_COLEADER.makeUrl({band_no:this.bandNo})},{isPermittedDelegateLeader:this.bandOptionModel.isPermittedDelegateLeader(),isPermittedDelegateCoLeader:this.bandOptionModel.isPermittedDelegateCoLeader()},{isPermittedManageMember:this.bandOptionModel.isPermittedManageMember(),bandManageMemberUrl:f.GROUP_BAND_SETTING_MEMBER_WITHDRAWAL.makeUrl({band_no:this.bandNo})},{isPermittedOperationManageMemberGroup:this.bandOptionModel.isPermittedManageMemberGroup(),manageMemberGroupUrl:f.GROUP_BAND_MEMBER_GROUPS.makeUrl({band_no:this.bandNo})},{isPermittedManagePinnedHashTag:this.bandOptionModel.isPermittedManagePinnedHashTag()},{isExistPropsIsSecretCommentEnabled:this.bandOptionModel.isExistPropsIsSecretCommentEnabled(),isSecretCommentEnabled:this.bandOptionModel.isSecretCommentEnabled()},{isPublicBand:this.bandOptionModel.isPublicBand(),isClosedBand:this.bandOptionModel.isClosedBand(),isShowPopularPost:this.bandOptionModel.isShowPopularPost()},{isPermittedRegisterCalendar:this.bandOptionModel.isPermittedRegisterCalendar(),bandScheduleUrl:f.GROUP_BAND_SETTING_SCHEDULE.makeUrl({band_no:this.bandNo}),bandExportCalendarCategoryUrl:f.GROUP_BAND_SETTING_EXPORT_CALENDAR.makeUrl({band_no:this.bandNo})},{isPermittedConfigureChat:this.bandOptionModel.isPermittedConfigureChat(),bandChattingUrl:f.GROUP_BAND_SETTING_CHATTING.makeUrl({band_no:this.bandNo})},{isPermittedConfigureContentsQuota:this.bandOptionModel.isPermittedConfigureContentsQuota(),remainedQuotaInfo:this._getRemainedQuotaMessage(),bandQuotaUrl:f.GROUP_BAND_SETTING_MEDIA_QUOTA.makeUrl({band_no:this.bandNo})},{isPermittedDeleteBand:this.bandOptionModel.isPermittedDeleteBand(),canShowDeleteBand:this._canShowDeleteBand(),canShowDeleteBandCancel:this._canShowDeleteBandCancel(),reservedClosureDurationText:this._getReservedClosureDurationText(),isPermittedReportBand:this.bandMemberConfigModel.isPermittedReportBand()},{isEnableBandPhotoPrint:this.bandMemberConfigModel.isEnableBandPhotoPrint()},{isPermittedAccessMemberActivityHistories:this.bandOptionModel.isPermittedAccessMemberActivityHistories(),bandAccessMemberActivityHistoriesUrl:f.GROUP_BAND_SETTING_MEMBER_ACTIVITY_HISTORIES.makeUrl({band_no:this.bandNo})},{isPermittedBandMission:this._canManageMission(),bandMissionSettingUrl:f.GROUP_BAND_SETTING_MISSION.makeUrl({band_no:this.bandNo}),notEndedMissionCountText:this.notEndedMission&&this.notEndedMission>0?this.notEndedMission:"",showOpenMission:this._canManageMission()&&this.bandOptionModel.isExistOpenMission(),isOpenMission:this._canManageMission()&&this.bandOptionModel.isOpenMission()},{isPermittedManageMedia:this.bandOptionModel.isExistAttributeMemberMediaDownloadEnabled(),bandManageMediaUrl:f.GROUP_BAND_SETTING_MANAGE_MEDIA.makeUrl({band_no:this.bandNo})},{isPermittedManageBandDoNotDisturb:this.bandOptionModel.isPermittedManageBandDoNotDisturb(),doNotDisturbDesc:W.makeDoNotDisturbTimeMessageForSettingDescription(m.get(this.bandNo).getBandDoNotDisturb()),bandDoNotDisturbUrl:f.GROUP_BAND_SETTING_DO_NOT_DISTURB.makeUrl({band_no:this.bandNo})},{isExistContentCleanFilter:this.bandOptionModel.isExistContentCleanFilterLevel()},{isExistBandForKidsEnabled:this.bandOptionModel.isExistBandForKidsEnabled(),isBandForKidsEnabled:this.bandOptionModel.isBandForKidsEnabled(),reservedBandForKidsOffAt:this.bandOptionModel.getReservedBandForKidsOffAt(),bandForKidsOffCancelRemainingTimeLabel:this._getBandForKidsOffCancelRemainingTimeLabel(),isEnabledReservedBandForKidsOffCancel:!i.isNull(this._getBandForKidsOffCancelRemainingTime().value)},{isPermittedCopyBandOption:this.bandOptionModel.isPermittedCopyBandOption()}],t={};return i.each(e,(function(e){t=i.extend(t,e)})),t},_canManageMission:function(){return m.get(this.bandNo).canManageMission()},_getProfileImageUrl:function(){var e=this.bandMemberConfigModel.getProfileImageUrl();return e?c.makeProfileMiddleThumbnailUrl(e):null},_getOpenCellphoneRolesLabels:function(){var e={};return e[V.ANYONE]=IM("bandsetting.open_cellphone_roles.member_config.display_txt.anyone"),e[V.UNTIL_COLEADER]=IM("bandsetting.open_cellphone_roles.member_config.display_txt.until_coleader"),e[V.ONLY_LEADER]=IM("bandsetting.open_cellphone_roles.member_config.display_txt.only_leader"),e[V.NO_ONE]=IM("bandsetting.open_cellphone_roles.member_config.display_txt.none"),e[k.getAcceptableOpenCellphoneMemberRoles(this.bandMemberConfigModel.getModifyOpenCellphonePermittedOperations(),this.bandMemberConfigModel.getOpenCellphoneRoles())]},_openProfileLayer:function(){v.openEditProfileView(this.bandNo)},_openPageConnectionSettingLayer:function(){var e=m.get(this.bandNo);e.resetBandDataState(),e.loadBandData().then(i.bind((function(){A.openLayer(e,this.bandOptionModel)}),this))},_openNewsNotificationSettingLayer:function(){var e={bandNo:this.bandNo,selectedNewsOption:this.bandNotificationModel.getNewsNotificationOptions().key,newsOptions:this.bandNotificationModel.getNewsNotificationOptions().options},t=M.buildAsLayer(e);this.listenTo(t,"bandSetting:refreshData",i.bind((function(){return b.build(this.bandNo).then(i.bind((function(e){this.bandNotificationModel=e,this.render()}),this))}),this))},_openEmailNotificationSettingLayer:function(){C.openAsLayer({bandNo:this.bandNo}).then(i.bind((function(e){this.listenTo(e,C.EVENTS.NOTIFICATION_CHANGED,(function(e){this.getUI("emailNotificationStatus").html(i.escape(e.email_noti?IM("ui.label.on"):IM("ui.label.off")))}))}),this))},_setChatInvitation:function(){var e=this.bandMemberConfigModel.isAllowChatInvitation();if(!e)return _.SETTING.setChatInvitation(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this)),!1;var t=S.openLayer({headerTitle:IM("bandsetting.band_chatting.title"),bodyDesc:IM("bandsetting.chat_invitation.description")});return this.listenToOnce(t,S.EVENTS.CONFIRM,(function(){_.SETTING.setChatInvitation(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))})),!1},_setBandInvitation:function(){var e=this.bandMemberConfigModel.isAllowOtherBandInvitation();return _.SETTING.setBandInvitation(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))},_getBandOpenTypeLabel:function(){return this.bandOptionModel.isSecretBand()?IM("web.bandsetting.bandtype.txt.secret_band_title"):this.bandOptionModel.isClosedBand()?IM("web.bandsetting.bandtype.txt.closed_band_title"):IM("web.bandsetting.bandtype.txt.public_band_title")},_openBusinessIdentificationInfoSettingLayer:function(){x.openDBusinessIDInfoRegistrationLayer({bandNo:this.bandNo})},_setNeedApproval:function(){var e=this.bandOptionModel.isNeedJoinApproval()?p.JOIN_METHOD.NORMAL:p.JOIN_METHOD.APPLICATION;_.SETTING.setBandJoinMethod(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this)).fail(i.bind((function(e){e&&e.result_data&&e.result_data.message&&alert(e.result_data.message),this._refreshGroupBandSettingHome()}),this))},_setJoinQuestion:function(){var e=this.bandOptionModel.isAskJoinQuestion();return _.SETTING.setAskJoinQuestion(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this)).then(i.bind((function(){this.bandOptionModel.isAskJoinQuestion()&&this._openJoinQuestionSettingLayer()}),this))},_openJoinQuestionSettingLayer:function(){var e=this.bandOptionModel.getJoinQuestion(),n=w.openDPromptModalView({title:IM("web.application_question.sub_title"),desc:IM("bandsetting.band_type_join_setting.txt.join_question.description").replace("<br>"," "),defaultText:e,multiline:!0,maxlength:p.BAND_JOIN_CONDITION.JOIN_QUESTION_MAX_LENGTH});this.listenTo(n,"modal:confirm",(function(e){return _.SETTING.setJoinQuestion(this.bandNo,t.trim(e)).then(i.bind(this._refreshGroupBandSettingHome,this))}))},_getJoinConditionLabel:function(){return[F.getJoinOptionByAllowedGender(this.bandOptionModel.getAllowedGender()),F.getJoinOptionByAllowedYearOfBirth(this.bandOptionModel.getMinBirthYear(),this.bandOptionModel.getMaxBirthYear()),F.getJoinOptionByEmailVerification(this.bandOptionModel.isEmailVerificationEnabled())].join(", ")},_setMemberJoinPost:function(){if(!this.bandOptionModel.isPostWithoutApproval())return S.openLayer({bodyTitle:IM("post.approvable.band.cannot_change_status.alert"),withoutHiding:!1}),!1;var e=this.bandOptionModel.isPostBandJoinEnabled();return _.SETTING.enableMemberJoinPost(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))},_setKidJoin:function(e){if(e.preventDefault(),this.getUI("chkMemberKidJoin").is(":checked")){var t=z.buildAsLayer();this.listenTo(t,"kidJoinGuide:confirm",(function(){_.SETTING.setBandForKidsEnabled(this.bandNo,!0).then(i.bind((function(){this.getUI("chkMemberKidJoin").prop("checked",!0),this._bandData.resetBandDataState(),this._bandData.loadBandData().then((function(){Y.getDGlobalChannel().trigger(Y.EVENT.CHAT_SETTINGS_CHANGED)})),this._refreshGroupBandSettingHome()}),this)).fail(i.bind((function(e){1041===e.result_code&&alert(e.result_data.message)}),this))})),this.listenTo(t,"kidJoinGuide:cancel",(function(){this.getUI("chkMemberKidJoin").prop("checked",!1)}))}else this._openBandForKidsOffView()},_isShowRecentPostSettingGuideOpened:function(){return!!this.bandOptionModel.isClosedBand()&&(this.bandOptionModel.showRecentPost()?(this._isShowRecentPostSettingGuideClosed.getValue()||this._isShowRecentPostSettingGuideClosed.setValue(!0),!1):!this._isShowRecentPostSettingGuideClosed.getValue())},_closeShowRecentPostSettingGuide:function(){this.getUI("wrapShowRecentPostSettingGuide")&&this.getUI("wrapShowRecentPostSettingGuide").remove(),this._isShowRecentPostSettingGuideClosed.setValue(!0)},_setShowRecentPost:function(){if(this.bandOptionModel.isClosedBand()){var e=this.getUI("checkboxShowRecentPost").is(":checked");_.SETTING.setShowRecentPost(this.bandNo,e).done(i.bind((function(){e&&this._closeShowRecentPostSettingGuide()}),this)).fail(i.bind((function(){this.getUI("checkboxShowRecentPost").prop(!e)}),this))}},_openMemberPrivacyOptionSettingLayer:function(){I.buildAsLayer({bandNo:this.bandNo})},_openTagSettingLayer:function(){y.buildAsLayer(this.bandNo,this._bandData)},_setSecretCommentUse:function(){var e=this.getUI("chkSecretCommentUse").is(":checked");_.SETTING.setIsSecretCommentEnabled(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))},_setBandPopularPostShow:function(){var e=this.getUI("chkPopularPost").is(":checked");_.SETTING.setBandPopularPostShow(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))},_setDefaultAllowBandInvitation:function(){var e=this.getUI("chkDefaultAllowBandInvitation").is(":checked");_.SETTING.setDefaultAllowBandInvitation(this.bandNo,e).then(i.bind(this._refreshGroupBandSettingHome,this))},_openLeaderDelegationSettingLayer:function(){var e=E.build({bandNo:this.bandNo,isNeedOtherProcess:!1});this.listenTo(e,"bandSettingHome:refresh",i.bind(this._refreshGroupBandSettingHome,this)),this.listenTo(e,"bandSettingHome:scrollTop",(function(){t(window).scrollTop(0)}))},_openDelegateColeaderSettingLayer:function(){var e=this._openDelegateColeaderLayerWithDefaultEventBind();this.listenTo(e,B.EVENT.MEMBER_SELECTION_COMPLETE,(function(e){var t=e.selectedMembers[0].getUserNo();return _.SETTING.deleteCoLeader(this.bandNo,t).then(i.bind((function(){alert(IM("web.bandsetting.leaderdelegate.alert.delegate_coleader_completed")),f.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo})}),this))}))},_openDelegateColeaderLayerWithDefaultEventBind:function(){var e=B.openDMemberSelectionView({titleText:IM("web.bandsetting.home.btn.delegate_coleader"),submitBtnText:IM("ui.label.selection"),onlySingleSelection:!0}),t=L.buildBandMemberWithFilterDataCollection(this.bandNo,u.DELEGATE_COLEADER,100),n=L.buildBandMemberWithFilterDataCollection(this.bandNo,u.DELEGATE_COLEADER,100);return $.wrapActivePromise(t.fetchBandMemberWithFilterDataCollection(),this).then(i.bind((function(){e.renderMemberListToSelect({memberModels:t.toMemberSelectionViewModels(),showSearchMoreMemberBtn:t.hasMoreMember()})}),this)),this.listenTo(e,B.EVENT.MEMBER_SELECTION_MEMBER_SELECT_CLICK,(function(t){e.deselectAllMembers(),e.selectMember(t.selectedMember)})),this.listenTo(e,B.EVENT.MEMBER_SELECTION_MEMBER_DESELECT_CLICK,(function(t){e.deselectMember(t)})),this.listenTo(e,B.EVENT.MEMBER_SELECTION_MEMBER_PROFILE_CLICK,(function(e){v.openMembershipProfileLayer({name:e.name,profileImageUrl:e.profileImageUrl,userNo:e.userNo,bandNo:this.bandNo})})),this.listenTo(e,B.EVENT.MEMBER_SELECTION_SEARCH,(function(t){$.wrapActivePromise(n.searchBandMemberWithFilterDataCollection(t),this).then((function(){e.renderMemberListToSelect({memberModels:n.toMemberSelectionViewModels(),showSearchMoreMemberBtn:n.hasMoreMember()})}))})),this.listenTo(e,B.EVENT.MEMBER_SELECTION_INPUT_EMPTY,(function(){e.renderMemberListToSelect({memberModels:t.toMemberSelectionViewModels(),showSearchMoreMemberBtn:t.hasMoreMember()})})),e},_getRemainedQuotaMessage:function(){var e=N.quotaRestInfo(this.bandOptionModel),t=this.bandOptionModel.hasBoughtQuota(),n="";if(e)if(e.zero)n=IM("setting.home.not_enough.storage");else if(t)n=IM("setting.home.storage.remaining.gigabyte",{gigabyte:e.gigabyte});else{var i=100==Math.floor(e.restPercent)?Math.floor(e.restPercent):e.restPercent;n=IM("setting.home.storage.remaining.percent",{percent:i})}return{remainedQuotaMessage:n,restPercent:i}},_openBandLeaveSettingLayer:function(){var e=T.buildAsLayer({bandNo:this.bandNo});this.listenTo(e,"bandLeave:shouldDelegateLeader",i.bind((function(){var t=E.build({bandNo:this.bandNo,isNeedOtherProcess:!0});this.listenTo(t,"delegateLeader:doOtherProcess",i.bind((function(){e.leaveBand()}),this))}),this)),this.listenTo(e,"bandLeave:shouldDelegateCoLeader",(function(){var t=this._openDelegateColeaderLayerWithDefaultEventBind();this.listenTo(t,B.EVENT.MEMBER_SELECTION_COMPLETE,(function(t){var n=t.selectedMembers[0].getUserNo();return _.SETTING.deleteCoLeader(this.bandNo,n).then(i.bind((function(){e.leaveBand()}),this))}))}))},_openBandDeleteSettingLayer:function(){this.deleteGroupBand(this._bandData,this.bandOptionModel.hasBoughtQuota())},_openBandDeleteCancelLayer:function(){this.openDeleteReservationCancelView(this._bandData)},_openBandReport:function(){D.openBandReportPopup(this.bandNo)},_refreshGroupBandSettingHome:function(){return t.when(_.getBandOption(this.bandNo),this.bandMemberConfigModel.fetchMemberConfig(this.bandNo)).then(i.bind((function(e){this.bandOptionModel=e,this.render()}),this))},_fetchParticipatedMissionCount:function(){return U.getParticipatedMissionCount(this.bandNo).then(i.bind((function(e){e.is_participated_mission_countless?this._participatedMissionCount="99+":this._participatedMissionCount=e.participated_mission_count}),this))},_openCopyBandSettingLayer:function(){var e=this._openBandSelectView();this.listenTo(e,"multipleBand:selected",(function(t){var n=q.openLayer(this._bandData,t);this.listenTo(n,"complete",(function(){e.destroy()}))})),this.listenTo(e,"close",(function(){e.destroy()}))},_openBandSelectView:function(){return j.openLayer({title:IM("web.copypostwrite.btn.back"),selectionType:j.SELECTION_TYPE.MULTIPLE_SELECT,bandTypes:[J.BAND_TYPE.GROUP],excludedBandNos:[this.bandNo],groupBandFilters:[Z.LEADER_NOT_UNFIX_QUOTA],bandGuideMessage:IM("web.bandsetting.copy_setting.guide.message"),confirmText:IM("ui.label.next"),emptyView:new a.View({tagName:"div",className:"uEmpty",attributes:{style:"height:339px"},template:i.template('<div><span class="gFs15 gColorBk2"><%= IM("discover.search.txt.no_band") %></span><a href="<%- createBandUrl %>" class="uButton -sizeXL -confirm gMat10 gColorWt7 _createBand"><%= IM("web.noui.bandcreate.title.band_create") %></div></a>'),templateContext:function(){return{createBandUrl:Q.GLOBAL_BAND_CREATE.makeUrl()}}}),isSelfCloseDisabled:!0})},_openBandForKidsOffView:function(){var e=H.openLayer({bodyTitle:IM("bandsetting.join.kid.off.confirm")});this.listenTo(e,H.EVENTS.CONFIRM,i.bind((function(){_.SETTING.setBandForKidsEnabled(this.bandNo,!1).then(i.bind((function(){this.getUI("chkMemberKidJoin").prop("checked",!1),this._bandData.resetBandDataState(),this._bandData.loadBandData().then((function(){Y.getDGlobalChannel().trigger(Y.EVENT.CHAT_SETTINGS_CHANGED)})),this._refreshGroupBandSettingHome()}),this)).fail(i.bind((function(e){1042===e.result_code&&this._openReservedBandForKidsOffView()}),this))}),this))},_openReservedBandForKidsOffView:function(){var e=P.openAsLayer({bandNo:this.bandNo,reservedBandForKidsOffAt:this.bandOptionModel.getReservedBandForKidsOffAt()});this.listenTo(e,P.EVENT.UPDATED,i.bind(this._refreshGroupBandSettingHome,this))},_openBandForKidsOffCancelView:function(){if(i.isNull(this._getBandForKidsOffCancelRemainingTime().value))return S.openLayer({bodyTitle:IM("bandsetting.can_not_change_settings.text")}),void this._refreshGroupBandSettingHome();var e=O.openAsLayer({bandNo:this.bandNo,reservedBandForKidsOffAt:this.bandOptionModel.getReservedBandForKidsOffAt()});this.listenTo(e,O.EVENT.UPDATED,i.bind(this._refreshGroupBandSettingHome,this))},_getBandForKidsOffCancelRemainingTime:function(){var e=s(this.bandOptionModel.getReservedBandForKidsOffAt());return X.getRemainingTime(e,void 0,void 0,void 0,2)},_getBandForKidsOffCancelRemainingTimeLabel:function(){var e=this._getBandForKidsOffCancelRemainingTime();return i.isNull(e.value)?IM("bandsetting.band_for_kids_off.soon_to_turn_off"):IM("bandsetting.band_for_kids_off.remaing_time_label",{time:IM("ui.label.time_format_"+e.format,{time:e.value})})},_openContentCleanFilterLayer:function(){R.openDDContentCleanFilterLayer(this.bandNo)},_canShowDeleteBand:function(){var e=this._bandData.getReservedClosureAt();return i.isNull(e)},_canShowDeleteBandCancel:function(){return this.bandOptionModel.isPermittedReserveClosingBand()&&s().isBefore(this._bandData.getReservedClosureAt())},_getReservedClosureDurationText:function(){var e=this._bandData.getReservedClosureAt();if(i.isNull(e))return"";var t=null;return t=e.isSame(s(),"day")?o.format.time(e,"hour_minute"):o.format.date(e,"month_day_time"),IM("bandsetting.band_delete.closure_time",{time:t})}});return se.build=function(e){return new se({bandData:e})},se}.call(t,n,t,e))||(e.exports=i)},3395:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("setting.band_setting") %></h1>\n    </header>\n</div>\n\n<%\n    /**\n     * 기본 정보\n     */\n%>\n<ul class="sSettingList">\n    <% // 프로필 - 이름 및 사진 %>\n        <li class="sSettingItem">\n            <div class="itemProfile">\n                <a href="#" class="uProfile -size50 _btnProfile" role="button">\n                    <span class="profileInner <%- profileInnerClass %>">\n                    <% if (profileImageUrl) { %>\n                        <img src="<%- profileImageUrl %>" width="50" height="50" alt="<%- IM(\'photo\') %>">\n                    <% } %>\n                    </span>\n                </a>\n            </div>\n            <div class="itemContent">\n                <span class="label"><strong><%= userName %></strong></span>\n            <% if (isPermittedModifyOpenBirthday || isPermittedModifyOpenCellphone) { %>\n                <span class="subTxt">\n                <%\n                    var privacyOptionLabel = [];\n\n                    var birthdayLabel = isOpenUserBirthday ? IM(\'bandsetting.open_cellphone_roles.member_config.display_txt.anyone\') : IM(\'bandsetting.open_cellphone_roles.member_config.display_txt.none\'); // 공개 또는 비공개\n                    privacyOptionLabel.push(IM("bandsetting.home.txt.birthday") + \': <em class="-point">\' + birthdayLabel + \'</em>\');\n\n                    privacyOptionLabel.push(IM("bandsetting.home.txt.cellphone") + \': <em class="-point">\' + openCellphoneRolesLabel + \'</em>\');\n                %>\n                    <%= privacyOptionLabel.join(", ") %>\n                </span>\n            <% } %>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnProfile"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n\n    <% // 새소식 알림 설정 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.notification.title") %></span>\n                <span class="subTxt"><%= IM("bandsetting.notification.txt.news") %> <em class="-point"><%- newsNotificationLabel %></em></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnNewNotification"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n\n    <% // 이메일 알림 설정 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("alarm.email.setting") %></span>\n                <span class="subTxt"><%= IM("alarm.email") %> <em class="-point _emailNotificationStatus"><%= isReceiveEmailNotification ? IM("ui.label.on") : IM("ui.label.off") %></em></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnEmailNotification"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n\n    <% // 채팅 바로 받기 %>\n    <% if (isPermittedModifyAllowChatInvitation) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <label for="chkChatInvitation" class="label"><%= IM("bandsetting.home.chat_invitation.title") %></label>\n                <% if ( isAllowChatInvitation ) { %>\n                <span class="subTxt"><%= IM("bandsetting.home.txt.allow_band_chatting.description") %></span>\n                <% } else { %>\n                <span class="subTxt"><%= IM("bandsetting.home.disallow_direct_band_chat_description") %></span>\n                <% } %>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="chkChatInvitation" class="checkInput _chkChatInvitation" <% if (isAllowChatInvitation) { %> checked="checked"<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 밴드 초대 허용 여부 %>\n    <% if (isPermittedModifyAllowOtherBandInvitation) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <label for="chkBandInvitation" class="label"><%= IM("bandsetting.home.txt.allow_band_invitation") %></label>\n                <span class="subTxt"><%= IM("bandsetting.home.txt.allow_band_invitation.description") %></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="chkBandInvitation"  class="checkInput _chkBandInvitation" <% if (isAllowOtherBandInvitation) { %> checked="checked"<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 참여한 미션 %>\n    <% if (participatedMissionCount) { %>\n        <li class="sSettingItem">\n            <a href="<%- participatedMissionUrl %>" class="-flexible -arrowText">\n                <div class="itemContent">\n                    <span class="label"><%- IM(\'band_mission.confirmed_missions\') %></span>\n                </div>\n                <div class="itemSide">\n                    <span class="sideTxt"><%- participatedMissionCount %></span>\n                </div>\n            </a>\n        </li>\n    <% } %>\n</ul>\n\n<%\n    /**\n     * 밴드 정보 관리\n     */\n%>\n<% if (isPermittedManageNameCover || isExistPropsOpenType || isPermittedManageDescription || canRegisterBusinessIdentificationInfo) { %>\n<h2 class="sSettingTitle"><%= IM("bandsetting.band_info_management.title") %></h2>\n\n<ul class="sSettingList">\n    <% // 밴드 이름 및 커버 설정 %>\n    <% if (isPermittedManageNameCover) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.member_permission.txt.level_edit_name_cover") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandCoverUpdateUrl %>" class="uButton -sizeS -confirm2 _bandCoverUpdateLink"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 밴드 공개 설정 %>\n    <% if (isExistPropsOpenType) { %>\n        <li class="sSettingItem -flexWrap">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_type_condition.title") %></span>\n                <span class="subTxt"><%- bandOpenTypeLabel %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandOpenTypeUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n            <% if (isClosedBand) { %>\n            <div class="classBandOption -flexible">\n                <div class="text">\n                    <span class="textTitle"><%= IM(\'bandsetting.closed_band.show_recent_post.title\') %></span>\n                    <span class="textDesc"><%= IM(\'bandsetting.closed_band.show_recent_post.desc1\') + \' \' + IM(\'bandsetting.closed_band.show_recent_post.desc2\') %></span>\n                </div>\n                <label for="showRecentPost" aria-label="" class="uCheck -switch">\n                    <input type="checkbox" id="showRecentPost" class="checkInput" <%= showRecentPost ? \'checked\' : \'\' %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"></span>\n                    </span>\n                </label>\n                <% if (isShowRecentPostSettingGuideOpened) { %>\n                <dl class="uHelpGuide -right -close _wrapShowRecentPostSettingGuide" role="alert" aria-live="assertive">\n                    <dt><span class="gSrOnly"><%= IM(\'ui.label.help\') %></span></dt>\n                    <dd style="width:180px;display:block">\n                        <%= IM(\'bandsetting.closed_band.show_recent_post.guide\') %>\n                        <button type="button" class="btnLyClose _btnCloseShowRecentPostSettingGuide"><span class="gSrOnly">닫기</span></button>\n                    </dd>\n                </dl>\n                <% } %>\n            </div>\n            <% } %>\n        </li>\n    <% } %>\n\n    <% // 밴드 소개글 %>\n    <% if (isPermittedManageDescription) { %>\n    <li class="sSettingItem" style>\n        <div class="itemContent">\n            <span class="label"><%= IM("groupband.band_setting.main.item_title.manage_band_description") %></span>\n            <span class="subTxt"><%= IM("groupband.band_setting.main.help_guide.manage_band_description") %></span>\n        </div>\n        <div class="itemSide">\n        <%\n            var introDescriptionButtonLabel = (_.isEmpty(introDescription)) ? IM("web.more.menu.settings") : IM("ui.label.change");\n        %>\n            <a href="<%- manageIntroDescriptionUrl %>" class="uButton -sizeS -confirm2 _bandIntroEditLink"><%= introDescriptionButtonLabel %></a>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 사업자 정보 등록 %>\n    <% if (canRegisterBusinessIdentificationInfo) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label">사업자 정보</span>\n            <span class="subTxt">상업활동을 한다면 정보를 등록하세요.</span>\n        </div>\n        <div class="itemSide">\n            <button type="button" class="uButton -sizeS -confirm2 _btnRegisterBusiness"><%= IM("ui.label.change") %></button>\n        </div>\n    </li>\n    <% } %>\n</ul>\n<% } %>\n\n<%\n/**\n* 페이지, 미션설정\n*/\n%>\n<% if (isPermittedRemovePageLink && isExistPageLink || isPermittedBandMission) { %>\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("setting.band_setting") %></span></h2>\n\n<ul class="sSettingList">\n    <% // 페이지 연결 %>\n    <% if (isPermittedRemovePageLink && isExistPageLink) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM(\'bandsetting.page_connection.title\') %></span>\n        </div>\n        <div class="itemSide">\n            <button type="button" class="uButton -sizeS -confirm2 _btnPageConnection"><%= IM("ui.label.change") %></button>\n        </div>\n    </li>\n    <% } %>\n\n    <% if (isPermittedBandMission) { %>\n    <li class="sSettingItem">\n        <a href="<%-bandMissionSettingUrl%>" class="-flexible -arrowText">\n            <div class="itemContent">\n                <span class="label"><%- IM("band_mission.setting.title2") %></span>\n                <span class="subTxt"><%- IM("band_mission.setting.sub_text") %></span>\n            </div>\n            <div class="itemSide">\n                <span class="sideTxt"><%- notEndedMissionCountText %></span>\n            </div>\n        </a>\n    </li>\n\n        <% if (showOpenMission) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <label for="openMission" class="label"><%-IM("band_mission.setting.open_mission.title") %></label>\n                <span class="subTxt"><%-IM("band_mission.setting.open_mission.desc")%></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="openMission" class="checkInput _chkOpenMission" <% if(isOpenMission) { %> checked="checked"<% } %>>\n                    <span class="checkLabel">\n                    <span class="shape"></span>\n                </span>\n                </label>\n            </div>\n        </li>\n        <% } %>\n    <% } %>\n</ul>\n<% } %>\n\n<%\n    /**\n     * 멤버 가입 관리\n     */\n%>\n<% if (isExistPropsUnfixQuota || isExistPropsJoinMethod || isExistPropsAskJoinQuestion || isPermittedManageJoinAssertion || isPermittedConfigureMemberJoinPost) { %>\n<h2 class="sSettingTitle"><%= IM("bandsetting.member_join_management.title") %></h2>\n\n<ul class="sSettingList">\n    <% // 멤버수 설정 %>\n    <% if (isExistPropsUnfixQuota) { %>\n    <% var memberCountDescription = isQuotaUnfixed ? IM("web.bandsetting.home.txt.infinite_band_member_count") : IM("web.bandsetting.home.txt.band_member_count_limit", {memberLimit: bandMemberMaxCount}); %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_member_count_setting.title") %></span>\n                <span class="subTxt"><%- memberCountDescription %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandQuotaUnfixedSetUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% if (isExistPropsJoinMethod) { %>\n    <% // 가입 신청받기 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_type_join_setting.title.join_approval") %></span>\n            <%\n                var approvalDescription = (isNeedJoinApproval) ? IM("bandsetting.band_type_join_setting.txt.join_need_approval.description") : IM("bandsetting.band_type_join_setting.txt.join_approval.description");\n            %>\n                <span class="subTxt"><%= approvalDescription %></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="chkJoinMethod" class="checkInput _chkJoinMethod" <% if (isNeedJoinApproval) { %> checked<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n    <% } %>\n\n    <% if (isExistPropsAskJoinQuestion) { %>\n    <% // 가입 질문 하기 %>\n        <li class="sSettingItem -minHeightAuto" style="display: <%= (isNeedJoinApproval) ? \'\' : \'none\' %>">\n            <div class="-flexible" style="min-height: <%= (isAskJoinQuestion) ? \'auto\' : \'79px\' %>;padding-top: <%= (isAskJoinQuestion) ? \'28px\' : \'0\' %>;">\n                <div class="itemContent">\n                    <span class="label"><%= IM("bandsetting.band_type_join_setting.title.join_question") %></span>\n                </div>\n                <div class="itemSide">\n                    <label class="uCheck -switch">\n                        <input type="checkbox" id="checkJoinQuestion" class="checkInput _chkJoinQuestion" <% if (isAskJoinQuestion) { %> checked<% } %>>\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n            <div class="textareaBox" style="display: <%= (isAskJoinQuestion) ? \'\' : \'none\' %>;">\n                <div class="uTextarea" style="height:76px">\n                    <label for="qnaText" class="gSrOnly">Writing for <%= IM("bandsetting.band_type_join_setting.title.join_question") %></label>\n                    <textarea class="_joinQuestionTextarea" id="qnaText" maxlength="<%= maxLengthJoinQuestion %>" placeholder="<%= IM(\'bandsetting.band_type_join_setting.txt.join_question.description\').replace(\'<br>\', \' \') %>" readonly><%- joinQuestion %></textarea>\n                    <span class="border"></span>\n                </div>\n            </div>\n        </li>\n    <% } %>\n\n    <% if (isPermittedManageJoinAssertion) { %>\n    <% // 가입 조건 설정 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_join_condition.title") %></span>\n                <span class="subTxt"><%- joinConditionLabel %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandJoinConditionUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 멤버 가입 알림글 %>\n    <% if (isPermittedConfigureMemberJoinPost) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_type_join_setting.title.join_post") %></span>\n                <span class="subTxt"><%= IM("bandsetting.band_type_join_setting.desc.join_post") %></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="checkJoinPost" class="checkInput _chkMemberJoinPost" <% if (isPostBandJoinEnabled) { %> checked<% } %>>\n                    <span class="checkLabel">\n                    <span class="shape"></span>\n                </span>\n                </label>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 어린이용 밴드 설정 %>\n    <% if (isExistBandForKidsEnabled) { %>\n        <li class="sSettingItem" id="bandForKids">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.join.kid.title") %></span>\n                <span class="subTxt"><%= IM("bandsetting.join.kid.desc") %></span>\n            </div>\n            <div class="itemSide -flexible">\n                <% if (reservedBandForKidsOffAt) { %>\n                <span class="sideTxt -point"><%= bandForKidsOffCancelRemainingTimeLabel %></span>\n                <% } %>\n\n                <% if (!reservedBandForKidsOffAt) { %>\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="checkJoinKid" class="checkInput _chkMemberKidJoin" <% if (isBandForKidsEnabled) { %> checked<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n                <% } %>\n\n                <% if (reservedBandForKidsOffAt && isEnabledReservedBandForKidsOffCancel) { %>\n                <button type="button" class="uButton -sizeS -confirm2 _btnBandForKidsOffCancel"><%= IM(\'ui.label.cancel\') %></button>\n                <% } %>\n            </div>\n        </li>\n    <% } %>\n</ul>\n<% } %>\n\n<%\n    /**\n     * 멤버 활동 관리\n     */\n%>\n<% if (isPermittedConfigureMemberPermission || isPermittedManagePersonalInfo || isPermittedManageCoLeader || isPermittedDelegateLeader || isPermittedDelegateCoLeader || isPermittedManageMember) { %>\n<h2 class="sSettingTitle"><%= IM("bandsetting.member_permission.title.sub") %></h2>\n\n<ul class="sSettingList">\n    <% // 밴드 방해 금지 시간 설정 %>\n    <% if (isPermittedManageBandDoNotDisturb) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("band.setting.do_not_disturb.title") %></span>\n            <span class="subTxt"><%= doNotDisturbDesc %></span>\n        </div>\n        <div class="itemSide">\n            <a href="<%- bandDoNotDisturbUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n        </div>\n    </li>\n    <% } %>\n    <% // 클린 필터 설정 %>\n    <% if (isExistContentCleanFilter) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%-IM("setting.clean_filter.title") %></span>\n        </div>\n        <div class="itemSide">\n            <button type="button" class="uButton -sizeS -confirm2 _btnContentCleanFilterLayer"><%= IM("ui.label.change") %></button>\n        </div>\n    </li>\n    <% } %>\n\n    <%  // 멤버 그룹 관리  %>\n    <% if (isPermittedOperationManageMemberGroup) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%- IM(\'band.member.group.setting\') %></span>\n        </div>\n        <div class="itemSide">\n            <a href="<%- manageMemberGroupUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 멤버들의 권한 설정 %>\n    <% if (isPermittedConfigureMemberPermission) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.member_permission.title") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandMemberPermissionUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 멤버들의 연락처, 생일 표시 설정 %>\n    <% if (isPermittedManagePersonalInfo) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.contact_and_birth.title") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnMemberPrivacyOption"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    <% } %>\n\n    \x3c!-- 멤버들이 다른 밴드 초대받기 설정 --\x3e\n    <% if (isExistDefaultAllowBandInvitation) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.default_allow_band_invitation.title") %></span>\n            <span class="subTxt"><%= nl2br(IM("bandsetting.default_allow_band_invitation.description")) %></span>\n        </div>\n        <div class="itemSide">\n            <label class="uCheck -switch">\n                <input type="checkbox" id="checkDefaultAllowBandInvitation" class="checkInput _chkDefaultAllowBandInvitation" <% if (isDefaultAllowBandInvitation) { %> checked<% } %>>\n                <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n            </label>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 멤버 탈퇴 및 차단 관리 %>\n    <% if (isPermittedManageMember) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.member_permission.txt.level_band_member") %></span>\n        </div>\n        <div class="itemSide">\n            <a href="<%- bandManageMemberUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 공동리더 관리 %>\n    <% if (isPermittedManageCoLeader) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.home.manage_coleader.title") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandManageCoLeaderUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 밴드관리 활동 내역 %>\n    <% if (isPermittedAccessMemberActivityHistories) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.home.band_activity_log.title") %></span>\n        </div>\n        <div class="itemSide">\n            <a href="<%- bandAccessMemberActivityHistoriesUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.view") %></a>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 리더 위임 %>\n    <% if (isPermittedDelegateLeader) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.delegate_leader.title") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnDelegateLeader"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 공동리더 위임 %>\n    <% if (isPermittedDelegateCoLeader) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("web.bandsetting.home.btn.delegate_coleader") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnDelegateColeader"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    <% } %>\n</ul>\n<% } %>\n\n<%\n    /**\n     * 밴드 메뉴 관리\n     */\n%>\n<h2 class="sSettingTitle"><%= IM("bandsetting.band_menu_management.title") %></h2>\n\n<ul class="sSettingList">\n    <% // 대표 태그 설정 %>\n    <% if (isPermittedManagePinnedHashTag) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.home.btn.tag_setting") %></span>\n                <span class="subTxt"><%= IM("bandsetting.home.btn.tag_setting.subText") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnManageTag"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 글, 사진, 동영상 저장 설정 %>\n    <% if (isPermittedManageMedia) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.media_download_permission.title") %></span>\n        </div>\n        <div class="itemSide">\n            <a href="<%- bandManageMediaUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 비밀 댓글 사용 %>\n    <% if ( isExistPropsIsSecretCommentEnabled ) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.home.btn.secret_comment_use") %></span>\n            <span class="subTxt"><%= IM("bandsetting.home.btn.secret_comment_use.subText") %></span>\n        </div>\n        <div class="itemSide">\n            <label class="uCheck -switch">\n                <input type="checkbox" id="secret_comment_use_<%- cid %>" class="checkInput _chkSecretCommentUse" <% if (isSecretCommentEnabled) { %> checked<% } %>>\n                <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n            </label>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 인기글 보기 설정 %>\n    <% if (isPublicBand || isClosedBand) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("bandsetting.home.btn.popular_post") %></span>\n            <span class="subTxt"><%= IM("bandsetting.home.btn.popular_post.subText") %></span>\n        </div>\n        <div class="itemSide">\n            <label class="uCheck -switch">\n                <input type="checkbox" id="chkPopularPost" class="checkInput _chkPopularPost"<% if (isShowPopularPost) { %> checked<% } %>>\n                <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n            </label>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 일정 설정 %>\n    <% if (isPermittedRegisterCalendar) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.home.btn.schedule_setting") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandScheduleUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 일정 내보내기 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.home.calendar_url") %></span>\n                <span class="subTxt"><%= IM("bandsetting.home.calendar_url.description") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandExportCalendarCategoryUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n\n    <% // 밴드 채팅 설정 %>\n    <% if (isPermittedConfigureChat) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_chatting.title") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="<%- bandChattingUrl %>" class="uButton -sizeS -confirm2"><%= IM("ui.label.change") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 파일 및 동영상 저장 공간 %>\n    <% if (isPermittedConfigureContentsQuota) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.quota_status.title") %></span>\n            </div>\n            <div class="itemSide -wAuto">\n                <%\n                    var spanClass = (Math.floor(remainedQuotaInfo.restPercent) < 10) ? " -colorError" : " -point";\n                %>\n                <span class="sideTxt <%= spanClass %>"><%= remainedQuotaInfo.remainedQuotaMessage %></span>\n                <a href="<%- bandQuotaUrl %>" class="uButton -sizeS -confirm2"><%= IM("management") %></a>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 밴드북/사진인화 %>\n    <% if (isEnableBandPhotoPrint) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_photoPrint.make") %></span>\n            </div>\n            <div class="itemSide">\n                <a href="https://band.bollogbook.com" target="_blank" class="uButton -sizeS -confirm2"><%= IM("ui.label.make") %></a>\n            </div>\n        </li>\n    <% } %>\n</ul>\n\n<%\n    /**\n     * 탈퇴 및 삭제\n     */\n%>\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("setting.band_setting") %></span></h2>\n\n<ul class="sSettingList">\n    <% // 밴드 설정 복사하기 %>\n    <% if (isPermittedCopyBandOption) { %>\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <span class="label"><%= IM("web.bandsetting.copy_setting.title") %></span>\n        </div>\n        <div class="itemSide">\n            <button type="button" class="uButton -sizeS -confirm2 _btnCopyBandSetting"><%= IM("ui.label.copy") %></button>\n        </div>\n    </li>\n    <% } %>\n\n    <% // 밴드 탈퇴 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_leave.title") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 -colorError _btnLeaveBand"><%= IM("bandsetting.band_leave.txt.do_leave") %></button>\n            </div>\n        </li>\n\n    <% // 밴드 삭제 %>\n    <% if (isPermittedDeleteBand) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_delete.title") %></span>\n            </div>\n            <div class="itemSide -wAuto">\n                <% if (canShowDeleteBandCancel) { %>\n                <span class="sideTxt -point"><%= reservedClosureDurationText %></span>\n                <% } %>\n\n                <% if (canShowDeleteBand) { %>\n                <button type="button" class="uButton -sizeS -confirm2 -colorError _btnDeleteBand"><%= IM("bandsetting.band_delete.txt.do_delete") %></button>\n                <% } %>\n\n                <% if (canShowDeleteBandCancel) { %>\n                <button type="button" class="uButton -sizeS -confirm2 _btnDeleteBandCancel"><%= IM(\'ui.label.cancel\') %></button>\n                <% } %>\n            </div>\n        </li>\n    <% } %>\n\n    <% // 밴드 신고 %>\n    <% if (isPermittedReportBand) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.band_report.title") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnReportBand"><%= IM("ui.label.report") %></button>\n            </div>\n        </li>\n    <% } %>\n</ul>'},3396:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(52),a=n(4),o=n(499),l=n(3397),r=n(162),d=n(181),c=n(486),h=n(26),u=n(82),p=n(510),m=a.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DPageConnectionSettingLayerView"},template:i.template(l),templateContext:function(){return{dataFetched:this._dataFetched,_loading_size:o.Size.MEDIUM,makeCoverUrl:u.makeMediumSquareCoverUrl,pageBandHomeUrl:function(e){return r.PAGE_BAND_HOME.makeUrl({band_no:e})}}},ui:{imgCover:"._imgCover",connectedList:"._connectedList",requestingList:"._requestingList",btnDisconnect:"._btnDisconnect",btnCancelRequest:"._btnCancelRequest",btnConfirm:"._btnConfirm"},events:{"click @ui.btnConfirm":"destroy","click @ui.btnDisconnect":function(e){var n=t(e.currentTarget).data("pageBandNo");return this._disconnect(this._groupBandNo,n).then(i.bind((function(){t(e.currentTarget).parents("li:first").remove(),h.getBandConnectionChannel().trigger(h.EVENT.BAND_CONNECTION_DISCONNECTED,{pageBandNo:n,groupBandNo:this._groupBandNo}),this._checkEmptyAndReload()}),this)),!1},"click @ui.btnCancelRequest":function(e){var n=t(e.currentTarget).data("pageBandNo");return this._cancelRequest(this._groupBandNo,n).then(i.bind((function(){t(e.currentTarget).parents("li:first").remove(),this._checkEmptyAndReload()}),this)),!1}},initialize:function(e){var t=this._validateOptions(e);return t?(console.error(t),alert(IM("web.setting.account.alert.temporary_error")),void this.destroy()):(this._bandData=e.bandData,this._bandOptionModel=e.bandOptionModel,this._groupBandNo=this._bandData.getBandCore().bandNo,(t=this._validateAccessPermission())?(alert(t),void this.destroy()):void this._fetchData().then(i.bind((function(){this._dataFetched=!0,this.render()}),this)))},onDomRefresh:function(){this.getUI("imgCover").on("error",i.bind((function(e){t(e.currentTarget).remove()}),this))},_checkEmptyAndReload:function(){this.getUI("connectedList").children().length>0||this.getUI("requestingList").children().length>0||(this._dataFetched=!1,this.render(),this._fetchData().then(i.bind((function(){this._dataFetched=!0,this.render()}),this)))},_validateOptions:function(e){return i.isEmpty(e.bandData)?"bandData is required!!":i.isEmpty(e.bandOptionModel)?"bandOptionModel is required":void 0},_validateAccessPermission:function(){if(!this._bandOptionModel.isPermittedRemovePageLink())return IM("permission_deny")},_fetchData:function(){return t.when(d.getConnectedPageBandList(this._groupBandNo),d.getConnectionRequestingPageBandList(this._groupBandNo)).then(i.bind((function(e,t){var n=t.items;e=s.camelizeKeys(e),n=s.camelizeKeys(n),this.model=new Backbone.Model({connectedPageBandList:e,connectionRequestingPageBandList:n})}),this))},_disconnect:function(e,n){var s=p.openLayer({bodyTitle:IM("page_band.band_connection.disconnect.confirm.title"),bodyDesc:IM("page_band.band_connection.disconnect.confirm.desc")}),a=t.Deferred();return s.once(p.EVENTS.CONFIRM,i.bind((function(){d.removePageLink(n,e).then((function(){a.resolve()})).fail((function(){a.reject()}))}),this)),s.once(p.EVENTS.CANCEL,i.bind((function(){a.reject()}),this)),a.promise()},_cancelRequest:function(e,n){var s=p.openLayer({bodyTitle:IM("page_band.band_connection.cancel_request.confirm.title")}),a=t.Deferred();return s.once(p.EVENTS.CONFIRM,i.bind((function(){d.cancelPageLink(n,e).then((function(){a.resolve()})).fail((function(){a.reject()}))}),this)),s.once(p.EVENTS.CANCEL,i.bind((function(){a.reject()}),this)),a.promise()}});return m.openLayer=function(e,t){var n=new m({bandData:e,bandOptionModel:t});return c.open(n),n},m}.call(t,n,t,e))||(e.exports=i)},3397:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM(\'bandsetting.page_connection.title\') %></h1>\n    </header>\n    <div class="modalBody">\n    <% if (!dataFetched) { %>\n        <div class="-h360">\n            <p class="uLoading cMiddle">\n                <img src="data:image/gif;base64,R0lGODlhQABAAPcAAAAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnaOjo6urq7Ozs7u7u8DAwMTExMfHx8nJycvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc3Nzc7Ozs7Ozs/Pz8/Pz8/Pz8/Pz9DQ0NDQ0NPT09fX19nZ2dzc3N/f3+Li4uTk5Ofn5+rq6uvr6+zs7O3t7e3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vb29vf39/j4+Pr6+v39/f7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBAD5ACwAAAAAQABAAAAI/gDzCRxIsKDBgezIZbM2zZfDh9SqZQPH7qDFixgzrrvm7KHHjx6nXVuXsaRJgtyogVzJ0hc1cCdjGmSXrWPLmyClaaso8+Q4aTiDrnSmrWdGdtWEKl1JjafRgtxs4pRGzRo2btywYWMo1BnMpwOt4XRmbdxRcNeA3qwGNp/YltS4OT2Z8qa1p2+ZkmyLLi/IuzHZ+fXojFvbguOkfgRsMulKa3MPC0TKkjFGcCwNS7bILbNGxQ81b+Y8NHJBlSBFjyb996K2lapXs/5odiZoX2xllxzsS5rp1x+dmdZtGyQ2g2o91iaesfNHaQUxL2Z+ErXHrwKtP0RH3eQ6kLnz/n3/SK17dZB7r6U2b9K5x+P5GnqEzr4kO9DQ2YG8Vt8kb3bSXddfSeOANA42IA03YEHGOfbQNAuWlJxD1mjni2URHmShfO9liBFvxnl4EYI4xSbiQO61ZOKJ+aTIEnwsEkSiXTEWNOOD5NVI0GBVfQShjgJx6FA1NzoEZD76fYRNgbQBGeBDFLWmo3ofVTShL8LpOI41Uv1YpC8rnggOl/yJB1J5RyI0kIMP7ZUmSme+adBtYQL5ZZZyDnQlbnkOxORHderIZmh9InkbmIUCt16fIOKmYI2NOrPcm41eOOmRFpIXqIeC4YShjuAc6tCmIrKTKZaF5qMNaJ++yQ43Eclhl2o+4FDjzKwGuYlrjAEBACH5BAkEAPkALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnaCgoKSkpKqqqrGxsbi4uL29vcHBwcXFxcfHx8nJycrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc7Ozs/Pz9DQ0NHR0dLS0tLS0tLS0tjY2Nvb297e3uHh4ePj4+Tk5OXl5eXl5ebm5ufn5+np6erq6uvr6+zs7O3t7e7u7vDw8PHx8fPz8/T09PX19fb29vb29vb29vf39/f39/n5+fv7+/39/f39/f7+/v7+/v7+/v///////////////////////////////////////////////////wj+APMJHEiwoEGC5LRJkwasocOF2rixO0ixosWL6BQ63MhxIzRr4i6KHEnwG7SOKFMCg8bNHcmXBd1pY6ayJkpm2lzCJDnTps+bIXdaZMfwp9GO0iYKNSiOpk9p07JJ/SbVWlGbzIIuFajNJjRq33RWJJftaspvW/OZRUpOKDlqNa0thZuSmtKtRFVS22ktJTR0aQuKO4lS2stvKaeJDTzQHd2O2UaKS8mNccXHHLVSZOeUI1rLFRF3ZHb34NqGn0GHLlxxcse9qi9yQxnZoLvODmHHvjht9GKBfTlC+737oDvCG2s3xt1Qc/GK6EYXnM1x2nOSmFETRO6w9HXoHaH+DXS9Uff3i6cB5wu+se15keQ6Vs7HHZjh9yPrW2cHGf/I7MDkQ117/okkWnvZdFSgSPxxVBZH9y1okX5rmSfhQb1tdJpyFx6U4EbMAcNhhwV9WFNqJJbo04gpCjSgSiy2aCKMLRo0Y0NrWVcjQdlBJdyOBK0lzY3AeNciZPFlBmQ+SW5UWUdyAUnkREIuWZ94+RDpXotNOhRllzjumOFGWtVXZIsNelTSay2eNt9AIap3IXkOMfMbkcNdeFt/MYWo44KccWSnhyi9WaA7ZjkXJEooFvhhhAcF2lGj/qGT1EV0lrfkQexxZOimAo3pUJ6gFpSdnKUSxN6nqQ6E2J8PrTJFXKy01mrrrbjmWlxAACH5BAkEAPkALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnaOjo6urq7Ozs7q6ur+/v8PDw8bGxsjIyMrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc7Ozs/Pz9DQ0NHR0dHR0dLS0tLS0tTU1NbW1tjY2NnZ2dvb293d3d/f3+Hh4ePj4+Tk5OXl5ebm5ufn5+jo6Ojo6Onp6evr6+zs7O3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09Pb29vn5+fv7+/z8/P39/f7+/v7+/v7+/v///////////////////////////////////////////////////wj+APMJHEiwoMGB7MBxo0btl8OHDLmlO0ixosWL+cplg/awo8eO1MCtw0iypDtwHD+qXAlNXMmXBt1lW7ayZs1l3NzBfFmOps2fK3HuvMiuIdCjK6WxG3qw59Fp2bZtEyd1mzVpR5eVY0pQ3E9p29ARFXctZU1uXPNls3lN7E5002xSY3qtprWladnVXXltp9GP0LamJbjOrMdsL7fx1Tm4oDtrK11iLMe3cUVwKwVXZOfTo2TLFL1+XIaXItaPn0GHVjmXouKP4FRj3OtRM0F3nR9ak02S9sNljAm+7ggtOO+KuD9uc5zb4cjjk0cbF92xL3SScT3GHmjYYenrFtn+AR647uM08CV9OxSM2aNb9BfRfUScL/tDaPBLdsef76P1/BcN9xA78nkGIEYFdgSOgA4ZdyBFykHWkTQPYmSfQ9Nc+MtuFVqknoa/LNdhRQyqJOKIB5WoHIquAZUaiwOp6NGJMMYIFI015sPgMhrSl6NAEj6UoUfn/ShQd9aUaGQ+4s3YXkfv1UjdQ+g02RGOLKq3zJEe8ZcjkgKp90uUKCb40HaUefQfi3899Fw+3f3yXYfldUnQkxDBKGZqydWGYp3EGVSilw+6EyeWfToEzZsPBvmbgwKl+Us2kOaH50NYDjSNVihO+RCFm1Wan6cOkbYkQWI6ROaP7qQa4qkmBIH4S5GwCsSZmrUWJOmkuRq01i8v9pqPO9PYJuyxyCar7LI/BgQAIfkECQQA+AAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2doKCgpKSkqqqqr6+vtbW1ubm5vr6+wsLCxcXFx8fHycnJysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nzc3Nzc3Nzs7Ozs7Oz8/P0tLS1NTU1tbW2NjY2tra3d3d39/f4uLi5OTk5ubm6Ojo6enp6+vr6+vr7Ozs7u7u7+/v8PDw8fHx8vLy8/Pz8/Pz9PT09fX19vb2+Pj4+fn5+vr6/Pz8/f39/f39/f39/v7+/v7+////////////////////////////////////////////////////////CP4A8QkcSLCgwYHswGWrRg2Yw4fSrGUrx+6gxYsYM6q7Ju2hx48eoWVTl7GkSYLgGoJcybIauJMwDbLbBo2lTZvPslWMeXLbs5tAbUIbxzMjO5VBk66strNoQXA/g0bMls2bt2zWptUM+sybU4LWgEK7Bq6pxXHWotq09hVfWJvTvMZk523aTbZF3660hq4tPnV2WeKFqffjM6J+B3pT+3FwycIemSYuyA7yw2omwbGUO9mgN5YvMbJj/JBzZ88rn5k1WG2l6dOoQVK7OM417IyfQW47yG5r5NslWxtejS8bSNXAjZIGtrug79LJS9b+CO0pyGnRTVoOLVC4R5LZM/6ikz1QHUhp4U0G/i7wGsjX6Q/m9nhN4HNgyONnvI+eHUjH+lnk3kfsTOcRYgFepNlHCoGUoFEgYUXdgxl1FJmFD2FH4UWQrfcQgBsSZBxQ2YRo0Yg3wWciPtsEpaKJ89lU4ooFoSgjjQVZ5iEwIK64ozQ/4kjQfRKBRJyJES7oEXc0GvjQOP6F9CKFllXU0Vh9CYnPaBPiMw54WgoUo0MzhlkQhg+BaaZA5n2E2ZoEIfUQk2uOCUx1cArE5UdlwundQ9AcKaSdwCBY51554kNofofatiY7f3rUY5PLOTSpiehY9qGZ3sj5X5jo3PdpmFGy9AydQkZ6maA02vlMcxJ5lnrnNqxq2dE0qCb6ZaLRBQQAIfkECQQA+gAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2dnp6eoaGhpaWlq6urr6+vtbW1urq6vr6+wcHBxMTExsbGyMjIysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nzs7Oz8/P0dHR09PT1dXV2NjY2dnZ3Nzc3d3d3t7e39/f4eHh4uLi4+Pj5OTk5eXl5eXl5ubm5ubm5+fn6Ojo6enp6enp6urq6+vr7Ozs7e3t7u7u8PDw8vLy9PT09fX19vb29/f3+fn5+/v7/Pz8/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////CP4A9QkcSLCgwYHtxG2r9uwZM2DAmjXctk1cu4MYM2rcmG5bM4ggQ4qE2Gxbuo0oUyLc9nCky5fMtl1USbPgNmUvc+ZUtq1mTXEtdQp1yUycz43rPg5d+rLZuqMHzeEc6szZtGxYs02rOlWnspNQB4oTyqxaOZTlqgV9aTTsNJ3TwNZM9zbnNKh1XTqTCzWds5zQfOYV2cxcWIPmlI6sRnOs3pmHC7b767LtRnMvGUfOODgk34Ppuoa0vBmjY5HKnmZUPLo0ytMhm2WEDVKz642dIZJGuBZi4NspKYdkdjDbyGaQgWtsxxpiNsmiIRpWnhIz6uTGRTqjTlM4yOcDe/4DU80dZbqRxAWeF3m3vMrcYLN7dq9yfchvApunp5+yt+x1i/GnUjUjJTTSWQKiNZI48oGUoEojYaXdg8GJlI13wGxH4UYYVsXehrhpFx14IGLUYERZVVPVbiUSdCIwLdL0YowqnSgbjSh1piGOGnXII4cW/qhRhEJiVM6CRR5EoEjJJSmQf04WZB9I+EU5EHxWqodelgI9Q2SW1oWkTJNFMvellV6KtF+UuQHDopC0kZRlnMCkZmWbwHz2YztpIulkYpk5mU6fI7UnJF062YZjWuKJ9KaA61A0TUPRufRVjGEy5RSNmZL1KIWdvqQMiTiGqmY2ZGLa1Dd68ohZMwdVYWVRaQEBACH5BAkEAPoALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5+fn6KioqioqK2trbKysra2trm5ub29vcHBwcTExMfHx8nJycrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc3Nzc7OztDQ0NHR0dLS0tTU1NbW1tfX19nZ2dvb293d3d/f3+Hh4eTk5Obm5unp6erq6uvr6+vr6+zs7Ozs7Ozs7O3t7e7u7u/v7/Dw8PHx8fHx8fLy8vX19fb29vj4+Pn5+fn5+fr6+vv7+/39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////wj+APUJHEiwoMGB7MhZm+asl8OH0KRZA8fuoMWLGDOms8bsocePHp1RS5expEmC3KSBXMmyFzRwJ2MetKaspc2VzK5VlHmSXMebQEEqu8YzIzuVQZOChLazaMFrNYE6gzbNGjdu1hY2BKoMptOB024qm0bOKDhqP1tK+6ovbEto3Jqe5AbN5jSnbldCI8nWXF6Qd2Oyq7tSGTe2BclFBRzzr8dpchELPMoycEZwLA9Ltsgts9HFHjVv5lw4ckHCH0WPJs3Y4rWVqlez/ljWIDvQDtfKLum4FzPTrz/+3l3yNkhrBtM+rE08Y2fhBZ8/bn4S9UOvAq07NEfdZDqQuvX+pcMNrfvJrR75CgQ3LSp28xilP0RekB03y/AxGvfILD/i3qb51xNIzAnI03EGOqVcL/glWN1HzjjIU28SymQNSBXGJJ9DGc6FYYclXfgRiCF+SOJFjpV34kXo5baiRewg+KJBmH303owCUQNSgC8uGCGOKIFEDZAEadeLekCasxSRYIF044w18sekPvt5RBSTSHmkDI8kbujQlUB62Ut4OIq5JZFi9vIkiZSt1OCJ3OD20JsgpmPknC/a12Jr1JFDDUUZkdPeTXTKlpczVVmF1TTQLMiSYfnJqdRjXK4W5aTCFWheb5MyY02lu0kalDRrmscONXve5CmSErIDjjUK0hiJqDXkgGpSQAAh+QQJBAD6ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSpqamurq60tLS8vLzCwsLGxsbIyMjKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Ozs7Pz8/Q0NDT09PU1NTW1tbY2Nja2trd3d3f39/j4+Pk5OTk5OTl5eXl5eXm5ubm5ubn5+fo6Ojp6enq6urs7Ozt7e3v7+/x8fHz8/P19fX29vb39/f4+Pj4+Pj5+fn7+/v9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////8I/gD1CRxIsKBBguS2TZM2rKFDadK2eVN3sKLFixgTMnTIsaNDZ9XEYRxJkiA4Zx5TqhzmzBu7kjALstvGbKXNlMy2vYxZkubNnzhF8ryoDhrQoymlURxqUFzNn86mZZsKbiq1aECZCWUqsNpNaCGXWiSXDaVNcFz1TbMZjdxQctRsVmMaVyU1sUzVYbXL02tKZ+bSFhRn1qM0mOBUTtspmCC7uh6zkRSn0ltji5A7brXIbm1HtJctJvbIDK9FbxxBhxadElpJcyiprR6JOnJJdpZnj/TMkRlj3ZfZFXYoGfhqc6SNz87cULVywcg7Onseei/HwNQFk/OYO3va4cOm/nkXzHzY+LSjObo9P1SdbfZDwYuHz5N3w2j0eWbryCx/zP0d+QcTgBwJWFJtBRo4EoEOKbigRw5ixBx+EVpk3X0VWvRehgVt11F3HA7EYEOmhQjedCEi5NFcKQ5kX0ObheiedC0OtBFHIIZIGX+/ccjOUxwV12J5vtVY3jAxZpgeRxSmuKRDpbWIoGaCqdNjY52p5NxQPzqTJFewqcRiWjcqBd2RDckm2IjDULNeTOTcmFKTYK4EzTZvVqQOONSAt2FaRv0kDTXbSFSoQn7ilGdaeiHlqEPQlCiYU49mJaRu7GQDZKXSZXMlpt4kipQzW3onTjWiKuYNdgKq4002DNFcOAwz0Ui1KFcBAQAh+QQJBAD5ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWqqqqvr6+zs7O6urrAwMDFxcXIyMjKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Ozs7Pz8/R0dHT09PW1tbY2Nja2trc3Nze3t7g4ODj4+Pk5OTl5eXl5eXm5ubm5ubm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3v7+/x8fHz8/P09PT29vb39/f5+fn7+/v8/Pz9/f3+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////8I/gDzCRxIsKDBgeq+bZMmjZjDh9KmbTN3sKLFixjzkav27KHHjx6nfUOXsaRJdt86glzJ8pk4kzANstvWjKVNm822sYsJk1zNm0BZ5uSJUV3DoEhZQlNHtCK7nzejWcuWTRzVbNOgIW1GrulBci2zUbzIThxHoNu8GrT2sdrYmOai3ZSmliA7ldGYqkVXzWa1ugPRPesKWKBgltYKKy7IbhrLl4sj5/vGkrBkxeJWNtN7uXBmkHQ7K+4L0rLouqQ9Ntt5uu5TkNlaAwb7cbXsunI/frutVh3IZ7zVpn5oOjhMcyATGyeq8iHw5TyzgeQMvSRy3dVjws4OM/fDaNxN/g4nBj58RukfzZ8HqR4jeo/tL75/GN/ifIf1K95vlv+gY4/l9UdQcw5NIyBBvn0U24ECfebRWweORwyDAxFIjIEUXufRbhQe5RFJDKLzG4X5SAjZgSJ+9FxGrBl313ZFSfPXcv+p1mJFPjk0I2+UwegUWx6d2JqDHkGDkXdBykbkQ5thRBtIHHYmoUMQWrTkQ9PcWBg7UxKzYElA/gZiYTmuFKB4fo3ZlFF+NYUkaFVaV+NKyjV132/ViEPdQeZsYyFIQjZVJlDQSLTNNgptU42HN3GlmDpaJSUpgHsClg1UkwLlaGfsZPNnpkxmo2Vn4nwq6TPfjNoaOt/MGdQzEtYUV505WEWDKXnRZPNNpUQFBAAh+QQJBAD6ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+ioqKmpqarq6uysrK3t7e9vb3BwcHExMTHx8fJycnKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Ozs7Pz8/Q0NDR0dHT09PV1dXW1tbZ2dnc3Nze3t7g4ODi4uLk5OTm5ubn5+fp6enq6urr6+vr6+vs7Ozt7e3t7e3u7u7w8PDx8fH09PT4+Pj7+/v9/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////8I/gD1CRxIsKDBgejGZaM2LZjDh9GsZSuH7qDFixgz6iMX7aHHjx6hXTOnsaRJguZAqlRJbdzJlxmhrZwZMltFmDgHXqPJ0yE0cjlzpuzZk9rNoCebOYyYLdu3b9msTZPZs5lLpCa/jTtqkZw1pTStYR1rEN23jjPFkl070FzDlWrZsv0GFmRcuWTRUYOLV+63lVf7kv0LshlXwUgJf5yGeK1ij9sak9370bBkrOjqPox8Gek4kNA6Y7UGMrBomEM9Mj6d861HkqxhPnZ4LTZOqhBtw9z58bBujJ8/mv6NER3IbMRNon1ILXlJ0qqda8wGUnpG6h+tY9xWXbvF2cG8/lvE7lH8QejlzRd0vVR9QdwO77o/7n4gOZBAC6KDLR39w6Nm7RWadJl9NCBHH30jHXjI6ZPaQ6slt9xD/LHnEH+6PehQcwMF55F8sVkYzHDwOZSfbeANSBB3lfl2WYEfNUgQjB5xyBplIbnIYoKsgRfMiQaJGIyCnfkI4oyaPURkYz5aBtxKS/bl45Al4fiRNS4ipRdfJvnnUTNRYjVOkg8diZGXqmGIkzlolplTmxB+k+VF3wjpZlBwPtSMNUAelNA1Jdo1Fl1EQTONRE81Zc2EM1m11pZERQrSNHPmRE6gkjbKWV/oZINppg9Bs02la41jJajBTDNcZ+Z4mmk0DyM5hw45UTGaKjXZbEVWQAAh+QQJBAD6ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKoqKivr6+1tbW7u7vAwMDFxcXIyMjKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Pz8/R0dHS0tLU1NTV1dXX19fY2NjZ2dnc3Nze3t7f39/h4eHj4+Pk5OTl5eXm5ubn5+fn5+fo6Ojp6enr6+vs7Ozt7e3u7u7v7+/y8vL09PT29vb5+fn9/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////8I/gD1CRxIsKDBgwS1OZs2bdu2cOgQSpxIsaJBbcMyahwG7ds5iyBDUsS4saSzbelEqlRJraTLYcxQrpxJUdrLl87C0dxp0ObNl9A+8uQZTps1aT5/ZmRWbqjTgeSwOVM6TOfTq+esKcV2teu5pC6tde1aDtpNsWOfpmv50mpap1pfCn07NNxLZhHp1gWq1ym2tn2Hgs3oLDDPdGZLajO8s5xLZikZzxw8bLHkledcFr68Mu7GuZxBZi75LbTKqRuhmRb5t2Tk1RXJuXQLm6JLy7VrKs5dcbA03hQ9Z/wNXCJJjdDMKV+et/jxn7iBP8+YWGN03tOhDUZbXPgwpCWJ/hf3PV088MHapjMrLvC23ZLkissuGS6dS67AW29MWZ1wcdTICTTdMKCtNtpGpelzoEbcweYdgQMBqFGBnC3o30ADTlPbNLcRlA4zLjVlmmMlQVbQgNC8JhliHRokYUbUhMahSQi9VxJ+jD1YlUT9aUSbXjamNhE6IM4WWJAa4UURiffppSOEFSGp0TQqOpXOjEaC9CQ0IjpV1k04gsTWS9NQKNI5WIY105MZWWMmRVlttZOUJmETH0VRvZhlY0UqxQxD1jjkkDUMUbXUmyqd06OhjKbW3FPh6NmoUjnppU2fk97EzHVvpaNQppppU2Vg52izqFIdIcpYOkVpg1RiCNpJk159TgUEACH5BAkEAPkALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnaOjo6urq7Ozs7u7u8HBwcXFxcjIyMnJycrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc7OztDQ0NHR0dPT09TU1NbW1tjY2NnZ2dzc3N/f3+Hh4ePj4+Xl5ejo6Onp6erq6uzs7Ozs7O3t7e7u7u/v7/Dw8PDw8PHx8fHx8fLy8vb29vn5+fv7+/z8/P39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocN85R5KnPhwWTRvFDNqHOjtl8dm285tHOlwmseTy7CRXInw3MmXv6KJZEkz3zaYL5dhrLnSJM6X1Wby3LgN2s+T0oauHOfz5zSlS5cdfQp15DlpU6uSvPlTpVaiP5cJ/UqRK8ykZDWafTkurUasMJu5zXhOKkxrc8viXJaXolGY2/pKLIcTbb6xghH+fRkxX7Vl03YmNrjWI958z1BOazt5YN24h3FW60yw6clzHWFKJp2arTWciDvjtAb35DPSBZvBnLbYI1XcAnv/ynwX+EDTRy8bf330ZGDjNps7hx5d+i/lwJlL/50dJ/GT0Kj+I4eG/Db07x6laT8J3eXdcTg542590pv7l9w7V4OdT3fO2IL5Z5tA63n0XGeV/TIaRDhFg1s0ODWWT20nSSgYOTiFN1CCDk6G3C+r5WPXSwfmRd9HBhX4i1h9fQaTVwSdI+BJ+ZFFoUcsGgQfTiV+leAvMBp0o4Fp/WjYQS4C5mNYABL04y891vRkiAh9mF6TGl2VVUlHLSPfViPuNpGVvpEzUjkQbjmmdNFEudA526CHU40PDRlXNfYtxFSYTpHkDZ9HPTONNdZss40100QzY3PLuEnROcJZJ+mcWGaEDaCTWtfMlzWdg82imf7UjDWVsuRNpKH+Ig2VX5VTjZwRmlpjoWCo0RapoNaMU2pDAQEAIfkECQQA+gAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2dnp6en5+foKCgoaGhoqKio6OjpKSkpaWlpqamqamprq6utra2vb29w8PDx8fHycnJysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nzs7Oz8/P0NDQ0tLS1NTU1tbW19fX2dnZ29vb3t7e4eHh4+Pj5eXl5ubm5+fn6Ojo6enp6urq6+vr7Ozs7e3t7u7u7u7u7+/v8PDw8fHx8vLy8/Pz9PT09fX19vb29/f3+Pj4+Pj4+fn5+vr6/Pz8/f39/f39/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////CP4A9QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyJFjO3AdQw6MRoybyI7ZiKmkdlLjOZUwpbW82I4ZTJjRZlZMeRMmS50TpfWEOW7hOmfngBbkNpSYsnYKoanMppQg06HQEoK7CQ1qVX08e1Y72E5ZT2XrvuojedYrQWpDmblVWnPoWIJlh4JUq+9lT2YFw+LkO1BoT5MDbfZMS1jfurgDt/aU2Vig1J5F9cHFXFngOLsCFcN01nmgs55ZH4stLdDwTbBDM5e+evNctaGsBaq+me0yzKy59YlWGc33yuBrUYMOfvum2dXMmx5G3ly6yru5q1vHzlq7dO6lvf4TM04sZ3DXKqGRJx2cPDTxczvb/TydNX3e+oZSDj80LXnArA1HDIDiydbYfT4J5BdXpbF1017C9VfZbjABKBBtMVVGHjFUEfRcbYRJ5lx84smlVl7Q4fXhYF+hp9JTB4nHYVUuqgShQacNhdhMGP6m0DorwrSjSD2+yJhW0u2HknQ3JiQjMdLER5OD9TW0oUrMNFnROQImCFGNvx050TlgqqTkQ5slaaBD41zpI0VF/mUNOUZxI02XKVIETpDSQSONNdZkA6g10eA5lDJrUrSOm9Y12pQzYmK0p6OUNqUMeBq1Uw2flTbFTDVSepSNoZ0yMyRQ4FBDalPRZJPUhA3ZVKPeWdBEU02iEwUEACH5BAkEAPkALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqOjo6SkpKWlpaampqenp6ioqKurq7CwsLW1tby8vMLCwsbGxsjIyMrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc7Ozs/Pz9HR0dTU1NbW1tjY2Nra2tzc3N/f3+Li4uTk5OXl5efn5+fn5+jo6Onp6enp6erq6uvr6+zs7O3t7e7u7u/v7/Dw8PLy8vT09Pb29vf39/n5+fv7+/39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Chx3LR1HEMOBHfsmDWRIa2VLDkOpcZqK0s6A+nS4rSYK6fVrIgN58pqNHdCHOezZDWhEtM5KwoOqcF16RRGY+q04DhnOhH29Nmt6sB1KlkeXLcUJzWvAs89iznT4NaYz4JWXYsTm8GyMc+hFUgUZ9uRPo/uFSiNK0G6MaMOzpfO57OB53xKWzwQJs6W+d6uLEdZYDmfJ/MVhtt5IOKSj/MFLi1Qc8l0n3E2ZR07ZjfXx+R29olt9MporAf6Lilt+LGzwfNZXmn8mN3kuHknz1y07vRu1WPODh7dOvTsK5/+c/drPHRwajiLp58+NSY13Mkb18WOkzNrkvXlxxTfeflKgacdAxxrASIXVkz2UVbbSl3l01dMglF2E056AeiTYoMtiBpB9LlHmX8lbZcPWT5hhlZkOKVGEG5xobVOgM49hddPaKHnl258FRWhUNHxV1Bzx4joEn44DYiQUlTVRCRbGCL0IE4NigTiZg0t6R6OFq0zZUk+KnRgihVidFV1k0G0pVFhTpTOhDpOBGROCT5Ujo3VmSdRdys9Uw04TR5kTjYwynbRmOCVFA012STaTaLVsAmeMyZalE57hVaanTR9XoTNjJZaCilK62zaaaXOYIMlR+AEOuoz3ZyK0jkW3dBp6TPWRJohNtRIw2lx2HSTqUQBAQAh+QQJBAD5ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKirq6uwsLC1tbW6urrAwMDExMTHx8fJycnKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Ozs7Q0NDS0tLU1NTY2Njd3d3g4ODl5eXo6Ojq6urr6+vt7e3t7e3u7u7u7u7u7u7v7+/v7+/w8PDw8PDy8vLz8/P09PT19fX29vb4+Pj5+fn6+vr7+/v8/Pz9/f39/f3+/v7+/v7+/v7+/v7///////////////////////////////////////////////////8I/gDzCRxIsKDBgwgTKlzI8GC6cQ0jSpwoENw0ZNIoatw4kB22aMhCImPHsWREbNBEitRmsiVCdhdViqTmsuZAcCllqiRpsyU1nTKjnetpshpQkdNYEi1p9Gi1oUuZHoUGMapUoNR4Wt2o7ajSrRvZ5ZT5FazGnzrLmp04DqjatRHZgZRZDe5GazqhabUrcexKvhS7ypwGmGJMlekKS0ynk7DiiE1Vvn1M8KFAv8j0UjZ4rhrIjOx01t08UBtmdm1lViWdD5xOcHhlsu6o01rkkBlnC5QmkxpvlY5130Z2WORo3bGPhrSmW2By5ZMpY1P+t7lg6sybPz+aXXhjus3z/hXHiFZkbt1zjW8f2VwnNtcywelOrXJcaPCzh7P/LTLabLFBCaRfdHxdJ1J2jA3GGn8iJSbQeMhA9ViCKtF0k2ibQSgfQemJtBpgBobkX0HTyaQZYADK1F1HmCFjIV/l9bfXQCWSVSBQHxYEITIE9hRiSMcdlKKNYP2Y2YwGwZfWVkYis+FCMapUDZImsROlcRLpFxI0PU6Ek1MUaRnSNA5y1JlyQWZJXVJUKqTNjlhyJKZI0FSTo0HsgOMZdcikqZFpfIo4TTXWaKONNbYxqBw0T1Z5ZaCQztQmR+N0GGmg0GBjFTvWWHqpTtFgM6lN4Dx66TSNwpVOp59KU02ZDY+hlmhj1FgDzqgRBQQAIfkECQQA+AAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2dnp6en5+foKCgoaGhoqKio6OjpKSkpaWlpqamp6enrKystLS0u7u7wcHBxcXFyMjIysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nz8/P0NDQ0dHR0tLS1NTU19fX2tra3Nzc39/f4eHh5OTk5eXl5ubm5+fn6Ojo6enp6urq6+vr7Ozs7Ozs7e3t8PDw8vLy9fX19/f3+Pj4+fn5+/v7/Pz8/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////CP4A8QkcSLCgwYHnvF27Fi3aM2LhDkqcSLHiwXHXHhLbyBGixY8gKZ675qyjyY0RQ6oMOXLZyZcpV8qc6K3kS5gzcxYcp/EmTp06w7n0uXEZNGjTrFkrBzSnN6LEnFED17QqvmlEp42zalWaT2hMuVbF+vJZTLFAn76Udg5t1XA3qbmtOm6oSW9zq/bsiDdv2pdy/eo8Z7OjNMFArZ181hbxzHN2OZ51rFKxSWiUcxbmGDazynEnp3mWabnj1tEq90ZFrbLcycCsP6rtSDX2x9JFbYOkdln3R2i9fVcE3lG0cIqbiVk7TvHkcuYSnUPH563htIUkTT5njjsqcY7Gmf6T5Xg0OPPvG6Hx7ogZumqlJpdNdz6bY23h4E6CO/da/EmmqjnDXHLPCNQdMafpBppJ2gi0YHHCjcdRgskhqOBJAg50YDS6RSMdQpGhFBtc8TWm4WImZkbYhwStaNJho3llUoYG1ccRbI5JyFFfB6m2EY+C2ZgeReWE+CNiQhKzTIISkdhfXuudNJlESRITTYpVnePhS0BWpCNHZnEVjo8b4fiRjC9Fw6RM42z5UngqfVncmh+NIyd4OlXJkVT3TQQONRXe1ZRQUClpHXbXTNNQoUrSOVM5ZDIq6TOdWVWTpJhG1aVY1hiZaUfLbOfXOdYEiqkz1mCJ2DjaRHrTMxLaOOpZQkodpdEzRynljaoyBQQAIfkECQQA9wAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2dnp6en5+foKCgoaGhp6enrq6utra2vLy8wsLCxcXFyMjIycnJysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nzs7Oz8/P0NDQ0tLS1NTU19fX2tra3Nzc4ODg4uLi4+Pj5OTk5ubm5+fn6Ojo6urq6urq6+vr7Ozs7e3t7e3t7u7u7+/v7+/v8fHx8/Pz9fX19/f3+Pj4+vr6+/v7/Pz8/f39/f39/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////CP4A7wkcSLCgwYHmwE17tuyXw4fNnE3zZu6gxYsYM5Kbpuyhx48el0GrmLGkyYHZmoFcuRLZyZcXzU1DxrLmx2cwcxIE19GmT4fedOY05+ynUZdCX2aj+XMZs2fTsmWbtrChQ5xJTT7ziewZuIzmvEH7mjXj1prMspEsy1bg2ZXMyLWde8/c24/IstGlW3Tls7V7y3pjqTdwW3JMPxY2zFYlyMWMs1pbCTmyUHOJHzqzzHYyXsCcdfb0SDa00ME3TWd17FGcaqHkQDJ7LRTaY9o6rT5UhnsoSGi9YaL2GDT4yWkgQRu/2PfhsuUnmaWGXhLkNOrVP17HjvE294vev/4ftC7eIkis5Qvqdjg7fcG7v3i7J4j84/ydIEvPN3f+/sDRDiGjXHDPqGWQbYphl02AzxQnUGwfNYMdawHKJZB0H1loHDiyEbRghNDB94uDAmXmUGWvcfiRfPSBJGBvmIWHEIBX9dbcQy8apGKCr3n2kTXMUabahx+1Z1GMMjJGpEc5XrSkRyjS9eRDJF4kokPODJgVUSwBd9KVvyCjX1lLsZQlTGD+8oxrWZFD4XQ5pflLM1FiZE5KNqGn040rKQMNRRl584yJ/QlG6ErLQBXVVM80QyNLec1lDoZGVXqTlklZc6ilLCkzJl3mWPMop0xuF5o3lJKKZZ2WkQPNehQ/KTONhsaFNY0zqTqU6DTgYPpSQAAh+QQJBAD3ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+ioqKmpqarq6uysrK5ubm+vr7Dw8PGxsbIyMjKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Ozs7Pz8/Q0NDR0dHT09PV1dXY2Njc3Nzf39/h4eHj4+Pk5OTk5OTl5eXl5eXl5eXm5ubm5ubn5+fo6Ojp6enq6urq6urr6+vs7Ozu7u7w8PDx8fHy8vLz8/P09PT19fX39/f6+vr7+/v8/Pz8/Pz9/f3+/v7+/v7+/v7///////////////////////////////////////////////////////////////////8I/gDvCRxIsKBBguOuMWPWq6HDhde0nTtIsaLFi+YUOtzIcaMyaOAuihxJ0JuyjihT9lKmTR3JlwXVXTumsibKY9dcwiQ506bPmyF3Wjy37KdRlMwmCjUIjqbPZc2oSfUmFRrDp0sLXrOpzJk3nRXFUSua0lzWgVdTMhMnVJyzjtrOCnyb0pnSrOfSMpN7D1pKZWb5CgSn7BjYpd5SNjssWN3dpeBSxhVMeeA5pxy9Vd58L+1GzZwpR+7oLDRldZgdljYt2C9HZYxZC0XdMajss9o6NrvN9yTHx7x3jt64OvhSuhvZGl/q2+Gy5UvPdaQGXWhujsqrv6TWUftOz732/np/CR7a+JfTz5NMr15kR9DtLbKPX3E+/YP27xcEv1v/QfDP+WcQdxzF5p847wloEGkK7vdagwQRmByEApnTkXgUNucQcAImxlFxEKbWUGAQSugQbBTSxlF/0LVEkokOTWbcW4CRRFZmxnnYkIxDidgQfKzp6NBiIg33oWzX1TYSjKoZeJY6zaQE5EXgnWgbX+ZouJF5MCF3IYcwmePlkUK5Vld2L4lT5UYsCiUkSspcM85F53gDzY0pcXlWUz8x48w1gAbajJYpHYPmWXkdpehDTmbF56I+HUOdaepQ4yOkDSlDTaOnaUOoospMGRw40HyqEjPUHKrdOdpQsxBHCccw04w2JMoVEAAh+QQJBAD4ACwAAAAAQABAAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6hoaGlpaWrq6uxsbG4uLi+vr7Dw8PGxsbJycnKysrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Ozs7Pz8/Q0NDS0tLU1NTX19fZ2dnb29vc3Nzd3d3f39/g4ODi4uLj4+Pk5OTl5eXl5eXm5ubm5ubn5+fo6Ojo6Ojp6enq6urr6+vs7Ozt7e3v7+/x8fH09PT29vb4+Pj5+fn7+/v9/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////8I/gDxCRxIsKDBgea4YWPGrJfDhwyxjTtIsaLFi/jCSUv2sKPHjsy4kcNIsiQ6bhw/qlyZ7FvJlwbRSTu2smbNY9jQwXwZjqbNnytx7rxoriHQoyuVmRt6sOdRZtKsWfsm1ZozZUePhWNK8NtPZdbEEf0GLWVNbFzxSbMJTexOcUZXMmMKraazpWnN1V0JbWdcj8m2piVIzqxHaS+t8dU5uCA6ZytdYgzHt3FFbisFVzTn06NkyxS9fpxrEevHz6BDH2ZMUfFHbqkx7tV6EV3nh85ik4TGjHVF1x2T+dZNcXjx2w5HEgctumPf5aANO8QLfbC40dUtA3/oNnvav72S/nlv/PH5eKbXPZ/nut2h8fUkwSuDzxR8bvo7P1rDn9/jfv4v6QdggOoNSJKABmKEYIIWgYcYgw16RBqErX1E4WUfdXchQeYsuCFB0s33YUFreaThiJR5ZN6IAknXC3UsYubRfSziY9tHmrHYXnjvUXijijUKlCKQQYLnEGofcqYSkhsO6RFsNTY3Y48MlvhRMspZFg6WoO2lEjRZMlWUQ8KBZiRIJ5IkjpcOPajdT8lA8w2VAo2DjYsO5TiYU0Ap4ww2gCqEDW9AHUMnTOaYhtSiEMGoHXKM1hQYdOhYA2mkDx1jzaGWfYPnoslww2ls5HADGajS6MmfOFYxgxxDB9Zw4yhTAQEAIfkECQQA+AAsAAAAAEAAQACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTVFRUVVVVVlZWV1dXWFhYWVlZWlpaW1tbXFxcXV1dXl5eX19fYGBgYWFhYmJiY2NjZGRkZWVlZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcXFxcnJyc3NzdHR0dXV1dnZ2d3d3eHh4eXl5enp6e3t7fHx8fX19fn5+f39/gICAgYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIiYmJioqKi4uLjIyMjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlZWVlpaWl5eXmJiYmZmZmpqam5ubnJycnZ2dnp6eoaGhpaWlq6ursbGxuLi4vr6+w8PDxsbGycnJysrKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzc3Nzs7Oz8/P0NDQ0dHR1NTU1tbW2dnZ3Nzc39/f4ODg4eHh4uLi4+Pj5OTk5eXl5eXl5ubm6Ojo6enp6urq6urq6+vr7Ozs7e3t7u7u7+/v8fHx8/Pz9fX19vb2+Pj4+fn5+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////CP4A8QkcSLCgwYHpwmF75uyXw4fNoGEbl+6gxYsYM56b1uyhx48el2E7l7GkSYLhGoJcyfJZuJMwDabTtoylTZvJsFWMeVJbsptAbS4bx1OjyqBIVz7bWbRguJ9BI1675s3bNWjOagZN5q0pwmdAl00Lx9TiOGhQbULzig/aTWddY6bzdnTl2qJuWUIrxxbfubof78LMCzIZ0b4DvaUNPLhlWcT40hFmXNIby7iQDVpe+RJjusUPMWfWvDLZ44JgQYoeTRqks4vjVq5m3fqjtoPptHoUTPtiao+mDV4rfLp3wc8gbxcE/Wu2cYOxPy4ruNnj6+clJzvsLBDwL5LYM/6Wcz3wHPnwJb2Dn6YafeWPzg6DDu4+Y81n3pimA8m7vsVyp0Xn0WH+8TTcRwU2pV0zCRbVkXUN8sRfhDGBdA2FMLWHoUkabpiRhR6WBGKIGAHWH4mofcQgihYd6FFxLIYDEncsErTfR9PUeNCDD02nY0HsfeQci+bB92NB3vF1pEAyUrYkPro9ROCR2hD3JHIfPfMkPlV2eKR3zV3JXJhLNumljto9tNSSaTrEFZs2OQMemjc1kx+dNyUDzZS4hTMkbU8htYwzEnmjDTbYQPOgj+6l81tSLClZ3zhRQupRjgWmc02lljKaYDiPWjpng+dsamkzfEaYzjhX8fiQMwfPXEMWZAEBACH5BAkEAPcALAAAAABAAEAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKampq2trbW1tby8vMLCwsbGxsjIyMrKysvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM7Ozs/Pz9DQ0NLS0tPT09PT09XV1dbW1tfX19nZ2dvb293d3d/f3+Hh4eLi4uPj4+Xl5ebm5ufn5+jo6Onp6erq6uvr6+3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09Pf39/v7+/7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////wj+AO8JHEiwoMGB6cBp0yZN2jNgwJ41XAgu3cGLGDNqRKftIcSPIENG1IZOo8mTCLUxE8myJTBm2iyinEkwnTZlLnOyVKaNJk1wK3UKFckMnM+NHocqDflM5tGC5XDqVNawWrar2ao1lJpTWcmnA8HpZHZNnElx14K6NAq2Ws5qX2mic+uy2lNqLqU5fYpOmktqPumKfFYOrMFySUNemymWJbW9hhH6ZclWY7mWiyNjFBwy7kV0XEFW1nyxcUhlkAsm/jiadGmWzzCaBpnZtUbOrA+mU/sRsO2Tk0EyO5htcOrfulcDy1YwXWiIhZGfvHx6b/GQ0qTPDP6R+UDeEI/+az+IjujA8iHtjkeJG9jX6yA9r8+IHmQ3gauHz0cJPnY6kbXtp9E1IiUkklkCniUSOPBBpEyCKD2XDYEgZQehSdwtl6GFF2a0YYbqdbgZduB5J+JFDUYkkoknGpQiSyy2WFM5NNZYoowogYgjcNjtaBKFH3HoI4oiDZnRbBAhaKRB/ym25EX5PUmcSPJJWd9HIUr5HZVaEvSikFo6J1J0Xd7zYlNlCgQeMGBKiSREAWqpHDCtPSnmgmleCVKWbrb0WJntQUQYoHlVOSSQLMGl5ZshkaXkkFENJVE12tTZITpz5jUkUEq1KWM2z8FoZzZrghSjkeh0M+epdopzVUMFzLDqWkAAOwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="\n                     width="<%= _loading_size %>" height="<%= _loading_size %>" alt="loading">\n            </p>\n        </div>\n    <% } else { %>\n        <% if (_.isEmpty(connectedPageBandList) && _.isEmpty(connectionRequestingPageBandList)) { %>\n        <div class="uEmpty gPageBoxShadow -h360">\n            <div>\n                <span class="uEmptyIcon -page"></span>\n                <strong class="uEmptyTitle gColorGr1"><%= IM(\'bandsetting.page_connection.no_connection\') %></strong>\n            </div>\n        </div>\n        <% } else { %>\n        <% if (!_.isEmpty(connectedPageBandList)) { %>\n        <div class="serviceSelectListWrap">\n            <h2 class="subTitle gMat-1"><%= IM(\'bandsetting.page_connection.connected_page\') %></h2>\n            <div class="modalContentWrap -tSpaceNone <%= !_.isEmpty(connectedPageBandList) && !_.isEmpty(connectionRequestingPageBandList) ? \'-mH220\' : \'-mH360\' %>">\n                <ul class="listLine _connectedList">\n                    <% _.each(connectedPageBandList, function(connectedPageBand) { %>\n                    <li class="tLine">\n                        <a href="<%= pageBandHomeUrl(connectedPageBand.band.bandNo) %>" class="flexList" target="_blank">\n                            <div class="thum">\n                                <span class="uProfile -size36 -border -pageProfile">\n                                    <% if (!!connectedPageBand.band.profileImage) { %>\n                                    <span class="profileInner">\n                                        <img src="<%- makeCoverUrl(connectedPageBand.band.profileImage) %>" class="_imgCover" alt="<%- connectedPageBand.band.name %>">\n                                    </span>\n                                    <% } else { %>\n                                    <span class="profileInner"></span>\n                                    <% } %>\n                                </span>\n                            </div>\n\n                            <span class="text -ellipsis">\n                                <% if (connectedPageBand.band.certified) { %><span class="uOfficialBand -sizeS"><%= IM(\'ui.official_band\') %></span><% } %> <%- connectedPageBand.band.name %>\n                            </span>\n                            <span class="etc"><button class="uButton -sizeS -cancel linkInBtn _btnDisconnect" data-page-band-no="<%= connectedPageBand.band.bandNo %>"><%= IM(\'page_band.band_connection.disconnect\') %></button></span>\n                        </a>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n        </div>\n        <% } %>\n        <% if (!_.isEmpty(connectionRequestingPageBandList)) { %>\n        <div class="serviceSelectListWrap">\n            <h2 class="subTitle"><%= IM(\'bandsetting.page_connection.connection_requesting\') %></h2>\n            <div class="modalContentWrap -tSpaceNone <%= !_.isEmpty(connectedPageBandList) && !_.isEmpty(connectionRequestingPageBandList) ? \'-mH220\' : \'-mH360\' %>">\n                <ul class="listLine _requestingList">\n                    <% _.each(connectionRequestingPageBandList, function(connectionRequestingPageBand) { %>\n                    <li class="tLine">\n                        <a href="<%= pageBandHomeUrl(connectionRequestingPageBand.band.bandNo) %>" class="flexList" target="_blank">\n                            <div class="thum">\n                                <span class="uProfile -size36 -border -pageProfile">\n                                    <span class="profileInner"><% if (!!connectionRequestingPageBand.band.profileImage) { %><img src="<%- makeCoverUrl(connectionRequestingPageBand.band.profileImage) %>" class="_imgCover" alt="<%- connectionRequestingPageBand.band.name %>"><% } %></span>\n                                </span>\n                            </div>\n\n                            <span class="text -ellipsis">\n                                <% if (connectionRequestingPageBand.band.certified) { %><span class="uOfficialBand -sizeS"><%= IM(\'ui.official_band\') %></span><% } %> <%- connectionRequestingPageBand.band.name %>\n                            </span>\n                            <span class="etc"><button class="uButton -sizeS -alert -reverse linkInBtn _btnCancelRequest" data-page-band-no="<%= connectionRequestingPageBand.band.bandNo %>"><%= IM(\'page_band.band_connection.cancel_request\') %></button></span>\n                        </a>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n        </div>\n        <% } %>\n        <% } %>\n    <% } %>\n    </div>\n    <footer class="modalFooter -tLine">\n        <div class="attendText gTaL gMat-14 gMab19"><%= IM(\'page_band.band_connection.guide.desc3\') %></div>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},3398:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(541),a=n(486),o=n(1214),l=n(1142),r=n(3399),d=n(1232),c=n(1753),h=n(13),u=n(157),p={NOTIFICATION_CHANGED:"NOTIFICATION_CHANGED"},m="post",_="schedule",b=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandEmailNotificationView"},template:t.template(r),templateContext:function(){return{cid:this.cid}},ui:{emailCheckboxWrap:"._emailCheckboxWrap",emailCheckbox:"._emailCheckbox",postEmailSelectWrap:"._postEmailSelectWrap",postEmailSelect:"._postEmailSelect",scheduleEmailSelectWrap:"._scheduleEmailSelectWrap",scheduleEmailSelect:"._scheduleEmailSelect",photoEmailCheckboxWrap:"._photoEmailCheckboxWrap",photoEmailCheckbox:"._photoEmailCheckbox",cancelBtn:"._cancelBtn",confirmBtn:"._confirmBtn"},events:{"change @ui.emailCheckbox":"_toggleDisabled","change @ui.postEmailSelect":"_toggleDisabled","change @ui.scheduleEmailSelect":"_toggleDisabled","change @ui.photoEmailCheckbox":"_toggleDisabled","click @ui.cancelBtn":"_close","click @ui.confirmBtn":"_setMemberConfig",click:function(e){e.target==this.el&&this._close()}},initialize:function(e){var t=e.config;this._bandNo=e.bandNo,this._config={email:t.getEmailNoti(),postEmail:this._parseList(m,t.getPostEmailNotiLevel()),scheduleEmail:this._parseList(_,t.getScheduleEmailNotiLevel()),photoEmail:t.getPhotoEmailNoti()},this._originalValues={band_no:this._bandNo,email:this._config.email,post_email:this._resolveSelectedKey(this._config.postEmail),schedule_email:this._resolveSelectedKey(this._config.scheduleEmail),photo_email:this._config.photoEmail},this.profileSettingModel=new o},serializeData:function(){return this._config},onRender:function(){this._toggleDisabled()},_parseList:function(e,n){var i;switch(e){case m:i=this.options.config.getPostEmailNoti();break;case _:i=this.options.config.getScheduleEmailNoti()}return t.map(n,(function(e){return{key:e.key,longName:e.long_name,shortName:e.short_name,selected:t.isEqual(i,e.key)}}))},_resolveSelectedKey:function(e){var n=t.findWhere(e,{selected:!0});return n?n.key:e[0].key},_getMemberConfigSubmitParams:function(){var e=this.ui.emailCheckbox.prop("checked"),t={band_no:this._bandNo,email_noti:e};return e&&(t.post_email_noti=this.ui.postEmailSelect.val(),t.schedule_email_noti=this.ui.scheduleEmailSelect.val(),t.photo_email_noti=this.ui.photoEmailCheckbox.prop("checked")),t},_toggleDisabled:function(){var e=!this.ui.emailCheckbox.prop("checked");this.ui.postEmailSelectWrap.toggleClass("-disabled",e),this.ui.postEmailSelect.prop("disabled",e),this.ui.scheduleEmailSelectWrap.toggleClass("-disabled",e),this.ui.scheduleEmailSelect.prop("disabled",e),this.ui.photoEmailCheckboxWrap.toggleClass("-disabled",e).toggleClass("-switch",!e),this.ui.photoEmailCheckbox.prop("disabled",e),this.ui.confirmBtn.prop("disabled",t.isEqual(this._originalValues,this._getMemberConfigSubmitParams()))},_setMemberConfig:function(){var e=this._getMemberConfigSubmitParams();s.setMemberConfig(e).then(t.bind((function(){this.trigger(p.NOTIFICATION_CHANGED,e),this._close()}),this),t.bind((function(e){switch(e.result_code){case 1002:confirm(IM("set.global.email.alarm.before_this"))&&u.GLOBAL_EMAIL_ALARM.goDForced();break;case 1026:h.getUserData().fetchUserData().then(t.bind((function(t){var n=this.profileSettingModel.fetchUserProfileFromUserData(t.attributes);t.getEmail()?t.isEmailVerified()?alert(e.result_data.message):this._verifyEmail(n):this._registerEmail(n)}),this))}}),this))},_registerEmail:function(e){confirm(IM("alarm.email.setting.before_registration"))&&this.listenTo(c.buildAsLayer({profileSettingModel:e}),"emailRegistration:complete",this._setMemberConfig)},_verifyEmail:function(e){var t=d.buildController({profileSettingModel:e});alert(IM("setting.account.email.verify.txt")),t.openEmailView(h.getUserData().getEmail()),this.listenTo(t,"authorization:complete",this._setMemberConfig)},_close:function(){a.closeTop()}});return b.EVENTS=p,b.openAsLayer=function(e){var n=new l,i=n.fetchMemberConfig(e.bandNo).then((function(){return new b(t.extend({config:n},e))}));return a.openPromiseView(i,!1,{width:380,height:379}),i},b}.call(t,n,t,e))||(e.exports=i)},3399:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="header">\n        <h1 class="title"><%- IM(\'alarm.email.setting\') %></h1>\n    </header>\n    <div class="main -tSpaceNone">\n        <ul class="listLine">\n            <li class="tLine">\n                <div class="flexList -tbSpace15">\n                    <div class="text gFs14">\n                        <label for="emailCheckbox_<%- cid %>" class="fw600"><%- IM(\'alarm.email\') %></label>\n                        <span class="sub2 gMat8"><%- IM(\'alarm.email.description\') %></span>\n                    </div>\n                    <div class="etc">\n                        <label for="emailCheckbox_<%- cid %>" class="uCheck -switch _emailCheckboxWrap">\n                            <input type="checkbox" id="emailCheckbox_<%- cid %>" class="checkInput _emailCheckbox"<% if (email) { %> checked<% } %>>\n                            <span class="checkLabel">\n                                <span class="shape"></span>\n                            </span>\n                        </label>\n                    </div>\n                </div>\n            </li>\n            <li class="flexList -h61 tLine">\n                <label for="postEmailSelect_<% cid %>" class="text"><%- IM(\'email_notification.post\') %></label>\n                <div class="etc">\n                    <div class="uSelect -bg _postEmailSelectWrap" style="min-width:122px">\n                        <select id="postEmailSelect_<% cid %>" class="_postEmailSelect">\n                            <% _.each(postEmail, function(item) { %>\n                            <option value="<%- item.key %>" title="<%- item.longName %>"<% if (item.selected) { %> selected<% } %>><%- item.shortName %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n                </div>\n            </li>\n            <li class="flexList -h61 tLine">\n                <label for="scheduleEmailSelect_<%- cid %>" class="text"><%- IM(\'email_notification.schedule\') %></label>\n                <div class="etc">\n                    <div class="uSelect -bg _scheduleEmailSelectWrap" style="min-width:122px">\n                        <select id="scheduleEmailSelect_<%- cid %>" class="_scheduleEmailSelect">\n                            <% _.each(scheduleEmail, function(item) { %>\n                            <option value="<%- item.key %>" title="<%- item.longName %>"<% if (item.selected) { %> selected<% } %>><%- item.shortName %></option>\n                            <% }); %>\n                        </select>\n                    </div>\n                </div>\n            </li>\n            <li class="tLine">\n                <div class="flexList -h60">\n                    <div class="text">\n                        <label for="photoEmailCheckbox_<%- cid %>"><%- IM(\'email_notification.photo\') %></label>\n                    </div>\n                    <div class="etc">\n                        <label for="photoEmailCheckbox_<%- cid %>" class="uCheck -switch _photoEmailCheckboxWrap">\n                            <input type="checkbox" id="photoEmailCheckbox_<%- cid %>" class="checkInput _photoEmailCheckbox"<% if (photoEmail) { %> checked<% } %>>\n                            <span class="checkLabel">\n                                <span class="shape"></span>\n                            </span>\n                        </label>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <footer class="footer -tLine">\n        <button type="button" class="uButton -cancel _cancelBtn"><%- IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _confirmBtn"><%- IM(\'ui.label.save\') %></button>\n    </footer>\n</div>'},3400:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(4),a=n(153),o=n(499),l=n(498),r=n(541),d=n(486),c=n(3401),h=n(155),u=n(538),p=n(158),m=n(1022),_=s.View.extend({attributes:{"data-viewname":"DContactAndBirthItemView"},getTemplate:function(){return this.model.isDataFetched()?t.template(c):t.template(l)},ui:{selectOpenCellphoneRoles:"._selectOpenCellphoneRoles",selectBirthday:"._selectBirthday",selectBirthdayNoti:"._selectBirthdayNoti",selectBirthdayNotiWrap:"._selectBirthdayNotiWrap",btnClose:"._btnClose",btnConfirm:"._btnConfirm",selects:"select[class^=_select]",selectBirthdayNotiDiv:"._selectBirthdayNotiDiv"},events:{"change @ui.selectBirthday":function(){JSON.parse(this.ui.selectBirthday.val())?(this.ui.selectBirthdayNotiWrap.show(),this.model.get("bandOptionModel").isExistPropsPostMembersBirthday()||this.ui.selectBirthdayNotiDiv.addClass("-disabled")):this.ui.selectBirthdayNotiWrap.hide()},"click @ui.selectBirthdayNotiDiv":function(){this.ui.selectBirthdayNotiDiv.hasClass("-disabled")},"click @ui.btnConfirm":"_confirmContactAndBirthSetting","click @ui.btnClose":"destroy"},modelEvents:{change:"render"},initialize:function(e){this.bandNo=e.bandNo},serializeData:function(){if(!this.model.isDataFetched())return{dataFetched:!1,_loading_size:o.Size.MEDIUM};var e=this.model.get("bandOptionModel"),n={};n[m.ANYONE]=IM("bandsetting.member_permission.anyone"),n[m.UNTIL_COLEADER]=IM("bandsetting.member_permission.until_coleader"),n[m.ONLY_LEADER]=IM("bandsetting.member_permission.only_leader"),n[m.NO_ONE]=IM("bandsetting.contact_and_birth.txt.hide");var i=t.map(m.ALL_MEMBER_ROLES,(function(t){return{label:n[t],value:t.toString(),selected:t.isSame(e.getOpenCellphoneRoles())}}));return{nl2br:p.nl2br,openCellphoneRolesOptions:i,bShowMemberBirthday:e.isOpenBirthday(),bShowMemberBirthdayNoti:e.isPostMembersBirthday()}},onAttach:function(){this._drawPage(this.bandNo).then(t.bind((function(){this.ui.selectBirthdayNotiWrap.hide(),this.model.get("bandOptionModel").isOpenBirthday()&&this.ui.selectBirthdayNotiWrap.show()}),this))},onDomRefresh:function(){this.model.isDataFetched()&&(this.model.get("bandOptionModel").isExistPropsPostMembersBirthday()||this.ui.selectBirthdayNotiDiv.addClass("-disabled"))},_drawPage:function(e){return b(e).then(t.bind(this._resetModel,this))},_resetModel:function(e){this.model.set({dataFetched:e.dataFetched,bandOptionModel:e.bandOptionModel})},_confirmContactAndBirthSetting:function(){var e=this.ui.selectOpenCellphoneRoles.find("option:selected").val(),n=this.ui.selectBirthday.find("option:selected").val(),i="true"==n&&this.ui.selectBirthdayNoti.find("option:selected").val();r.setMemberOpenCellphoneAndBirthday(this.bandNo,e,n,i).then(t.bind((function(){h.get(this.bandNo).resetBandDataState(),a.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo})}),this))}}),b=function(e){return u.getBandOption(e).then((function(e){return{dataFetched:!0,bandOptionModel:e}}))};return _.Model=i.Model.extend({defaults:{dataFetched:!1},isDataFetched:function(){return this.get("dataFetched")}}),_.buildAsLayer=function(e){var t=new _({bandNo:e.bandNo,model:new _.Model});return d.open(t),t},_}.call(t,n,t,e))||(e.exports=i)},3401:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w360">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.contact_and_birth.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <ul class="listLine  gMat-2">\n                    <% // TODO 연락처 공개 범위 설정 %>\n                    <li class="flexList tLine">\n                        <label for="memberOpen" class="text gPat14 gPab13"><%= IM("bandsetting.contact_and_birth.txt.contact") %><p  class="pText gFs12 -lightGray gMat2"><%-IM("bandsetting.contact_and_birth.txt.contact.menu_subtitle")%></p></label>\n                        <div class="etc gPat14 gPab13 gPal5">\n                            <div class="uSelect -h32 -bg -block gColorBk2" style="min-width:105px">\n                                <select id="memberOpen" class="_selectOpenCellphoneRoles">\n                                    <% _.each(openCellphoneRolesOptions, function(option) { %>\n                                    <option value="<%- option.value %>" <% if (option.selected) { %>selected<% } %>><%= option.label %></option>\n                                    <% }); %>\n                                </select>\n                            </div>\n                        </div>\n                    </li>\n                    <li class="flexList tLine">\n                        <p class="pText -lightGray -lineHH  gFs12  gPat12 gPab20 "><%=nl2br(IM("bandsetting.contact_and_birth.txt.contact.open_cellphone_description"))%> </p>\n                    </li>\n                    <% // 멤버들의 생일 %>\n                    <li class="flexList -tbSpace15 tLine">\n                        <label for="memberBirthday" class="text"><%= IM("bandsetting.contact_and_birth.txt.birthday") %></label>\n                        <div class="etc">\n                            <div class="uSelect -h32 -bg -block gColorBk2" style="min-width:105px">\n                                <select id="memberBirthday" class="_selectBirthday" <% if (bShowMemberBirthday) { %> data-status="on" <% } %>>\n                                <option value="true" <% if (bShowMemberBirthday) { %>selected<% } %>><%= IM("bandsetting.contact_and_birth.txt.show") %></option>\n                                <option value="false" <% if (!bShowMemberBirthday) { %>selected<% } %>><%= IM("bandsetting.contact_and_birth.txt.hide") %></option>\n                                </select>\n                            </div>\n                        </div>\n                    </li>\n                    <li class="flexList -tbSpace15 tLine _selectBirthdayNotiWrap">\n                        <% // 멤버 생일 알림글 - 멤버들의 생일을 표시하는 경우에만 노출 %>\n                        <label class="text" for="memberBirthdayNoti"><%= IM("bandsetting.contact_and_birth.txt.birthday_noti") %></label>\n                        <div class="etc">\n                            <div class="uSelect _selectBirthdayNotiDiv" style="min-width:105px">\n                                <select id="memberBirthdayNoti" class="_selectBirthdayNoti" <% if (bShowMemberBirthdayNoti) { %> data-status="on" <% } %>>\n                                <option value="true" <% if (bShowMemberBirthdayNoti) { %>selected<% } %>><%= IM("bandsetting.contact_and_birth.txt.show") %></option>\n                                <option value="false" <% if (!bShowMemberBirthdayNoti) { %>selected<% } %>><%= IM("bandsetting.contact_and_birth.txt.hide") %></option>\n                                </select>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n                <p class="sDesc gPat12 -tLine"><%= nl2br(IM("bandsetting.contact_and_birth.txt.birthday.desc")) %></p>\n            </div>\n\n        </div>\n        <footer class="modalFooter gPat19">\n            <button type="button" class="_btnClose uButton -cancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="_btnConfirm uButton -confirm"><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},3402:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(6),a=n(4),o=n(83),l=n(157),r=n(499),d=n(498),c=n(491),h=n(486),u=n(26),p=n(3403),m=n(155),_=n(538),b=n(181),g=a.View.extend({attributes:{"data-viewname":"DBandLeaveItemView"},getTemplate:function(){return this.model.get("dataFetched")?i.template(p):i.template(d)},ui:{checkBandLeave:"._checkBandLeave",btnCancel:"._btnCancel",btnLeaveBand:"._btnLeaveBand"},events:{"click @ui.btnLeaveBand":"_confirmBandLeaveSetting","click @ui.btnCancel":"_cancelLeave"},modelEvents:{change:"render"},initialize:function(e){this.bandNo=e.bandNo},serializeData:function(){if(!this.model.get("dataFetched"))return{dataFetched:!1,_loading_size:r.Size.MEDIUM};var e=this.model.get("bandData"),t=this.model.get("bandOptionModel");return{memberCount:e.getMemberCount(),bPermittedDelegateColeader:t.isPermittedDelegateCoLeader(),bPermittedDelegateLeader:t.isPermittedDelegateLeader(),existConnectedPageBand:this.model.get("existConnectedPageBand")}},onAttach:function(){this._drawPage(this.bandNo)},_drawPage:function(e){return f(e).then(i.bind(this._resetModel,this))},_resetModel:function(e){this.model.set({dataFetched:e.dataFetched,bandData:e.bandData,bandOptionModel:e.bandOptionModel,existConnectedPageBand:e.existConnectedPageBand})},_cancelLeave:function(){this.destroy(),this.trigger("bandLeave:cancel")},_confirmBandLeaveSetting:function(){var e=this.model.get("bandData"),t=this.model.get("bandOptionModel");if(e.getMemberCount()>1&&!this.ui.checkBandLeave.is(":checked"))alert(IM("bandsetting.band_leave.alert.band_leave_agree"));else if(t.hasBoughtQuota()){var n=ConfirmModalWithCheckboxView.openAsLayer({title:IM("bandsetting.band_leave.title"),desc:IM("band_leave.confirm.no_refund"),closeLayer:IM("ui.label.close_layer"),confirm:IM("ui.label.confirm"),noCancelButton:!0,confirmCheckboxDescription:IM("band_leave.confirm.checked")});this.listenTo(n,"modal:confirm",(function(){this._leaveBandAfterDelegate(t)}))}else this._leaveBandAfterDelegate(t)},_leaveBandAfterDelegate:function(e){e.isPermittedDelegateCoLeader()?this.trigger("bandLeave:shouldDelegateCoLeader"):e.isPermittedDelegateLeader()?this.trigger("bandLeave:shouldDelegateLeader"):this.leaveBand()},leaveBand:function(){u.getDGlobalChannel().trigger(u.EVENT.DBAND_LEAVED),o.deleteOrLeaveBand(this.bandNo).then(i.bind((function(){m.get(this.bandNo).resetBandDataState(),l.GLOBAL_HOME.goDForced()}),this))}}),f=function(e){return t.when(c.getCachedBandData(e),_.getBandOption(e),b.getConnectedPageBandList(e)).then((function(e,t,n){return{dataFetched:!0,bandData:e,bandOptionModel:t,existConnectedPageBand:!i.isEmpty(n)}}))};return g.Model=s.Model.extend({defaults:{dataFetched:!1}}),g.buildAsLayer=function(e){var t=new g({bandNo:e.bandNo,model:new g.Model});return h.open(t),t},g}.call(t,n,t,e))||(e.exports=i)},3403:function(e,t){e.exports='<% // 밴드 탈퇴 %>\n<section class="lyWrap">\n    <div class="lyContent -w380">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.band_leave.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContentWrap">\n                <p class="pText gMat13"><span class="-pointColor gFw6"><%= IM("bandsetting.band_leave.txt.notice") %></span></p>\n                <% if (memberCount > 1) { // 멤버가 2명 이상인 경우 (로그인한 사용자 이외의 멤버가 있는 경우) %>\n                <div class="msgList">\n                    <p class="pText -smallFont gMat6"><%= IM("bandsetting.band_leave.txt.description5") %></p>\n                    <p class="pText -smallFont gMat6"><%= IM("bandsetting.band_leave.txt.description3") %></p>\n                    <% if ( existConnectedPageBand ) { %>\n                    <p class="pText -smallFont gFw6  gMat15"><%- IM(\'bandsetting.connected_page_exist\') %></p>\n                    <p class="pText -smallFont gMat4"><%- IM(\'bandsetting.connected_page_subscription_status_description\') %></p>\n                    <% } %>\n                </div>\n                <div class="selectArea gMat12">\n                    <label for="delete" class="uCheck -checkbox">\n                        <input type="checkbox" id="delete" class="checkInput _checkBandLeave">\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("bandsetting.band_leave.txt.check") %></span>\n                        </span>\n                    </label>\n                </div>\n                <% } else { // 멤버가 1명인 경우 (로그인한 사용자만 멤버인 경우) %>\n                <div class="msgList">\n                    <p class="pText -smallFont gMat6"><%= IM("bandsetting.band_leave.txt.description4") %></p>\n                    <% if ( existConnectedPageBand ) { %>\n                    <p class="pText -smallFont gFw6  gMat15"><%- IM(\'bandsetting.connected_page_exist\') %></p>\n                    <p class="pText -smallFont gMat4"><%- IM("bandsetting.connected_page_subscription_status_description") %></p>\n                    <% } %>\n                </div>\n                <% } %>\n            </div>\n\n        </div>\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnLeaveBand"><%= IM("bandsetting.band_leave.txt.do_leave") %></button>\n        </footer>\n    </div>\n</section>'},3404:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3405),a=n(486),o=n(541),l=n(16),r={UPDATED:"UPDATED"},d=i.View.extend({tagName:"section",className:"lyWrap ",attributes:{"data-viewname":"DBandForKidsOffReservationView"},template:t.template(s),ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",bandForKidsOffInput:"._bandForKidsOffInput"},events:{"click @ui.btnCancel":"destroy","click @ui.btnConfirm":"_onClickConfirmBtn","change @ui.bandForKidsOffInput":"_changeBandForKidsOffInput"},initialize:function(e){this.bandNo=e.bandNo},_onClickConfirmBtn:function(){if(l().valueOf()>this.reservedBandForKidsOffAt)return this.trigger(r.UPDATED),void this.destroy();this.getUI("bandForKidsOffInput").prop("disabled",!0),o.reserveBandForKidsOff(this.bandNo).then(t.bind((function(){this.trigger(r.UPDATED),this.destroy()}),this))},_changeBandForKidsOffInput:function(){this.getUI("btnConfirm").prop("disabled",!this.getUI("bandForKidsOffInput").is(":checked"))}});return d.EVENT=r,d.openAsLayer=function(e){var t=new d({bandNo:e.bandNo});return a.open(t),t},d}.call(t,n,t,e))||(e.exports=i)},3405:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="modalHeader">\n        <h1 class="title"><%- IM(\'bandsetting.layer.confirm_msg_title\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap">\n            <ul class="guidePointList">\n                <li class="guidePointItem"><%= IM(\'bandsetting.band_for_kids_off.desc\') %></li>\n                <li class="guidePointItem"><%= IM(\'bandsetting.band_for_kids_off.desc1\') %></li>\n                <li class="guidePointItem"><%= IM(\'bandsetting.band_for_kids_off.desc2\') %></li>\n            </ul>\n            <div class="selectArea">\n                <label for="bandForKidsOff" class="uCheck -checkbox">\n                    <input type="checkbox" id="bandForKidsOff" class="checkInput _bandForKidsOffInput">\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                        <span class="text"><%= IM(\'bandsetting.band_for_kids_off.check_label\') %></span>\n                    </span>\n                </label>\n            </div>\n        </div>\n    </div>\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _btnCancel"><%- IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnConfirm" disabled><%- IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},3406:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(16),s=n(4),a=n(3407),o=n(486),l=n(523),r=n(510),d=n(541),c={UPDATED:"UPDATED"},h=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandForKidsOffCancelView"},template:t.template(a),templateContext:function(){return{remainingTime:this._getRemainingTime()}},ui:{btnOffCancel:"._btnOffCancel",btnClose:"._btnClose"},events:{"click @ui.btnClose":"destroy","click @ui.btnOffCancel":"_onClickBtnOffCancel"},initialize:function(e){this.bandNo=e.bandNo,this.reservedBandForKidsOffAt=e.reservedBandForKidsOffAt},_getRemainingTime:function(){var e=i(this.reservedBandForKidsOffAt),t=l.getRemainingTime(e,void 0,void 0,void 0,2);return IM("ui.label.time_format_"+t.format,{time:t.value})},_onClickBtnOffCancel:function(){r.openLayer({bodyTitle:IM("bandsetting.band_for_kids_off_cancel.confirm_msg"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no"),withoutHiding:!1}).once(r.EVENTS.CONFIRM,t.bind((function(){if(i().valueOf()>this.reservedBandForKidsOffAt)return this.trigger(c.UPDATED),void this.destroy();this._cancelBandForKidsOff()}),this))},_cancelBandForKidsOff:function(){d.cancelBandForKidsOff(this.bandNo).then(t.bind((function(){this.trigger(c.UPDATED),this.destroy()}),this))}});return h.EVENT=c,h.openAsLayer=function(e){var t=new h({bandNo:e.bandNo,reservedBandForKidsOffAt:e.reservedBandForKidsOffAt});return o.open(t),t},h}.call(t,n,t,e))||(e.exports=i)},3407:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="modalHeader">\n        <h1 class="title"><%- IM(\'bandsetting.join.kid.title\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap">\n            <div class="msgWrap gPal0 gPar0">\n                <p class="pText"><%= IM(\'bandsetting.band_for_kids_off_cancel.desc\', {time: remainingTime}) %></p>\n                <p class="pText -smallFont gMat9"><%= IM(\'bandsetting.band_for_kids_off_cancel.desc1\') %></p>\n            </div>\n        </div>\n    </div>\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _btnClose"><%- IM(\'ui.label.close\') %></button>\n        <button type="button" class="uButton -confirm _btnOffCancel"><%- IM(\'ui.label.off_cancel\') %></button>\n    </footer>\n</div>'},3408:function(e,t,n){var i=n(0),s=n(4),a=n(3409),o=n(486),l=n(538),r=n(153),d=n(83),c=s.View.extend({tagName:"section",className:"lyWrap -liteBg",attributes:{"data-viewname":"DContentCleanFilterLayerView"},template:i.template(a),templateContext:function(){var e=this.options.bandOptionModel.getContentCleanFilterLevel();return{isUseFilter:!!e&&"off"!==e,isUseBasicFilter:"basic"===e,isUseStrongFilter:"strong"===e}},ui:{checkUseFilter:"._checkUseFilter",wrapFilterDetailOptionArea:"._wrapFilterDetailOptionArea",checkUseBasicFilter:"._checkUseBasicFilter",checkUseStrongFilter:"._checkUseStrongFilter",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"change @ui.checkUseFilter":"_toggleFilterDetailOptionArea","click @ui.btnConfirm":"_confirm","click @ui.btnCancel":"destroy"},onAttach:function(){this._toggleFilterDetailOptionArea(),this.getUI("checkUseBasicFilter").is(":checked")||this.getUI("checkUseStrongFilter").is(":checked")||this.getUI("checkUseBasicFilter").prop("checked",!0)},_toggleFilterDetailOptionArea:function(){this.getUI("wrapFilterDetailOptionArea").toggle(this.getUI("checkUseFilter").is(":checked"))},_confirm:function(){var e;e=this.getUI("checkUseFilter").is(":checked")?this.getUI("checkUseBasicFilter").is(":checked")?"basic":"strong":"off",d.setBandContentSpamFilterLevel(this.options.bandNo,e).always(i.bind((function(){r.GROUP_BAND_SETTING.goDForced({band_no:this.options.bandNo})}),this))}});c.openDDContentCleanFilterLayer=function(e){l.getBandOption(e).then((function(t){var n=new c({bandNo:e,bandOptionModel:t});o.openWithoutHiding(n)}))},e.exports=c},3409:function(e,t){e.exports='<div class="lyContent -w360">\n  <header class="modalHeader">\n    <h1 class="title"><%-IM("setting.clean_filter.title")%></h1>\n  </header>\n\n  <div class="modalBody">\n    <div class="modalContentWrap gMat-2">\n      <ul class="listLine">\n        <li class="tLine notiSettingItem">\n          <div class="flexList -alignItemstart">\n            <div class="text">\n              <label for="cleanFilter" class="labelTitle gFs14"><%-IM(\'setting.use.spam_comment_filter\') %></label>\n            </div>\n            <div class="etc gMat4">\n              <label for="cleanFilter" class="uCheck -switch ">\n                <input type="checkbox" id="cleanFilter" class="checkInput _checkUseFilter" <%=isUseFilter ? \'checked\' : \'\' %>>\n                <span class="checkLabel">\n                  <span class="shape"></span>\n                  <span class="text"></span>\n                </span>\n              </label>\n            </div>\n          </div>\n          <div class="optionItem gMat10 gMal2 gMab-8 _wrapFilterDetailOptionArea">\n            <label for="defaultFilter" class="uCheck -checkbox ">\n              <input type="radio" id="defaultFilter" name="detailOption" class="checkInput _checkUseBasicFilter"  <%=isUseBasicFilter ? \'checked\' : \'\' %>>\n              <span class="checkLabel">\n                  <span class="shape"></span>\n                  <span class="text"><%-IM("setting.clean_filter.option.basic.label")%></span>\n                </span>\n            </label>\n            <div class="optionItemDesc gFs12 gColorGr1 gMat4 gMal28 gMab13"><%-IM("setting.clean_filter.option.basic.description")%></div>\n          </div>\n          <div class="optionItem gPat12 _wrapFilterDetailOptionArea">\n            <label for="powerfulFilter" class="uCheck -checkbox ">\n              <input type="radio" id="powerfulFilter" name="detailOption" class="checkInput _checkUseStrongFilter" <%=isUseStrongFilter ? \'checked\' : \'\' %>>\n              <span class="checkLabel">\n                  <span class="shape"></span>\n                  <span class="text"><%-IM("setting.clean_filter.option.strong.label")%></span>\n              </span>\n            </label>\n            <div class="optionItemDesc gFs12 gColorGr1 gMat4 gMal28 gMab9"><%-IM("setting.clean_filter.option.strong.description")%> </div>\n          </div>\n        </li>\n      </ul>\n      <div class="descWrap -bgGray -borderTop">\n        <ul class="p gFs12 -dotList">\n          <li><%-IM("setting.clean_filter.description1")%></li>\n          <li><%-IM("setting.clean_filter.description2")%></li>\n          <li><%-IM("setting.clean_filter.description3")%></li>\n          <li><%-IM("setting.clean_filter.description4")%></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <footer class="modalFooter -tLongLine">\n    <button type="button" class="uButton -cancel _btnCancel"><%-IM("ui.label.cancel")%></button>\n    <button type="button" class="uButton -confirm _btnConfirm"><%-IM("ui.label.confirm")%></button>\n  </footer>\n</div>'},3410:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3411),a=n(486),o=i.View.extend({template:t.template(s),templateContext:{},attributes:{"data-viewname":"DBandSettingKidJoinGuideView"},ui:{btnConfirm:"._btnConfirm",btnCancel:"._btnCancel",checkInput:"._checkInput"},events:{"click @ui.btnConfirm":function(){this.trigger("kidJoinGuide:confirm"),this.destroy()},"click @ui.btnCancel":function(){this.trigger("kidJoinGuide:cancel"),this.destroy()},"change @ui.checkInput":"_toggleEnabled"},_toggleEnabled:function(){this.ui.checkInput.is(":checked")?this.ui.btnConfirm.removeAttr("disabled"):this.ui.btnConfirm.attr("disabled",!0)}});return o.buildAsLayer=function(){var e=new o;return a.open(e),e},o}.call(t,n,t,e))||(e.exports=i)},3411:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent -w360">\n        <header class="header">\n            <h1 class="title"><%= IM("bandsetting.join.kid.guide_title") %></h1>\n        </header>\n        <div class="main">\n            <ul class="p -guideList">\n                <li class="guideListItem">\n                    <strong><%= IM("bandsetting.join.kid.guide_first") %></strong>\n                    <span class="subText"><%= IM("bandsetting.join.kid.guide_first_sub") %></span>\n                </li>\n                <li class="guideListItem">\n                    <strong><%= IM("bandsetting.join.kid.guide_second") %></strong>\n                </li>\n                <li class="guideListItem">\n                    <strong><%= IM("bandsetting.join.kid.guide_fourth") %></strong>\n                    <span class="subText"><%= IM("bandsetting.join.kid.guide_fourth_sub") %></span>\n                </li>\n                <li class="guideListItem">\n                    <strong><%= IM("bandsetting.join.kid.guide_third") %></strong>\n                    <span class="subText"><%= IM("bandsetting.join.kid.guide_third_sub") %></span>\n                </li>\n            </ul>\n\n            <div class="selectArea gMat20 gMab10">\n                <label for="checkbox" class="uCheck -checkbox">\n                    <input type="checkbox" id="checkbox" class="checkInput _checkInput">\n                    <span class="checkLabel">\n                        <span class="shape "></span>\n                        <span class="text"><%= IM("bandsetting.member_count.txt.confirm.change_member_count") %></span>\n                    </span>\n                </label>\n            </div>\n        </div>\n        <footer class="footer">\n            <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},3412:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3413),o=n(486),l=n(499),r=n(488),d=n(498),c=n(155),h=n(153),u=n(1165),p=n(538),m=n(1746),_=n(1142),b=n(853),g=n(1022),f=n(541),v=n(543),A=n(1097),M=n(22),C=n(546),I=IM("bandsetting.string.value.off"),E=IM("bandsetting.string.value.on"),y={BAND_INFO_SETTING_ITEMS:"BAND_INFO_SETTING_ITEMS",MEMBER_JOIN_SETTING_ITEMS:"MEMBER_JOIN_SETTING_ITEMS",MEMBER_ACTIVITY_SETTING_ITEMS:"MEMBER_ACTIVITY_SETTING_ITEMS",BAND_MENU_SETTING_ITEMS:"BAND_MENU_SETTING_ITEMS"},T=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DGroupBandCopySettingView"},getTemplate:function(){return this._fetched?i.template(a):i.template(d)},templateContext:function(){return this._fetched?{SETTING_ITEM_CATEGORY:y}:null},ui:{btnBack:"._btnBack",btnClose:"._btnClose",btnConfirm:"._btnConfirm",checkInput:"._checkInput"},events:{"click @ui.btnBack":"destroy","click @ui.btnClose":function(){this.trigger("complete"),this.destroy()},"click @ui.btnConfirm":function(){this._setCopyBandOption()},"change @ui.checkInput":function(){this.getUI("checkInput").filter(":checked").length>0?this.getUI("btnConfirm").prop("disabled",!1):this.getUI("btnConfirm").prop("disabled",!0)}},initialize:function(e){if(!e.bandData.isBandSettingPermitted())return h.GROUP_BAND_HOME.goDForced({band_no:e.bandData.getBandNo()}),void this.destroy();this._fetched=!1,this._bandData=e.bandData,this._bandNo=this._bandData.getBandNo(),this._selectedBands=e.selectedBands,this._bandMemberConfigModel=new _,this._settingItems={}},serializeData:function(){return this._fetched?{settingItems:i.groupBy(this._settingItems,(function(e){return e.category}))}:{_loading_size:l.Size.MEDIUM,middleClass:r.ELEMENT.SCREEN_VERTICAL_MIDDLE}},onRender:function(){this._fetched},onAttach:function(){return t.when(m.build(this._bandNo),p.getBandOption(this._bandNo),this._bandMemberConfigModel.fetchMemberConfig(this._bandNo)).then(i.bind((function(e,t){this._fetched=!0,this.bandNotificationModel=e,this.bandOptionModel=t,this._initSettingItems(),this.render()}),this))},_initSettingItems:function(){this.bandOptionModel.isExistPropsOpenType()&&(this._settingItems[v.OPTIONS.OPEN_TYPE]={category:y.BAND_INFO_SETTING_ITEMS,id:v.OPTIONS.OPEN_TYPE,title:IM("web.bandsetting.open_type"),desc:this._getBandOpenTypeLabel(),targetOptions:[v.OPTIONS.OPEN_TYPE]}),this.bandOptionModel.isExistPropsJoinMethod()&&(this._settingItems[v.OPTIONS.JOIN_METHOD]={category:y.MEMBER_JOIN_SETTING_ITEMS,id:v.OPTIONS.JOIN_METHOD,title:IM("web.bandsetting.join_application.questions_setting"),desc:this._getBandSettingJoinAppAsk(),targetOptions:[v.OPTIONS.JOIN_METHOD,v.OPTIONS.ASK_JOIN_QUESTION,v.OPTIONS.JOIN_QUESTION]}),this.bandOptionModel.isPermittedManageJoinAssertion()&&(this._settingItems[v.OPTIONS.ALLOWED_GENDER]={category:y.MEMBER_JOIN_SETTING_ITEMS,id:v.OPTIONS.ALLOWED_GENDER,title:IM("bandsetting.band_join_condition.title"),desc:this._getJoinConditionLabel(),targetOptions:[v.OPTIONS.ALLOWED_GENDER,v.OPTIONS.EMAIL_VERIFICATION_ENABLED,v.OPTIONS.EMAIL_VERIFICATION_DOMAINS,v.OPTIONS.MAX_BIRTH_YEAR,v.OPTIONS.MIN_BIRTH_YEAR]}),this.bandOptionModel.isPermittedConfigureMemberJoinPost()&&(this._settingItems[v.OPTIONS.POST_BAND_JOIN]={category:y.MEMBER_JOIN_SETTING_ITEMS,id:v.OPTIONS.POST_BAND_JOIN,title:IM("bandsetting.band_type_join_setting.title.join_post"),desc:this._getEnabledToString(this.bandOptionModel.isPostBandJoinEnabled()),targetOptions:[v.OPTIONS.POST_BAND_JOIN]}),this.bandOptionModel.isExistBandForKidsEnabled()&&(this._settingItems[v.OPTIONS.BAND_FOR_KIDS_ENABLED]={category:y.MEMBER_JOIN_SETTING_ITEMS,id:v.OPTIONS.BAND_FOR_KIDS_ENABLED,title:IM("bandsetting.join.kid.title"),desc:this._getEnabledToString(this.bandOptionModel.isBandForKidsEnabled()),targetOptions:[v.OPTIONS.BAND_FOR_KIDS_ENABLED]}),this.bandOptionModel.isPermittedManageBandDoNotDisturb()&&(this._settingItems[v.OPTIONS.BAND_DO_NOT_DISTURB]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.BAND_DO_NOT_DISTURB,title:IM("band.setting.do_not_disturb.title"),desc:u.makeDoNotDisturbTimeMessageForSettingDescription(c.get(this._bandNo).getBandDoNotDisturb()),targetOptions:[v.OPTIONS.BAND_DO_NOT_DISTURB]}),this.bandOptionModel.isPermittedConfigureMemberPermission()&&(this._settingItems[v.OPTIONS.ROLES.EDIT_NAME_COVER_ROLES]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.ROLES.EDIT_NAME_COVER_ROLES,title:IM("bandsetting.member_permission.title"),desc:IM("bandsetting.permission.member.desc"),targetOptions:[v.OPTIONS.ROLES.EDIT_NAME_COVER_ROLES,v.OPTIONS.ROLES.EDIT_NOTICE_ROLES,v.OPTIONS.ROLES.VIEW_POST_READER_ROLES,v.OPTIONS.ROLES.MANAGE_PINNED_HASHTAGS_ROLES,v.OPTIONS.ROLES.MANAGE_BAND_DO_NOT_DISTURB_ROLES,v.OPTIONS.ROLES.POST_CONTENTS_ROLES,v.OPTIONS.POST_WITHOUT_APPROVAL,v.OPTIONS.ROLES.POST_APPROVER_ROLES,v.OPTIONS.ROLES.COMMENT_ROLES,v.OPTIONS.ROLES.CREATE_LIVE_ROLES,v.OPTIONS.ROLES.UPLOAD_PHOTO_TO_ALBUM_ROLES,v.OPTIONS.ROLES.CREATE_ALBUM_ROLES,v.OPTIONS.ROLES.REGISTER_SCHEDULE_ROLES,v.OPTIONS.ROLES.MODIFY_SCHEDULE_ROLES,v.OPTIONS.ROLES.REGISTER_CALENDAR_ROLES,v.OPTIONS.ROLES.INVITE_CHAT_ROLES,v.OPTIONS.CHAT_TO_MANAGER,v.OPTIONS.ROLES.CREATE_OPEN_CHAT_ROLES,v.OPTIONS.ROLES.DELETE_OPEN_CHAT_ROLES,v.OPTIONS.ROLES.DISABLE_DEFAULT_CHAT_ROLES,v.OPTIONS.ROLES.INVITE_MEMBER_ROLES,v.OPTIONS.ROLES.ACCEPT_APPLICATION_ROLES,v.OPTIONS.ROLES.MANAGE_POSTING_ON_BAND_JOIN_ROLES,v.OPTIONS.ROLES.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY_ROLES,v.OPTIONS.ROLES.MANAGE_JOIN_ROLES,v.OPTIONS.ROLES.MANAGE_MEMBER_GROUP_ROLES,v.OPTIONS.ROLES.DELETE_CONTENTS_ROLES,v.OPTIONS.ROLES.BAN_MEMBER_ROLES]}),(this.bandOptionModel.isExistPropsOpenBirthday()||this.bandOptionModel.isExistPropsOpenCellphone()||this.bandOptionModel.isExistPropsPostMembersBirthday())&&(this._settingItems[v.OPTIONS.OPEN_CELLPHONE_ROLES]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.OPEN_CELLPHONE_ROLES,title:IM("web.bandsetting.member_contact_birthday"),desc:this._getOpenCellphoneRolesMemberBirthday(),targetOptions:[v.OPTIONS.OPEN_CELLPHONE_ROLES,v.OPTIONS.OPEN_BIRTHDAY,v.OPTIONS.POST_MEMBERS_BIRTHDAY]}),this._settingItems[v.OPTIONS.SHOW_ONLINE_MEMBER]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.SHOW_ONLINE_MEMBER,title:IM("web.bandsetting.member_online_state"),desc:this._getOnlineMember(),targetOptions:[v.OPTIONS.SHOW_ONLINE_MEMBER,v.OPTIONS.SHOW_ONLINE_MEMBER_ON_POSTS]},this._settingItems[v.OPTIONS.ROLES.SHARE_LOCATION_ROLES]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.ROLES.SHARE_LOCATION_ROLES,title:IM("web.bandsetting.member_share_location"),desc:this._getShowPermission(this.bandOptionModel.getShareLocationRoles()),targetOptions:[v.OPTIONS.ROLES.SHARE_LOCATION_ROLES]},this.bandOptionModel.isExistDefaultAllowBandInvitation()&&(this._settingItems[v.OPTIONS.DEFAULT_ALLOW_BAND_INVITATION]={category:y.MEMBER_ACTIVITY_SETTING_ITEMS,id:v.OPTIONS.DEFAULT_ALLOW_BAND_INVITATION,title:IM("bandsetting.default_allow_band_invitation.title"),desc:this._getShowPermission(this.bandOptionModel.isDefaultAllowBandInvitation()),targetOptions:[v.OPTIONS.DEFAULT_ALLOW_BAND_INVITATION]}),this.bandOptionModel.isExistAttributeMemberMediaDownloadEnabled()&&(this._settingItems[v.OPTIONS.MEDIA_SAVABLE]={category:y.BAND_MENU_SETTING_ITEMS,id:v.OPTIONS.MEDIA_SAVABLE,title:IM("bandsetting.media_download_permission.title"),desc:this._getShowPermission(this.bandOptionModel.isMemberMediaDownloadEnabled()),targetOptions:[v.OPTIONS.MEDIA_SAVABLE]}),this.bandOptionModel.isExistPropsIsSecretCommentEnabled()&&(this._settingItems[v.OPTIONS.IS_SECRET_COMMENT_ENABLED]={category:y.BAND_MENU_SETTING_ITEMS,id:v.OPTIONS.IS_SECRET_COMMENT_ENABLED,title:IM("bandsetting.home.btn.secret_comment_use"),desc:this._getEnabledToString(this.bandOptionModel.isSecretCommentEnabled()),targetOptions:[v.OPTIONS.IS_SECRET_COMMENT_ENABLED]}),this.bandOptionModel.isPermittedConfigureChat()&&(this._settingItems[v.OPTIONS.CHAT_ENABLED]={category:y.BAND_MENU_SETTING_ITEMS,id:v.OPTIONS.CHAT_ENABLED,title:IM("bandsetting.band_chatting.title"),desc:this._getChattingSetting(),targetOptions:[v.OPTIONS.CHAT_ENABLED,v.OPTIONS.IS_BAND_CHAT_ENABLED,v.OPTIONS.DEFAULT_CHAT_MESSAGE_PERIOD]}),this.bandOptionModel.isPermittedConfigureContentsQuota()&&(this._settingItems[v.OPTIONS.FILE_QUOTA_POLICY]={category:y.BAND_MENU_SETTING_ITEMS,id:v.OPTIONS.FILE_QUOTA_POLICY,title:IM("web.bandsetting.large_files.live_storage"),desc:this._getContentsQuota(),targetOptions:[v.OPTIONS.FILE_QUOTA_POLICY,v.OPTIONS.IS_STATUS_ANNOUNCEABLE]})},_getBandSettingJoinAppAsk:function(){return this.bandOptionModel.isNeedJoinApproval()?IM("bandsetting.band_join.app_or_question.full_text",{isAppJoin:this._getEnabledToString(this.bandOptionModel.isNeedJoinApproval()),isQuestion:this._getEnabledToString(this.bandOptionModel.isAskJoinQuestion())}):IM("bandsetting.band_join_.app_or_question.simple_text",{isAppJoin:this._getEnabledToString(this.bandOptionModel.isNeedJoinApproval()),isQuestion:this._getEnabledToString(this.bandOptionModel.isAskJoinQuestion())})},_getBandOpenTypeLabel:function(){return this.bandOptionModel.isSecretBand()?IM("web.bandsetting.bandtype.txt.secret_band_title"):this.bandOptionModel.isClosedBand()?IM("web.bandsetting.bandtype.txt.closed_band_title"):IM("web.bandsetting.bandtype.txt.public_band_title")},_getJoinConditionLabel:function(){var e=b.getJoinOptionByAllowedGender(this.bandOptionModel.getAllowedGender()),t=b.getJoinOptionByAllowedYearOfBirth(this.bandOptionModel.getMinBirthYear(),this.bandOptionModel.getMaxBirthYear()),n=b.getJoinOptionByEmailVerification(this.bandOptionModel.isEmailVerificationEnabled());return this.bandOptionModel.isEmailVerificationEnabled()?[e,t,n,IM("bandsetting.email_enabled.copy_band")].join(", "):[e,t,n].join(", ")},_getEnabledToString:function(e){var t=I;return e&&(t=E),t},_getOpenCellphoneRolesLabels:function(){var e=IM("bandsetting.member_permission.anyone"),t=IM("bandsetting.member_permission.until_coleader"),n=IM("web.band.member.role.leader"),s={};s[g.ANYONE]=IM("bandsetting.member_permission.role.text",{role:e}),s[g.UNTIL_COLEADER]=IM("bandsetting.member_permission.role.text",{role:t}),s[g.ONLY_LEADER]=IM("bandsetting.member_permission.role.text",{role:n}),s[g.NO_ONE]=IM("profile.edit.label.open_cellphone.setting_permission.not_open");var a="";return i.find(g.ALL_MEMBER_ROLES,i.bind((function(e){e.isSame(this.bandOptionModel.getOpenCellphoneRoles())&&(a=s[e])}),this)),a},_getMemberBirthday:function(){return[IM("bandsetting.contact_and_birth.display",{isShow:this._getEnabledToString(this.bandOptionModel.isOpenBirthday())}),IM("bandsetting.contact_and_birth.noti_post",{isShow:this._getEnabledToString(this.bandOptionModel.isPostMembersBirthday())})].join(", ")},_getOpenCellphoneRolesMemberBirthday:function(){return[this._getOpenCellphoneRolesLabels(),this._getMemberBirthday()].join(", ")},_getOnlineMember:function(){return[this._getEnabledToString(this.bandOptionModel.isShowOnlineMember()),IM("bandsetting.show.online_member.post",{isShow:this._getEnabledToString(this.bandOptionModel.isShowOnlineMemberOnPosts())})].join(", ")},_getShowPermission:function(e){return 0===e.length||!1===e?IM("ui.label.disallow"):IM("ui.label.allow")},_getChattingSetting:function(){var e=IM("bandsetting.band_chatting.enabled.label",{isEnabled:this._getEnabledToString(this.bandOptionModel.isBandChatEnabled())}),t=IM("bandsetting.band_chatting.enabled.all_member",{isEnabled:this._getEnabledToString(this.bandOptionModel.isBandAllMembersChatEnabled())}),n="";return"min"==this.bandOptionModel.getDefaultChatMessagePeriod()?n=IM("bandsetting.band_chatting.message_period.min_type"):"month"==this.bandOptionModel.getDefaultChatMessagePeriod()?n=IM("bandsetting.band_chatting.message_period.month_type"):"year"==this.bandOptionModel.getDefaultChatMessagePeriod()&&(n=IM("bandsetting.band_chatting.message_period.year_type")),[e,t,n].join(", ")},_getContentsQuota:function(){return"all"===this.bandOptionModel.getContentsQuota().file_quota_policy?IM("bandsetting.quota.label.band_stogare"):"small_only"===this.bandOptionModel.getContentsQuota().file_quota_policy?IM("setting.quota.storage.large_files.option.small_only"):void 0},_setCopyBandOption:function(){var e=i.pluck(this._selectedBands,"bandNo"),t=this._getTargetOptionsField();return f.setCopyBandOption(this._bandNo,e,t).done(i.bind((function(){alert(IM("alert.setting.completion"))}),this)).fail(i.bind((function(e){if(1052===e.result_code){var t=i.map(e.result_data,(function(e){var t={};return t.band=e,t}));this._showBandCopySettingFailBandListView(t)}}),this)).always(i.bind((function(){this.trigger("complete"),this.destroy()}),this))},_showBandCopySettingFailBandListView:function(e){var t=A.openLayer({title:IM("bandsetting.copy.fail.title"),selectionType:A.SELECTION_TYPE.SINGLE_SELECT,bandTypes:[M.BAND_TYPE.GROUP],excludedBandNos:[],groupBandListCollection:C.buildWithData(e),bandGuideMessage:IM("bandsetting.copy.fail.guide",{count:e.length}),confirmText:IM("ui.label.confirm")});t.once("singleBand:selected",i.bind((function(e){t.destroy(),h.GROUP_BAND_HOME.goDForced({band_no:e.bandNo})}),this))},_getTargetOptionsField:function(){var e=[];return t("._checkInput:checked").each(i.bind((function(t,n){var i=n.value,s=this._settingItems[i].targetOptions;Array.prototype.push.apply(e,s)}),this)),e}});return T.openLayer=function(e,t){var n=new T({bandData:e,selectedBands:t});return o.open(n),n},T}.call(t,n,t,e))||(e.exports=i)},3413:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM("ui.label.setting.select") %></h1>\n    </header>\n\n    <div class="modalBody">\n        <div class="modalContentWrap gPal0 gPar0">\n            <p class="sDesc gFs14 gMat18 gPab18 gMar20 gMal20 -bLine"><%= IM("web.bandsetting.copy.desc") %></p>\n\n            <div class="copySettingBox" style="height: 339px;">\n                <h2 class="gSrOnly"><%= IM("web.bandsetting.information.manager") %></h2>\n                \x3c!--  밴드 정보 관리 --\x3e\n                <ul class="listLine">\n                    <% _.each(settingItems[SETTING_ITEM_CATEGORY.BAND_INFO_SETTING_ITEMS], function(item) { %>\n                    <li class="tLine flexList">\n                        <div class="text">\n                            <span class="gFs14 gColorBk1"><%= item.title %></span>\n                            <span class="sub2 ellipsis2"><%= item.desc %></span>\n                        </div>\n                        <span class="etc">\n                            <span class="uCheck -checkbox -noLabel">\n                                <input type="checkbox" id="setting_item_<%= item.id %>" value="<%= item.id %>" class="checkInput _checkInput" checked>\n                                <span class="checkLabel">\n                                    <span class="shape"></span>\n                                </span>\n                            </span>\n                        </span>\n                    </li>\n                    <% }); %>\n                </ul>\n\n                <h2 class="gSrOnly"><%= IM("bandsetting.member_join_management.title") %></h2>\n                \x3c!-- 멤버 가입 관리 --\x3e\n                <ul class="listLine">\n                    <% _.each(settingItems[SETTING_ITEM_CATEGORY.MEMBER_JOIN_SETTING_ITEMS], function(item) { %>\n                    <li class="tLine flexList">\n                        <div class="text">\n                            <span class="gFs14 gColorBk1"><%= item.title %></span>\n                            <span class="sub2 ellipsis2"><%= item.desc %></span>\n                        </div>\n                        <span class="etc">\n                            <span class="uCheck -checkbox -noLabel">\n                                <input type="checkbox" id="setting_item_<%= item.id %>" value="<%= item.id %>" class="checkInput _checkInput" checked>\n                                <span class="checkLabel">\n                                    <span class="shape"></span>\n                                </span>\n                            </span>\n                        </span>\n                    </li>\n                    <% }); %>\n                </ul>\n\n                <h2 class="gSrOnly"><%= IM("web.bandsetting.managing_member_activities") %></h2>\n                \x3c!-- 멤버 활동 관리 --\x3e\n                <ul class="listLine">\n                    <% _.each(settingItems[SETTING_ITEM_CATEGORY.MEMBER_ACTIVITY_SETTING_ITEMS], function(item) { %>\n                    <li class="tLine flexList">\n                        <div class="text">\n                            <span class="gFs14 gColorBk1"><%= item.title %></span>\n                            <span class="sub2 ellipsis2"><%= item.desc %></span>\n                        </div>\n                        <span class="etc">\n                            <span class="uCheck -checkbox -noLabel">\n                                <input type="checkbox" id="setting_item_<%= item.id %>" value="<%= item.id %>" class="checkInput _checkInput" checked>\n                                <span class="checkLabel">\n                                    <span class="shape"></span>\n                                </span>\n                            </span>\n                        </span>\n                    </li>\n                    <% }); %>\n                </ul>\n\n                <h2 class="gSrOnly"><%= IM("bandsetting.band_menu_management.title") %></h2>\n                \x3c!-- 밴드 메뉴 관리 --\x3e\n                <ul class="listLine">\n                    <% _.each(settingItems[SETTING_ITEM_CATEGORY.BAND_MENU_SETTING_ITEMS], function(item) { %>\n                    <li class="tLine flexList">\n                        <div class="text">\n                            <span class="gFs14 gColorBk1"><%= item.title %></span>\n                            <span class="sub2 ellipsis2"><%= item.desc %></span>\n                        </div>\n                        <span class="etc">\n                            <span class="uCheck -checkbox -noLabel">\n                                <input type="checkbox" id="setting_item_<%= item.id %>" value="<%= item.id %>" class="checkInput _checkInput" checked>\n                                <span class="checkLabel">\n                                    <span class="shape"></span>\n                                </span>\n                            </span>\n                        </span>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n        </div>\n    </div>\n\n    <footer class="modalFooter -tLine">\n        <button type="button" class="btnLyBack uButton -iconLyBack _btnBack"><span class="gSrOnly"><%= IM("ui.label.back") %></span></button>\n        <button type="button" class="uButton -cancel _btnClose"><%= IM("ui.label.cancel") %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM("web.ui.button.label.complete") %></button>\n    </footer>\n</div>\n\n\n\n\n'},3414:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(499),o=n(498),l=n(543),r=n(538),d=n(3415),c=n(3417),h=s.View.extend({attributes:{"data-viewname":"DBandQuotaUnfixedSetView"},getTemplate:function(){return this._fetched?t.template(c):t.template(o)},ui:{selectUnlimited:"._selectUnlimited"},events:{"change @ui.selectUnlimited":"_openMemberCountSettingLayer"},initialize:function(e){this._fetched=!1,this.bandNo=e.bandNo},serializeData:function(){return this._fetched?{memberLimit:l.BAND_TYPE_CONDITION.BAND_MEMBER_MAX_COUNT,isMemberUnlimited:this.bandOptionModel.isQuotaUnfixed()}:{_loading_size:a.Size.MEDIUM}},onAttach:function(){return r.getBandOption(this.bandNo).then(t.bind((function(e){this._fetched=!0,this.bandOptionModel=e,this.render()}),this))},_openMemberCountSettingLayer:function(){var e=i.toBoolean(this.getUI("selectUnlimited").find("option:selected").val()),n={bandNo:this.bandNo,memberLimit:l.BAND_TYPE_CONDITION.BAND_MEMBER_MAX_COUNT,isMemberUnlimited:e},s=d.buildAsLayer(n);this.listenTo(s,"modal:cancel",t.bind((function(){this.getUI("selectUnlimited").val(""+this.bandOptionModel.isQuotaUnfixed())}),this))}});return h.build=function(e){return new h({bandNo:e})},h}.call(t,n,t,e))||(e.exports=i)},3415:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(153),a=n(83),o=n(486),l=n(3416),r=i.View.extend({attributes:{"data-viewname":"DBandMemberCountConfirmView"},template:t.template(l),ui:{checkConfirmNotification:"._checkConfirmNotification",btnClose:"._btnClose",btnConfirmUnlimited:"._btnConfirmUnlimited",btnConfirmLimited:"._btnConfirmLimited"},events:{"click @ui.checkConfirmNotification":"_adaptButtonStyle","click @ui.btnConfirmUnlimited":"_confirmUnlimitedMemberCount","click @ui.btnConfirmLimited":"_confirmLimitedMemberCount","click @ui.btnClose":function(){this.trigger("modal:cancel"),this.destroy()}},initialize:function(e){this.bandNo=e.bandNo,this.memberLimit=e.memberLimit,this.isMemberUnlimited=e.isMemberUnlimited},serializeData:function(){return{memberLimit:this.memberLimit,isMemberUnlimited:this.isMemberUnlimited}},_adaptButtonStyle:function(){this.ui.btnConfirmUnlimited.toggleClass("-disabled",!this.ui.checkConfirmNotification.is(":checked"))},_confirmUnlimitedMemberCount:function(){this.ui.checkConfirmNotification.is(":checked")?this._updateMemberCount():alert(IM("bandsetting.member_count.alert.check_confirm"))},_confirmLimitedMemberCount:function(){this._updateMemberCount()},_updateMemberCount:function(){a.setBandMemberCountLimit(this.bandNo,this.isMemberUnlimited).then(t.bind((function(){s.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo}),this.destroy()}),this)).fail(t.bind((function(){s.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo}),this.destroy()}),this))}});return r.buildAsLayer=function(e){var t=new r({bandNo:e.bandNo,memberLimit:e.memberLimit,isMemberUnlimited:e.isMemberUnlimited});return o.open(t),t},r}.call(t,n,t,e))||(e.exports=i)},3416:function(e,t){e.exports='<section class="lyWrap">\n\n    <%  // 빅밴드 %>\n    <% if (isMemberUnlimited) {%>\n        <div class="lyContent -w360">\n            <header class="header">\n                <h1 class="title"><%= IM("bandsetting.member_count.title.limited_member") %></h1>\n            </header>\n            <div class="main">\n                <p class="p point"><strong><%= IM("bandsetting.member_count.txt.description.title") %></strong></p>\n\n                <ul class="p -fs13 -dotList">\n                    <li>\n                        <strong><%= IM("bandsetting.member_count.txt.description1") %></strong>\n                    </li>\n                    <li>\n                        <%= IM("bandsetting.member_count.txt.description2") %>\n                        <a href="/cs/notice/897" class="underline"><%= IM("bandsetting.member_count.txt.more_info") %></a>\n                    </li>\n                    <li><%= IM("bandsetting.member_count.txt.description3") %></li>\n                    <li>\n                        <strong><%= IM("bandsetting.member_count.txt.description4") %></strong>\n                    </li>\n                </ul>\n\n                <div class="selectArea">\n\n                    <label for="delete" class="uCheck -checkbox ">\n                        <input type="checkbox" id="delete" class="checkInput _checkConfirmNotification">\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= IM("bandsetting.member_count.txt.confirm.change_member_count") %></span>\n                        </span>\n                    </label>\n                </div>\n            </div>\n\n            <footer class="footer">\n                <button type="button" class="uButton -cancel _btnClose"><%- IM(\'ui.label.cancel\') %></button>\n                <button type="button" class="uButton -confirm _btnConfirmUnlimited -disabled"><%- IM(\'bandsetting.change_band_type\') %></button>\n            </footer>\n        </div>\n\n    <% // 1000명 제한 밴드 %>\n    <% } else { %>\n        <div class="lyContent -w360">\n            <header class="header">\n                <h1 class="title"><%= IM("bandsetting.band_member_count_setting.title") %></h1>\n            </header>\n            <div class="main">\n                <p class="tempMessage"><%= IM("bandsetting.member_count.message.limited_member", {memberLimit: memberLimit}) %></p>\n            </div>\n            <footer class="footer">\n                <button type="button" class="uButton -cancel _btnClose"><%- IM(\'ui.label.cancel\') %></button>\n                <button type="button" class="uButton -confirm _btnConfirmLimited"><%- IM(\'bandsetting.change_band_type\') %></button>\n            </footer>\n        </div>\n    <% } %>\n</section>'},3417:function(e,t){e.exports='<section class="sSettingBand gContentCardShadow">\n    <div class="uHeaderWrap -h50">\n        <header class="header">\n            <h1 class="title"><%= IM("bandsetting.band_member_count_setting.title") %></h1>\n        </header>\n    </div>\n    <div>\n        <% // 밴드 멤버수 설정 %>\n        <ul class="sSettingList">\n            <li class="sSettingItem">\n                <div class="itemContent">\n                    <label for="bandMemberType" class="label"><%= IM("bandsetting.band_member_count_setting.title") %></label>\n                </div>\n                <div class="itemSide -wAuto">\n                    <div class="uSelect -bg">\n                        <select id="bandMemberType" class="gColorBk4 _selectUnlimited">\n                            <option value="false" <% if (!isMemberUnlimited) { %> selected<% } %>><%= IM("web.bandsetting.home.txt.band_member_count_limit", {memberLimit: memberLimit}) %></option>\n                            <option value="true" <% if (isMemberUnlimited) { %> selected<% } %>><%= IM("web.bandsetting.home.txt.infinite_band_member_count") %></option>\n                        </select>\n                    </div>\n                </div>\n            </li>\n        </ul>\n        <div class="attention -tLine">\n            <h3 class="title"><%= IM("web.bandsetting.home.txt.member_count_caution_title") %></h3>\n            <div class="noticeArea">\n                <p class="noticeText"><%= IM("web.bandsetting.home.txt.member_count_caution1") %></p>\n                <p class="noticeText"><%= IM("web.bandsetting.home.txt.member_count_caution2") %></p>\n                <a href="/cs/notice/897" class="moreLink"><%= IM("bandsetting.member_count.txt.more_info") %></a>\n            </div>\n        </div>\n    </div>\n</section>\n'},3418:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=(n(52),n(4)),a=n(3419),o=n(153),l=n(499),r=n(498),d=n(538),c=n(562),h=n(510),u=n(26),p=n(155),m=n(1171),_=n(2107),b=n(1551),g=n(1280),f=m.PERMISSION,v=m.PERMISSION_ID,A=s.View.extend({tagName:"div",className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DBandChattingItemView"},getTemplate:function(){return this._loading?t.template(a):t.template(r)},ui:{btnBandChatEnabled:"._btnBandChatEnabled",btnBandAllMembersChatEnabled:"._btnBandAllMembersChatEnabled",bandAllMembersChatEnabledDesc:"._bandAllMembersChatEnabledDesc",selectChatMessagePeriod:"._selectChatMessagePeriod",btnConfirm:"._btnConfirm",subSettingListWrap:"._subSettingListWrap"},regions:{chatPermissionsRegion:{el:"._chatPermissionsRegion",replaceElement:!0},disableDefaultChatPermissionRegion:{el:"._disableDefaultChatPermissionRegion",replaceElement:!0}},events:{"click @ui.btnBandAllMembersChatEnabled":"_showBandAllMembersChatEnabledSetLayer","click @ui.btnBandChatEnabled":"_showBandChatEnabledConfirmView","click @ui.btnConfirm":"_setBandChatEnabled"},initialize:function(e){this._loading=!1,this.bandNo=e.bandNo},serializeData:function(){return this._loading?{isBandChatEnabled:this.isBandChatEnabled,isBandAllMembersChatEnabled:this.bandOptionModel.isBandAllMembersChatEnabled(),defaultChatMessagePeriod:this.bandOptionModel.getDefaultChatMessagePeriod()}:{_loading_size:l.Size.MEDIUM}},onRender:function(){this._loading&&(this._toggleChatPermissions(this.isBandChatEnabled),this._toggleDisableDefaultChatPermission(this.bandOptionModel.isBandAllMembersChatEnabled()))},onAttach:function(){d.getBandOption(this.bandNo).then(t.bind((function(e){this._loading=!0,this.bandOptionModel=e,this.isBandChatEnabled=this.bandOptionModel.isBandChatEnabled(),this.render()}),this))},_toggleChatPermissions:function(e){var t=this.getRegion("chatPermissionsRegion");if(e){var n=[];return n.push(f.INVITE_CHAT),n.push(f.CREATE_OPEN_CHAT),n.push(f.DELETE_OPEN_CHAT),_.show(this.getRegion("chatPermissionsRegion"),{bandNo:this.bandNo,permissions:n,bandOptionModel:this.bandOptionModel})}t.empty()},_toggleDisableDefaultChatPermission:function(e){var t=this.getRegion("disableDefaultChatPermissionRegion");if(e){var n=f.DISABLE_DEFAULT_CHAT,i=g.getSelectedOption(n,this.bandOptionModel);t.show(b.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel,permission:n,selectedOption:i}))}else t.empty()},toggleSubSettingList:function(){this._toggleChatPermissions(this.isBandChatEnabled),this.getUI("subSettingListWrap").toggle(this.isBandChatEnabled)},_showBandChatEnabledConfirmView:function(e){var n=this.getUI("btnBandChatEnabled").prop("checked");return n?(this.isBandChatEnabled=n,void this.toggleSubSettingList()):(h.openLayer({bodyTitle:IM("bandsetting.band_chat_enabled.confirm.title"),bodyDesc:IM("bandsetting.band_chat_enabled.confirm.desc"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")}).once(h.EVENTS.CONFIRM,t.bind((function(){this.getUI("btnBandChatEnabled").prop("checked",n),this.isBandChatEnabled=n,this.toggleSubSettingList()}),this)),!1)},_showBandAllMembersChatEnabledSetLayer:function(e){e.preventDefault();var n=this.getUI("btnBandAllMembersChatEnabled").prop("checked"),i=c,s={headerTitle:IM("bandsetting.band_chatting.enabled.title"),bodyDesc:IM("bandsetting.band_chatting.enabled.description")};n||(i=h,s={bodyTitle:IM("bandsetting.band_chatting.disabled.title"),bodyDesc:IM("bandsetting.band_chatting.disabled.description"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")}),i.openLayer(s).once(c.EVENTS.CONFIRM,t.bind((function(){this.getUI("btnBandAllMembersChatEnabled").prop("checked",n),this._toggleDisableDefaultChatView(n)}),this))},_toggleDisableDefaultChatView:function(e){this.getUI("bandAllMembersChatEnabledDesc").toggle(e),this._toggleDisableDefaultChatPermission(e)},_setBandChatEnabled:function(){this.isBandChatEnabled!==this.bandOptionModel.isBandChatEnabled()?d.SETTING.setBandChatEnabled(this.bandNo,this.isBandChatEnabled).then(t.bind((function(){this._setChatPermissions()}),this)):this._setChatPermissions()},_setChatPermissions:function(){if(this.isBandChatEnabled){var e,n=this.getUI("btnBandAllMembersChatEnabled").prop("checked"),s={bandNo:this.bandNo},a=this.getUI("selectChatMessagePeriod").val(),o=[];this.getChildView("chatPermissionsRegion").children.each((function(e){o.push(e)}));var l=this.getChildView("disableDefaultChatPermissionRegion");l&&o.push(l),t.each(o,(function(t){var n=t.model.get("id"),i=t.getSelectedPermissionOption();n===v.CHAT_TO_MANAGER?e=i.permissionValue:s[i.permissionKey]=i.permissionValue}),this),i.when(d.SETTING.setBandDefaultChat(this.bandNo,n),d.SETTING.setChatPermission(this.bandNo,s),d.SETTING.setDefaultChatMessagePeriod(this.bandNo,a),d.SETTING.setChatToManager(this.bandNo,e)).then(t.bind((function(){this._refreshBandData().then(t.bind((function(){this._eventTriggerAndPageMove()}),this))}),this))}else this._refreshBandData().then(t.bind((function(){this._eventTriggerAndPageMove()}),this))},_eventTriggerAndPageMove:function(){u.getDGlobalChannel().trigger(u.EVENT.CHAT_SETTINGS_CHANGED,this.isBandChatEnabled),o.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo})},_refreshBandData:function(){return this.bandData=p.get(this.bandNo),this.bandData.resetBandDataState(),this.bandData.loadBandData()}});return A.buildBandChattingItemView=function(e){return new A({bandNo:e})},A}.call(t,n,t,e))||(e.exports=i)},3419:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.band_chatting.title") %></h1>\n    </header>\n</div>\n\n<div class="sSettingList">\n    <% // 채팅 사용 %>\n    <div class="sSettingItem">\n        <div class="itemContent">\n            <label for="bandChatEnabled" class="label"><%= IM(\'bandsetting.band_chat_enabled.title\') %></label>\n        </div>\n        <div class="itemSide">\n            <label class="uCheck -switch">\n                <input type="checkbox" id="bandChatEnabled" class="checkInput _btnBandChatEnabled" <% if (isBandChatEnabled) { %> checked<% } %>>\n                <span class="checkLabel">\n                    <span class="shape"></span>\n                </span>\n            </label>\n        </div>\n    </div>\n</div>\n\n<div class="_subSettingListWrap" <%= (!isBandChatEnabled) ? \'style="display:none"\': \'\' %>>\n    <div class="sSettingTitle -hideTxt"></div>\n    <div class="_chatPermissionsRegion"></div>\n\n    <div class="sSettingTitle -hideTxt"></div>\n    <ul class="sSettingList">\n        <% // 전체 멤버 채팅방 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <label for="bandAllMembersChatEnabled" class="label"><%= IM("bandsetting.band_chatting.enabled.title") %></label>\n                <span class="subTxt _bandAllMembersChatEnabledDesc" <%= (!isBandAllMembersChatEnabled) ? \'style="display:none"\': \'\' %>><%= IM("bandsetting.band_chatting.chat_enabled.notice") %></span>\n            </div>\n            <div class="itemSide">\n                <label class="uCheck -switch">\n                    <input type="checkbox" id="bandAllMembersChatEnabled" class="checkInput _btnBandAllMembersChatEnabled" <% if (isBandAllMembersChatEnabled) { %> checked<% } %>>\n                    <span class="checkLabel">\n                        <span class="shape"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n\n        <% // 전체 채팅방 닫기 %>\n        <li class="_disableDefaultChatPermissionRegion"></li>\n    </ul>\n\n    <div class="sSettingTitle -hideTxt"></div>\n    <div class="sSettingList">\n        <% // 대화내용  %>\n        <div class="sSettingItem">\n            <div class="itemContent">\n                <label for="period" class="label"><%= IM("bandsetting.band_chatting.message_period.title") %></label>\n            </div>\n            <div class="itemSide -wAuto">\n                <div class="uSelect -bg">\n                    <select id="period" class="gColorBk4 _selectChatMessagePeriod">\n                        <option value="min" <% if (defaultChatMessagePeriod == "min") { %>selected<% } %>><%= IM("bandsetting.band_chatting.message_period.min_type") %></option>\n                        <option value="month" <% if (defaultChatMessagePeriod == "month") { %>selected<% } %>><%= IM("bandsetting.band_chatting.message_period.month_type") %></option>\n                        <option value="year" <% if (defaultChatMessagePeriod == "year") { %>selected<% } %>><%= IM("bandsetting.band_chatting.message_period.year_type") %></option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="attention -tLine -bg">\n        <div class="noticeArea">\n            <p class="noticeText"><%= IM("bandsetting.band_chatting.description1") %></p>\n            <p class="noticeText"><%= IM("bandsetting.band_chatting.description2") %></p>\n            <p class="noticeText"><%= IM("bandsetting.band_chatting.description3") %></p>\n        </div>\n    </div>\n</div>\n\n<div class="btnFooter">\n    <button type="button" class="_btnConfirm uButton -sizeL -confirm"><%= IM("ui.label.save") %></button>\n</div>'},3420:function(e,t){e.exports='<div class="itemContent">\n    <span class="label"><%= title %></span>\n    <span class="subTxt _txtSelectedPermissionGroupName"><%= selectedPermissionGroupName %></span>\n    <% if (desc) { %>\n    <span class="subTxt"><%= desc %></span>\n    <% } %>\n</div>\n<div class="itemSide">\n    <button type="button" class="uButton -sizeS -confirm2 _btnChange"><%= IM("ui.label.change") %></button>\n</div>'},3421:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(52),s=n(4),a=n(3422),o=n(486),l=n(543),r=n(1171),d=n(3423),c=n(493),h=n(1280),u=l.PERMISSION_ROLES,p=r.PERMISSION_GROUP,m=r.PERMISSION,_={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},b=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DMemberPermissionSelectView"},template:t.template(a),templateContext:function(){return{permission:this.options.permission,selectedOption:this.options.selectedOption,getPermissionValue:t.bind((function(e){var t=this.options.selectedOption.permissionGroupId,n=this.options.selectedOption.permissionValue;switch(e){case p.DISALLOW.id:return"";case p.LEADER_ONLY.id:return[u.LEADER].join(",");case p.LEADER_AND_COLEADER.id:return[u.LEADER,u.COLEADER].join(",");case p.LEADER_AND_MEMBER_GROUPS.id:return p.LEADER_AND_MEMBER_GROUPS.id===t?n:"";case p.ALL_MEMBER.id:return[u.LEADER,u.COLEADER,u.MEMBER].join(",")}}),this)}},ui:{radioPermissionGroup:"._radioPermissionGroup",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"click @ui.btnConfirm":function(e){var t=this.getUI("radioPermissionGroup").filter(":checked");this.trigger(_.CONFIRM,{permissionGroupId:t.data("permissionGroupId"),permissionKey:t.data("permissionKey"),permissionValue:t.val()}),this.destroy()},"click @ui.btnCancel":function(e){this.trigger(_.CANCEL),this.destroy()},"click @ui.radioPermissionGroup":function(e){var n=this.getUI("radioPermissionGroup").filter(":checked"),i=$(e.currentTarget);if(i.data("permissionGroupId")===p.LEADER_AND_MEMBER_GROUPS.id){var s=t.map(i.val().split(","),Number);return d.openLayer(this.options.memberGroups,s).once(d.EVENTS.CONFIRM,t.bind((function(e){i.val(e.join(",")),i.prop("checked",!0).trigger("change")}),this)).once(d.EVENTS.CANCEL,t.bind((function(){i.val(s.join(","))}),this)),!1}n.data("permissionGroupId")===p.LEADER_AND_MEMBER_GROUPS.id&&n.val(this.options.selectedOption.permissionValue)},"change @ui.radioPermissionGroup":function(e){this._toggleConfirmButton()}},onAttach:function(){this._toggleConfirmButton()},_toggleConfirmButton:function(){var e=!1,t=this.getUI("radioPermissionGroup").filter(":checked");t.data("permissionGroupId")!==this.options.selectedOption.permissionGroupId&&(e=!0),t.data("permissionGroupId")!==p.LEADER_AND_MEMBER_GROUPS.id||this._isSamePermissionValue(t.val(),this.options.selectedOption.permissionValue)||(e=!0),this.getUI("btnConfirm").prop("disabled",!e)},_isSamePermissionValue:function(e,t){return h.isSamePermissionValue(e,t)}});return b.EVENTS=_,b.openLayerAsync=function(e){return c.getMemberGroups(e.bandNo,[u.COLEADER]).then((function(n){var s=m[e.permissionId],a=i.camelizeKeys(n),l=a.hasMemberGroup,r=function(e,n,i){return t.filter(e.permissionGroups,(function(t){var s=i||t.id!==p.LEADER_AND_MEMBER_GROUPS.id,a=h.getSelectedOption(m.POST_CONTENTS,n),o=p[a.permissionGroupId],l=p.ALL_MEMBER.level;return e.id===m.POST_APPROVER.id&&(l=Math.min(o.level,o.level)),e.id===m.CREATE_RESERVED_POST.id&&(l=o.level,o.id===p.LEADER_AND_MEMBER_GROUPS.id&&(l=p.LEADER_AND_MEMBER_GROUPS.level-1)),t.level<=l&&s}))}(s,e.bandOptionModel,l),d=new b({collection:new Backbone.Collection(r),permission:s,selectedOption:e.selectedOption,hasMemberGroup:a.hasMemberGroup,memberGroups:a.items});return o.openWithoutHiding(d),d}))},b}.call(t,n,t,e))||(e.exports=i)},3422:function(e,t){e.exports='<div class="lyContent">\n    <header class="header">\n        <h1 class="title"><%= permission.title %></h1>\n    </header>\n    <div class="main">\n        <ul class="selectArea">\n            <% _.each(items, function(group) { %>\n            <li>\n                <label for="<%= group.id %>" class="uCheck -radio">\n                    <input type="radio"\n                           id="<%= group.id %>"\n                           name="radio"\n                           class="checkInput _radioPermissionGroup"\n                           data-permission-group-id="<%= group.id %>"\n                           data-permission-key="<%= permission.permissionKey[group.type] %>"\n                           value="<%= getPermissionValue(group.id) %>"\n                           <%= selectedOption.permissionGroupId === group.id ? \'checked\' : \'\' %>\n                    >\n                    <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%= group.name %></span>\n                        </span>\n                </label>\n            </li>\n            <% }); %>\n        </ul>\n    </div>\n    <footer class="footer">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM("ui.label.cancel") %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM("ui.label.confirm") %></button>\n    </footer>\n</div>>'},3423:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3424),a=n(486),o={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},l=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DPermittedMemberGroupSelectView"},template:t.template(s),templateContext:function(){return{isSelectedMemberGroup:t.bind((function(e){return t.contains(this.options.selectedMemberGroupIds,e)}),this)}},ui:{checkboxMemberGroup:"._checkboxMemberGroup",btnConfirm:"._btnConfirm"},events:{"change @ui.checkboxMemberGroup":"_toggleConfirmButton","click ._btnCancel":function(e){this.trigger(o.CANCEL),this.destroy()},"click @ui.btnConfirm":function(e){var t=this._getSelectedMemberGroupIds();this.trigger(o.CONFIRM,t),this.destroy()}},onAttach:function(){this._toggleConfirmButton()},_getSelectedMemberGroupIds:function(){return t.map(this.getUI("checkboxMemberGroup").filter(":checked").get(),(function(e){return e.value}))},_isEqualMemberGroupIds:function(e,n){return t.sortBy(e).join(",")===t.sortBy(n).join(",")},_toggleConfirmButton:function(){var e=this._getSelectedMemberGroupIds(),n=t.isEmpty(e)||this._isEqualMemberGroupIds(this.options.selectedMemberGroupIds,e);this.getUI("btnConfirm").prop("disabled",n)}});return l.EVENTS=o,l.openLayer=function(e,n){var i=new l({collection:new Backbone.Collection(e),selectedMemberGroupIds:t.without(n,-10)});return a.openWithoutHiding(i),i},l}.call(t,n,t,e))||(e.exports=i)},3424:function(e,t){e.exports='<div class="lyContent">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM(\'bandsetting.member_permission.member_group_select.title\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContent gPat20 gPal20 gPar20">\n            <p class="p gMab15"><%= IM(\'bandsetting.member_permission.member_group_select.desc\') %></p>\n            <ul class="selectArea">\n                <% _.each(items, function(memberGroup) { %>\n                <li>\n                    <label for="<%= \'memberGroup\' + memberGroup.memberGroupId %>" aria-label="" class="uCheck -checkbox ">\n                        <input type="checkbox"\n                               class="checkInput _checkboxMemberGroup"\n                               id="<%= \'memberGroup\' + memberGroup.memberGroupId %>"\n                               value="<%= memberGroup.memberGroupId %>"\n                               <%= isSelectedMemberGroup(memberGroup.memberGroupId) ? \'checked\' : \'\' %>\n                        >\n                        <span class="checkLabel">\n                            <span class="shape"></span>\n                            <span class="text"><%- memberGroup.name %></span>\n                        </span>\n                    </label>\n                </li>\n                <% }); %>\n            </ul>\n        </div>\n    </div>\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},3425:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3426),o=n(153),l=n(499),r=n(498),d=n(491),c=n(545),h=n(666),u=n(1092),p=n(635),m=n(800),_=n(3427),b=n(3431),g=n(2103),f=(n(543),n(538)),v=n(1171),A=n(1280),M=n(1551),C=v.PERMISSION,I=s.View.extend({tagName:"div",className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DBandScheduleSettingView"},getTemplate:function(){return this.model.get("dataFetched")?i.template(a):i.template(r)},ui:{btnUpcomingSchedulePeriodSelectLayer:"._btnUpcomingSchedulePeriodSelectLayer",bandCalendarRegion:"._bandCalendarRegion",externalCalendarRegion:"._externalCalendarRegion",btnIcalImport:"._btnIcalImport"},regions:{bandCalendarRegion:{el:"@ui.bandCalendarRegion",replaceElement:!0},externalCalendarRegion:{el:"@ui.externalCalendarRegion",replaceElement:!0},registerSchedulePermissionRegion:{el:"._registerSchedulePermissionRegion",replaceElement:!0},modifySchedulePermissionRegion:{el:"._modifySchedulePermissionRegion",replaceElement:!0},registerCalendarPermissionRegion:{el:"._registerCalendarPermissionRegion",replaceElement:!0}},events:{"click @ui.btnUpcomingSchedulePeriodSelectLayer":"_showUpcomingSchedulePeriodSelectLayer","click @ui.btnIcalImport":"_isCreateCalendarStatus"},modelEvents:{change:"render"},initialize:function(e){this.bandNo=e.bandNo},serializeData:function(){return this.model.get("dataFetched")?(this.bandData=this.model.get("bandData"),this.bandOptionModel=this.model.get("bandOptionModel"),{dataFetched:this.model.get("dataFetched"),isPermittedConfigureSchedule:this.bandOptionModel.isPermittedConfigureSchedule(),isPermittedRegisterCalendar:this.bandOptionModel.isPermittedRegisterCalendar(),isPermittedManageUpcomingSchedulePeriod:this.bandOptionModel.isPermittedManageUpcomingSchedulePeriod(),isProcessingScheduleImport:this._isProcessingScheduleImport()}):{dataFetched:!1,_loading_size:l.Size.MEDIUM}},onRender:function(){if(!this.model.get("dataFetched"))return!1;this._showPermissions(),(this.bandOptionModel.isPermittedConfigureSchedule()||this.bandOptionModel.isPermittedRegisterCalendar())&&(this.showChildView("bandCalendarRegion",_.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel})),this.showChildView("externalCalendarRegion",b.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel})))},onAttach:function(){return t.when(d.getCachedBandData(this.bandNo),f.getBandOption(this.bandNo)).then(i.bind((function(e,t){var n={dataFetched:!0,bandData:e,bandOptionModel:t};this._resetModel(n),this._checkPermission(n)}),this))},_showPermissions:function(){if(this.bandOptionModel.isPermittedConfigureSchedule()){var e=A.getSelectedOption(C.REGISTER_SCHEDULE,this.bandOptionModel),t=M.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel,permission:C.REGISTER_SCHEDULE,selectedOption:e});this.showChildView("registerSchedulePermissionRegion",t),this.listenTo(t,M.EVENTS.CHANGED,(function(e){this._setSchedulePermission(t,e)}));var n=A.getSelectedOption(C.MODIFY_SCHEDULE,this.bandOptionModel),i=M.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel,permission:C.MODIFY_SCHEDULE,selectedOption:n});this.showChildView("modifySchedulePermissionRegion",i),this.listenTo(i,M.EVENTS.CHANGED,(function(e){this._setSchedulePermission(i,e)}));var s=A.getSelectedOption(C.REGISTER_CALENDAR,this.bandOptionModel),a=M.build({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel,permission:C.REGISTER_CALENDAR,selectedOption:s});this.showChildView("registerCalendarPermissionRegion",a),this.listenTo(a,M.EVENTS.CHANGED,(function(e){this._setSchedulePermission(a,e)}))}},_setSchedulePermission:function(e,t){var n={};return n[t.permissionKey]=t.permissionValue,f.SETTING.setSchedulePermission(this.bandNo,n).done(i.bind((function(){e.options.selectedOption=t}),this)).always(i.bind((function(){e.render()}),this))},_resetModel:function(e){this.model.set({dataFetched:e.dataFetched,bandData:e.bandData,bandOptionModel:e.bandOptionModel})},_checkPermission:function(e){e.bandOptionModel.isPermittedRegisterCalendar()||(alert(IM("error.wrong_request")),o.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo}))},_isProcessingScheduleImport:function(){var e=this.bandOptionModel.getScheduleImport();return!!e&&e.import_status==c.CALENDAR_IMPORT_STATUS.PROCESSING},_isCreateCalendarStatus:function(){h.createNewCalendar(this.bandNo).getCalendarPersonalNotice().then(i.bind((function(e){if(e&&e.status==c.CALENDAR_PERSONAL_NOTICE_STATUS.READY)return alert(IM("calendar.status.notice.existing_processing_task")),!1;var t=c.TYPE.INTERNAL,n=u.build();n.fetchCalendar(this.bandNo,t).then(i.bind((function(){if(n.length>=c.MAX_CALENDAR_COUNT)return alert(IM("bandsetting.calendar.notice.exceed_maximum_calendar_count",{maxCount:c.MAX_CALENDAR_COUNT})),!1;this._showCalendarImportLayer()}),this))}),this))},_showCalendarImportLayer:function(){var e=g.openAsLayer(this.bandNo);this.listenTo(e,"bandSchedule:import",i.bind((function(){return this.bandOptionModel.fetchBandOption(this.bandNo).then(i.bind((function(){this.render()}),this))}),this))},_showUpcomingSchedulePeriodSelectLayer:function(){p.getBandScheduleConfig(this.bandNo).then(i.bind((function(e){var t=m.openAsLayer({title:IM("bandsetting.schedule.upcoming_schedule_config.title"),radioItems:[{value:"day_30",label:IM("bandsetting.schedule.upcoming_schedule_config.option.day_30")},{value:"day_14",label:IM("bandsetting.schedule.upcoming_schedule_config.option.day_14")},{value:"day_7",label:IM("bandsetting.schedule.upcoming_schedule_config.option.day_7")},{value:"none",label:IM("bandsetting.schedule.upcoming_schedule_config.option.none")}],cancel:IM("ui.label.cancel"),confirm:IM("ui.label.confirm"),initialCheckedValue:e.is_upcoming_schedule_visible?e.upcoming_schedule_period:"none"});this.listenTo(t,"modal:confirm",(function(e){var t="none"!==e;t||(e=void 0),p.setBandScheduleConfigUpcomingSchedule(this.bandNo,t,e)}))}),this))}});return I.Model=Backbone.Model.extend({defaults:{dataFetched:!1}}),I.buildBandScheduleItemView=function(e){return new I({bandNo:e,model:new I.Model})},I}.call(t,n,t,e))||(e.exports=i)},3426:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.home.btn.schedule_setting") %></h1>\n    </header>\n</div>\n\n<% if (isPermittedConfigureSchedule || isPermittedManageUpcomingSchedulePeriod) { %>\n    <ul class="sSettingList">\n\n    <% if (isPermittedConfigureSchedule) { %>\n        <% // 일정 등록 권한 %>\n        <li class="_registerSchedulePermissionRegion"></li>\n\n        <% // 일정 수정 권한 %>\n        <li class="_modifySchedulePermissionRegion"></li>\n\n        <% // 일정 캘린더 추가 권한 %>\n        <li class="_registerCalendarPermissionRegion"></li>\n    <% } %>\n\n    <% if (isPermittedManageUpcomingSchedulePeriod) { %>\n        <% // 다가오는 일정 표시 %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM(\'bandsetting.schedule.upcoming_schedule_config.title\')%></span>\n                <span class="subTxt"><%= IM(\'bandsetting.schedule.upcoming_schedule_config.desc\')%></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnUpcomingSchedulePeriodSelectLayer"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    <% } %>\n    </ul>\n<% } %>\n\n<% if (isPermittedConfigureSchedule || isPermittedRegisterCalendar) { %>\n    <% // 밴드 캘린더 %>\n    <h2 class="sSettingTitle"><%= IM("bandsetting.calendar.band_calendar.title") %></h2>\n    <div class="_bandCalendarRegion"></div>\n\n    <% // 외부 캘린더 (URL 구독하기) %>\n    <h2 class="sSettingTitle"><%= IM("bandsetting.calendar.external_calendar.title") %></h2>\n    <div class="_externalCalendarRegion"></div>\n\n    <% // 파일로 가져오기 %>\n    <% if (isPermittedRegisterCalendar) { %>\n    <div class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.calendar.external_calendar.option.txt.file") %></span></div>\n    <ul class="sSettingList">\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM(\'bandsetting.calendar.external_calendar.option.txt.file\')%></span>\n            <% if (isProcessingScheduleImport) { %>\n                <span class="subTxt -point"><%= IM(\'bandsetting.home.calendar_import.desc.processing\')%></span>\n            <% } else { %>\n                <span class="subTxt"><%= IM(\'bandsetting.home.calendar_import.desc\')%></span>\n            <% } %>\n            </div>\n            <div class="itemSide">\n            <% if (!isProcessingScheduleImport) { %>\n                <button type="button" class="uButton -sizeS -confirm2 _btnIcalImport"><%= IM(\'bandsetting.tag_setting.add.label\') %></button>\n            <% } %>\n            </div>\n        </li>\n    </ul>\n    <% } %>\n<% } %>'},3427:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(499),a=n(498),o=n(153),l=n(545),r=n(1092),d=n(1914),c=n(1622),h=n(3430),u=t.View.extend({attributes:{"data-viewname":"DBandCalendarSectionView"},getTemplate:function(){return this._loading?i.template(h):i.template(a)({_loading_size:s.Size.MEDIUM})},ui:{calendarListRegion:"._calendarListRegion",btnSettingNationalCalendar:"._btnSettingNationalCalendar",addCalendar:"._addCalendar"},regions:{calendarListRegion:{el:"@ui.calendarListRegion",replaceElement:!0}},events:{"click @ui.btnSettingNationalCalendar":"_settingNationalCalendar","click @ui.addCalendar":"_addCalendar"},initialize:function(e){this._loading=!1,this.calendarType=l.TYPE.INTERNAL,this.bandNo=e.bandNo,this.bandOptionModel=e.bandOptionModel,this.calendarCollection=r.build()},templateContext:function(){return{isPermittedConfigureSchedule:this.bandOptionModel.isPermittedConfigureSchedule(),isPermittedRegisterCalendar:this.bandOptionModel.isPermittedRegisterCalendar()}},onRender:function(){this._loading&&this.showChildView("calendarListRegion",this.calendarListView)},onAttach:function(){this.calendarCollection.fetchCalendar(this.bandNo,this.calendarType).then(i.bind((function(){this._loading=!0,this.calendarListView=d.build({bandNo:this.bandNo,calendarCollection:this.calendarCollection,bandOptionModel:this.bandOptionModel,isExportCalendar:!1}),this.render()}),this))},_settingNationalCalendar:function(){o.GROUP_BAND_SETTING_HOLIDAY.goDForced({band_no:this.bandNo})},_addCalendar:function(){if(this.calendarCollection.length>=l.MAX_CALENDAR_COUNT)alert(IM("bandsetting.calendar.notice.exceed_maximum_calendar_count",{maxCount:l.MAX_CALENDAR_COUNT}));else{var e=c.openAsLayer(this.bandNo,{isCreateCalendar:!0,type:this.calendarType});this.listenTo(e,"bandCalendar:createCalendar",i.bind((function(e){this.calendarCollection.add(e)}),this))}}});return u.build=function(e){return new u({bandNo:e.bandNo,bandOptionModel:e.bandOptionModel})},u}.call(t,n,t,e))||(e.exports=i)},3428:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(545),a=n(570),o=n(1622),l=n(1647),r=n(3429);return t.View.extend({tagName:"li",className:"sSettingItem",attributes:{"data-viewname":"DBandCalendarItemView"},template:i.template(r),ui:{btnModifyCalendar:"._btnModifyCalendar",btnDeleteCalendar:"._btnDeleteCalendar",btnSubscriptionError:"._btnSubscriptionError",btnSelectCalendar:"._btnSelectCalendar"},events:{"click @ui.btnModifyCalendar":"_modifyCalendar","click @ui.btnDeleteCalendar":"_deleteCalendar","click @ui.btnSubscriptionError":"_openHelpMessage","click @ui.btnSelectCalendar":"_selectCalendar"},modelEvents:{change:"render"},initialize:function(e){this._isFetchedCalendarNotice=!1,this.bandNo=e.bandNo,this.model=e.model,this.calendarType=e.calendarType,this.isExportCalendar=e.isExportCalendar,this.bandData=e.bandData,this.bandOptionModel=e.bandOptionModel},templateContext:function(){var e=!1;this.model.get("type")==s.TYPE.EXTERNAL&&this.model.get("status")&&(e=this.model.get("status")==s.STATUS.ERROR);var t=this.model.get("color");this.model.get("isDefault")&&!this.model.get("color")&&(t=a.getCalendarColor());var n="";this._isFetchedCalendarNotice&&this.model.get("isDefault")&&this.calendarNotice&&this.calendarNotice.content&&(n=this.calendarNotice.content);var i=this.bandOptionModel.isPermittedRegisterCalendar()&&(this.bandOptionModel.isPermittedConfigureSchedule()||this.model.get("isCalendarOwner"));return{isDefault:this.model.get("isDefault"),name:this.model.get("name"),color:t,calendarNoticeContent:n,isSubscriptionError:e,isInternalCalendar:this.model.get("type")==s.TYPE.INTERNAL,isExternalCalendar:this.model.get("type")==s.TYPE.EXTERNAL,canManageCalendar:i,isExportCalendar:this.isExportCalendar}},onAttach:function(){this.model.get("isDefault")&&this.model.getCalendarPersonalNotice().then(i.bind((function(e){this._isFetchedCalendarNotice=!0,this.calendarNotice=e,this.render()}),this))},_modifyCalendar:function(){o.openAsLayer(this.bandNo,{isCreateCalendar:!1,model:this.model})},_deleteCalendar:function(){this.model.get("isDefault")?this._deleteDefaultCalendar():this._deleteCalendarBesidesDefault()},_deleteDefaultCalendar:function(){var e=!1,t=this.bandOptionModel.getScheduleImport();if(t&&t.import_status&&(e=t.import_status==s.CALENDAR_IMPORT_STATUS.PROCESSING),e)return alert(IM("calendar.status.notice.existing_processing_task")),!1;confirm(IM("bandcalendar.calendar_list.alert.delete_default_calendar"))&&this.model.clearDefaultCalendar().then(i.bind((function(e){this.calendarNotice=e,this.render()}),this))},_deleteCalendarBesidesDefault:function(){confirm(IM("bandcalendar.calendar_list.alert.delete_calendar"))&&this.model.deleteCalendar(this.model.get("calendarId"))},_selectCalendar:function(){return l.openAsLayer({bandData:this.bandData,calendarInfo:this.model}),!1},_openHelpMessage:function(){alert(IM("bandsetting.calendar_url.help_message.subscription_error"))}})}.call(t,n,t,e))||(e.exports=i)},3429:function(e,t){e.exports='        <div class="itemContent">\n            <span class="label">\n                <span class="scheduleName">\n                    <span class="scheduleColor" style="background:#<%- color %>"></span><%- name %>\n                <% if (isDefault && calendarNoticeContent != \'\') { %>\n                    <span class="subTxt"><%- calendarNoticeContent %></span>\n                <% } %>\n                <% if (isSubscriptionError) { %>\n                    <button type="button" class="error _btnSubscriptionError">\n                        <span class="gSrOnly"><%= IM("bandsetting.calendar.external_calendar.subscription_error") %></span>\n                    </button>\n                <% } %>\n                </span>\n            </span>\n        </div>\n\n<%\n    // 일반 설정인 경우 변경/삭제 버튼 노출\n    if (!isExportCalendar) {\n        if (canManageCalendar) {\n%>\n        <div class="itemSide -wAuto">\n        <% if (isExternalCalendar) { %>\n            <button type="button" class="uButton -sizeS -confirm2 _btnModifyCalendar"><%= IM("ui.label.change") %></button>\x3c!-- 변경 --\x3e\n            <button type="button" class="uButton -sizeS -confirm2 _btnDeleteCalendar"><%= IM("calendar.external_calendar.option.url.button.delete_subscription") %></button>\x3c!-- 구독해제 --\x3e\n        <% } else if (isInternalCalendar) { %>\n            <button type="button" class="uButton -sizeS -confirm2 _btnModifyCalendar"><%= IM("ui.label.change") %></button>\x3c!-- 변경 --\x3e\n            <button type="button" class="uButton -sizeS -confirm2 _btnDeleteCalendar"><%= IM("ui.label.delete") %></button>\x3c!-- 삭제 --\x3e\n        <% } %>\n        </div>\n    <% } %>\n<%\n    // 일정 내보내기인 경우 선택 버튼 노출\n    } else {\n%>\n        <div class="itemSide -wAuto">\n            <button type="button" class="uButton -sizeS -confirm2 _btnSelectCalendar"><%= IM("ui.label.selection") %></button>\x3c!-- 선택 --\x3e\n        </div>\n<%\n    }\n%>'},3430:function(e,t){e.exports='<% if (isPermittedConfigureSchedule) { %>\n<% // 국가별 캘린더 표시 %>\n    <ul class="sSettingList">\n        <li class="sSettingItem -bLine">\n            <div class="itemContent">\n                <span class="label"><%= IM("bandsetting.home.btn.holiday_setting") %></span>\n            </div>\n            <div class="itemSide">\n                <button type="button" class="uButton -sizeS -confirm2 _btnSettingNationalCalendar"><%= IM("ui.label.change") %></button>\n            </div>\n        </li>\n    </ul>\n<% } %>\n\n<% // 밴드 캘린더 목록 %>\n<div class="_calendarListRegion"></div>\n\n<% if (isPermittedRegisterCalendar) { %>\n<% // 캘린더 추가 %>\n    <div class="addButtonArea">\n        <button type="button" class="addButton _addCalendar">\n            <span class="iconAdd"></span><%= IM("bandsetting.calendar.band_calendar.txt.add_calendar") %>\n        </button>\n    </div>\n<% } %>'},3431:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(499),a=n(498),o=n(545),l=n(1092),r=n(1914),d=n(2102),c=n(3432),h=n(3434),u=t.View.extend({attributes:{"data-viewname":"DExternalCalendarSectionView"},getTemplate:function(){return this._loading?i.template(h):i.template(a)({_loading_size:s.Size.MEDIUM})},ui:{calendarListRegion:"._calendarListRegion",btnSubscribeUrl:"._btnSubscribeUrl"},regions:{calendarListRegion:{el:"@ui.calendarListRegion",replaceElement:!0}},events:{"click @ui.btnSubscribeUrl":"_addExternalCalendar"},initialize:function(e){this._loading=!1,this.calendarType=o.TYPE.EXTERNAL,this.bandNo=e.bandNo,this.bandOptionModel=e.bandOptionModel,this.calendarCollection=l.build()},templateContext:function(){if(this._loading)return{calendarCount:this.calendarCollection.length,isPermittedRegisterCalendar:this.bandOptionModel.isPermittedRegisterCalendar()}},onRender:function(){this._loading&&this.showChildView("calendarListRegion",this.calendarListView)},onAttach:function(){this.calendarCollection.fetchCalendar(this.bandNo,this.calendarType).then(i.bind((function(){this._loading=!0,this.calendarListView=r.build({bandNo:this.bandNo,calendarCollection:this.calendarCollection,bandOptionModel:this.bandOptionModel,isExportCalendar:!1}),this.render()}),this))},_addExternalCalendar:function(){if(this.calendarCollection.length>=o.MAX_CALENDAR_COUNT)alert(IM("bandsetting.calendar.notice.exceed_maximum_calendar_count",{maxCount:o.MAX_CALENDAR_COUNT}));else{var e=d.openAsLayer(this.bandNo,this.calendarType);this.listenTo(e,"bandCalendar:createCalendar",i.bind((function(e){0==this.calendarCollection.length&&c.build(),this.calendarCollection.add(e)}),this))}}});return u.build=function(e){return new u({bandNo:e.bandNo,bandOptionModel:e.bandOptionModel})},u}.call(t,n,t,e))||(e.exports=i)},3432:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(486),a=n(3433),o=t.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DExternalCalendarNoticeView"},template:i.template(a),ui:{btnConfirm:"._btnConfirm"},events:{"click @ui.btnConfirm":"destroy"}});return o.build=function(){var e=new o;return s.open(e),e},o}.call(t,n,t,e))||(e.exports=i)},3433:function(e,t){e.exports='<div class="lyContent">\n    <header class="header -noTitlebar">\n        <h1 class="title"><%= IM("bandsetting.calendar.external_calendar.notice.title") %></h1>\n    </header>\n    <div class="main">\n        <p class="p"><%= IM("bandsetting.calendar.external_calendar.notice.desc") %></p>\n    </div>\n    <footer class="footer">\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM("ui.label.confirm") %></button>\n    </footer>\n</div>'},3434:function(e,t){e.exports='<% // 구독 캘린더 목록 %>\n<div class="_calendarListRegion"></div>\n\n<% if (isPermittedRegisterCalendar) { %>\n<ul class="sSettingList">\n    <li class="sSettingItem <% if (calendarCount !== 0) { %> -tLine<% } %>">\n    <div class="itemContent">\n        <span class="label"><%= IM("bandsetting.calendar.external_calendar.option.txt.url") %></span>\n    </div>\n    <div class="itemSide">\n        <button type="button" class="uButton -sizeS -confirm2 _btnSubscribeUrl"><%= IM("bandsetting.tag_setting.add.label") %></button>\n    </div>\n    </li>\n</ul>\n<% } %>'},3435:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(2),a=n(545),o=n(491),l=n(538),r=n(1092),d=n(1914),c=n(3436),h=t.View.extend({className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DBandExportCalendarCategoryView"},template:i.template(c),ui:{calendarListRegion:"._calendarListRegion"},regions:{calendarListRegion:{el:"@ui.calendarListRegion",replaceElement:!1}},initialize:function(e){this.calendarType=a.TYPE.INTERNAL,this.bandNo=e.bandNo,this.bandOptionModel=e.bandOptionModel,this.calendarCollection=r.build()},onAttach:function(){var e=o.getCachedBandData(this.bandNo),t=l.getBandOption(this.bandNo),n=this.calendarCollection.fetchCalendar(this.bandNo,this.calendarType);return s.when(e,t,n).then(i.bind((function(e,t){var n=d.build({bandNo:this.bandNo,bandData:e,bandOptionModel:t,calendarCollection:this.calendarCollection,isExportCalendar:!0});this.showChildView("calendarListRegion",n)}),this))}});return h.build=function(e){return new h({bandNo:e})},h}.call(t,n,t,e))||(e.exports=i)},3436:function(e,t){e.exports='<% // 일정 내보내기 > 캘린더 목록 %>\n<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.home.calendar_url") %></h1>\n    </header>\n</div>\n<div class="_calendarListRegion"></div>'},3437:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(153),a=n(499),o=n(498),l=n(491),r=n(635),d=n(3438),c=n(3440),h=n(538),u=i.View.extend({_dataFetched:!1,_checkFilterd:!0,_subscribableCalendars:[],_subscribedCalendars:[],attributes:{"data-viewname":"DBandHolidaySettingView"},getTemplate:function(){return this._dataFetched?t.template(c):t.template(o)},ui:{addHoliday:"._addHoliday",delHoliday:"._delHoliday",goBack:"._goBack"},events:{"click @ui.addHoliday":"_showSelectHolidayLayer","click @ui.delHoliday":"_delHoliday","click @ui.goBack":"_goBack"},initialize:function(e){this.bandNo=e.bandNo},serializeData:function(){return this._dataFetched?{getHolidays:this._subscribedCalendars,allofthemChecked:this._checkFilterd}:{dataFetched:!1,_loading_size:a.Size.MEDIUM}},onAttach:function(){$.when(l.getCachedBandData(this.bandNo),h.getBandOption(this.bandNo),r.getSubscribableCalendars(this.bandNo)).then(t.bind((function(e,t,n){this.isDestroyed()||(this._dataFetched=!0,e.isBandSettingPermitted()&&t.isPermittedConfigureSchedule()?(this._subscribableCalendars=n,this._refreshSubscribedCalendars()):this._goBack())}),this))},_refreshSubscribedCalendars:function(){r.getBandScheduleConfig(this.bandNo).then(t.bind((function(e){this.isDestroyed()||(this._subscribedCalendars=e.subscribed_calendars,this._subscribableCalendars.length==this._subscribedCalendars.length?this._checkFilterd=!1:this._checkFilterd=!0,this.render())}),this))},_goBack:function(){s.GROUP_BAND_SETTING_SCHEDULE.goDForced({band_no:this.bandNo})},_showSelectHolidayLayer:function(e){e.preventDefault();var n=t.filter(this._subscribableCalendars,t.bind((function(e){return!t.find(this._subscribedCalendars,(function(t){return t.calendar_id==e.calendar_id}))}),this)),i=d.buildAsLayer({bandNo:this.bandNo,filterd:n,subscribedHolidays:this._subscribedCalendars});this.listenTo(i,"complete:subCheckSubmit",(function(){this._refreshSubscribedCalendars()}))},_delHoliday:function(e){var n=[],i=$(e.currentTarget).data("getholidayid");return t.each(this._subscribedCalendars,(function(e){i!=e.calendar_id&&n.push(e.calendar_id)})),r.setBandScheduleConfigSubscribedCalendarIds(this.bandNo,n).then(t.bind((function(){this._refreshSubscribedCalendars()}),this)),!1}});return u.buildHolidayScheduleItemView=function(e){return new u({bandNo:e})},u}.call(t,n,t,e))||(e.exports=i)},3438:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(635),a=n(486),o=n(3439),l=i.View.extend({_subscribedHolidays:[],attributes:{"data-viewname":"DBandHolidaySelectView"},getTemplate:function(){return t.template(o)},ui:{checkHoliday:"._checkHoliday",btnSubmit:"._btnSubmit",btnClose:"._btnClose"},events:{"change @ui.checkHoliday":"_checkStatus","click @ui.btnClose":"destroy","click @ui.btnSubmit":"_checkSubmit"},initialize:function(e){this.bandNo=e.bandNo,this.bandOptionModel=e.bandOptionModel,this._subscribedHolidays=e.subscribedHolidays,this._subscribableCalendars=e.subscribableCalendars},serializeData:function(){return{holidays:this._subscribableCalendars}},_checkStatus:function(){this.$el.find("._checkHoliday:checked").length>0?this.ui.btnSubmit.attr("data-status","on"):this.ui.btnSubmit.attr("data-status","off")},_checkSubmit:function(){var e=[],n=this.$el.find("._checkHoliday:checked");if(!n.length)return!1;n.each((function(t,n){var i=$(n);e.push(i.attr("value"))}));var i=[];return t.each(this._subscribedHolidays,(function(e){i.push(e.calendar_id)})),e=e.concat(i),s.setBandScheduleConfigSubscribedCalendarIds(this.bandNo,e).then(t.bind((function(){this.trigger("complete:subCheckSubmit"),this.destroy()}),this)),!1}});return l.buildAsLayer=function(e){var t=new l({bandNo:e.bandNo,subscribableCalendars:e.filterd,subscribedHolidays:e.subscribedHolidays});return a.open(t),t},l}.call(t,n,t,e))||(e.exports=i)},3439:function(e,t){e.exports='<% // 공휴일 선택 목록 %>\n<section class="lyWrap">\n    <div class="lyContent  -w360">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("bandsetting.home.btn.holiday_setting") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContentWrap -tSpaceNone -mH360">\n                <% // 공휴일 리스트 %>\n                <ul class="_HolidayListContainer listLine">\n                    <% _.each(holidays, function(holiday, index) { %>\n                    <li class="tLine" data-index="<%-index%>">\n                        <label for="holiday<%-holiday.calendar_id%>" class="flexList" >\n                            <span class="text"><%-holiday.calendar_name%></span>\n                            <span class="etc">\n                                <span for="uCheck" class="uCheck -checkbox">\n                                    <input type="checkbox" id="holiday<%-holiday.calendar_id%>" class="checkInput _checkHoliday" name="selectHoliday<%-holiday.calendar_id%>" value="<%-holiday.calendar_id%>">\n                                    <span class="checkLabel">\n                                        <span class="shape"></span>\n                                    </span>\n                                </span>\n                            </span>\n                        </label>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n        </div>\n        <footer class="modalFooter -tLine">\n            <button type="button" class="uButton -cancel _btnClose"><%- IM(\'ui.label.cancel\') %></button>\n            <button type="button" class="uButton -confirm _btnSubmit"><%- IM(\'ui.label.confirm\') %></button>\n        </footer>\n    </div>\n</section>'},3440:function(e,t){e.exports='<section class="sSettingBand gContentCardShadow">\n    <div class="uHeaderWrap -h50">\n        <header class="header">\n            <h1 class="title"><%= IM("bandsetting.home.btn.holiday_setting") %></h1>\n        </header>\n    </div>\n    <div>\n        <ul class="sSettingList">\n            <% _.each(getHolidays, function(getHoliday, index) { %>\n            <li class="sSettingItem">\n                <div class="itemContent">\n                    <span class="label"><%- getHoliday.calendar_name %></span>\n                </div>\n                <div class="itemSide">\n                    <button type="button" data-getHolidayId="<%-getHoliday.calendar_id%>" class="uButton -sizeS -alert -reverse _delHoliday"><%= IM("ui.label.del") %></button>\n                </div>\n            </li>\n            <% }); %>\n        </ul>\n        <% if(allofthemChecked) { %>\n        <div class="addButtonArea">\n            <button type="button" class="addButton _addHoliday">\n                <span class="label -iconAdd"><%= IM("bandsetting.tag_setting.add.label") %></span>\n            </button>\n        </div>\n        <% } %>\n    </div>\n    <div class="btnFooter -lrSpace">\n        <button type="button" class="_goBack uButton -sizeL -confirm"><%= IM("ui.label.confirm") %></button>\n    </div>\n</section>'},3441:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3442),o=n(153),l=n(499),r=n(498),d=n(543),c=n(1171),h=n(538),u=n(2107),p=n(1551),m=n(1280),_=(d.PERMISSION_ROLES,c.PERMISSION),b=(c.PERMISSION_KEY_TYPE,c.PERMISSION_KEY),g=c.PERMISSION_ID,f=c.PERMISSION_GROUP,v=s.View.extend({tagName:"div",className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DGroupBandMemberPermissionView"},getTemplate:function(){return this._loading?i.template(a):i.template(r)},ui:{btnConfirm:"._btnConfirm"},regions:{bandPermissionsRegion:{el:"._bandPermissionsRegion",replaceElement:!0},contentsPermissionsRegion:{el:"._contentsPermissionsRegion",replaceElement:!0},schedulePermissionsRegion:{el:"._schedulePermissionsRegion",replaceElement:!0},chatPermissionsRegion:{el:"._chatPermissionsRegion",replaceElement:!0},memberPermissionsRegion:{el:"._memberPermissionsRegion",replaceElement:!0},etcPermissionsRegion:{el:"._etcPermissionsRegion",replaceElement:!0}},events:{"click @ui.btnConfirm":"_setMemberPermissions"},modelEvents:{change:"render"},initialize:function(e){this._loading=!1,this.bandNo=e.bandNo},serializeData:function(){return this._loading?{}:{_loading_size:l.Size.MEDIUM}},onRender:function(){this._loading&&(this._bandPermissionsView=this._showBandPermissionsView(),this._contentsPermissionsView=this._showContentsPermissionsView(),this._schedulePermissionsView=this._showSchedulePermissionsView(),this._chatPermissionsView=this._showChatPermissionsView(),this._memberPermissionsView=this._showMemberPermissionsView(),this._etcPermissionsView=this._showEtcPermissionsView())},onAttach:function(){h.getBandOption(this.bandNo).then(i.bind((function(e){this._loading=!0,this.bandOptionModel=e,this.render()}),this))},_showPermissions:function(e,t){if(!i.isEmpty(t)){var n=new Backbone.Collection(t,{model:Backbone.Model}),s=new u({bandNo:this.bandNo,collection:n,bandOptionModel:this.bandOptionModel});return this.showChildView(e,s),s}},_showBandPermissionsView:function(){var e=[];return e.push(_.EDIT_NAME_COVER),e.push(_.EDIT_NOTICE),e.push(_.VIEW_POST_READER),e.push(_.MANAGE_PINNED_HASHTAGS),this.bandOptionModel.isPermittedManageBandDoNotDisturb()&&e.push(_.MANAGE_BAND_DO_NOT_DISTURB),u.show(this.getRegion("bandPermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel})},_showContentsPermissionsView:function(){var e=[];e.push(_.COMMENT),this.bandOptionModel.getCreateLiveRoles()&&e.push(_.CREATE_LIVE),e.push(_.UPLOAD_PHOTO_TO_ALBUM),e.push(_.CREATE_ALBUM);var t=u.show(this.getRegion("contentsPermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel});return(!!this.bandOptionModel.getPostContentsRoles()||!!this.bandOptionModel.getPostApproverRoles()||!!this.bandOptionModel.getCreateReservedPostRoles())&&t.addChildView(new A({bandNo:this.bandNo,bandOptionModel:this.bandOptionModel}),0),t},_showSchedulePermissionsView:function(){var e=[];return e.push(_.REGISTER_SCHEDULE),e.push(_.MODIFY_SCHEDULE),e.push(_.REGISTER_CALENDAR),u.show(this.getRegion("schedulePermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel})},_showChatPermissionsView:function(){if(!this.bandOptionModel.isBandChatEnabled())return[];var e=[];return e.push(_.INVITE_CHAT),e.push(_.CREATE_OPEN_CHAT),e.push(_.DELETE_OPEN_CHAT),e.push(_.DISABLE_DEFAULT_CHAT),u.show(this.getRegion("chatPermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel})},_showMemberPermissionsView:function(){var e=[];return e.push(_.INVITE_MEMBER),e.push(_.ACCEPT_APPLICATION),e.push(_.MANAGE_POSTING_ON_BAND_JOIN),e.push(_.MANAGE_OPEN_CELLPHONE_AND_BIRTHDAY),e.push(_.MANAGE_JOIN),e.push(_.MANAGE_MEMBER_GROUP),u.show(this.getRegion("memberPermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel})},_showEtcPermissionsView:function(){var e=[];return e.push(_.DELETE_CONTENTS),e.push(_.BAN_MEMBER),u.show(this.getRegion("etcPermissionsRegion"),{bandNo:this.bandNo,permissions:e,bandOptionModel:this.bandOptionModel})},_setMemberPermissions:function(){var e,n={};return i.each([this._bandPermissionsView,this._contentsPermissionsView,this._schedulePermissionsView,this._chatPermissionsView,this._memberPermissionsView,this._etcPermissionsView],(function(t){t.children.each((function(t){if(t instanceof p){var i=t.model.get("id"),s=t.getSelectedPermissionOption();if(i===g.CHAT_TO_MANAGER?e=s.permissionValue:n[s.permissionKey]=s.permissionValue,i===_.DELETE_CONTENTS.id){var a=f[s.permissionGroupId],o=b.DELETE_COMMENT[a.type];n[o]=s.permissionValue}}}),this)}),this),t.when(h.SETTING.setLeaderPermissions(this.bandNo,n),h.SETTING.setChatToManager(this.bandNo,e)).then(i.bind((function(){o.GROUP_BAND_SETTING.goDForced({band_no:this.bandNo})}),this))}}),A=s.View.extend({tagName:"li",className:"sSettingItem",template:i.template('<div class="itemContent">\n    <span class="label"><%= IM("bandsetting.member_permission.txt.level_post_contents") %></span>\n    <span class="subTxt"><%= writingSettingStatusDesc %></span>\n</div>\n<div class="itemSide">\n    <button type="button" class="uButton -sizeS -confirm2 _postWritingSettingBtn"><%= IM("ui.label.change") %></button>\n</div>'),templateContext:function(){return{writingSettingStatusDesc:this._makeWritingSettingStatusDesc()}},events:{"click ._postWritingSettingBtn":function(e){return o.GROUP_BAND_POST_WRITING_SETTING.goDForced({band_no:this.options.bandNo})}},_makeWritingSettingStatusDesc:function(){var e,t=this.options.bandOptionModel;e=t.isPostWithoutApproval()?IM("setting.post_contents.status.without_approve"):IM("setting.post_contents.status.with_approve");var n=m.getSelectedOption(_.POST_CONTENTS,t).permissionGroupId;return f[n].name+", "+e}});return v.buildBandMemberPermissionView=function(e){return new v({bandNo:e})},v}.call(t,n,t,e))||(e.exports=i)},3442:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.member_permission.title") %></h1>\n    </header>\n</div>\n\n\x3c!-- 밴드 관련 권한 --\x3e\n<div class="_bandPermissionsRegion"></div>\n\n\x3c!-- 콘텐츠 관련 권한 --\x3e\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.member_permission.title") %></span></h2>\n<div class="_contentsPermissionsRegion"></div>\n\n\n\x3c!-- 일정 관련 권한 --\x3e\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.member_permission.title") %></span></h2>\n<div class="_schedulePermissionsRegion"></div>\n\n\x3c!-- 채팅 관련 권한 --\x3e\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.member_permission.title") %></span></h2>\n<div class="_chatPermissionsRegion"></div>\n\n\x3c!-- 멤버 관련 권한 --\x3e\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.member_permission.title") %></span></h2>\n<div class="_memberPermissionsRegion"></div>\n\n\x3c!-- 기타 권한 --\x3e\n<h2 class="sSettingTitle -hideTxt"><span class="gSrOnly"><%= IM("bandsetting.member_permission.title") %></span></h2>\n<div class="_etcPermissionsRegion"></div>\n\n<div class="btnFooter -lrSpace">\n    <button type="button" class="uButton -sizeL -confirm _btnConfirm"><%= IM("ui.label.save") %></button>\n</div>'},3443:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(6),o=n(499),l=n(498),r=n(153),d=n(160),c=n(497),h=n(538),u=n(154),p=n(589),m=n(527),_=n(907),b=n(1915),g=n(3444),f=a.Collection.extend({model:b.Model}),v=s.CollectionView.extend({tagName:"ul",className:"cMemberList gMal22 gMar22",childView:b,childViewOptions:function(){return{bandData:this.options.bandData,bandOptionModel:this.options.bandOptionModel}}}),A=s.View.extend({attributes:{"data-viewname":"DGroupBandManageCoLeaderView"},className:"sSettingBand gContentCardShadow",getTemplate:function(){return this._loading?t.template(g):t.template(l)},ui:{btnAddCoLeader:"._btnAddCoLeader",coleaderRegion:"._coleaderRegion"},regions:{coleaderRegion:{el:"@ui.coleaderRegion",replaceElement:!0}},events:{"click @ui.btnAddCoLeader":"_openSetCoLeaderLayer"},initialize:function(e){this._loading=!1,this.bandNo=e.bandData.getBandCore().bandNo,this.collection=new f([])},serializeData:function(){return this._loading?{coleaderCount:this.collection.length,memberPermissionUrl:r.GROUP_BAND_SETTING_MEMBER_PERMISSION.makeUrl({band_no:this.bandNo})}:{_loading_size:o.Size.MEDIUM}},onRender:function(){if(this._loading){var e=new v({collection:this.collection,bandData:this.options.bandData,bandOptionModel:this.bandOptionModel});this.showChildView("coleaderRegion",e)}},onAttach:function(){var e=h.getBandOption(this.bandNo),n=[c.LEADER,c.CO_LEADER].join(","),s=h.SETTING.getMembersByRole(this.bandNo,n);return i.when(e,s).then(t.bind((function(e,t){this._loading=!0,this.bandOptionModel=e,this.collection.set(t,{parse:!0}),this._adjustCoLeaderCollection(),this.render()}),this))},_adjustCoLeaderCollection:function(){var e=[],n=[];t.each(this.collection.models,(function(t){t.getRole()==c.LEADER?e.push(t):n.push(t)})),this.collection.reset(e.concat(n),{parse:!0})},_openSetCoLeaderLayer:function(){var e=_.openDMemberSelectionView({submitBtnText:IM("ui.label.selection")}),n=m.buildBandMemberWithFilterDataCollection(this.bandNo,d.ADD_COLEADER,100),i=m.buildBandMemberWithFilterDataCollection(this.bandNo,d.ADD_COLEADER,100);u.wrapActivePromise(n.fetchBandMemberWithFilterDataCollection(),this).then(t.bind((function(){e.renderMemberListToSelect({memberModels:n.toMemberSelectionViewModels(),showSearchMoreMemberBtn:n.hasMoreMember()})}),this)),this.listenTo(e,_.EVENT.MEMBER_SELECTION_MEMBER_SELECT_CLICK,(function(t){e.selectMember(t.selectedMember)})),this.listenTo(e,_.EVENT.MEMBER_SELECTION_MEMBER_DESELECT_CLICK,(function(t){e.deselectMember(t)})),this.listenTo(e,_.EVENT.MEMBER_SELECTION_MEMBER_PROFILE_CLICK,(function(e){p.openMembershipProfileLayer({name:e.name,profileImageUrl:e.profileImageUrl,userNo:e.userNo,bandNo:this.bandNo})})),this.listenTo(e,_.EVENT.MEMBER_SELECTION_SEARCH,(function(t){u.wrapActivePromise(i.searchBandMemberWithFilterDataCollection(t),this).then((function(){e.renderMemberListToSelect({memberModels:i.toMemberSelectionViewModels(),showSearchMoreMemberBtn:i.hasMoreMember()})}))})),this.listenTo(e,_.EVENT.MEMBER_SELECTION_INPUT_EMPTY,(function(){e.renderMemberListToSelect({memberModels:n.toMemberSelectionViewModels(),showSearchMoreMemberBtn:n.hasMoreMember()})})),this.listenTo(e,_.EVENT.MEMBER_SELECTION_COMPLETE,(function(e){if(t.every(e.selectedMembers,(function(e){return e.isKid()})))return alert(IM("transfer_co_leader_role.member_select.alert")),void r.GROUP_BAND_SETTING_MANAGE_COLEADER.goDForced({band_no:this.bandNo});var n=t.map(e.selectedMembers,(function(e){return e.getUserNo()})).join(",");return h.SETTING.setCoLeader(this.bandNo,n).then(t.bind((function(){r.GROUP_BAND_SETTING_MANAGE_COLEADER.goDForced({band_no:this.bandNo})}),this))}))}});return A.build=function(e){return new A({bandData:e})},A}.call(t,n,t,e))||(e.exports=i)},3444:function(e,t){e.exports='<% // 공동리더 관리 %>\n<div class="uHeaderWrap">\n    <header class="header">\n        <h1 class="title"><%= IM("bandsetting.manage_coleader.txt.coleader") %> <em class="count sf_color"><%- coleaderCount %></em></h1>\n        <div class="btnsWrap">\n            <button type="button" class="btn uButton sf_tBorderOpacity sf_color _btnAddCoLeader"><%= IM("bandsetting.home.manage_coleader.label.add_coleader") %></button>\n        </div>\n    </header>\n</div>\n\n<ul class="cMemberList gMal22 gMar22 _coleaderRegion"></ul>\n\n<div class="sSettingBand">\n    <div class="linkMemeberPrower">\n        <p class="text"><%= IM("bandsetting.home.manage_coleader.txt.description") %></p>\n        <a href="<%- memberPermissionUrl %>" class="moreLink"><%= IM("bandsetting.home.manage_coleader.txt.link_member_permission") %></a>\n    </div>\n</div>\n'},3445:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3446),a=n(499),o=n(498),l=n(153),r=n(538),d=n(510),c=n(1280),h=n(1171),u=n(1551),p=h.PERMISSION,m=i.View.extend({tagName:"main",className:"midContent",attributes:{"data-viewname":"DGroupBandPostWriteSettingLayoutView"},getTemplate:function(){return this._isFetched?t.template(s):t.template(o)},templateContext:function(){return this._isFetched?{isPostWithoutApproval:this._bandOptionModel.isPostWithoutApproval()}:{_loading_size:a.Size.MEDIUM}},ui:{withoutApprovePost:"._withoutApprovePost"},regions:{postContentsPermissionRegion:{el:"._postContentsPermissionRegion",replaceElement:!0},createReservedPostPermissionRegion:{el:"._createReservedPostPermissionRegion",replaceElement:!0},postApproverPermissionRegion:{el:"._postApproverPermissionRegion",replaceElement:!0}},events:{"click @ui.withoutApprovePost":function(e){return this._setPostWithoutApprovalOption(),!1}},initialize:function(e){this.bandNo=e.bandNo,this._isFetched=!1},onRender:function(){this._isFetched&&(this._showPostContentsPermission(),this._showPostApproverPermission(),this._showCreateReservedPostPermission())},onAttach:function(){this._fetchData()},_fetchData:function(){r.getBandOption(this.bandNo).then(t.bind((function(e){this._isFetched=!0,this._bandOptionModel=e,!!this._bandOptionModel.getPostContentsRoles()||!!this._bandOptionModel.getPostApproverRoles()||!!this._bandOptionModel.getCreateReservedPostRoles()||(alert(IM("permission_deny")),l.GROUP_BAND_HOME.goDForced({band_no:this.bandNo})),this.render()}),this))},_handleSettingBandOptionError:function(e){1028===e.result_code&&d.openLayer({headerTitle:IM("setting.approvable_post.confirm.header"),bodyDesc:IM("setting.approvable_post.confirm.body"),confirm:IM("web.modal.btn.yes"),cancel:IM("web.modal.btn.no")}).on(d.EVENTS.CONFIRM,t.bind((function(){l.GROUP_BAND_APPROVABLE_POST.goDForced({band_no:this.bandNo})}),this))},_setPostWithoutApprovalOption:function(){var e=this.getUI("withoutApprovePost").is(":checked");r.SETTING.setPostWithoutApproval(this.bandNo,e).done(t.bind((function(){this._fetchData()}),this)).fail(t.bind(this._handleSettingBandOptionError,this))},_setPostWritingPermission:function(e,n){var i={};i[n.permissionKey]=n.permissionValue,r.SETTING.setPostWritingRoles(this.bandNo,i).done(t.bind((function(){this._fetchData()}),this)).fail(t.bind(this._handleSettingBandOptionError,this))},_showPostContentsPermission:function(){var e=p.POST_CONTENTS;if(c.hasPermissionValue(e,this._bandOptionModel)){var t=c.getSelectedOption(e,this._bandOptionModel),n=u.build({bandNo:this.bandNo,bandOptionModel:this._bandOptionModel,permission:e,selectedOption:t});this.listenTo(n,u.EVENTS.CHANGED,(function(e){this._setPostWritingPermission(n,e)})),this.showChildView("postContentsPermissionRegion",n)}},_showPostApproverPermission:function(){var e=p.POST_APPROVER;if(!this._bandOptionModel.isPostWithoutApproval()&&c.hasPermissionValue(e,this._bandOptionModel)){var t=c.getSelectedOption(e,this._bandOptionModel),n=u.build({bandNo:this.bandNo,bandOptionModel:this._bandOptionModel,permission:e,selectedOption:t});this.listenTo(n,u.EVENTS.CHANGED,(function(e){this._setPostWritingPermission(n,e)})),this.showChildView("postApproverPermissionRegion",n)}},_showCreateReservedPostPermission:function(){var e=p.CREATE_RESERVED_POST;if(this._bandOptionModel.isPostWithoutApproval()&&c.hasPermissionValue(e,this._bandOptionModel)){var t=c.getSelectedOption(e,this._bandOptionModel),n=u.build({bandNo:this.bandNo,bandOptionModel:this._bandOptionModel,permission:e,selectedOption:t});this.listenTo(n,u.EVENTS.CHANGED,(function(e){this._setPostWritingPermission(n,e)})),this.showChildView("createReservedPostPermissionRegion",n)}}});return m.buildDGroupBandPostWriteSettingLayoutView=function(e){return new m({bandNo:e})},m}.call(t,n,t,e))||(e.exports=i)},3446:function(e,t){e.exports='<div class="sSettingBand gBoxShadow">\n    <div class="uHeaderWrap -h50">\n        <header class="header ">\n            <h1 class="title"><%= IM("setting.post_writing.member.permission") %> </h1>\n        </header>\n    </div>\n    <ul class="sSettingList">\n        \x3c!-- 글쓰기 권한 --\x3e\n        <li class="_postContentsPermissionRegion"></li>\n    </ul>\n\n    <h2 class="sSettingTitle -hideTxt"></h2>\n    <ul class="sSettingList">\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM("setting.post_without_approve") %></span>\n                <span class="subTxt"><%= isPostWithoutApproval ? IM(\'setting.post.without_approve.desc\') : IM(\'setting.post.approve.desc\') %></span>\n            </div>\n            <div class="itemSide">\n                <label for="withoutApprovePost" class="uCheck -switch">\n                    <input type="checkbox" id="withoutApprovePost" class="checkInput _withoutApprovePost" <%= isPostWithoutApproval ? \'checked\' : \'\' %>>\n                    <span class="checkLabel">\n                        <span class="shape "></span>\n                        <span class="text"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n\n        \x3c!-- 예약글 쓰기 권한 선택 영역 --\x3e\n        <li class="_createReservedPostPermissionRegion"></li>\n\n        \x3c!-- 게시글 승인 권한 선택 영역 --\x3e\n        <li class="_postApproverPermissionRegion"></li>\n    </ul>\n\n    <% if (!isPostWithoutApproval) { %>\n    <div class="attention -tLine -bg">\n        <div class="noticeArea">\n            <p class="noticeText"><%= IM("setting.approve_post.desc1") %></p>\n            <p class="noticeText"><%= IM("setting.approve_post.desc2") %></p>\n            <p class="noticeText"><%= IM("setting.approve_post.desc3") %> </p>\n            <p class="noticeText"><%= IM("setting.approve_post.desc4") %></p>\n        </div>\n    </div>\n    <% } %>\n</div>\n'},3447:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=(n(154),n(153)),a=n(3448),o=n(930),l=n(3449),r=n(3453),d=n(53),c=n(583),h=t.View.extend({attributes:{"data-viewname":"DBandMissionSettingView"},className:"sSettingBand gContentCardShadow",template:i.template(a),templateContext:function(){return{missionGoingPageUrl:s.GROUP_BAND_SETTING_MISSION.makeUrl({band_no:this.options.bandNo}),missionEndedPageUrl:s.GROUP_BAND_MISSION_ENDED.makeUrl({band_no:this.options.bandNo}),isActiveMissionGoingPage:this._currentRouteInfo===s.GROUP_BAND_SETTING_MISSION}},ui:{headerRegion:"._headerRegion",contentRegion:"._contentRegion",tabNav:"._tabNav",loading:"._loading",btnOnGoingTab:"._btnOnGoingTab",btnEndedTab:"._btnEndedTab",goingCount:"._goingCount",endedCount:"._endedCount"},regions:{contentRegion:{el:"@ui.contentRegion",replaceElement:!0},headerRegion:{el:"@ui.headerRegion",replaceElement:!0},loadingRegion:{el:"@ui.loading"}},initialize:function(e){this._bandNo=e.bandNo,this._isNotEndedMissionExist=!1,this._endedMissionCount=0,this._missionCollection=new o,this._currentRouteInfo=d.getCurrentRouteInfo().routeInfo},onAttach:function(){this._renderContent()},_updateTabCount:function(){var e=this._missionCollection.size()>0?this._missionCollection.size():"",t=this._endedMissionCount>0?this._endedMissionCount>99?"99+":this._endedMissionCount:"";this.getUI("goingCount").text(e),this.getUI("endedCount").text(t)},_renderContent:function(){this._pageLoading(!0),this._getMissions(this._bandNo).then(i.bind((function(){this._currentRouteInfo===s.GROUP_BAND_MISSION_ENDED&&this._isMissionEmpty()?s.GROUP_BAND_SETTING_MISSION.goDForced({band_no:this._bandNo}):(this._currentRouteInfo===s.GROUP_BAND_SETTING_MISSION?this._renderNotEndedMissions():this._currentRouteInfo===s.GROUP_BAND_MISSION_ENDED&&this._renderEndedMissions(),this._updateTabCount(),this.getUI("tabNav").toggle(!this._isMissionEmpty()),this._pageLoading(!1))}),this))},_renderNotEndedMissions:function(){var e=r.buildBandMissionView(this._bandNo,this._missionCollection,this._endedMissionCount);this.listenTo(e,r.EVENT.UPDATE_DATA,(function(){this._renderContent()})),this.getRegion("contentRegion").show(e)},_renderEndedMissions:function(){var e=l.buildBandMissionView(this._bandNo);this.getRegion("contentRegion").show(e)},_isMissionEmpty:function(){return!this._isNotEndedMissionExist&&0===this._endedMissionCount},_getMissions:function(){return $.when(this._missionCollection.fetchNotEndedMissions(this._bandNo),this._missionCollection.fetchEndedMissionCount(this._bandNo)).then(i.bind((function(e,t){this._isNotEndedMissionExist=e.length>0,this._endedMissionCount=t}),this))},_pageLoading:function(e){var t=this.getRegion("loadingRegion");e?t.show(c.buildListBottomMediumLoadingBar()):t.empty()}});return h.buildBandMissionView=function(e){return new h({bandNo:e})},h}.call(t,n,t,e))||(e.exports=i)},3448:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title">\n            <%= IM("band_mission.setting.title2") %>\n        </h1>\n\n        <% if (isActiveMissionGoingPage) { %>\n        <div class="btnsWrap">\n            <a href="/cs/notice/3939" class="helpLink" target="_blank"><span class="gSrOnly"><%- IM("cs.help.title") %></span></a>\n        </div>\n        <% } %>\n    </header>\n</div>\n\n<div class="uTabNav _tabNav">\n    <a href="<%= missionGoingPageUrl %>" class="btn sf_color _btnOnGoingTab <%- (isActiveMissionGoingPage) ? \'-on\': \'\' %>"><%= IM(\'band_mission.going.title\') %> <span class="gMal5 _goingCount"></span></a>\n    <a href="<%= missionEndedPageUrl %>" class="btn sf_color _btnEndedTab <%- (!isActiveMissionGoingPage) ? \'-on\': \'\' %>"><%= IM(\'band_mission.ended.title\') %> <span class="gMal5 _endedCount"></span></a>\n</div>\n\n<div class="_contentRegion"></div>\n<div class="_loading"></div>'},3449:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3450),a=n(930),o=n(1601),l=n(583),r=t.View.extend({attributes:{"data-viewname":"DBandEndedMissionView"},initialize:function(e){this._bandNo=e.bandNo},template:i.template(s),ui:{endedMissionListRegion:"._endedMissionListRegion",loading:"._loading"},events:{"click @ui.btnBandMissionCreate":"_bandMissionCreate"},regions:{endedMissionListRegion:{el:"@ui.endedMissionListRegion",replaceElement:!0},loadingRegion:{el:"@ui.loading"}},onAttach:function(){this._pageLoading(!0),this._getMissions()},_getMissions:function(){this.missionCollection=new a,this._dBandMissionListView=o.buildDBandMissionListViewForDetail({collection:this.missionCollection,bandNo:this._bandNo}),this.listenTo(this._dBandMissionListView,o.EVENT.SCROLL_BOTTOM,this._getMoreMissions),this.missionCollection.fetchEndedMissions(this._bandNo).then(i.bind((function(e){this._nextShowList=e.paging.next_params,this._showEndedMission()}),this))},_renderEmptyView:function(){var e='<p class="uEmpty" style="height: 199px"><span>'+IM("ui.message.empty_conents")+"</span></p>";this.$el.append(e)},_getMoreMissions:function(){this._stillLoaded||(this._nextShowList?(this._pageLoading(!0),this.missionCollection.fetchMoreEndedMissions(this._nextShowList).then(i.bind((function(e){this._nextShowList=e.paging.next_params,this._showEndedMission()}),this)).always(i.bind((function(){this._pageLoading(!1)}),this))):this.stopListening(this._dBandMissionListView))},_showEndedMission:function(){if(0===this.missionCollection.size())return this._pageLoading(!1),void this._renderEmptyView();this.getRegion("endedMissionListRegion").show(this._dBandMissionListView),this._pageLoading(!1)},_pageLoading:function(e){var t=this.getRegion("loadingRegion");this._stillLoaded=e,e?t.show(l.buildListBottomMediumLoadingBar()):t.empty()}});return r.buildBandMissionView=function(e){return new r({bandNo:e})},r}.call(t,n,t,e))||(e.exports=i)},3450:function(e,t){e.exports='<div class="sSettingTitle -hideTxt"></div>\n<div class="_endedMissionListRegion"></div>\n<div class="_loading"></div>'},3451:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(153),a=n(739),o=n(3452),l=n(554),r=n(159);return t.View.extend({attributes:{"data-viewname":"DBandMissionListItemView"},tagName:"li",className:"sSettingItem",template:i.template(o),ui:{btnMissionModify:"._btnMissionModify",btnWriteConfirmPost:"._btnWriteConfirmPost",btnMissionSetting:"._btnMissionSetting",remindAlarmIcon:"._remindAlarmIcon"},triggers:{"click @ui.btnMissionModify":"mission:modify"},events:{"click @ui.btnWriteConfirmPost":function(){this._isOngoingMission&&this._isConfirmDisabled()||this.spawn(r.MSG.MISSIONS_WRITE_CONFIRM_POST,this)},"click @ui.btnMissionSetting":function(){this.spawn(r.MSG.MISSIONS_SETTING,this)}},behaviors:[r],templateContext:function(){return{isRestricted:this.model.isRestrictedBandMission(),state:this._getState(),convertTextConfirmFrequency:a.getBandMissionConfirmFrequencyText(this.model.getBandMissionConfirmFrequency()),convertTextDuration:this._getMissionDuration(),isViewPurposeDetail:this.options.isViewPurposeDetail,missionDetailUrl:s.GROUP_BAND_MISSION_DETAIL.makeUrl({band_no:this._bandNo,mission_id:this.model.getMissionId()}),isMissionsList:this._isMissionsList,postWriteBtnTxt:this._getPostWriteBtnTxt(),isPostWriteBtnDisabled:this._isPostWriteBtnDisabled(),canShowMissionsListBtns:this._canShowMissionsListBtns()}},initialize:function(e){this._bandNo=e.bandNo,this._isMissionsList=this.options.isMissionsList,this._startAt=this.model.getBandMissionStartAt(),this._endAt=this.model.getBandMissionEndAt(),this._timeZoneId=this.model.getBandMissionTimeZoneId(),this._fetchedAt=this.model.getFetchedAt(),this._isUpcomingMission=this.model.isUpcomingMission(),this._isOngoingMission=this.model.isOngoingMission()},onAttach:function(){this._canShowMissionsListBtns()&&(this.getUI("btnWriteConfirmPost").text(this._getPostWriteBtnTxt()),this.getUI("btnWriteConfirmPost").attr("disabled",this._isPostWriteBtnDisabled()),this.getUI("remindAlarmIcon").toggle(!this.model.isBandMissionRemindStateEnabled()))},_isPostWriteBtnDisabled:function(){return this._isUpcomingMission||this._isAlreadyConfirmed()||this._isConfirmDisabled()},_getPostWriteBtnTxt:function(){return this._isUpcomingMission?IM("band_mission.upcoming.home_card_text"):this._isNotNotYetConfirmed()||this._isOngoingMission&&this._isConfirmDisabled()?IM("create.confirm_post.editor.title"):this._isAlreadyConfirmed()?IM("band_mission.comfirm_complete"):void 0},_canShowMissionsListBtns:function(){return this.options.isMissionsList&&!this.model.isRestrictedBandMission()&&null!==this.model.getBandMissionConfirmStatus()},_isNotNotYetConfirmed:function(){return this.model.getBandMissionConfirmStatus()===l.CONFIRM_STATUS.NOT_YET_CONFIRMED},_isAlreadyConfirmed:function(){return this.model.getBandMissionConfirmStatus()===l.CONFIRM_STATUS.ALREADY_CONFIRMED},_isConfirmDisabled:function(){return this.model.getBandMissionConfirmStatus()===l.CONFIRM_STATUS.CONFIRM_DISABLED},_getState:function(){return this._isUpcomingMission?{label:a.getRemainingDayText(this._startAt,this._fetchedAt,this._timeZoneId),className:"-before"}:this._isOngoingMission?{label:a.getDaysInProgressText(this.model),className:"-ing"}:null},_getMissionDuration:function(){return a.getBandMissionDurationText(this.model.getBandMissionDuration())+" ("+a.getBandMissionTimezonePeriodText(this._startAt,this._endAt,this._timeZoneId,!1)+")"}})}.call(t,n,t,e))||(e.exports=i)},3452:function(e,t){e.exports='<% if(isMissionsList) { %>\n<div class="sSettingTitle -hideTxt gMar-22 gMal-22"></div>\n<% } %>\n\n<div class="missionItemBox">\n    <% if (isRestricted) { %>\n    <div class="-flexible -arrowText -hideIcon">\n        <div class="itemContent">\n            <span class="label gColorGr3"><%- IM(\'band_mission.restricted\') %></span>\n        </div>\n    </div>\n    <% } else { %>\n    <a href="<%- missionDetailUrl %>" class="-flexible -arrowText <%- (isViewPurposeDetail) ? \'_btnMissionDetail\': \'_btnMissionModify\' %>">\n        <div class="itemContent -overflowH">\n            <span class="label -ellipsis"><%- title %></span>\n            <span class="subTxt">\n                <% if (state) { %><span class="-point gPal0"><%= state.label %>,</span> <% } %>\n                <%- convertTextConfirmFrequency %>,\n                <%- convertTextDuration %>\n\n                <% if(isMissionsList) { %>\n                <span class="iconAlarm _remindAlarmIcon" style="display: none">\n                    <span class="gSrOnly"><%= IM(\'band_mission.setting.remind_alert_disabled\') %></span>\n                    <svg class="svgIcon" aria-hidden="true">\n                        <use xlink:href="#ico-alarm"></use>\n                    </svg>\n                </span>\n                <% } %>\n            </span>\n        </div>\n    </a>\n    <% } %>\n</div>\n\n<% if(canShowMissionsListBtns) { %>\n<div class="buttonBox gMar-22 gMal-22">\n    <button type="button" class="uButton -sizeM -cancel _btnMissionSetting"><%= IM(\'band_mission.setting.title\') %></button>\n    <button type="button" class="uButton -sizeM -confirm _btnWriteConfirmPost" <%- (isPostWriteBtnDisabled) ? \'disabled\' : \'\' %>><%= postWriteBtnTxt %></button>\n</div>\n<% } %>'},3453:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(157),a=n(3454),o=n(1552),l=n(930),r=n(1601),d=n(562),c=n(3455),h=t.View.extend({attributes:{"data-viewname":"DBandNotEndedMissionView"},template:i.template(a),templateContext:function(){var e=this._upcomingBandMissionList&&this._upcomingBandMissionList.length||0,t=this._ongoingBandMissionList&&this._ongoingBandMissionList.length||0;return{missionNoticeUrl:s.GLOBAL_NOTICE_DETAIL.makeUrl({notice_no:3939}),showMissionDesc:!this._isNotEndedMissionExist,showUpcomingMission:e>0,showOngoingMission:t>0,upcomingMissionCount:e,ongoingMissionCount:t,isNotEndedMissionExist:this._isNotEndedMissionExist}},ui:{missionExplainWrap:"._missionExplainWrap",btnBandMissionCreate:"._btnBandMissionCreate",endedMissions:"._endedMissions",endedMissionCount:"._endedMissionCount",ongoingBandMissionListRegion:"._ongoingBandMissionListRegion",upcomingBandMissionListRegion:"._upcomingBandMissionListRegion",btnMissionDetailLink:"._btnMissionDetailLink"},events:{"click @ui.btnBandMissionCreate":"_bandMissionCreate","click @ui.btnMissionDetailLink":"_goToMissionHelpPage"},regions:{ongoingBandMissionListRegion:{el:"@ui.ongoingBandMissionListRegion",replaceElement:!0},upcomingBandMissionListRegion:{el:"@ui.upcomingBandMissionListRegion",replaceElement:!0}},initialize:function(e){this._bandNo=e.bandNo,this._isNotEndedMissionExist=this.collection.size()>0,this._endedMissionCount=e.endedMissionCount,this._filterUpcomingBandMissionList(),this._filterOngoingBandMissionList()},onAttach:function(){this._isNotEndedMissionExist&&(this._showNotEndedMission(this._ongoingBandMissionList,"ongoingBandMissionListRegion"),this._showNotEndedMission(this._upcomingBandMissionList,"upcomingBandMissionListRegion"))},_goToMissionHelpPage:function(e){e.preventDefault(),c.getGuideLinks("mission_setting").then((function(e){e&&e.mission_setting&&e.mission_setting.pc&&window.open(e.mission_setting.pc)}))},_filterUpcomingBandMissionList:function(){this._upcomingBandMissionList=this.collection.filter((function(e){return e.isUpcomingMission()})),this._upcomingBandMissionList.sort((function(e,t){return e.getBandMissionStartAt()-t.getBandMissionStartAt()||e.getMissionCreateAt()-t.getMissionCreateAt()}))},_filterOngoingBandMissionList:function(){this._ongoingBandMissionList=this.collection.filter((function(e){return e.isOngoingMission()})),this._ongoingBandMissionList.sort((function(e,t){return t.getBandMissionStartAt()-e.getBandMissionStartAt()||e.getMissionCreateAt()-t.getMissionCreateAt()}))},_showNotEndedMission:function(e,t){if(!i.isEmpty(e)){var n=r.buildDBandMissionListViewForManage({collection:new l(e),bandNo:this._bandNo});this.listenTo(n,r.EVENT.UPDATE_DATA,i.bind((function(){this.trigger(r.EVENT.UPDATE_DATA)}),this)),this.getRegion(t).show(n)}},_bandMissionCreate:function(){if(this.collection.size()>=10)d.openLayer({bodyTitle:IM("band_mission.setting.create.cant_alert"),withoutHiding:!0});else{var e=o.buildLayerMissionCreate(this._bandNo);this.listenTo(e,"editConfirmMission",i.bind((function(){this.trigger(r.EVENT.UPDATE_DATA)}),this))}}});return h.EVENT=r.EVENT,h.buildBandMissionView=function(e,t,n){return new h({bandNo:e,collection:t,endedMissionCount:n})},h}.call(t,n,t,e))||(e.exports=i)},3454:function(e,t){e.exports='<% if(showMissionDesc) { %>\n<div class="missionExplainWrap _missionExplainWrap">\n    <dl class="missionAuthenticationBox gMal30 gMar30">\n        <dt class="authenticationQ gMat7"><%- IM("band_mission.setting.sub_text2") %></dt>\n        <dd class="authenticationA gMat4 gMab31">\n            <div class="authenticationText"><%= IM("band_mission.setting.sub_text3") %></div>\n            <div class="authenticationOrder gMat11">\n                <p class="authenticationText"><%- IM("band_mission.setting.sub_text4") %></p>\n                <p class="authenticationText"><%- IM("band_mission.setting.sub_text5") %></p>\n            </div>\n            <a href="#" role="button" class="missionDetailLink gMat8 _btnMissionDetailLink"><%- IM("band_mission.notice_page.link") %></a>\n        </dd>\n    </dl>\n</div>\n<% } %>\n\n<% if(showOngoingMission) { %>\n<h2 class="sSettingTitle"><%= IM(\'band_mission.setting.ongoing.label\') %> <%= ongoingMissionCount %></h2>\n<div class="_ongoingBandMissionListRegion"></div>\n<% } %>\n\n<% if(showUpcomingMission) { %>\n<h2 class="sSettingTitle"><%= IM(\'band_mission.setting.upcoming.label\') %> <%= upcomingMissionCount %></h2>\n<div class="_upcomingBandMissionListRegion"></div>\n<% } %>\n\n<div class="btnFooter gMal22 gMar22 gPab40">\n    <button type="button" class="uButton -sizeL -confirm btnMissionCreate _btnBandMissionCreate"><%- IM("band_mission.setting.create") %></button>\n</div>'},3455:function(e,t,n){var i;void 0===(i=function(e){var t=n(21);return{_getApiClient:function(){return this.apiClient||(this.apiClient=t.getLoginV1Client()),this.apiClient},getGuideLinks:function(e){return this._getApiClient().sendAndThenProcess({url:"https://api.band.us/v1.0.0/get_guide_links",data:{types:e}})}}}.call(t,n,t,e))||(e.exports=i)},3456:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(153),o=n(162),l=n(3457),r=n(159),d=n(1218),c=n(1217),h=n(2108),u=n(3459),p=n(1085),m=n(568),_=n(190),b=n(512),g=n(3460),f=n(499),v=n(498),A=n(26),M=n(488),C=n(154),I=n(495),E=n(487),y=n(1261),T=n(590),N=s.View.extend({options:{bandData:null},tagName:"div",className:"sAlbumSection gContentCardShadow",attributes:{"data-viewname":"DBandAlbumView","aria-live":"polite"},ui:{totalPhotoAlbumRegion:"._totalPhotoAlbumRegion",albumListRegion:"._albumListRegion",sortOptionButton:"._sortOptionButton",emptyPhotoUpload:"._emptyPhotoUpload"},events:{"change @ui.sortOptionButton":function(e){var n=m.ALBUM_SORT_TYPE.findById(t(e.currentTarget).val());this._changeSortType(n)},"click @ui.emptyPhotoUpload":function(e){T.isContentCreationPunished()?e.preventDefault():this._bandData.isUploadPhotoToAlbumPermitted()||(e.preventDefault(),alert(IM("permission.not_appointed_member_submit_denied")))}},regions:{totalPhotoAlbumRegion:{el:"@ui.totalPhotoAlbumRegion",replaceElement:!0},albumListRegion:{el:"@ui.albumListRegion",replaceElement:!0}},behaviors:function(){return[{behaviorClass:g,bandNo:this.options.bandNo,canWritePostWithoutApproval:this.options.bandData.canWritePostWithoutApproval()},r,{behaviorClass:I,sceneId:I.SCENE.BAND_ALBUM_LIST},E]},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData,this._albumCollection=e.albumCollection,this._dataFetched=!1,this._sortType=m.ALBUM_SORT_TYPE.UPDATE_AT_DESC,this.listenTo(A.getAlbumChannel(),A.EVENT.ALBUM_PHOTO_ADDED,(function(e,t){var n=a.GROUP_BAND_ALBUM_DETAIL;this._bandData.canSelectAlbumWhenUploadMedia()||(n=o.PAGE_BAND_MEDIA),n.goDForced({band_no:e,album_no:t===m.TOTAL_ALBUM_NO?_.TOTAL_ALBUM_NO:t+""})}))},getTemplate:function(){return this._dataFetched?i.template(l):i.template(v)},serializeData:function(){return this._dataFetched?{dataFetched:!0,isPhotoExist:this._albumCollection.isPhotoExist(),isAlbumExist:this._albumCollection.isAlbumExist(),isCreateAlbumPermitted:this._bandData.isCreateAlbumPermitted(),albumSortOptions:[m.ALBUM_SORT_TYPE.UPDATE_AT_DESC,m.ALBUM_SORT_TYPE.CREATED_AT_ASC,m.ALBUM_SORT_TYPE.NAME_ASC,m.ALBUM_SORT_TYPE.NAME_DESC]}:{dataFetched:!1,_loading_size:f.Size.MEDIUM,middleClass:M.ELEMENT.SCREEN_VERTICAL_MIDDLE}},onDomRefresh:function(){this._dataFetched&&(this._totalPhotoAlbumModel.isPhotoAttached()&&this.getRegion("totalPhotoAlbumRegion").show(h.buildDAlbumItemView(this._totalPhotoAlbumModel,this._bandNo,this._bandData)),this._albumCollection.isAlbumExist()&&this.getRegion("albumListRegion").show(u.buildDBandAlbumListView(this._albumCollection,{bandNo:this._bandNo,bandData:this._bandData})))},onAttach:function(){C.wrapActivePromise(t.when(c.fetchAlbumList(this._bandNo,this._sortType,m.ALBUM_PAGE_SIZE,4),c.fetchPhotoStatus(this._bandNo)),this).then(i.bind((function(e,t){this._albumCollection.set(e.photo_albums,{silent:!0}),this._albumCollection.setTotalPhotoCount(e.totalPhotoCount),this._albumCollection.setPhotoAlbumCount(e.photoAlbumCount),this._totalPhotoAlbumModel=p.buildByAllPhotos(e.all_photos,t.oldest_photo_created_at),this._dataFetched=!0,this.render(),this.listenTo(b,"window:scroll:bottom",i.bind(this._fetchNextPage,this)),this._bindPhotoUploader()}),this)),this._sendBandAlbumListSceneEnterJackpotLog()},onBeforeDetach:function(){this._photoUploader&&(this._photoUploader.destroy(),this._photoUploader=null)},_changeSortType:function(e){C.wrapActivePromise(c.fetchAlbumList(this._bandNo,e,m.ALBUM_PAGE_SIZE,4),this).then(i.bind((function(t){this._renderTotalPhotoAlbum(t.all_photos),this._albumCollection.reset(t.photo_albums),this._sortType=e}),this))},_renderTotalPhotoAlbum:function(e){this._totalPhotoAlbumModel.set(p.buildByAllPhotos(e).toJSON(),{silent:!0});var t=this.getRegion("totalPhotoAlbumRegion").currentView;t&&!t.isDestroyed()&&this.getRegion("totalPhotoAlbumRegion").currentView.render()},_fetchNextPage:function(){this._albumCollection.hasMore()&&1!=this._holdNextPageFetch&&(this._holdNextPageFetch=!0,C.wrapActivePromise(c.fetchAlbumList(this._bandNo,this._sortType,this._albumCollection.calculateNextFetchCount(),4),this).then(i.bind((function(e){this._renderTotalPhotoAlbum(e.all_photos),this._albumCollection.set(e.photo_albums)}),this)).always(i.bind((function(){this._holdNextPageFetch=!1}),this)))},_bindPhotoUploader:function(){this._albumCollection.isAlbumExist()||this._albumCollection.isPhotoExist()||this._photoUploader||(this._photoUploader=y.createPhotoOrVideoUploader({inputElement:this.ui.emptyPhotoUpload,bandNo:this._bandNo,addToAlbum:!0}))},_sendBandAlbumListSceneEnterJackpotLog:function(){try{this.jplSceneEnter(E.CLASSIFIER.BAND_ALBUM_LIST,{band_no:this._bandNo})}catch(e){}}});return N.buildDDBandAlbumView=function(e){return new N({bandNo:e.getBandCore().bandNo,bandData:e,albumCollection:d.buildAlbumViewCollection([])})},N}.call(t,n,t,e))||(e.exports=i)},3457:function(e,t){e.exports='<div class="uHeaderWrap -fixed">\n    <header class="header">\n        <h1 class="title"><%= IM(\'photo.photo_album\') %></h1>\n        <% if ( isCreateAlbumPermitted ) { %>\n        <div class="btnsWrap">\n            <button type="button" class="_createAlbum btn uButton sf_color sf_tBorderOpacity"><%= IM(\'photo.create_album\') %></button>\n        </div>\n        <% } %>\n    </header>\n</div>\n\n<% if ( isPhotoExist || isAlbumExist) { %>\n<div class="_totalPhotoAlbumRegion"></div>\n<%     if ( isAlbumExist ) { %>\n<div class="albumWrap">\n    <div class="albumSort">\n        <span class="title"><%= IM(\'web.postlist.attachphotoalbum.label\') %></span>\n        <div class="uSelect -h20 -textType -taR">\n            <label for="albumSort" class="gSrOnly"><%- IM(\'album.sort.update_order\') %></label>\n            <select id="albumSort" class="_sortOptionButton">\n                <% _.each(albumSortOptions, function(albumSortOption) { %>\n                <option value="<%= albumSortOption.ID %>"><%= albumSortOption.TEXT %></option>\n                <% }); %>\n            </select>\n        </div>\n    </div>\n\n    <div class="_albumListRegion"></div>\n</div>\n<%     }\n   } else {\n%>\n<div class="albumWrap">\n    <div class="uEmpty" style="height:525px">\n        <div>\n            <span class="uEmptyIcon -photo"></span>\n            <strong class="uEmptyTitle"><%= IM(\'photo.share_photo\') %></strong>\n            <p class="uEmptyDesc"><%= IM(\'photo.once_upload_description\', {\'count\':100}) %></p>\n            <div class="_emptyPhotoUpload">\n                <label for="albumFile" class="uButton -sizeL -gray gMat20"><%= IM(\'ui.label.upload_photo\') %></label>\n                <input type="file" id="albumFile" data-uiselector="fileInput" class="uploadPhoto">\n            </div>\n        </div>\n    </div>\n</div>\n<% } %>\n'},3458:function(e,t){e.exports='<div class="albumHeader">\n    <div class="item">\n        <h<%= (isTotal)? \'2\':\'3\' %> class="title">\n            <a href="<%- albumUrl %>">\n                <strong><%- name %></strong>\n                <em><%= _s.numberFormat(photo_count) %></em>\n            </a>\n        </h<%= (isTotal)? \'2\':\'3\' %>>\n        <time class="info"><%= Localize.format.date(created_at, "year_month") %></time>\n    </div>\n    <div class="item">\n        <span class="btnAttachPhoto"><%= IM(\'ui.label.upload_photo\') %>\n            <span class="_photoUpload"><input type="file" class="_fileInput"></span>\n        </span>\n    </div>\n</div>\n<% if(covers.length > 0) { %>\n<ul class="albumImages <%= (isTotal)? \'-sizeL\' : \'\'%>">\n    <% _.each(covers, function(eachCover, index) { %>\n    <li class="album">\n        <a href="<%- albumUrl %>">\n            <img class="_image" src="<%- ThumbnailUtil.make(eachCover, ThumbnailType.s276) %>" alt="">\n            <%\n            var moreIndex = (isTotal)? 5 : 3;\n            if ( index == moreIndex && photo_count - index > 1 ) {\n            %>\n            <span class="more"><span><%= IM(\'ui.label.more.long\') %></span></span>\n            <%\n            }\n            %>\n        </a>\n    </li>\n    <% }); %>\n\n    <% // 남은 영역 더미 li 채워주기\n        var emptySpaceCnt = (isTotal)? 6 : 4;\n        for (var i = covers.length; i < emptySpaceCnt; i++) {\n    %>\n    <li class="album"></li>\n    <% } %>\n</ul>\n<% } else { %>\n<div class="albumImages">\n    <span class="btnAttachPhoto">\n        <span class="_photoUpload"><%= IM(\'web.albumdetail.photolist.txt.no_photo_description\') %>\n            <input type="file" class="_fileInput">\n        </span>\n    </span>\n</div>\n<% } %>\n\n\n\n\n\n\n'},3459:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(2108),a=i.CollectionView.extend({attributes:{"data-viewname":"DBandAlbumCollectionView"},tagName:"ul",className:"albumList _albumListContainer",template:t.template(""),ui:{albumListContainer:"._albumListContainer"},childView:s,childViewOptions:function(){return{bandData:this._bandData}},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData}});return a.buildDBandAlbumListView=function(e,t){return new a({collection:e,bandNo:t.bandNo,bandData:t.bandData})},a}.call(t,n,t,e))||(e.exports=i)},3460:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(935),a=n(595),o=n(153),l=n(568),r=n(590);return i.Behavior.extend({ui:{createAlbum:"._createAlbum"},events:{"click @ui.createAlbum":function(){if(!r.isContentCreationPunished()){var e=s.openDPromptModalView({title:IM("web.album.layer.title.create_album"),desc:IM("web.album.layer.txt.create_album_description"),labelName:IM("ui.label.album_name"),maxlength:l.MAX_ALBUM_NAME_LENGTH});this.listenTo(e,"modal:confirm",(function(e){var n=this._canWritePostWithoutApproval&&confirm(IM("web.album.layer.txt.notice_album_creation"));a.createPhotoAlbum(this._bandNo,e,n).then(t.bind((function(e){o.GROUP_BAND_ALBUM_DETAIL.goDForced({band_no:this._bandNo,album_no:e.photo_album.no})}),this))}))}}},initialize:function(e){this._bandNo=e.bandNo,this._canWritePostWithoutApproval=e.canWritePostWithoutApproval}})}.call(t,n,t,e))||(e.exports=i)},3461:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(10),a=n(6),o=n(4),l=n(3462),r=n(153),d=n(158),c=n(1157),h=n(499),u=n(498),p=n(154),m=n(3463),_=n(1554),b=n(180),g=n(1540),f=n(486),v=n(2109),A=n(1106),M=n(26),C=n(1143),I=n(1105),E=n(155),y=n(1165),T=n(1748),N=(n(13),n(487)),D=o.View.extend({tagName:"section",className:"infoInner -sticky",attributes:{id:"infoInner","data-viewname":"DBandCoverItemView"},behaviors:[I,N],ui:{bandDescription:"._bandDescription",shareBandAddress:"._shareBandAddress",btnJoinBand:"._btnJoinBand",btnSetDescription:"._btnSetDescription",btnSetAddress:"._btnSetAddress",btnShowBandInfo:"._btnShowBandInfo",memberLink:"._memberLink",memberCountText:"._memberCountText",btnShowBusinessIdentificationInfo:"._btnShowBusinessIdentificationInfo",btnMoreIntroDescription:"._btnMoreIntroDescription",doNotDisturbInfo:"._doNotDisturbInfo",linkBizCenter:"._linkBizCenter"},events:{"click @ui.shareBandAddress":function(){return!!b.isSupported()||(f.open(g.buildDBandAddressView(this.model.getBandAddress())),!1)},"click @ui.btnSetAddress":function(){return _.buildAsLayer({bandNo:this.model.getBandNo()}).once("bandUrlCreated",i.bind((function(){this._bandData&&(this._bandData.resetBandDataState(),this._bandData.loadBandData())}),this)),!1},"click @ui.bandDescription":function(){return r.GROUP_BAND_INTRO.goDForced({band_no:this.model.getBandNo()}),!1},"click @ui.btnMoreIntroDescription":function(){return r.GROUP_BAND_INTRO.goDForced({band_no:this.model.getBandNo()}),!1},"click @ui.btnSetDescription":function(){return r.GROUP_BAND_SETTING_INTRO.goDForced({band_no:this.model.getBandNo()}),!1},"click @ui.btnShowBandInfo":function(){var e=m.openPreviewPerViewType(this.model.getBandData());return this.listenTo(e,"startBandJoin",(function(){this.trigger("DBandMainLayoutView:startBandJoin")})),!1},"click @ui.memberLink":function(){return this.model.isPreviewBand()||this.model.isCardView()||r.GROUP_BAND_MEMBER.goDForced({band_no:this.model.getBandNo()}),!1},"click @ui.btnShowBusinessIdentificationInfo":function(){A.openDBusinessIdentificationInfoView({bandNo:this.model.getBandNo()})},"click @ui.doNotDisturbInfo":function(e){var t=T.buildDBandDoNotDisturbInfoModalView(this._bandData);f.open(t)},"click @ui.linkBizCenter":function(){this._bandData.isAccessBizCenterPermitted()&&this.jplClick(N.CLASSIFIER.GO_BIZCENTER)}},triggers:{"click @ui.btnJoinBand":"DBandMainLayoutView:startBandJoin"},modelEvents:{change:"render"},regions:{sideCover:{replaceElement:!0,el:"._sideCover"}},getTemplate:function(){return this.model.isDataFetched()?i.template(l):i.template(u)},onRender:function(){if(this._bandData){var e=v.buildDGroupBandSideCoverView(this._bandData);this.listenTo(e,C.EVENT.RESTART,(function(){this.trigger(C.EVENT.RESTART)})),this.showChildView("sideCover",e)}},onDomRefresh:function(){this._initBandAddressCopyClipboard()},onBeforeDetach:function(){this._destroyBandAddressCopyClipboard()},renderDBandCoverView:function(e){this._bandData&&this.stopListening(this._bandData),this._bandData=e,this.listenTo(this._bandData,E.UPDATE_EVENT.ANY,(function(){this._drawPage(this._bandData)})),this.listenTo(M.getDGlobalChannel(),M.EVENT.BAND_SHORTCUT_SETUP,(function(){this._bandData.resetBandDataState(),this._bandData.loadBandData()})),this.listenTo(M.getDGlobalChannel(),M.EVENT.BUSINESS_IDENTIFICATION_INFO_CHANGED,(function(){this._bandData.resetBandDataState(),this._bandData.loadBandData()})),this.listenTo(M.getDGlobalChannel(),M.EVENT.MEMBER_WITHDRAWAL,(function(e){var t=IM("word_ordered_member.text",{cnt:s.numberFormat(e,0)});this.getUI("memberCountText").text(t)})),this._drawPage(e)},_initBandAddressCopyClipboard:function(){if(this.$el&&0!=this.$el.find("._shareBandAddress").length){this._destroyBandAddressCopyClipboard();var e=this.model.getBandAddress();this.clipboard=new b("._shareBandAddress"),this.clipboard.on("success",(function(e){alert(IM("copy_url.success"))})),this.clipboard.on("error",(function(t){f.open(g.buildDBandAddressView(e))}))}},_destroyBandAddressCopyClipboard:function(){this.clipboard&&this.clipboard.destroy()},_drawPage:function(e){p.wrapActivePromise(t.Deferred().resolve(w(e)),this).then(i.bind((function(e){this._resetModel(e)}),this))},_resetModel:function(e){this.model.set(e.toJSON())}}),S=a.Model.extend({defaults:{dataFetched:!1,_loading_size:h.Size.MEDIUM},isDataFetched:function(){return 1==this.get("dataFetched")},getBandNo:function(){return this.getBandData().getBandNo()},isPreviewBand:function(){return 1==this.get("isPreviewBand")},isCardView:function(){return 1==this.get("isCardView")},getBandData:function(){return this.get("bandData")},getBandAddress:function(){return this.get("bandAddress")}}),w=function(e){var t=e.getDescription();var n=function(){var e=null;if(t){if(t=(t=d.nl2br(i.escape(t))).replace(/(<br>)+/g,"<br>"),i.isEqual(t,"<br>"))return e;e=d.splitForTruncate(t,6,45)}return e}();var a=e.getBandAddress()||"",o=a.replace(/^https?:\/\//g,""),l=i.isEmpty(a)&&e.canManageGroupBandShortcut(),h=i.isEmpty(t)&&e.canEditGroupIntro(),u=e.canShowGroupBandIntroDescriptionAndDoAction(),p=e.canShowBusinessIdentificationInfo(),m=y.makeDoNotDisturbTimeMessage(e.getBandDoNotDisturb());return new S({dataFetched:!0,bandSettingUrl:r.GROUP_BAND_SETTING.makeUrl({band_no:e.getBandNo()}),isAccessBizCenterPermitted:e.isAccessBizCenterPermitted(),bizCenterUrl:c.makeLink("BIZCENTER"),isPreviewBand:e.isPreview(),isCardView:e.isCardView(),isCertified:e.isCertified(),isGuideBand:e.isGuide(),isNormal:e.isNormal(),introSettingLinkText:l?IM("bandcover.band_intro_description.help_guide.input_description_and_address"):IM("bandcover.band_intro_description.setting_linktext"),bandData:e,showJoinButton:e.isPreview()||e.isCardView(),formattedMemberCount:s.numberFormat(e.getMemberCount(),0),invitationUrl:r.GROUP_BAND_MEMBER_INVITE.makeUrl({band_no:e.getBandNo()}),description:n,isShowDescriptionMoreButton:!(!n||!n[1])||!(!n||i.isEmpty(n[0].trim())||i.isEmpty(e.getKeywords())&&i.isEmpty(e.getLocation())&&i.isEmpty(e.getBusinessRegistrationNo())),canSetDescription:h,bandAddress:a,prettyAddress:o,canSetAddress:l,canInvite:e.isInvitationPermitted(),userJoinApplied:e.isUserJoinApplied(),leaderName:e.getLeaderName(),openTypeDescription:e.getOpenTypeDescription(),canShowBusinessIdentificationInfo:p,canShowGroupBandIntroDescriptionAndDoAction:u,canShowBandDoNotDisturb:e.canShowBandDoNotDisturb(),doNotDisturbTimeInfo:m})};return D.buildDBandCoverItemView=function(){return new D({model:new S})},D}.call(t,n,t,e))||(e.exports=i)},3462:function(e,t){e.exports='<div class="_sideCover"></div>\n\n<p class="member">\n<% if (isNormal) { %>\n    <a href="#" class="memberCount _memberLink _memberCountText"><%- IM(\'word_ordered_member.text\', {cnt: formattedMemberCount}) %></a>\n<% } else {%>\n    <span class="memberCount _memberCountText"><%- IM(\'word_ordered_member.text\', {cnt: formattedMemberCount}) %></span>\n<% } %>\n\n<% if (leaderName && !isNormal) { %>\n    <span class="leader"><%- IM(\'web.bandjoin.label.leader_name\', {name: leaderName}) %></span>\n<% } %>\n\n<% if (canInvite) { %>\n    <a href="<%- invitationUrl %>" class="btnInvite sf_color">\n        <svg class="svgIcon" aria-hidden="true">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#inviteAdd"></use>\n        </svg><%- IM(\'web.bandmember.invite\') %></a>\n<% } %>\n</p>\n\n<% // 주소 정보 영역 %>\n<% if (prettyAddress || (canSetAddress && !_.isEmpty(description))) { %>\n<div class="bandAddress">\n    <a href="#" class="bandAddressLink sf_color <%= canSetAddress ? \'_btnSetAddress\' : \'_shareBandAddress\' %>" data-clipboard-text="<%= bandAddress %>">\n        <span class="gSrOnly"><%- IM(\'share\') %></span>\n        <svg class="svgIcon" aria-hidden="true">\n            <use xlink:href="#ico-url"></use>\n        </svg>\n    <% if (prettyAddress) { %>\n        <em class="bandAddressText"><%- prettyAddress %></em>\n    <% } else if (canSetAddress && !_.isEmpty(description)) { %>\n        <em class="bandAddressText"><%= IM(\'bandcover.address_set_description\') %></em>\n    <% } %>\n    </a>\n</div>\n<% } %>\n\n<% // 가입하기 버튼 %>\n<% if (showJoinButton) { %>\n<div class="btnBox">\n    <button type="submit" class="uButton -sizeL -confirm _btnJoinBand">\n    <%\n        var buttonLabel= userJoinApplied ? IM("band.already_applied.btn.label") : IM("band.open_join_form.btn.label");\n    %>\n        <%= buttonLabel %>\n    </button>\n</div>\n<div class="bandInfo">\n    <a href="#" class="showBandInfo _btnShowBandInfo"><%= IM("web.bandpreview.btn.view_info") %></a>\n</div>\n<% } %>\n\n<% // 밴드 정보 영역 %>\n<% if (canShowGroupBandIntroDescriptionAndDoAction || canShowBusinessIdentificationInfo) { %>\n<div class="bandInfo">\n    <% if (description) { %>\n            <div class="introDesc">\n                <p class="desc _bandDescription"><%= description[0] %></p>\n            <% if (isShowDescriptionMoreButton) { %>\n                <a href="#" class="moreLink _btnMoreIntroDescription">...<%= IM(\'ui.label.more.long\') %></a>\n            <% } %>\n            </div>\n    <% } else if (canSetDescription) { %>\n            <div class="bandInfoArea">\n        <% if (prettyAddress) { %>\n            \x3c!-- 밴드를 표현할 소개글을 작성해 보세요 --\x3e\n            <a href="#" class="settingLink -block _btnSetDescription"><%= IM("bandcover.band_intro_description.help_guide.input_description") %></a>\n        <% } else { %>\n            \x3c!-- 밴드 주소, 소개 설정 --\x3e\n            <a href="#" class="settingLink -block _btnSetDescription"><%= introSettingLinkText %></a>\n        <% } %>\n            </div>\n    <% } %>\n\n    <% // 사업자 정보 %>\n\n    <% if (_.isEmpty(description) && !isShowDescriptionMoreButton && canShowBusinessIdentificationInfo) { %>\n    <div class="bandInfoArea">\n        <button type="button" class="settingLink -block _btnShowBusinessIdentificationInfo"><%= IM("going_to.business_registration") %></button>\n    </div>\n    <% } %>\n\n</div>\n<% } %>\n\n<% // 공개 타입 안내문 %>\n<p class="bandTypeDesc">\n    <%- openTypeDescription %>\n</p>\n\n\x3c!--방해 금지 시간 정보 --\x3e\n<% if ( canShowBandDoNotDisturb && doNotDisturbTimeInfo ) { %>\n<div class="bandAlarm">\n    <a href="#" class="bandAlarmBox">\n        <div class="bandAlarmImg sf_color">\n            <span class="gSrOnly"><%= IM("band.setting.do_not_disturb.title") %></span>\n            <svg class="svgIcon" aria-hidden="true">\n                <use xlink:href="#ico-alarm"></use>\n            </svg>\n        </div>\n\n        <div class="bandAlarmText _doNotDisturbInfo"><%= doNotDisturbTimeInfo %></div>\n    </a>\n</div>\n<% } %>\n\n<% // 설정 버튼 및 비즈 센터 버튼 %>\n<% if (isNormal) { %>\n<div class="bandSetting">\n        <a href="<%- bandSettingUrl %>" class="settingLink"><%= IM("setting.band_setting") %></a>\n    <% if (isAccessBizCenterPermitted) { %>\n        <a href="<%- bizCenterUrl %>" class="bizCenterLink _linkBizCenter"><%= IM("biz_center") %></a>\n    <% } %>\n</div>\n<% } %>'},3463:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3464),a=n(941),o=n(153),l=n(82),r=n(486),d=n(514),c=n(578);n(936);var h=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandPreviewCardView"},template:t.template(s),templateContext:function(){return{msg_coverUrl:function(e){return l.makeCoverUrl(e)},msg_numberWithCommas:function(e){return c.numberWithCommas(e)},msg_joinButton:this.bandData.isUserJoinApplied()?IM("band.already_applied.btn.label"):IM("band.open_join_form.btn.label"),getIntroDescription:t.bind((function(){return this.model.getSplitBandDescription()}),this),canShowIntroDescriptionMoreDetail:t.bind((function(){if(this.model.getSplitBandDescription()){if(!t.isEmpty(this.model.getSplitBandDescription()[1]))return!0;if(!(t.isEmpty(this.model.getSplitBandDescription()[0].trim())||t.isEmpty(this.bandData.getLocation())&&t.isEmpty(this.bandData.getBusinessRegistrationNo())&&t.isEmpty(this.bandData.getKeywords())))return!0}return!1}),this)}},ui:{btnClose:"._btnClose",btnDoNotClose:"._doNotClose",btnJoinBand:"._btnJoinBand",btnBandSetting:"[data-uiselector=btnBandSetting]",moreIntroDescription:"._moreIntroDescription"},events:{"click @ui.btnClose":"destroy","click @ui.btnDoNotClose":function(){return!1},"click @ui.btnBandSetting":"_goToSetting","click ._btnReportBand":"_openBandReport",click:function(e){0==$(e.target).parents("._lyContent:first").length&&this.destroy()},"click @ui.moreIntroDescription":"_moveToBandIntroDescription"},triggers:{"click @ui.btnJoinBand":"startBandJoin"},initialize:function(e){this.bandData=e.bandData,this.pageMode=e.pageMode},onAttach:function(){this.$el.addClass(this.bandData.getBandCore().getSkinColorClass())},_openBandReport:function(e){e.preventDefault(),d.openBandReportPopup(this.bandData.getBandNo())},_goToSetting:function(){return o.GROUP_BAND_SETTING.goDForced({band_no:this.bandData.getBandNo()}),!1},_moveToBandIntroDescription:function(){o.GROUP_BAND_INTRO.goDForced({band_no:this.bandData.getBandNo()}),this.destroy()}});return h.openPreviewPerViewType=function(e){var t=new h({model:a.buildBandPreviewModelFromBandData(e),bandData:e});return r.open(t),t},h}.call(t,n,t,e))||(e.exports=i)},3464:function(e,t){e.exports='<div class="lyContent -w380 _lyContent">\n    <header class="gSrOnly">\n        <p><%- bandCore.name %> BAND Preview</p>\n    </header>\n\n    <div class="main -spaceNone _doNotClose">\n        <div class="profileInfo">\n            <div class="fullCover">\n                <img src="<%- msg_coverUrl(bandCore.cover) %>" alt="<%- bandCore.name %>">\n            </div>\n\n            <div class="userInfo">\n                <h1 class="userName<% if (bandCore.certified) { %> -official<% } %>"><%- bandCore.name %></h1>\n\n                <p class="info">\n                    <span><%= IM(\'web.bandjoin.label.member_count\', {count: msg_numberWithCommas(memberCount) || \'0\'})%></span>\n                    <span><%= IM(\'web.bandjoin.label.leader_name\', {name: leaderName})%></span>\n                </p>\n\n                <% if (getIntroDescription()) { %>\n                <div class="introDesc">\n                    <p class="desc"><%= getIntroDescription()[0] %></p>\n                    <% if (canShowIntroDescriptionMoreDetail()) { %>\n                    <a href="#" class="moreLink _moreIntroDescription">...<%= IM("ui.label.more.long") %></a>\n                    <% } %>\n                </div>\n                <% } %>\n\n                <% if (needAdAgreement) { %>\n                <p class="descAd"><%= IM(\'bandjoin.desc.ad_agreement.group_band\') %></p>\n                <% } %>\n            </div>\n        </div>\n    </div>\n\n    <footer class="footer">\n        <button type="button" class="uButton -confirm -sizeL _btnJoinBand"><%= msg_joinButton %></button><br>\n        <button type="button" class="uButton -textUnderline gColorBk3 gFs13 gMat20 _btnReportBand"><%= IM(\'ui.label.report\') %></button>\n        <button type="button" class="uButton -iconCloseW btnLyClose _btnClose"><span class="gSrOnly"><%= IM(\'ui.label.close\') %></span></button>\n    </footer>\n</div>'},3465:function(e,t){e.exports='<a href="<%- bandHomeUrl %>" class="cover">\n    <div class="uCoverImage -border -w208 <% if (isBlocked) { %> -blocked <% } %>">\n        <span class="coverInner">\n            <% if (bandCore.cover) { %>\n            <img class="coverImg" src="<%- coverUrl %>" alt="">\n            <% } %>\n        </span>\n    </div>\n</a>\n\n<div class="bandName">\n    <a href="<%- bandHomeUrl %>" class="uriText">\n        <% if ( bandCore.certified ) { %><span class="uOfficialBand -sizeL"><%= IM(\'ui.official_band\') %></span><% } %><%- bandCore.name %>\n    </a>\n</div>'},3466:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3467),a=n(3468),o=n(1273),l=n(512),r=i.View.extend({tagName:"section",className:"sMemberSection gBoxShadow",attributes:{"data-viewname":"DBandApplicationsView"},template:t.template(s),ui:{applicationList:"._applicationList",applicationDescription:"._applicationDescription",lblApplicantCount:"._lblApplicantCount",noApplicationsMessage:"._noApplicationsMessage"},collectionEvents:{remove:function(){this._changeCountAndToggleViewing(),this.collection.isNextParamExist()&&this.collection.length<15?this.collection.fetchNext():this.collection.getApplicationCount()>0&&0==this.collection.length&&this.render()}},regions:{applicationList:{el:"@ui.applicationList",replaceElement:!0}},initialize:function(e){this.bandData=e.bandData},onRender:function(){this._renderApplicantCount(),this._renderInfinityScrollList(),this._renderMemberListView()},_renderMemberListView:function(){var e=new d({collection:this.collection});this.showChildView("applicationList",e)},_changeCountAndToggleViewing:function(){var e=this.collection.getApplicationCount()>0;this.ui.lblApplicantCount.text(this.collection.getApplicationCount()).toggle(e),this.ui.applicationDescription.toggle(e),this.ui.noApplicationsMessage.toggle(!e)},_renderApplicantCount:function(){this.collection.fetchApplicationCount().then(t.bind(this._changeCountAndToggleViewing,this))},_renderInfinityScrollList:function(){this.collection.fetchBandApplicationCollection().then(t.bind(this._bindInfinityScroll,this))},_bindInfinityScroll:function(){var e=!1;this.stopListening(l,"window:scroll:bottom"),this.listenTo(l,"window:scroll:bottom",(function(){e||(e=!0,this.collection.fetchNext().then(t.bind((function(t){e=!1,t||this.stopListening(l,"window:scroll:bottom")}),this)))}))}}),d=i.CollectionView.extend({tagName:"ul",className:"requestJoinMemberList",childView:a});return r.build=function(e){return new r({bandData:e,collection:new o([],{bandNo:e.getBandNo()})})},r}.call(t,n,t,e))||(e.exports=i)},3467:function(e,t){e.exports='<div class="uHeaderWrap ">\n    <header class="header">\n        <h1 class="title"><%- IM("band_applications.message.title") %><em class="count sf_color _lblApplicantCount"></em></h1>\n    </header>\n</div>\n<p class="pageNotice _applicationDescription"><span><%= IM("band_applications.message.auto_deny_after_a_month") %></span></p>\n<div class="requestJoinMember">\n    <div class="_applicationList"></div>\n    <p class="uEmpty _noApplicationsMessage" style="height:545px">\n        <span><%- IM("band_applications.label.no_application") %></span>\n    </p>\n</div>\n'},3468:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3469),a=n(9),o=n(82),l=n(1111),r=n(486),d=n(16),c=n(443),h=n(510),u=n(1058),p=n(26),m=n(514);return n(502),i.View.extend({tagName:"li",className:"requestJoinMemberItem",attributes:{"data-viewname":"DBandApplicationItemView"},template:t.template(s),templateContext:function(){var e=o.makeProfileThumbnailUrl(this.model.getApplicantProfileImageUrl()),t=null;return this.model.isJoinAnswerImagesExist()&&(t=o.make(this.model.getFirstJoinAnswerImage().url,o.TYPE.s150)),{profileImageUrl:e,profileInnerClass:o.makeProfileInnerClass(e),formattedCreatedAt:a.format.date(d(this.model.getCreatedAt()),"long"),isJoinQuestionExist:this.model.isJoinQuestionExist(),joinQuestionAsHtml:this.model.getJoinQuestionAsHtml(),joinAnswerAsHtml:this.model.getJoinAnswerAsHtml(),isJoinAnswerImagesExist:this.model.isJoinAnswerImagesExist(),joinAnswerThumbnail:t}},ui:{btnAccept:"._btnAccept",btnDeny:"._btnDeny",applicantThumbnail:"._applicantThumbnail",askJoinQuestionBtn:"._askJoinQuestionBtn",joinAnswerThumbnail:"._joinAnswerThumbnail",reportApplication:"._reportApplication",showMediaViewer:"._showMediaViewer"},events:{"click @ui.btnAccept":"_acceptApplication","click @ui.btnDeny":"_denyApplication","click @ui.applicantThumbnail ":function(){if(this.model.isThumbnailExist()){var e=l.buildDProfilePhotoView(this.model.getApplicantProfileImageUrl(),this.model.getApplicantName());r.open(e)}return!1},"click @ui.askJoinQuestionBtn":function(){var e=this.model.isJoinQuestionExist()?IM("bandjoin.extra_question_asking"):IM("bandjoin.join_question_asking"),n=h.openLayer({headerTitle:e,bodyDesc:IM("bandjoin.join_question_confirm_text",{applicantName:t.escape(this.model.getApplicantName())})});this.listenToOnce(n,h.EVENTS.CONFIRM,(function(){c.openJoinQnAApp(this.model.getBandNo(),this.model.getMemberKey())}))},"click @ui.reportApplication":function(){var e=t.bind((function(e){e.bandNo==this.model.getBandNo()&&e.memberKey==this.model.getMemberKey()&&this._denyApplication()}),this),n={bandNo:this.model.getBandNo(),memberKey:this.model.getMemberKey(),fnCallback:e};m.openBandApplicationReportPopup(n)},"click @ui.showMediaViewer":function(){var e=this.model.getFirstJoinAnswerImage();return u.openJoinApplicationSingleViewer(this.model.getBandNo(),[{photo_url:e.url,width:e.width,height:e.height}]),!1}},onDomRefresh:function(){this.model.isJoinAnswerImagesExist()&&this.ui.joinAnswerThumbnail.setLoading()},onAttach:function(){this.listenTo(p.getBandJoinQnAChannel(),p.BAND_JOIN_QNA_EVENT.ACCEPT_APPLICATION,(function(e,t){this.model.isBandNoAndMemberKeySame(t.bandNo,t.memberKey)&&this._removeCurrentItemView()})),this.listenTo(p.getBandJoinQnAChannel(),p.BAND_JOIN_QNA_EVENT.REJECT_APPLICATION,(function(e,t){this.model.isBandNoAndMemberKeySame(t.bandNo,t.memberKey)&&this._removeCurrentItemView()}))},_acceptApplication:function(){this.model.acceptJoinApplicationWithRefresh().always(t.bind((function(){this._removeCurrentItemView()}),this))},_denyApplication:function(){this.model.denyJoinApplicationWithRefresh().always(t.bind((function(){this._removeCurrentItemView()}),this))},_removeCurrentItemView:function(){this.model.collection.remove(this.model)}})}.call(t,n,t,e))||(e.exports=i)},3469:function(e,t){e.exports='<div class="uFlexItem">\n    <a href="#" role="button" class="uProfile -size40 _applicantThumbnail">\n        <span class="profileInner <%- profileInnerClass %>">\n            <img src="<%- profileImageUrl %>" width="40" height="40" alt="<%- applicantName %>">\n        </span>\n    </a>\n\n    <span class="body">\n        <span class="text -flex"><span class="ellipsis"><%- applicantName %></span></span>\n        <span class="date -ellipsis gMat2"><%- IM("application_detail.label.request", {"requestDate": formattedCreatedAt}) %></span>\n    </span>\n    <span class="etc">\n        <button type="button" class="uButton -sizeS -active _btnAccept"><%- IM("web.invitation.btn.accept") %></button>\n        <button type="button" class="uButton -sizeS -cancel gMal5 _btnDeny"><%- IM("web.invitation.btn.deny") %></button>\n    </span>\n</div>\n<%\nif (isJoinQuestionExist) {\n%>\n<dl class="qna">\n    <dt class="questionText"><%= joinQuestionAsHtml %></dt>\n    <dd class="answerText"><%= joinAnswerAsHtml %></dd>\n\n<%\n    if ( isJoinAnswerImagesExist ) {\n%>\n    <dd class="answerImage gMat9">\n        <a href="#" role="button" class="answerImageItem _showMediaViewer">\n            <img src="<%- joinAnswerThumbnail %>" alt="answerImage" class="_joinAnswerThumbnail">\n        </a>\n    </dd>\n<%\n    }\n%>\n</dl>\n\n<div class="buttonBox gMat9">\n    <div class="buttonBoxItem"><button type="button" class="buttonText -report _reportApplication"><%- IM(\'ui.label.report\') %></button></div>\n    <div class="buttonBoxItem"><button type="button" class="buttonText gBandColor -arrow _askJoinQuestionBtn"><%- IM(\'bandjoin.extra_question_asking\') %></button></div>\n</div>\n<% } else { %>\n<div class="buttonBox gMat1 gMal50">\n    <div class="buttonBoxItem"><button type="button" class="buttonText -report _reportApplication"><%- IM(\'ui.label.report\') %></button></div>\n    <div class="buttonBoxItem"><button type="button" class="buttonText gBandColor -arrow _askJoinQuestionBtn"><%- IM(\'bandjoin.join_question_asking\') %></button></div>\n</div>\n<% } %>'},3470:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(0),s=n(4),a=n(3471),o=n(3472),l=n(498),r=n(499),d=n(488),c=n(154),h=n(2110),u=n(159),p=n(155),m=n(153),_=s.View.extend({attributes:{"data-viewname":"DGroupBandJoinMiniQnARoomLayoutView"},behaviors:[u],getTemplate:function(){return this._dataFetched?i.template(a):i.template(l+'<div class="_qnaRoomListRegion"></div>')},templateContext:function(){return this._dataFetched?{}:{_loading_size:r.Size.MEDIUM,middleClass:d.ELEMENT.SCREEN_VERTICAL_MIDDLE}},ui:{qnARoomCount:"._qnARoomCount",qnaRoomListRegion:"._qnaRoomListRegion"},regions:{qnaRoomListRegion:{el:"@ui.qnaRoomListRegion",replaceElement:!0}},onMessages:(t={},t[u.MSG.BANDJOIN_ACCEPT_APPLICATION]=function(){this._bandData.fetchBandData()},t[u.MSG.BANDJOIN_REJECT_APPLICATION]=function(){this._bandData.fetchBandData()},t[u.MSG.BANDJOIN_READ_ACCEPT_REJECT_FAILURE]=function(){this._bandData.fetchBandData()},t),initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo},onDomRefresh:function(){if(this._dataFetched){this._renderQnARoomCountArea();var e=o.buildDGroupBandJoinMiniQnARoomListView(this._collection);this.showChildView("qnaRoomListRegion",e)}},onAttach:function(){this._collection=h.buildDBandJoinMiniQnARoomCollection(this._bandNo),c.wrapActivePromise(this._collection.fetchCommentSet(),this).then(i.bind((function(){this._dataFetched=!0,this.render(),this.listenTo(this._bandData,p.UPDATE_EVENT.ANY,this._renderQnARoomCountArea)}),this),i.bind((function(){m.GROUP_BAND_HOME.goDForced({band_no:this._bandNo})}),this))},_renderQnARoomCountArea:function(){var e=this._bandData.getApplicantCommentSetCountInfo(),t=e.count+"";e.countless&&(t+="+"),this.ui.qnARoomCount.toggle(e.count>0),this.ui.qnARoomCount.text(t)}});return _.buildDGroupBandJoinMiniQnARoomLayoutView=function(e){return new _({bandData:e})},_}.call(t,n,t,e))||(e.exports=i)},3471:function(e,t){e.exports='<div class="sMemberSection gBoxShadow">\n    <div class="uHeaderWrap ">\n        <header class="header ">\n            <h1 class="title"><%- IM(\'bandjoin.join_question_and_answer\') %> <em class="count sf_color _qnARoomCount"></em></h1>\n        </header>\n    </div>\n\n    <p class="pageNotice gPat10 gPab8"><span><%= IM(\'bandjoin.join_accept_reject_description\') %></span></p>\n    <ul class="_qnaRoomListRegion"></ul>\n</div>\n\n<div class="moreDescWrap gMat14">\n    <span class="moreDescTxt"><%- IM(\'bandjoin.join_qna_list_description\') %></span>\n</div>'},3472:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(4),s=n(159),a=n(3473),o=(n(2110),i.CollectionView.extend({attributes:{"data-viewname":"DGroupBandJoinMiniQnARoomListView"},tagName:"ul",className:"uFlexList qnaList",childView:a,behaviors:[s],onMessages:(t={},t[s.MSG.BANDJOIN_ACCEPT_APPLICATION]=function(e){this.collection.remove(e)},t[s.MSG.BANDJOIN_REJECT_APPLICATION]=function(e){this.collection.remove(e)},t[s.MSG.BANDJOIN_READ_ACCEPT_REJECT_FAILURE]=function(e){this.collection.remove(e)},t)}));return o.buildDGroupBandJoinMiniQnARoomListView=function(e){return new o({collection:e})},o}.call(t,n,t,e))||(e.exports=i)},3473:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(159),a=n(3474),o=n(82),l=n(9),r=n(158),d=n(26),c=n(154),h=n(1229),u=n(547),p=n(510),m=n(443);return i.View.extend({tagName:"li",attributes:{"data-viewname":"DGroupBandJoinMiniQnARoomView"},className:"qnaListItem gPat15 gPab15 gPal22 gPar22",template:t.template(a),templateContext:function(){var e="";this.model.getLastCommentCreatedAt()&&(e=l.format.relative(this.model.getLastCommentCreatedAt()));var n=this.model.getLastCommentAuthorName()+": ";t.isEmpty(this.model.getLastCommentBody())&&this.model.isLastCommentPhotoExist()?n+=IM("bandjoin.photo_attach_text"):n+=r.convertText(this.model.getLastCommentBody(),null,!0);var i=o.makeProfileThumbnailUrl(this.model.getProfileImageUrl());return{profileImageUrl:i,profileInnerClass:o.makeProfileInnerClass(i),shortRelativeAddTime:e,contents:n,applicantName:this.model.getApplicantName(),isUnread:this.model.isUnread()}},behaviors:[s],ui:{optionBtn:"._optionBtn",optionMenuLayer:"._optionMenuLayer",readBtn:"._readBtn",acceptBtn:"._acceptBtn",rejectBtn:"._rejectBtn",joinQuestionAnchor:"._joinQuestionAnchor"},events:{"click @ui.optionBtn":function(){return this.ui.optionMenuLayer.is(":hidden")&&d.getDGlobalChannel().trigger(d.EVENT.HTML_CLICK),this.ui.optionMenuLayer.toggle(),!1},"click @ui.readBtn":function(){return c.wrapActivePromise(h.readApplicantComment(this.model.getBandNo(),this.model.getApplicantMemberKey()),this).then(t.bind((function(){this.model.changeToReadState(),this.render()}),this),t.bind((function(){this.spawn(s.MSG.BANDJOIN_READ_ACCEPT_REJECT_FAILURE,this.model)}),this)),d.getDGlobalChannel().trigger(d.EVENT.HTML_CLICK),!1},"click @ui.acceptBtn":function(){return c.wrapActivePromise(u.acceptApplication(this.model.getBandNo(),this.model.getApplicantMemberKey()),this).then(t.bind((function(){this.spawn(s.MSG.BANDJOIN_ACCEPT_APPLICATION,this.model)}),this),t.bind((function(){this.spawn(s.MSG.BANDJOIN_READ_ACCEPT_REJECT_FAILURE,this.model)}),this)),d.getDGlobalChannel().trigger(d.EVENT.HTML_CLICK),!1},"click @ui.rejectBtn":function(){return c.wrapActivePromise(u.denyApplication(this.model.getBandNo(),this.model.getApplicantMemberKey()),this).then(t.bind((function(){this.spawn(s.MSG.BANDJOIN_REJECT_APPLICATION,this.model)}),this),t.bind((function(){this.spawn(s.MSG.BANDJOIN_READ_ACCEPT_REJECT_FAILURE,this.model)}),this)),d.getDGlobalChannel().trigger(d.EVENT.HTML_CLICK),!1},"click @ui.joinQuestionAnchor":function(){var e=p.openLayer({headerTitle:IM("bandjoin.extra_question_asking"),bodyDesc:IM("bandjoin.join_question_confirm_text",{applicantName:t.escape(this.model.getApplicantName())})});return this.listenTo(e,p.EVENTS.CONFIRM,(function(){m.openJoinQnAApp(this.model.getBandNo(),this.model.getApplicantMemberKey())})),d.getDGlobalChannel().trigger(d.EVENT.HTML_CLICK),!1}},onDomRefresh:function(){this.$el.toggleClass("-unread",this.model.isUnread())},onAttach:function(){this.listenTo(d.getDGlobalChannel(),d.EVENT.HTML_CLICK,(function(){this.ui.optionMenuLayer.hide()})),this.listenTo(d.getBandJoinQnAChannel(),d.BAND_JOIN_QNA_EVENT.ACCEPT_APPLICATION,(function(e,t){this.model.isBandNoAndMemberKeySame(t.bandNo,t.memberKey)&&this.spawn(s.MSG.BANDJOIN_ACCEPT_APPLICATION,this.model)})),this.listenTo(d.getBandJoinQnAChannel(),d.BAND_JOIN_QNA_EVENT.REJECT_APPLICATION,(function(e,t){this.model.isBandNoAndMemberKeySame(t.bandNo,t.memberKey)&&this.spawn(s.MSG.BANDJOIN_REJECT_APPLICATION,this.model)}))}})}.call(t,n,t,e))||(e.exports=i)},3474:function(e,t){e.exports='<a href="#" class="uFlexItem _joinQuestionAnchor">\n    <div class="uProfile -size44">\n        <span class="profileInner <%- profileInnerClass %>">\n            <img src="<%- profileImageUrl %>" width="44" height="44" alt="<%- applicantName %>">\n        </span>\n    </div>\n    <div class="body">\n        <div class="info">\n            <em class="userName"><%- applicantName %></em>\n            <span class="timeStatus">\n                <time><%- shortRelativeAddTime %></time>\n            </span>\n            <div class="option">\n                <button type="button" class="btnShowOption _optionBtn"><span class="gSrOnly"><%- IM(\'groupband.band_setting.more_option\') %></span></button>\n                <div class="lyMenu _optionMenuLayer" style="min-width:145px;display:none;">\n                    <ul>\n<% if ( isUnread ) { %>\n                        <li><button type="button" class="optionButton _readBtn"><%- IM(\'post.label.read\') %></button></li>\n<% } %>\n                        <li><button type="button" class="optionButton _acceptBtn"><%- IM(\'application_detail.label.accept_join\') %></button></li>\n                        <li><button type="button" class="optionButton _rejectBtn"><%- IM(\'application_detail.label.deny_join\') %></button></li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="text -multiLine -boldNormal"><%= contents %></div>\n    </div>\n</a>'},3475:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(52);return i.Model.extend({parse:function(e){return s.camelizeKeys(e)},getProfileImageUrl:function(){return this._getApplicant().profileImageUrl},getLastCommentAuthorName:function(){return this._getLastCommentAuthor().name},getLastCommentBody:function(){return this._getLatestComment().body},getLastCommentCreatedAt:function(){return this._getLatestComment().createdAt},isUnread:function(){return this.get("isUnread")},getBandNo:function(){return this._getApplicant().bandNo},getApplicantMemberKey:function(){return this._getApplicant().memberKey},getApplicantName:function(){return this._getApplicant().name},changeToReadState:function(){this.set("isUnread",!1)},isBandNoAndMemberKeySame:function(e,t){return this.getBandNo()==e&&this.getApplicantMemberKey()==t},isLastCommentPhotoExist:function(){return!t.isEmpty(this._getLatestComment().photos)},_getApplicant:function(){return this.get("applicant")||{}},_getLastCommentAuthor:function(){return this._getLatestComment().author||{}},_getLatestComment:function(){return this.get("latestComment")||{}}})}.call(t,n,t,e))||(e.exports=i)},3476:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(26),o=n(3477),l=n(211),r=n(153),d=n(22),c=[{bandLocalMenuKeyType:l.FULL_ARTICLE,routeInfo:r.GROUP_BAND_HOME,menuName:IM("groupband.lnb.posts")},{bandLocalMenuKeyType:l.ALBUM,routeInfo:r.GROUP_BAND_ALBUM,menuName:IM("web.summary.album.btn.album")},{bandLocalMenuKeyType:l.CALENDAR,routeInfo:r.GROUP_BAND_CALENDAR,menuName:IM("web.common.schedule")},{bandLocalMenuKeyType:l.ATTACHMENT,routeInfo:r.GROUP_BAND_ATTACHMENT,menuName:IM("attachments.lnb.title")},{bandLocalMenuKeyType:l.MEMBER,routeInfo:r.GROUP_BAND_MEMBER,menuName:IM("web.common.members")}],h=s.View.extend({tagName:"ul",attributes:{"data-viewname":"DLnbMenuView"},className:"lnbTopWrap",ui:{lnbMenus:"._lnbMenus"},template:t.template(o),templateContext:function(){return{menus:this._getMenus()}},_getMenus:function(){return t.map(c,(function(e,t){var n=this._makeBubbleData(e);return{index:t,name:e.menuName,url:e.routeInfo.makeUrl({band_no:this._bandData.getBandNo()}),isCurrent:e.bandLocalMenuKeyType===this._routeInfo.getDesktopLocalMenu(),isNew:this._getMenuNewStatus(e.bandLocalMenuKeyType),isBubbleType:n.isBubbleType,bubbleCount:n.bubbleCount}}),this)},initialize:function(e){this._bandData=e.bandData,this._routeInfo=e.routeInfo,this.listenTo(a.getShortcutChannel(),a.SHORTCUT_EVENT.GO_TO_BAND_LNB_MENU,t.bind((function(e){var t=this.$el.find("li:nth-child("+(e+1)+") a");t.length&&t.click()}),this))},onAttach:function(){this.listenTo(a.getDGlobalChannel(),a.EVENT.LNB_NEW_MARK_REFRESH,t.bind((function(){this._bandData.fetchBandData().then(t.bind((function(e){this._bandData=e,this._updateMenuItem()}),this))}),this))},checkSameBand:function(e){return this._bandData.getBandNo()===e.getBandNo()},renderLnbMenu:function(e){e&&(this._routeInfo=e),this._updateMenuItem()},_updateMenuItem:function(){this.ui.lnbMenus.removeClass("active").attr("aria-pressed","false");var e=this._routeInfo.getDesktopLocalMenu(),n=t.findIndex(c,{bandLocalMenuKeyType:e});i(this.ui.lnbMenus[n]).addClass("active").attr("aria-pressed","true"),t.each(this._getMenus(),(function(e){var t=i("._newIcon",this.ui.lnbMenus[e.index]);t.hide(),e.isNew&&!e.isCurrent&&(e.isBubbleType&&t.html(e.bubbleCount),t.show())}),this)},_getMenuNewStatus:function(e){switch(e){case l.FULL_ARTICLE:return this._bandData.hasUpdatedContent(d.CONTENT_TYPE.POST);case l.ALBUM:return this._bandData.hasUpdatedContent(d.CONTENT_TYPE.PHOTO);case l.CALENDAR:return this._bandData.hasUpdatedContent(d.CONTENT_TYPE.SCHEDULE);case l.MEMBER:return this._bandData.hasUpdatedContent(d.CONTENT_TYPE.APPLICATION);case l.ATTACHMENT:return this._bandData.hasUpdatedContent(d.CONTENT_TYPE.FILE);default:return!1}},_makeBubbleData:function(e){if(e.bandLocalMenuKeyType!==l.MEMBER)return{isBubbleType:!1,bubbleCount:0};var t=this._bandData.getLnbMemberBubbleCountInfo(),n={isBubbleType:!0,bubbleCount:t.count};return t.countless&&(n.bubbleCount+="+"),n}});return h.buildDDLnbMenuView=function(e,t){return new h({bandData:e,routeInfo:t})},h}.call(t,n,t,e))||(e.exports=i)},3477:function(e,t){e.exports='<% _.each(menus, function(menu) { %>\n<li class="lnbTopMenuItem"><a href="<%- menu.url %>" class="lnbTopMenuItemLink _lnbMenus" role="button" data-index="<%= menu.index %>"><span class="lnbTopMenuItemText"><%= menu.name %></span><% if (!menu.isBubbleType) { %><em class="gNewIcon -w4 _newIcon" style="display:none;">New</em><% } else { %><span class="noticeBubble _newIcon" style="display:none;"></span><% } %></a></li>\n<% }) %>\n'},3478:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3479),a=n(3480),o=n(3482),l=n(3485),r=n(153),d=n(53),c=n(159),h=n(26),u=t.template('<div class="uEmpty gBoxShadow" style="height:450px"><span class="gFs14 gColorGr3"><%= IM(\'ui.message.empty_conents\') %></span></div>'),p=i.View.extend({attributes:{"data-viewname":"DApprovablePostLayoutView"},behaviors:[c],template:t.template(s),templateContext:function(){return{isApprovalManagerView:this._isApprovalManagerView,writeWainHeaderClass:this._isApprovalManagerView?"-fixed":""}},ui:{approvablePostsContainer:"._approvablePostsContainer",postCount:"._postCount",boardManageArea:"._boardManageArea",multiPostDelete:"._multiPostDelete",multiPostApprove:"._multiPostApprove",emptyElement:".uEmpty"},regions:{approvablePostsContainer:{el:"@ui.approvablePostsContainer",replaceElement:!1}},events:{"click @ui.multiPostDelete":function(){h.getApprovablePostChannel().trigger(h.APPROVABLE_POST_EVENT.REMOVE_POST,this._selectedPostIdList,!0)},"click @ui.multiPostApprove":function(){h.getApprovablePostChannel().trigger(h.APPROVABLE_POST_EVENT.APPROVE_POST,this._selectedPostIdList,!0)}},initialize:function(e){this.bandData=e.bandData,this.bandNo=this.bandData.getBandCore().bandNo,this._isApprovalManagerView=this.bandData.canAccessApprovablePost(),this._selectedPostIdList=[]},onAttach:function(){if(d.getCurrentRouteInfo().routeInfo==r.GROUP_BAND_APPROVABLE_POST&&!this.bandData.canAccessApprovablePost()||d.getCurrentRouteInfo().routeInfo==r.GROUP_BAND_MY_APPROVABLE_POST&&!this.bandData.canAccessMyApprovablePost())return alert(IM("permission_deny")),void r.GROUP_BAND_HOME.goDForced({band_no:this.bandNo});this.approvablePostCollection=new a([],{bandNo:this.bandNo});var e=this._isApprovalManagerView?this.approvablePostCollection.fetchApprovablePostList(this.bandNo):this.approvablePostCollection.fetchMyApprovablePostList(this.bandNo),n=this._isApprovalManagerView?o.buildDApprovablePostCollectionView:l.buildDMyApprovablePostCollectionView;e.then(t.bind((function(){this._collectionView=n(this.approvablePostCollection,this.bandNo,this.bandData),this.getRegion("approvablePostsContainer").show(this._collectionView),this._isApprovalManagerView&&this.approvablePostCollection.getTotalCount()>0?this.ui.boardManageArea.show():this.ui.boardManageArea.hide(),this._updateUIElement(),this.listenTo(this._collectionView,"update:post:count",(function(){this._updateUIElement()})),this.listenTo(this._collectionView,"reset:selectedInfo",(function(){$("._checkPost").prop("checked",!1),this._selectedPostIdList=[],this._updateUIElement(),this._toggleManageButton()}))}),this)),this.listenTo(h.getApprovablePostChannel(),h.APPROVABLE_POST_EVENT.CHECK_POST,(function(e){this._updateSelectedPostIdList(e),this._toggleManageButton()}))},_updateSelectedPostIdList:function(e){var t=$(e).data("postId");if(!$(e).prop("checked")){var n=this._selectedPostIdList.indexOf(t);return $(e).prop("checked",!1),void this._selectedPostIdList.splice(n,1)}if(this._selectedPostIdList.length>=1e3)return alert(IM("member_contents.multi_delete.max_count",{maxCount:1e3})),void $(e).prop("checked",!1);this._selectedPostIdList.push(t)},_toggleManageButton:function(){if(this._selectedPostIdList.length>0)return this.ui.multiPostDelete.removeClass("-disabled"),void this.ui.multiPostApprove.removeClass("-disabled");this.ui.multiPostDelete.addClass("-disabled"),this.ui.multiPostApprove.addClass("-disabled")},_updateUIElement:function(){this.ui.postCount.text(this.approvablePostCollection.getTotalCount()),0==this.approvablePostCollection.getTotalCount()?(this.$el.append(u),this.ui.approvablePostsContainer.hide()):(this.ui.approvablePostsContainer.show(),this.ui.emptyElement.hide())}});return p.buildDApprovablePostLayoutView=function(e){return new p({bandData:e})},p}.call(t,n,t,e))||(e.exports=i)},3479:function(e,t){e.exports='<div class="writeWaitHeader <%= writeWainHeaderClass %>">\n    <div class="uHeaderWrap">\n        <header class="header <% if (!isApprovalManagerView) { %>-flexColumn<% } %>">\n            <h1 class="title"><%= IM("approve.post.list.label") %> <em class="count sf_color _postCount">0</em></h1>\n\n            <% if (!isApprovalManagerView) { %>\n            <p class="desc"><%= IM("approve.post.desc") %></p>\n            <% } %>\n\n        </header>\n    </div>\n    \x3c!-- 관리자 경우 노출 --\x3e\n    <div class="boardManageArea _boardManageArea"><button type="button" class="delete -disabled _multiPostDelete"><%= IM("ui.label.del") %></button><button type="button" class="confirm -disabled _multiPostApprove"><%= IM("approve.post.btn") %></button></div>\n</div>\n\n\x3c!-- 승인 대기 게시글 목록 --\x3e\n<div class="sReserveList _approvablePostsContainer"></div>\n'},3480:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(787),a=n(52),o=n(3481);return i.Collection.extend({model:function(e,t){return e.bandNo=t.collection.bandNo,new o(e,t)},modelId:function(e){return e[o.prototype.idAttribute||"id"]},initialize:function(e,t){this.bandNo=t.bandNo,this.nextParams=null,this._hasMore=!1,this.totalCount=0},fetchApprovablePostList:function(){var e={band_no:this.bandNo};return $.when(s.getApprovablePosts(e),s.getApprovablePostCount(this.bandNo)).then(t.bind((function(e,t){e=a.camelizeKeys(e),this.set(e.items,{parse:!0}),this.totalCount=t,this.nextParams=e.paging.nextParams,this._checkHasMore(e.items)}),this))},fetchNextApprovablePostList:function(){var e={band_no:this.bandNo};return this.nextParams&&(e.after=this.nextParams.after),s.getApprovablePosts(e).then(t.bind((function(e){e=a.camelizeKeys(e),this.add(e.items,{parse:!0}),this.nextParams=e.paging.nextParams,this._checkHasMore(e.items)}),this))},fetchMyApprovablePostList:function(){var e={band_no:this.bandNo};return $.when(s.getMyApprovablePosts(e),s.getMyApprovablePostCount(this.bandNo)).then(t.bind((function(e,t){e=a.camelizeKeys(e),this.set(e.items,{parse:!0}),this.totalCount=t,this.nextParams=e.paging.nextParams,this._checkHasMore(e.items)}),this))},fetchNextMyApprovablePostList:function(){var e={band_no:this.bandNo};return this.nextParams&&(e.after=this.nextParams.after),s.getMyApprovablePosts(e).then(t.bind((function(e){e=a.camelizeKeys(e),this.add(e.items,{parse:!0}),this.nextParams=e.paging.nextParams,this._checkHasMore(e.items)}),this))},hasMore:function(){return this._hasMore},getTotalCount:function(){return this.totalCount},_checkHasMore:function(e){20!=e.length?this._hasMore=!1:this._hasMore=!0},removeApprovablePost:function(e){var t=this.length;this.remove(e),this.totalCount-=Math.max(t-this.length,0)}})}.call(t,n,t,e))||(e.exports=i)},3481:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(158),a=n(52),o=n(501),l=n(688),r=n(152);return i.Model.extend({idAttribute:"approvablePostId",parse:function(e){e=a.camelizeKeys(e);var n=r.findPriorRestriction({isRestricted:e.isRestricted,isVisibleOnlyToAuthor:e.isVisibleOnlyToAuthor,isMutedAuthorPost:!!e.author&&e.author.isMuted});n&&(n===r.RESTRICTION_TYPE.HIDE_POST&&(e.title=IM("post.hidden_post.guide_message"),e.thumbnail=null),n===r.RESTRICTION_TYPE.MUTE_AUTHOR&&(e.title=IM("post.muted_author_post.guide_message"),e.thumbnail=null));var i=s.removeAllBandTag(e.title);i=t.unescape(i).replace(/\&nbsp;/g," ");var d=new o(e.author,{parse:!0});this.set({bandNo:e.bandNo,approvablePostId:e.approvablePostId,author:d,title:i,thumbnail:e.thumbnail,hasFailed:e.hasFailed,isPlayButtonVisible:e.isPlayButtonVisible,noticeState:e.noticeState,createdAt:e.createdAt,hasLive:e.hasLive,mission:e.mission?new l(e.mission,{parse:!0}):null,isVisibleOnlyToAuthor:e.isVisibleOnlyToAuthor,isRecoverableByViewer:e.isRecoverableByViewer})},getAuthor:function(){return this.get("author")},isMutedAuthorPost:function(){var e=this.getAuthor();return!!e&&e.isMutedAuthor()},getBandNo:function(){return this.get("bandNo")},getApprovablePostId:function(){return this.get("approvablePostId")},getAuthorProfileUrl:function(){return this.get("author").get("profileImageUrl")},getAuthorName:function(){return this.get("author").get("name")},isCoLeader:function(){return this.get("author").get("role").coleader},getApprovablePostId:function(){return this.get("approvablePostId")},hasFailed:function(){return this.get("hasFailed")},getThumbnail:function(){return this.get("thumbnail")},isApprovablePost:function(){return!!this.get("approvablePostId")},getUserNo:function(){return this.get("author").get("userNo")},hasLive:function(){return this.get("hasLive")},getApprovablePostMissionText:function(){var e=this.get("mission");return e?e.getPostMissionText():null}})}.call(t,n,t,e))||(e.exports=i)},3482:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3483),a=n(512),o=n(26),l=n(510),r=n(787),d=n(153),c=i.CollectionView.extend({attributes:{"data-viewname":"DApprovablePostCollectionView"},tagName:"ul",className:"list",childView:s,childViewOptions:function(){return{bandData:this.bandData,bandNo:this.bandNo}},initialize:function(e){this.bandData=e.bandData,this.bandNo=e.bandNo},onAttach:function(){this.listenTo(a,"window:scroll:bottom",(function(){this.collection.hasMore()&&this.collection.fetchNextApprovablePostList()})),this.listenTo(o.getApprovablePostChannel(),o.APPROVABLE_POST_EVENT.REMOVE_POST,(function(e,n){var i=n?e.toString():e,s=!0;n&&e.length>1&&(s=!1),l.openLayer({bodyTitle:IM("ui.confirm.delete"),bodyDesc:IM("approvable_post.delete.cannot.recover"),confirm:IM("ui.label.delete"),cancel:IM("ui.label.cancel")}).once(l.EVENTS.CONFIRM,t.bind((function(){return r.deleteApprovablePosts(this.bandNo,i).then(t.bind((function(){o.getApprovablePostChannel().trigger(o.APPROVABLE_POST_EVENT.POST_DELETED),this._updatePostCollection(s,i)}),this)).fail(t.bind((function(e){1e3===e.result_code&&(alert(IM("approvable.alert.already_removed")),this.collection.removeApprovablePost(i)),200===e.result_code&&d.GROUP_BAND_HOME.goDForced({band_no:this.bandNo})}),this)).always(t.bind((function(){this.trigger("reset:selectedInfo")}),this))}),this))})),this.listenTo(o.getApprovablePostChannel(),o.APPROVABLE_POST_EVENT.APPROVE_POST,(function(e,n){if(this.bandData.canAccessApprovablePost()){var i,s=!0;n&&e.length>1?(s=!1,i=e.sort((function(e,t){return e-t})).toString()):i=e.toString(),l.openLayer({bodyTitle:IM("approvable_post.approve.confirm.title"),confirm:IM("ui.label.yes"),cancel:IM("ui.label.no")}).once(l.EVENTS.CONFIRM,t.bind((function(){return r.postApprovePosts(this.bandNo,i).then(t.bind((function(){o.getApprovablePostChannel().trigger(o.APPROVABLE_POST_EVENT.POST_UPLOADED),this._updatePostCollection(s,i)}),this)).fail(t.bind((function(e){1e3===e.result_code&&alert(IM("approvable.alert.already_removed")),1e3!==e.result_code&&1001!=e.result_code||this.collection.fetchApprovablePostList().then(t.bind((function(){this.trigger("reset:selectedInfo"),this.render()}),this)),200===e.result_code&&d.GROUP_BAND_HOME.goDForced({band_no:this.bandNo})}),this)).always(t.bind((function(){this.trigger("reset:selectedInfo")}),this))}),this))}else alert(IM("permission_deny"))}))},_updatePostCollection:function(e,n){if(e)this.collection.removeApprovablePost(n);else{var i=n.split(",");t.each(i,t.bind((function(e){this.collection.removeApprovablePost(e)}),this))}this.collection.hasMore()&&this.collection.fetchNextApprovablePostList()},onBeforeDetach:function(){this.stopListening(a,"window:scroll:bottom")}});return c.buildDApprovablePostCollectionView=function(e,t,n){return new c({collection:e,bandNo:t,bandData:n})},c}.call(t,n,t,e))||(e.exports=i)},3483:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3484),a=n(9),o=n(82),l=n(26),r=n(159),d=n(786),c=n(1260),h=n(589),u=n(1061),p=n(1041),m=n(656);return i.View.extend({tagName:"li",className:"gBoxShadow",attributes:{"data-viewname":"DApprovablePostItemView"},behaviors:[r,u,p.withUI("dimArea","clickDim")],template:t.template(s),templateContext:function(){var e="";c.isNotificationTypePost(this.model)&&(e=c.isMajorNoticePost(this.model)?IM("post.list.majorNotice"):IM("post.list.notice"));var n=this.model.getAuthorProfileUrl()?o.make(this.model.getAuthorProfileUrl(),o.TYPE.s150):"";return{createdAt:a.format.date(this.model.get("createdAt"),"month_day_time"),authorProfileUrl:n,profileInnerClass:o.makeProfileInnerClass(n),authorName:this.model.getAuthorName(),noticeMessage:e,thumbnail:this.model.getThumbnail()?o.make(this.model.getThumbnail(),o.TYPE.s75):"",needShowErrorMessage:this.model.hasFailed()||this.model.hasLive(),showColeaderMark:this.model.isCoLeader(),makeErrorMessage:t.bind((function(){return this.model.hasFailed()?IM("approvable_post.cannot.upload"):this.model.hasLive()?IM("approvable.post.live.until_30days"):void 0}),this),missionText:this.model.getApprovablePostMissionText()}},ui:{dimArea:"._dimArea",deletePost:"._deletePost",approvePost:"._approvePost",checkPost:"._checkPost",btnDetailView:"._btnDetailView",btnProfileView:"._btnProfileDetail"},events:{"click @ui.btnDetailView":"_onClickPostItem","click @ui.deletePost":function(){l.getApprovablePostChannel().trigger(l.APPROVABLE_POST_EVENT.REMOVE_POST,this.approvablePostId)},"click @ui.approvePost":function(){l.getApprovablePostChannel().trigger(l.APPROVABLE_POST_EVENT.APPROVE_POST,this.approvablePostId)},"change @ui.checkPost":function(){l.getApprovablePostChannel().trigger(l.APPROVABLE_POST_EVENT.CHECK_POST,this.ui.checkPost)},"click @ui.btnProfileView":function(){h.openMemberProfileLayer(this.bandData.getMembershipMemberProfile(),this.model.getUserNo(),this.bandNo)}},initialize:function(e){this.bandData=e.bandData,this.bandNo=e.bandNo,this.approvablePostId=this.model.getApprovablePostId(),this.listenTo(this,"clickDim",this._onClickPostItem)},onRender:function(){p.renderDimOfView(this)},_onClickPostItem:function(){m.isStateDimCovered(this.model)?this.trigger(u.POST_MORE_ACTIONS.UNCOVER_DIMMED_POST):this._openPostDetailLayer()},_openPostDetailLayer:function(e){d.buildApprovablePostDetailAsLayer({bandNo:this.bandNo,approvablePostId:this.approvablePostId,uncoverOnce:e})},openPostDetailLayerWithUncoverOnce:function(){this._openPostDetailLayer(!0)}})}.call(t,n,t,e))||(e.exports=i)},3484:function(e,t){e.exports='<div class="_dimArea"></div>\n<div class="postWriter uFlexItem _btnProfileDetail">\n    <a href="#" role="button" class="uProfile -size40 -border <% if (showColeaderMark) { %> -coleader <% } %>">\n    <span class="profileInner <%- profileInnerClass %>">\n        <% if (showColeaderMark) { %>\n        <span class="gSrOnly">\n                <%= IM("bandsetting.manage_coleader.txt.coleader") %>\n        </span>\n        <% } %>\n        <% if (authorProfileUrl) { %>\n        <img src="<%- authorProfileUrl %>" width="40" height="40" alt="<%= authorName %>">\n        <% } %>\n    </span>\n    </a>\n    <div class="postWriterInfoWrap">\n        <span class="ellipsis">\n            <strong class="text"><%= authorName %></strong>\n        </span>\n        <div class="postListInfoWrap">\n            <% if (noticeMessage) { %>\n            <span class="notice"><%= noticeMessage %></span>\n            <% } %>\n            <time class="time"><%= createdAt %></time>\n        </div>\n    </div>\n</div>\n<% if (missionText) { %>\n<div class="missionCertification gMal22 gMab12">\n    <span class="missonName -pointColor"><span class="iconMisson"></span><%- missionText %></span>\n</div>\n<% } %>\n\n<div class="contentWrap _btnDetailView">\n    <div class="text">\n        <p><%= title %></p>\n        <% if (needShowErrorMessage) { %>\n        <p class="fail"><%= makeErrorMessage() %></p>\n        <% } %>\n    </div>\n    <% if (thumbnail) { %>\n    <div class="thumb">\n        <img src="<%- thumbnail %>" alt="">\n    </div>\n    <% } %>\n</div>\n<div class="option">\n    <label for="uCheck_<%= approvablePostId %>" class="uCheck -checkbox">\n        <input type="checkbox" id="uCheck_<%= approvablePostId %>" class="checkInput _checkPost" data-post-id="<%= approvablePostId %>">\n        <span class="checkLabel">\n    <span class="shape sf_tAfterBg"></span>\n    <span class="text"></span>\n</span>\n    </label>\n</div>\n<div class="postAdded">\n    <div class="postAddBox">\n        <div class="addCol">\n            <a href="#" class="addStatus -delete _deletePost" data-post-id="<%= approvablePostId %>"><span><%= IM("ui.label.del") %></span></a>\n        </div>\n        <div class="addCol">\n            <a href="#" class="addStatus -confirm _approvePost" data-post-id="<%= approvablePostId %>"><span><%= IM("approve.post.btn") %></span></a>\n        </div>\n    </div>\n</div>'},3485:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3486),a=n(512),o=n(787),l=n(26),r=n(556),d=i.CollectionView.extend({tagName:"ul",className:"list",attributes:{"data-viewname":"DMyApprovablePostCollectionView"},childView:s,childViewOptions:function(){return{bandNo:this.bandNo}},childViewEvents:{"remove:approvable:post":function(e){return!!confirm(IM("ui.confirm.delete"))&&o.deleteMyApprovablePosts(this.bandNo,e).then(t.bind((function(){this.collection.removeApprovablePost(e),this.trigger("update:post:count")}),this)).fail(t.bind((function(t){1e3===t.result_code&&(alert(IM("approvable.alert.already_removed")),this.collection.removeApprovablePost(e),this.trigger("update:post:count"))}),this))},"modify:approvable:post":function(e){return(new r).fetchMyApprovablePost(this.bandNo,e).then(t.bind((function(t){l.getPostChannel().trigger(l.EVENT.MODIFY_POST,this.bandNo,e,t)}),this)).fail(t.bind((function(t){1e3===t.result_code&&(alert(IM("approvable.alert.already_removed")),this.collection.removeApprovablePost(e),this.trigger("update:post:count"))}),this))}},initialize:function(e){this.bandNo=e.bandNo},onAttach:function(){this.listenTo(a,"window:scroll:bottom",(function(){this.collection.hasMore()&&this.collection.fetchNextMyApprovablePostList()})),this.listenTo(l.getPostChannel(),l.EVENT.MY_APPROVABLE_POST_UPDATED,(function(){this.collection.fetchMyApprovablePostList(this.bandNo).then(t.bind((function(){this.render()}),this))}))},onBeforeDetach:function(){this.stopListening(a,"window:scroll:bottom")}});return d.buildDMyApprovablePostCollectionView=function(e,t){return new d({collection:e,bandNo:t})},d}.call(t,n,t,e))||(e.exports=i)},3486:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3487),a=n(9),o=n(82),l=n(26),r=n(1260);return i.View.extend({tagName:"li",className:"more gBoxShadow",attributes:{"data-viewname":"DMyApprovablePostItemView"},ui:{divMenu:"._divMenu",btnMore:".btnMore",btnDeletePost:"._btnDeletePost",btnModifyPost:"._btnModifyPost"},events:{"click @ui.btnMore":function(){return this.ui.divMenu.is(":hidden")&&l.getDGlobalChannel().trigger(l.EVENT.HTML_CLICK),this.ui.divMenu.toggle(),this.ui.btnMore.addClass("menuOn"),!1},"click @ui.btnModifyPost":function(){this.trigger("modify:approvable:post",this.model.getApprovablePostId())},"click @ui.btnDeletePost":function(){this.trigger("remove:approvable:post",this.model.getApprovablePostId())}},template:t.template(s),templateContext:function(){var e="";return r.isNotificationTypePost(this.model)&&(e=r.isMajorNoticePost(this.model)?IM("web.postwrite.set_major_notice"):IM("web.postwrite.set_notice")),{createdAt:a.format.date(this.model.get("createdAt"),"month_day_time"),needShowNoticeMark:r.isNotificationTypePost(this.model),hasFailed:this.model.hasFailed(),thumbnail:this.model.getThumbnail()?o.make(this.model.getThumbnail(),o.TYPE.s75):"",noticeState:e,missionText:this.model.getApprovablePostMissionText()}},initialize:function(e){this.bandNo=e.bandNo},onAttach:function(){this.listenTo(l.getDGlobalChannel(),l.EVENT.HTML_CLICK,(function(){this.ui.divMenu.hide(),this.ui.btnMore.removeClass("menuOn")}))}})}.call(t,n,t,e))||(e.exports=i)},3487:function(e,t){e.exports='<li class="more gBoxShadow">\n    <h2 class="title"><%= createdAt %> <%= noticeState %></h2>\n\n    <% if (missionText) { %>\n    <div class="missionCertification gMal22 gMab12">\n        <span class="missonName -pointColor"><span class="iconMisson"></span><%- missionText %></span>\n    </div>\n    <% } %>\n\n    <div class="contentWrap">\n        <div class="text">\n            <p><%= title %></p>\n            <% if (hasFailed) { %>\n            <p class="fail"><%= IM("my.approvable.post.failed.desc") %></p>\n            <% } %>\n        </div>\n        <% if (thumbnail) { %>\n        <div class="thumb <% if (isPlayButtonVisible) { %> -iconPlay<% } %>">\n            <img src="<%- thumbnail %>" alt="">\n        </div>\n        <% } %>\n    </div>\n    <a href="#" role="button" class="btnDetailView _btnModifyPost"><span class="gSrOnly"><%= IM("web.bandboard.btn.detail") %></span></a>\n    <div class="option">\n        <button type="button" class="btnMore"><span class="gSrOnly"><%= IM("my.approvable.post.notice.menu.option") %></span></button>\n        <div class="lyMenu _divMenu" style="min-width: 145px;">\n            <ul>\n                <li class="_btnModifyPost"><a href="#" role="button"><%= IM("web.postdetail.menu.modify_post") %></a></li>\n                <li class="_btnDeletePost"><a href="#" role="button"><%= IM("ui.label.delete_long")%></a></li>\n            </ul>\n        </div>\n    </div>\n</li>'},3488:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(16),s=n(4),a=n(3489),o=n(499),l=n(498),r=n(538),d=n(1168),c=n(1522),h=n(510),u=n(153),p=n(1248),m=n(1258),_=n(3490),b=n(685),g=n(1549),f=n(590),v=s.View.extend({tagName:"div",className:"sSettingBand gBoxShadow",attributes:{"data-viewname":"DGroupBandLocalBandSettingView"},getTemplate:function(){return this._loading?t.template(l):t.template(a)},templateContext:function(){return this._loading?{_loading_size:o.Size.MEDIUM}:{regionName:this._selectedRegion&&this._selectedRegion.name,keyword:this._selectedLocalKeyword&&this._selectedLocalKeyword.keyword,isLocalBand:this._bandOptionModel.isLocalBand(),showKeywordDesc:this._showKeywordDesc()}},ui:{btnSelectRegion:"._btnSelectRegion",btnSelectKeyword:"._btnSelectKeyword",btnJoinCondition:"._btnJoinCondition",btnSave:"._btnSave",btnClearLocalBand:"._btnClearLocalBand"},regions:{joinConditionSettingItemRegion:{el:"._joinConditionSettingItemRegion",replaceElement:!0}},events:{"click @ui.btnSelectRegion":function(e){if(!f.isContentCreationPunished()){var t=d.openLayer(this._bandNo);this.listenToOnce(t,d.EVENTS.SELECTED,(function(e){this._selectedRegion={rcode:e.getRcode(),name:e.getName()},this.getUI("btnSelectRegion").text(this._selectedRegion.name),this.getUI("btnSelectRegion").parent().addClass("-selectedItem"),this._toggleSaveButton()}))}},"click @ui.btnSelectKeyword":function(e){if(!f.isContentCreationPunished()){var t=c.openLayer({bandNo:this._bandNo,showRecommendedKeywords:!0,isForLocalBand:!0,selectedKeywords:this._selectedLocalKeyword?[this._selectedLocalKeyword]:[]});this.listenToOnce(t,c.EVENTS.CONFIRM,(function(e){this._selectedLocalKeyword=e[0],this._selectedLocalKeyword?(this.getUI("btnSelectKeyword").text(this._selectedLocalKeyword.keyword),this.getUI("btnSelectKeyword").parent().addClass("-selectedItem")):(this.getUI("btnSelectKeyword").text(IM("bandsetting.keyword.select_keyword")),this.getUI("btnSelectKeyword").parent().removeClass("-selectedItem")),this._toggleSaveButton()}))}},"click @ui.btnSave":"_setLocalBand","click @ui.btnClearLocalBand":"_clearLocalBand"},initialize:function(e){if(this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._localBandPermission=b.build(this._bandData),!this._localBandPermission.canManageLocalBand())return u.GROUP_BAND_HOME.historyBackOrGoTargetUrl({band_no:this._bandNo}),void this.destroy();this._bandOptionModel=null,this._selectedRegion=null,this._selectedLocalKeyword=null,this._loading=!0},onRender:function(){this._loading||this._showJoinCondtionSettingItem()},onAttach:function(){this._fetchData().then(t.bind((function(){this._loading=!1,this.render()}),this))},_showJoinCondtionSettingItem:function(){var e=this.getRegion("joinConditionSettingItemRegion");_.show(e,this._bandData)},_fetchData:function(){return r.getBandOption(this._bandNo).then(t.bind((function(e){this._bandOptionModel=e,this._selectedRegion=this._bandOptionModel.getRegion(),this._selectedLocalKeyword=this._getLocalKeyword(),this._initialLocalBandInfo={selectedRegion:t.clone(this._selectedRegion),selectedLocalKeyword:t.clone(this._selectedLocalKeyword)}}),this))},_showKeywordDesc:function(){return!this._getLocalKeyword()&&!t.isEmpty(this._bandOptionModel.getBandKeywords())},_getLocalKeyword:function(){if(!this._bandOptionModel.getRegion())return null;var e=this._bandOptionModel.getBandKeywordsWithKeywordGroups();return t.isEmpty(e)?null:{keywordGroup:e[0].keyword_groups[0],keyword:e[0].keyword}},_toggleSaveButton:function(){this.getUI("btnSave").prop("disabled",!this._isSavable())},_isSavable:function(){return!!this._selectedRegion&&(!!this._selectedLocalKeyword&&JSON.stringify(this._initialLocalBandInfo)!==JSON.stringify({selectedRegion:this._selectedRegion,selectedLocalKeyword:this._selectedLocalKeyword}))},_setLocalBand:function(){f.isContentCreationPunished()||r.SETTING.setLocalBand(this._bandNo,this._selectedRegion.rcode,this._selectedLocalKeyword.keyword).then(t.bind((function(){this._bandData.resetBandDataState(),this._bandData.loadBandData().then(t.bind((function(){this._confirmLocalMeetupScheduleCreation()}),this))}),this))},_confirmLocalMeetupScheduleCreation:function(){this._localBandPermission.canRegisterLocalMeetup()?h.openLayer({bodyTitle:IM("bandsetting.local_band.set_local_band.confirm.title"),bodyDesc:IM("bandsetting.local_band.set_local_band.confirm.desc"),confirm:IM("bandsetting.local_band.set_local_band.confirm.confirm_button_text"),cancel:IM("ui.label.close")}).once(h.EVENTS.CONFIRM,t.bind(this._openLocalMeetupScheduleCreationLayer,this)).once(h.EVENTS.CANCEL,t.bind(this._goBandSettingIntro,this)):this._goBandSettingIntro()},_openLocalMeetupScheduleCreationLayer:function(){var e=m.createLocalMeetupModel(i()),t=g.openScheduleEditAsLayerForCreation({scheduleEditModel:e,shouldHideSecretSelect:e.isLocalMeetup(),bandData:this._bandData,postAttachable:!0},this),n=[p.EVENT.SCHEDULE_EDIT_COMPLETE,p.EVENT.SCHEDULE_EDIT_CANCEL].join(" ");this.listenTo(t,n,this._goBandSettingIntro)},_goBandSettingIntro:function(){u.GROUP_BAND_SETTING_INTRO.goDForced({band_no:this._bandNo})},_clearLocalBand:function(){var e;f.isContentCreationPunished()||(e=this._bandOptionModel.isSecretBand()?IM("bandsetting.local_band.clear_local_band_info.confirm.desc_for_secret_band"):IM("bandsetting.local_band.clear_local_band_info.confirm.desc_for_open_band"),h.openLayer({bodyTitle:IM("bandsetting.local_band.clear_local_band_info.confirm.title"),bodyDesc:e}).once(h.EVENTS.CONFIRM,t.bind((function(){r.SETTING.clearLocalBand(this._bandNo).then(t.bind(this._goBandSettingIntro,this))}),this)))}});return v.buildDGroupBandLocalBandSettingView=function(e){return new v({bandData:e})},v}.call(t,n,t,e))||(e.exports=i)},3489:function(e,t){e.exports='<div class="sSettingBand gBoxShadow">\n    <div class="uHeaderWrap -h50">\n        <header class="header ">\n            <h1 class="title"><%= IM(\'bandsetting.local_band.title\') %></h1>\n        </header>\n    </div>\n    <div class="localGroupBox">\n        <h2 class="boxTitle"><%= IM(\'bandsetting.local_band.guide.title\') %></h2>\n        <p class="boxDesc"><%= IM(\'bandsetting.local_band.guide.desc\') %></p>\n    </div>\n    <ul class="sSettingList">\n        <li class="sSettingItem gPat20 gPab20">\n            <div class="itemContent">\n                <span class="label"><%= IM(\'bandsetting.local_band.region.title\') %></span>\n                <ul class="selectedKeywordList">\n                    <li class="selectedKeywordItem <%= !!regionName ? \'-selectedItem\' : \'\' %>">\n                        <button type="button" class="keywordButton _btnSelectRegion"><%- !!regionName ? regionName : IM(\'region_selection.title\') %></button>\n                    </li>\n                </ul>\n            </div>\n        </li>\n        <li class="sSettingItem gPat18 gPab20">\n            <div class="itemContent">\n                <span class="label"><%= IM(\'bandsetting.local_band.keyword.title\') %></span>\n                <ul class="selectedKeywordList">\n                    <li class="selectedKeywordItem <%= !!keyword ? \'-selectedItem\' : \'\' %>">\n                        <button type="button" class="keywordButton _btnSelectKeyword"><%- !!keyword ? keyword : IM(\'bandsetting.keyword.select_keyword\') %></button>\n                    </li>\n                </ul>\n                <% if (showKeywordDesc) { %>\n                <span class="subTxt gColorGr2 gMat9"><%= IM(\'bandsetting.local_band.keyword.guide\') %></span>\n                <% } %>\n            </div>\n        </li>\n        <li class="_joinConditionSettingItemRegion"></li>\n        <% if (isLocalBand) { %>\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <span class="label"><%= IM(\'bandsetting.local_band.label.clear_local_band_info\') %></span>\n            </div>\n            <div class="itemSide -wAuto">\n                <button type="button" class="uButton -sizeS -confirm2 -colorError _btnClearLocalBand"><%= IM(\'ui.label.delete\') %></button>\n            </div>\n        </li>\n        <% } %>\n    </ul>\n    <div class="btnFooter gMal20 gMar20">\n        <button type="button" class="uButton -confirm _btnSave" disabled><%= IM(\'ui.label.save\') %></button>\n    </div>\n</div>'},3490:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(155),a=n(853),o=n(3491),l=n(590),r=i.View.extend({tagName:"li",className:"sSettingItem",attributes:{"data-viewname":"DGroupBandJoinConditionSettingItemView"},template:t.template('<div class="itemContent">\n    <span class="label"><%= joinConditionTitle %></span>\n    <span class="subTxt"><%= joinConditionLabel %></span>\n</div>\n<div class="itemSide -wAuto">\n    <button type="button" class="uButton -sizeS -confirm2 _btnJoinCondition"><%= IM(\'ui.label.settings\') %></button>\n</div>'),templateContext:function(){return{joinConditionTitle:IM("bandsetting.local_band.join_condition.title"),joinConditionLabel:this._getJoinConditionLabel()}},ui:{btnJoinCondition:"._btnJoinCondition"},events:{"click @ui.btnJoinCondition":function(e){l.isContentCreationPunished()||o.openLayer(this._bandNo)}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this.listenTo(this._bandData,s.UPDATE_EVENT.BAND,this.render)},_getJoinConditionLabel:function(){var e=this._bandData.getJoinOption();return e?[a.getJoinOptionByAllowedGender(e.gender,!1),a.getJoinOptionByAllowedYearOfBirth(e.minBirthYear,e.maxBirthYear,!1)].join(", "):IM("bandsetting.local_band.join_condition.desc")}});return r.show=function(e,t){if(e){e.hasView()&&e.empty();var n=new r({bandData:t});return e.show(n),n}},r}.call(t,n,t,e))||(e.exports=i)},3491:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(10),s=n(4),a=n(3492),o=n(543),l=n(486),r=n(541),d=n(538),c=n(155),h={CONFIRM:"CONFIRM",CANCEL:"CANCEL"},u=s.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandJoinConditionSettingLayerView"},template:t.template(a),templateContext:function(){return{maxYearForAge:o.BAND_JOIN_CONDITION.MAX_YEAR_FOR_AGE,minYearForAge:o.BAND_JOIN_CONDITION.MIN_YEAR_FOR_AGE,allowedGender:this._bandOptionModel.getAllowedGender(),minBirthYear:this._bandOptionModel.getMinBirthYear(),maxBirthYear:this._bandOptionModel.getMaxBirthYear()}},ui:{selectGender:"._selectGender",selectMinYear:"._selectMinYear",selectMaxYear:"._selectMaxYear",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"click @ui.btnCancel":function(e){this.trigger(h.CANCEL),this.destroy()},"click @ui.btnConfirm":"_updateJoinType"},initialize:function(e){this._bandNo=e.bandNo,this._bandOptionModel=e.bandOptionModel},_updateJoinType:function(){var e=this.getUI("selectGender").find("option:selected").val(),n=this.getUI("selectMinYear").find("option:selected").val(),s=this.getUI("selectMaxYear").find("option:selected").val();if(i.toNumber(s)<i.toNumber(n)){var a=s;s=n,n=a}r.setBandJoinCondition(this._bandNo,e,n,s).then(t.bind((function(){var e=c.get(this._bandNo);e.resetBandDataState(),e.loadBandData(),this.trigger(h.CONFIRM),this.destroy()}),this))}});return u.EVENTS=h,u.openLayer=function(e){return d.getBandOption(e).then((function(t){var n=new u({bandNo:e,bandOptionModel:t});return l.openWithoutHiding(n),n}))},u}.call(t,n,t,e))||(e.exports=i)},3492:function(e,t){e.exports='<div class="lyContent" style="width:440px">\n    <header class="modalHeader">\n        <h1 class="title"><%= IM("bandsetting.band_join_condition.title") %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap">\n            <ul class="listLine -bOpLine">\n                <% // 성별 %>\n                <li class="flexList -tbSpace15 tLine">\n                    <label for="gender" class="text gFs14"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_gender") %></label>\n                    <div class="etc">\n                        <div class="uSelect" style="min-width:105px">\n                            <select id="gender" class="_selectGender">\n                                <option value="none" <% if (allowedGender && allowedGender == "none") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                                <option value="male" <% if (allowedGender && allowedGender == "male") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.join_condition_male") %></option>\n                                <option value="female" <% if (allowedGender && allowedGender == "female") { %> selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.join_condition_female") %></option>\n                            </select>\n                        </div>\n                    </div>\n                </li>\n                <% // 나이 %>\n                <li class="flexList -tbSpace15 tLine ageItem">\n                    <span class="text gFs14"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_age") %></span>\n                    <div class="etc">\n                        <div class="selectBox">\n                            <label for="maxAge" class="selectLabel"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_min_age") %></label>\n                            <div class="uSelect" style="min-width:87px">\n                                <select id="maxAge" class="_selectMaxYear">\n                                    <option value="none" <% if (maxBirthYear && maxBirthYear == "none") { %>selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                                    <% for (var i = maxYearForAge; i >= minYearForAge; i--) { %>\n                                    <option value="<%= i %>" <% if (maxBirthYear && maxBirthYear == i) { %>selected<% } %>><%= IM(\'bandsetting.band_join_condition.age.birth_year\', {birthYear: i}) %></option>\n                                    <% } %>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="selectBox gMat10">\n                            <label for="minAge" class="selectLabel"><%= IM("bandsetting.band_type_join_setting.txt.join_condition_max_age") %></label>\n                            <div class="uSelect" style="min-width:87px">\n                                <select id="minAge" class="_selectMinYear">\n                                    <option value="none" <% if (minBirthYear && minBirthYear == "none") { %>selected<% } %>><%= IM("bandsetting.band_type_join_setting.txt.no_limit") %></option>\n                                    <% for (var i = maxYearForAge; i >= minYearForAge; i--) { %>\n                                    <option value="<%= i %>" <% if (minBirthYear && minBirthYear == i) { %>selected<% } %>><%= IM(\'bandsetting.band_join_condition.age.birth_year\', {birthYear: i}) %></option>\n                                    <% } %>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <footer class="modalFooter">\n        <button type="button" class="uButton -cancel _btnCancel"><%= IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -confirm _btnConfirm"><%= IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},3493:function(e,t){e.exports='<% if (canShowTitle) { %>\n<button type="button" class="feedWriteButton gBoxShadow _createMissionConfirmPost" style="display:none"><%= IM("create.confirm_post.editor.title") %></button>\n\n<div class="uHeaderWrap -bgWhite">\n    <header class="header -flexColumn gPat14 gPab14">\n        <h1 class="title gFs16"><%= missionTitle %></h1>\n    </header>\n</div>\n<% } %>\n\n<section class="boardList _missionConfirmPostRegion"></section>'},3494:function(e,t,n){var i;void 0===(i=function(e){var t,i=n(0),s=n(4),a=n(3495),o=n(154),l=n(553),r=n(26),d=n(930),c=n(1601),h=n(583),u=n(3496),p=n(159),m=s.View.extend({attributes:{"data-viewname":"DBandMissionsLayoutView"},className:"sSettingBand gContentCardShadow",template:i.template(a),ui:{missionListRegion:"._missionListRegion",loadingRegion:"._loadingRegion",count:"._count"},regions:{missionListRegion:{el:"@ui.missionListRegion",replaceElement:!0},loadingRegion:{el:"@ui.loadingRegion",replaceElement:!0}},collectionEvents:{reset:"_updateMissionCount"},behaviors:[p],onMessages:(t={},t[p.MSG.MISSIONS_WRITE_CONFIRM_POST]=function(e){r.getPostChannel().trigger(r.EVENT.NEW_POST_WITH_MISSION,{bandData:this._bandData,bandMissionModel:e.model})},t[p.MSG.MISSIONS_SETTING]=function(e){this._openSettingView(e)},t),initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandNo()},onAttach:function(){this._pageLoading(!0),this._renderMissions(),this.listenTo(r.getPostChannel(),r.EVENT.POST_ADDED,i.bind((function(){this._renderMissions()}),this))},_openSettingView:function(e){var t=u.openLayer(this._bandData,e.model);this.listenTo(t,u.EVENT.SET_COMPLETE,(function(){this._renderMissions()}))},_renderMissions:function(){o.wrapActivePromise(this._fetchOnGoingMissions(),this).then(i.bind((function(e){var t=c.buildDBandMissionListViewForMissionsDetail({collection:e,bandNo:this._bandNo});if(0===this.collection.size())return this._pageLoading(!1),void this._renderEmptyView();this.getRegion("missionListRegion").show(t),this._pageLoading(!1)}),this))},_fetchOnGoingMissions:function(){return this.collection.fetchOnGoingMissions(this._bandNo).then(i.bind((function(){var e=this.collection.filter((function(e){return e.isUpcomingMission()})),t=this.collection.filter((function(e){return e.isOngoingMission()}));return e.sort((function(e,t){return e.getBandMissionStartAt()-t.getBandMissionStartAt()||e.getMissionCreateAt()-t.getMissionCreateAt()})),t.sort((function(e,t){return i.isNull(t.getBandMissionConfirmStatus())?t.getBandMissionStartAt()-e.getBandMissionStartAt():t.getBandMissionConfirmStatus().localeCompare(e.getBandMissionConfirmStatus())||t.getBandMissionStartAt()-e.getBandMissionStartAt()})),new Backbone.Collection(t.concat(e))}),this))},_updateMissionCount:function(){var e=this.collection.size()>0?this.collection.size():"";this.getUI("count").text(e)},_pageLoading:function(e){var t=this.getRegion("loadingRegion");e?t.show(h.buildListBottomMediumLoadingBar()):t.empty()},_renderEmptyView:function(){var e='<p class="uEmpty" style="height: 199px"><span>'+IM("ui.message.empty_conents")+"</span></p>";this.$el.append(e)}});return m.build=function(e){if(e.canAccessMission())return new m({bandData:e,collection:new d});l.home(e.getBandCore()).go()},m}.call(t,n,t,e))||(e.exports=i)},3495:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%- IM(\'band_mission.missions.label\') %> <span class="_count"></span></h1>\n    </header>\n</div>\n\n<div class="_missionListRegion"></div>\n<div class="_loadingRegion"></div>'},3496:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(486),a=n(3497),o=n(3498),l={SET_COMPLETE:"SET_COMPLETE"},r=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DMissionsSettingView"},template:t.template(a),templateContext:function(){var e={isLoading:!this._dataFetched};return this._dataFetched?t.extend(e,this._missionRemindMenuModel.toJSON()):e},ui:{remindAlert:"._remindAlert",btnCancel:"._btnCancel",btnConfirm:"._btnConfirm"},events:{"click @ui.btnCancel":"destroy","click @ui.btnConfirm":"_onClickConfirm"},initialize:function(e){this._dataFetched=!1,this._bandData=e.bandData,this._bandNo=this._bandData.getBandNo(),this._bandMissionModel=e.bandMissionModel},onAttach:function(){this._fetchOnGoingMissionRemind().then(t.bind((function(){this._dataFetched=!0,this._oldRemindeAlertChecked=this._missionRemindMenuModel.get("checked"),this.render()}),this))},_fetchOnGoingMissionRemind:function(){return this._missionRemindMenuModel=o.createDMissionRemindMenuModel(this._bandMissionModel),this._missionRemindMenuModel.fetchData()},_onClickConfirm:function(){var e=this.getUI("remindAlert").prop("checked");this._oldRemindeAlertChecked!=e?this._missionRemindMenuModel.setChecked(e,!0).then(t.bind((function(){this.trigger(l.SET_COMPLETE),this.destroy()}),this)):this.destroy()}});return r.EVENT=l,r.openLayer=function(e,t){var n=new r({bandData:e,bandMissionModel:t});return s.openWithoutHiding(n),n},r}.call(t,n,t,e))||(e.exports=i)},3497:function(e,t){e.exports='<div class="lyContent -w340">\n    <header class="modalHeader">\n        <h1 class="title"><%- IM(\'setting.band_mission.title\') %></h1>\n    </header>\n    <div class="modalBody">\n        <div class="modalContentWrap gMat-2">\n            <% if (isLoading) { %>\n            <p class="uLoading"><img src="<%= window.resBaseUrl %>/images/common/loading.gif" width="32" height="32" alt="loading"></p>\n            <% } else { %>\n            <div class="listLine">\n                <div class="tLine notiSettingItem gPat5">\n                    <div class="flexList">\n                        <div class="text">\n                            <label for="remind_alert" class="labelTitle gFs14"><%= label %></label>\n                        </div>\n                        <% if (uncheckable) { %>\n                        <div class="etc -text2 -flexible">\n                            <%- uncheckableStateMessage %>\n                        </div>\n                        <% } else { %>\n                        <div class="etc">\n                            <label for="remind_alert" class="uCheck -switch">\n                                <input type="checkbox" id="remind_alert" class="checkInput _remindAlert" <%if(checked){%>checked<%}%>>\n                                <span class="checkLabel"><span class="shape"></span></span>\n                            </label>\n                        </div>\n                        <% } %>\n                    </div>\n                    <p class="notiSettingDese gMat-3 gColorBk4"><%= description %></p>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n    <footer class="modalFooter gMat-15">\n        <% if (isLoading || uncheckable) { %>\n            <button type="button" class="uButton -cancel _btnCancel"><%- IM(\'ui.label.close\') %></button>\n        <% } else { %>\n            <button type="button" class="uButton -cancel _btnCancel"><%- IM(\'ui.label.cancel\') %></button>\n            <button type="button" class="uButton -confirm _btnConfirm"><%- IM(\'ui.label.confirm\') %></button>\n        <% } %>\n    </footer>\n</div>'},3498:function(e,t,n){var i=n(0),s=n(6),a=n(739),o=n(13),l=n(1153),r=s.Model.extend({defaults:function(){return{checked:!1,label:IM("band_mission.confirm_remind_setting.menu"),description:"",uncheckable:!1,uncheckableStateMessage:IM("band_mission.confirm_remind_setting.before_participated")}},initialize:function(e,t){this._bandNo=t.bandMissionModel.getBandNo(),this._missionId=t.bandMissionModel.getMissionId(),this._userNo=o.getUserData().getUserNo(),this._missionConfirmFrequency=t.bandMissionModel.getBandMissionConfirmFrequency(),this._bandMissionConfirmSummaryModel=l.createBandMissionConfirmSummaryModel(this._bandNo,this._missionId,this._userNo)},setChecked:function(e,t){return this._bandMissionConfirmSummaryModel.setBandMissionConfirmSummaryRemindState(e).then(i.bind((function(){t||this.fetchData()}),this))},fetchData:function(){return this._bandMissionConfirmSummaryModel.fetchBandMissionConfirmSummary().then(i.bind((function(){var e=this._bandMissionConfirmSummaryModel.isParticipatedBandMission();this.set({checked:this._bandMissionConfirmSummaryModel.isBandMissionConfirmSummaryRemindEnabled(),uncheckable:!e,description:a.getRemindDescriptionText(e,this._missionConfirmFrequency)})}),this))}});r.createDMissionRemindMenuModel=function(e){return new r(void 0,{bandMissionModel:e})},e.exports=r},3499:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(3500),o=n(3501),l=n(3512),r=n(153),d=n(53),c=n(1982),h=n(154),u=n(553),p=n(782),m=n(2111),_=n(495),b=n(487),g={INTRODUCE:"INTRODUCE",MY_STATUS:"MY_STATUS",MEMBERS_STATUS:"MEMBERS_STATUS",CONFIRM_POST:"CONFIRM_POST"},f={INTRODUCE:"INTRODUCE",CONFIRM_POST:"CONFIRM_POST"},v={INTRODUCE:r.GROUP_BAND_MISSION_DETAIL,MY_STATUS:r.GROUP_BAND_MISSION_MY_STATUS,MEMBERS_STATUS:r.GROUP_BAND_MISSION_MEMBERS,CONFIRM_POST:r.GROUP_BAND_MISSION_CONFIRM_POST},A={INTRODUCE:IM("band_mission.introduce.title"),MY_STATUS:IM("band_mission.my_status.title"),MEMBERS_STATUS:IM("band_mission.members_status.title"),CONFIRM_POST:IM("band_mission.confirm_post.tab_title")},M={INTRODUCE:"mission_info",CONFIRM_POST:"progress_updates"},C=s.View.extend({attributes:{"data-viewname":"DBandMissionLayoutView"},className:"sMissionSection",template:t.template(a),templateContext:function(){var e=this._bandData.canAccessMissionConfirm();return{pageType:e?g:f,pageTitle:A,pageRouteInfo:v,activeType:this._activeType,makeUrl:t.bind((function(e){return e.makeUrl({band_no:this._bandNo,mission_id:this._missionId})}),this),canShowTitleAndMenus:!e||e&&this._currentRouteInfo!==r.GROUP_BAND_MISSION_CONFIRM_POST,canShowMenu:function(t){return!(e&&t===g.CONFIRM_POST)}}},behaviors:[b,{behaviorClass:_,sceneId:_.SCENE.MISSION_INFO}],ui:{contentRegion:"._contentRegion",btnMissionInfoTab:"._btnMissionInfoTab"},regions:{contentRegion:{el:"@ui.contentRegion",replaceElement:!0}},events:{"click @ui.btnMissionInfoTab":"_sendTabClickLog"},initialize:function(e){this._bandData=e.bandData,this._currentRouteInfo=d.getCurrentRouteInfo().routeInfo,this._activeType=this._getType(),this._bandNo=this._bandData.getBandNo(),this._missionId=e.missionId},onAttach:function(){h.wrapActivePromise(this._getContentView(),this).then(t.bind((function(e){this.showChildView("contentRegion",e),this.listenTo(e,m.EVENT.JOIN_BAND,(function(){this.trigger("DBandMainLayoutView:startBandJoin")}))}),this)),this._sendExposureLog()},_sendExposureLog:function(){this._bandData.canAccessMissionConfirm()||this.jplExposure(b.CLASSIFIER.MISSION_INFO_TAB)},_sendTabClickLog:function(e){var n=i(e.target).data("name");t.isUndefined(M[n])||this.jplClick(b.CLASSIFIER.MISSION_INFO_TAB,{mission_info_tab_type:M[n]})},_getType:function(){switch(this._currentRouteInfo){case r.GROUP_BAND_MISSION_CONFIRM_POST:return this._bandData.canAccessMissionConfirm()?g.CONFIRM_POST:f.CONFIRM_POST;case r.GROUP_BAND_MISSION_MY_STATUS:return g.MY_STATUS;case r.GROUP_BAND_MISSION_MEMBERS:return g.MEMBERS_STATUS;case r.GROUP_BAND_MISSION_DETAIL:default:return g.INTRODUCE}},_getContentView:function(){switch(this._activeType){case g.INTRODUCE:return this._bandData.canAccessMission()?p.fetchBandMission(this._bandData.getBandCore().bandNo,this._missionId).then(t.bind((function(e){return e.isRestrictedBandMission()?(alert(IM("band_mission.restricted")),u.home(this._bandData.getBandCore()).go(),i.Deferred().reject().promise()):c.buildBandMissionDetailView(this._bandData,e)}),this)):(u.home(this._bandData.getBandCore()).go(),i.Deferred().reject().promise());case g.MY_STATUS:return o.buildAsyncBandMissionMyConfirmStatusView(this._bandData,this._missionId);case g.MEMBERS_STATUS:return l.buildAsyncBandMissionMembersStatusView(this._bandData,this._missionId);case g.CONFIRM_POST:case f.CONFIRM_POST:return m.buildDBandMissionConfirmPostLayoutView(this._bandData,this._missionId)}}});return C.build=function(e,t){return new C({bandData:e,missionId:t})},C}.call(t,n,t,e))||(e.exports=i)},3500:function(e,t){e.exports='<% if (canShowTitleAndMenus) { %>\n<div class="uHeaderWrap -h50 gContentCardShadow">\n    <header class="header">\n        <h1 class="title"><%- IM(\'band_mission.detail_info\') %></h1>\n\n        <div class="buttonRankPostingBox _btnRankPostingWrap"></div>\n    </header>\n</div>\n\n<div class="uTabNav gContentCardShadow">\n    <%\n    _.each(pageType, function(type){\n        if (canShowMenu(type)) {\n    %>\n    <a href="<%- makeUrl(pageRouteInfo[type]) %>" class="btn sf_color <%- (activeType === type) ? \'-on\': \'\' %> _btnMissionInfoTab" data-name="<%- type %>"><%- pageTitle[type] %></a>\n    <%\n        }\n    });\n    %>\n</div>\n<% } %>\n\n<div class="_contentRegion"></div>'},3501:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3502),o=n(2112),l=n(2113),r=n(13),d=n(553),c=n(495),h=n(487),u=s.View.extend({tagName:"div",attributes:{"data-viewname":"DBandMissionMyConfirmStatusView"},className:"gContentCardShadow gPr",template:i.template(a),ui:{content:"._content"},regions:{content:{el:"@ui.content",replaceElement:!1}},behaviors:[h,{behaviorClass:c,sceneId:c.SCENE.MISSION_MY_INFO}],initialize:function(e){},onRender:function(){this._renderContent()},onAttach:function(){this.jplSceneEnter(h.CLASSIFIER.MISSION_MY_INFO,{band_no:this.model.getBandMissionConfirmSummaryBandMissionModel().getBandNo()})},_renderContent:function(){this.showChildView("content",l.buildDBandMissionConfirmSummaryView(this.model))}});return u.buildAsyncBandMissionMyConfirmStatusView=function(e,n){var i=e.getBandCore(),s=i.bandNo,a=d.home(i);return e.canAccessMissionConfirm()?o.buildBandMissionConfirmSummaryViewModel(s,n,r.getUserData().getUserNo()).then((function(e){return new u({model:e})}),(function(){a.go()})):(a.go(),t.Deferred().reject().promise())},u}.call(t,n,t,e))||(e.exports=i)},3502:function(e,t){e.exports='<h2 class="title gSrOnly"><%= IM(\'band_mission.my_status.title\') %></h2>\n<div class="_content"></div>'},3503:function(e,t){e.exports='<div class="_mission"></div>\n\n<div class="<%- isLayer ? \'modalContentWrap -lrSpace gPab5 gPal30 gPar30\' : \'missionContentWrap gPal0 gPar0 gPab10\' %>">\n    <div class="gMab17 _allCaptureArea">\n        <div class="paLR gPab13 _calendarCaptureArea">\n            \x3c!-- 내 정보 표시 영역--\x3e\n            <div class="missionAttendMemberWrap -myDetailView -bLine gPab8">\n                <ul class="listLine">\n                    <li class="tLine flexList">\n                        <span class="thumb">\n                            <span class="_profile"></span>\n                        </span>\n\n                        <span class="text gPal12">\n                            <span class="ellipsis gFs14 gFw6 gColorBk2 gMat8 _textEllipsis"><%- name %></span>\n                            <% if (description) { %>\n                            <span class="sub2 -ellipsis gColorBk4 _textEllipsis2"><%- description %></span>\n                             <% } %>\n                            <% if (latestConfirmedAt) { %>\n                            <span class="sub2 gColorBk4"><%- IM(\'last_certification_date_order.txt\') %>: <%- latestConfirmedAt %></span>\n                            <% } %>\n                            <% if (confirmCount) { %>\n                            <a href="<%- memberConfirmPostUrl %>" class="missionCertificationLink">\n                                <span class="sub2 gFs13 gColorBk2"><%= IM(\'total_certification_days.txt\', {days: confirmCount}) /* 태그 있음 */ %></span>\n                            </a>\n                            <% } %>\n                        </span>\n\n                        <div class="_menu">\n                            <% if (canUseShareMyStatus) { %>\n                            <button type="button" class="uButton -sizeM -confirm _btnShareStatus"><%- IM(\'band_mission.share_my_status_btn\') %></button>\n                            <% } %>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="_calendar"></div>\n        </div>\n\n        <div class="missionCalDescWrap -bottomLine maLR gPab24 _missionCalDescWrap">\n            <p class="missionDesc"><%= IM(\'band_mission.confirm_summary_layer_tip\') %></p>\n        </div>\n\n        <div class="_monthlyStatusRegion"></div>\n    </div>\n\n    <% if (showConfirmRemindSetting) { %>\n    \x3c!--인증 리마인드 알림 설정 영역--\x3e\n    <div class="missionRemindSetting -borderTop maLR <%- isLayer ? \'gMab10\' : \'\' %>">\n        <div class="missionSettingText">\n            <label for="remind" class="settingLabel"><%-IM("band_mission.confirm_remind_setting.menu") %></label>\n            \x3c!-- [D] 인증별 문구 변경 --\x3e\n            <p class="settingDesc gMat4"><%- remindDescription %></p>\n        </div>\n        <div class="missionSettingCheck gMar4">\n            <% if (participatedMission) { %>\n            <label for="remind" class="uCheck -switch">\n                <input type="checkbox" id="remind" class="checkInput _checkboxRemindEnabled" name="remindEnabled" <% if(isBandMissionConfirmSummaryRemindEnabled) { %> checked="checked"<% } %>>\n                <span class="checkLabel">\n                    <span class="shape"></span>\n                    <span class="text"></span>\n                </span>\n            </label>\n            <% } else { %>\n            <span class="missionState"><%-IM("band_mission.confirm_remind_setting.before_participated") %></span>\n            <% } %>\n        </div>\n    </div>\n    <% } %>\n</div>'},3504:function(e,t){e.exports='<h2 class="missionTitle gFs16 gFw5"><%- title %></h2>\n<div class="missionDateInfo gFs12 gMat7 -shortcut">\n    <% if (state) { %>\n    <span class="missionState <%- state.className %>"><%= state.label %>,</span>\n    <% } %>\n    <span class="frequencyInfo"><%- frequency %>,</span>\n    <span class="priodInfo"><%- duration %></span>\n    <span class="priodInfoDetail">(<%= period %>)</span>\n\n</div>\n<% if (timezone) { %>\n<div class="missionTimezoneInfo  gFs12"><%- timezone %></div>\n<% } %>'},3505:function(e,t){e.exports='<button type="button" class="btnMoreOption _btnMoreOption">\n     <svg class="svgIcon ico-member-setting sf_color" aria-hidden="true">\n        <use xlink:href="#ico-member-setting"></use>\n    </svg>\n    <span class="gSrOnly"><%- IM(\'ui.label.more.short\') %></span>\n</button>\n<div class="lyMenu _moreLyMenu" style="min-width:150px;display:none">\n    <ul>\n        <li><a href="#" role="button" class="_btnShowProfile"><%- IM(\'web.profile.basic.title\') %></a></li>\n        <li><a href="#" role="button" class="_btnShowJoinInfo"><%- IM(\'bandjoin.join_info_show\') %></a></li>\n        <li><a href="#" role="button" class="_btnOneOnOneChat"><%- IM(\'chat.btn.private_chat\') %></a></li>\n        <li><a href="#" role="button" class="_btnBanMember"><%- IM(\'profile_layer.label.ban_member\') %></a></li>\n    </ul>\n</div>'},3506:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3507),a=n(16),o=n(9),l=n(523),r=n(786),d=n(26),c=n(567),h=n(1602),u="dd",p="year_month",m="short_weekday",_="YYYY-MM-DD",b="months",g="days",f="month",v=-1,A=1,M="disabled",C="prevMonth",I="passDay",E="nextMonth",y="todayWrap",T="_postViewBtn",N="_postWriteBtn",D="gCursorPointer",S=i.View.extend({tagName:"div",className:"sCalendar gMat20 gMal-1 gMar-1",attributes:{"data-viewname":"DBandMissionConfirmSummaryCalendarView"},template:t.template(s),ui:{prevBtn:"._prevBtn",monthText:"._monthText",nextBtn:"._nextBtn",postViewBtn:"."+T,postWriteBtn:"."+N,btnDnCalendarImg:"._btnDnCalendarImg"},events:{"click @ui.prevBtn":function(){this.ui.prevBtn.prop("disabled")||this._moveMonth(v)},"click @ui.nextBtn":function(){this.ui.nextBtn.prop("disabled")||this._moveMonth(A)},"click @ui.postViewBtn":function(e){var t=this._bandData.getBandCore();r.buildPostDetailAsLayer({bandNo:t.bandNo,postNo:$(e.currentTarget).data("postNo")})},"click @ui.postWriteBtn":function(){confirm(IM("band_mission.today_mission_post_write_confirm"))&&d.getPostChannel().trigger(d.EVENT.NEW_POST_WITH_MISSION,{bandData:this._bandData,bandMissionModel:this._bandMissionModel})},"click @ui.btnDnCalendarImg":function(){this.trigger(h.CAPTURE_EVENT.CLICK_SHARE_MY_STATUS)}},initialize:function(e){this._bandData=this.model.getBandMissionConfirmSummaryBandData(),this._bandMissionModel=this.model.getBandMissionConfirmSummaryBandMissionModel(),this._bandMissionConfirmSummaryModel=this.model.getBandMissionConfirmSummaryModel(),this._canUseShareMyStatus=e.canUseShareMyStatus,this._startDayNum=this.model.getBandMissionConfirmSummaryStartDayNum(),this._month=e.month||this._getInitMonth(),this._postNoMap=this._getPostNoMap(),this._days=c.makeDayNameArrayOrderBy(this._startDayNum,u)},serializeData:function(){return{month:this._formatMonth(),days:this._days,weeks:this._getWeeks(),canUseShareMyStatus:this._canUseShareMyStatus}},onRender:function(){this._enableMoveBtn()},getBandMissionConfirmSummaryCalendarMonth:function(){return this._month.clone()},_enableMoveBtn:function(){this.ui.prevBtn.prop(M,!this._canMovePreviousMonth()),this.ui.nextBtn.prop(M,!this._canMoveNextMonth())},_moveMonth:function(e){this._month.add(e,b),this.render()},_canMovePreviousMonth:function(){return this._bandMissionModel.getBandMissionStartAt()<this._month.valueOf()},_canMoveNextMonth:function(){return this._month.clone().add(1,b).valueOf()<this._bandMissionModel.getBandMissionEndAt()},_formatMonth:function(){return o.format.dateByTimezone(this._month,p,this._bandMissionModel.getBandMissionTimeZoneId())},_getWeeks:function(){var e=this._getCalendarDates(),n=a.tz(this._bandMissionModel.getBandMissionTimeZoneId()).format(_),i=this._getCalendarMonthStartDate().format(_),s=this._getCalendarMonthEndDate().format(_),l=this._bandMissionConfirmSummaryModel.isMyNotYetConfirmedBandMissionConfirmSummary();return t.chain(e).map((function(e){var t=e.format(_),a=this._postNoMap[t]||"",r=[],d=l&&t==n;return d?r.push(y,N,D):t<i?r.push(C):t<n?r.push(I):t>s&&r.push(E),a&&r.push(T,D),{label:e.date(),date:o.format.date(e,m),postNo:a,dateClass:r.join(" "),writable:d}}),this).chunk(this._days.length).value()},_getCalendarDates:function(){var e=this._bandMissionModel.getBandMissionTimeZoneId(),t=this._month.clone(),n=this._month.clone().endOf(f),i=c.getFirstDateOfWeek(t,this._startDayNum,e),s=c.getEndDateOfWeek(n,this._startDayNum,e);return l.momentsBy(i,s,1,g)},_getCalendarMonthStartDate:function(){var e=this._bandMissionModel.getBandMissionStartAt(),t=this._month.valueOf();return a.tz(Math.max(e,t),this._bandMissionModel.getBandMissionTimeZoneId())},_getCalendarMonthEndDate:function(){var e=this._bandMissionModel.getBandMissionEndAt(),t=this._month.clone().endOf(f).valueOf();return a.tz(Math.min(e,t),this._bandMissionModel.getBandMissionTimeZoneId())},_getInitMonth:function(){var e,t=this._bandMissionModel.getBandMissionStartAt(),n=this._bandMissionModel.getBandMissionEndAt(),i=Date.now();return e=i<t?t:i>=n?n:i,a.tz(e,this._bandMissionModel.getBandMissionTimeZoneId()).startOf(f)},_getPostNoMap:function(){var e={},n=this._bandMissionModel.getBandMissionTimeZoneId();return t.each(this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryMissionConfirm(),(function(t){e[a.tz(t.confirmedAt,n).format(_)]=t.postNo})),e},toggleCaptureExcludeUI:function(e){this.getUI("btnDnCalendarImg").toggle(e),this.getUI("prevBtn").toggle(e),this.getUI("nextBtn").toggle(e)}});return S.buildDBandMissionConfirmSummaryView=function(e,t,n){return new S({model:e,month:t,canUseShareMyStatus:n})},S}.call(t,n,t,e))||(e.exports=i)},3507:function(e,t){e.exports='<div class="missionCalendarWrap">\n    <div class="calendarHeader">\n        <div class="month">\n            <button type="button" class="prev _prevBtn"><span class="gSrOnly"><%- IM(\'schedule.list.button.prev_month\') %></span></button>\n            <strong class="monthTxt _monthText"><%- month %></strong>\n            <button type="button" class="next _nextBtn"><span class="gSrOnly"><%- IM(\'schedule.list.button.next_month\') %></span></button>\n        </div>\n\n        <% if (canUseShareMyStatus) { %>\n        <button type="button" class="uButton -sizeS -confirm2 buttonShare _btnDnCalendarImg"><%- IM(\'ui.label.save_as_image\') %></button>\n        <% } %>\n    </div>\n    <div class="calendarView gMat3">\n        <table class="calendar">\n            <thead>\n            <tr>\n                <% _.each(days, function(day) { %>\n                <th><%- day %></th>\n                <% }); %>\n            </tr>\n            </thead>\n            <tbody>\n            <% _.each(weeks, function(week) { %>\n            <tr>\n                <% _.each(week, function(item) { %>\n                <td class="<%- item.dateClass %>" data-post-no="<%- item.postNo %>">\n                    <div class="dayWrap<%- item.writable ? \' today\' : \'\' %>">\n                        <time datetime="<%- item.date %>" class="day"><%- item.label %></time>\n                        <% if (item.postNo) { %>\n                        <div class="missionClearCheck"><span class="gSrOnly"><%- IM(\'band_mission.comfirm_complete\') %></span></div>\n                        <% } %>\n                    </div>\n                </td>\n                <% }); %>\n            </tr>\n            <% }); %>\n            </tbody>\n        </table>\n    </div>\n</div>'},3508:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3509),a=n(16),o=n(9),l=n(739),r=n(1602),d="YYYY_MM",c="month",h=i.View.extend({className:"monthlyStatusWrap paLR",attributes:{"data-viewname":"DBandMissionConfirmSummaryMonthlyStatusView"},template:t.template(s),templateContext:function(){var e=this._getLocalizeMonthText;return{graphData:this._graphData,periodText:this._getPeriodText(),getGraphItemData:function(t,n){var i=t.startAt.add(n>1?1:n,"month"),s=t.items[i.format(d)],a=i.diff(t.currentDate,"month",!0)>0,o=a?"":s?s.count:0,l=a?"-nextMonth":s?"-active":"",r=34+(t.maxCount>10?t.maxCount>100?29:23:16)+"px",c=Math.floor(o/t.maxCount*100);return{localizeMonthText:e(i),itemCount:o,itemClass:l,itemBarWidthStyle:"width: calc("+c+"% - "+r+")"}},canUseShareMyStatus:this._canUseShareMyStatus}},ui:{btnDnMonthStatusImg:"._btnDnMonthStatusImg"},events:{"click @ui.btnDnMonthStatusImg":function(){this.trigger(r.CAPTURE_EVENT.CLICK_SHARE_MY_STATUS)}},initialize:function(e){this._bandMissionModel=this.model.getBandMissionConfirmSummaryBandMissionModel(),this._bandMissionConfirmSummaryModel=this.model.getBandMissionConfirmSummaryModel(),this._canUseShareMyStatus=e.canUseShareMyStatus,this._makeGraphData()},_getPeriodText:function(){return l.getBandMissionTimezonePeriodText(this._bandMissionModel.getBandMissionStartAt(),this._bandMissionModel.getBandMissionEndAt(),this._bandMissionModel.getBandMissionTimeZoneId(),!1)},_makeGraphData:function(){var e=this._bandMissionModel.getBandMissionTimeZoneId(),n=this._bandMissionConfirmSummaryModel.getBandMissionConfirmSummaryMissionConfirm();this._graphData={items:{}},t.each(n,t.bind((function(t,n){var i=a.tz(t.confirmedAt,e),s=i.format(d);this._graphData.items[s]||(this._graphData.items[s]={month:this._getLocalizeMonthText(i),count:0}),this._graphData.items[s].count++}),this)),this._graphData.maxCount=t.max(this._graphData.items,(function(e){return e.count})).count,this._graphData.startAt=a.tz(this._bandMissionModel.getBandMissionStartAt(),e).startOf(c),this._graphData.endAt=a.tz(this._bandMissionModel.getBandMissionEndAt(),e).startOf(c),this._graphData.monthCount=this._graphData.endAt.diff(this._graphData.startAt,c)+1,this._graphData.currentDate=a().tz(e)},_getLocalizeMonthText:function(e){return o.format.date(e,c)},toggleCaptureExcludeUI:function(e){this.getUI("btnDnMonthStatusImg").toggle(e)}});return h.build=function(e,t){return new h({model:e,canUseShareMyStatus:t})},h}.call(t,n,t,e))||(e.exports=i)},3509:function(e,t){e.exports='<div class="monthlyStatusHeader">\n    <div class="monthlyStatusTitleBox">\n        <em class="monthlyStatusTitle"><%- IM(\'band_mission.monthly_confirm_title\') %></em>\n        <div class="monthlyStatusPeriod"><%= periodText %></div>\n    </div>\n\n    <% if (canUseShareMyStatus) { %>\n    <button type="button" class="uButton -sizeS -confirm2 buttonShare _btnDnMonthStatusImg"><%- IM(\'ui.label.save_as_image\') %></button>\n    <% } %>\n</div>\n\n<div class="monthlyStatusGraph">\n    <ul class="monthlyStatusList">\n    <%\n        for(var i=0; i < graphData.monthCount; i++) {\n            var itemData = getGraphItemData(graphData, i);\n    %>\n        <li class="monthlyStatusItem <%- itemData.itemClass %>">\n            <span class="month"><%- itemData.localizeMonthText %></span>\n            <em class="statusBar" style="<%= itemData.itemBarWidthStyle %>"></em>\n            <span class="statusNumber"><%- itemData.itemCount %></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n\n'},3510:function(e,t,n){var i;void 0===(i=function(e){n(2);var t=n(0),i=n(4),s=n(486),a=n(3511),o=n(1602),l={CAPTURE_START:"captureStart"},r=i.View.extend({attributes:{"data-viewname":"DBandMissionScreenCaptureSelectView"},template:t.template(a),templateContext:{selectItems:[{label:IM("ui.label.select_all"),key:o.CAPTURE_AREA.ALL,selectorName:"_selectAll"},{label:IM("band_mission.screen_capture_select.calendar"),key:o.CAPTURE_AREA.CALENDAR,selectorName:"_selectCalendar"},{label:IM("band_mission.screen_capture_select.graph"),key:o.CAPTURE_AREA.GRAPH,selectorName:"_selectGraph"}]},ui:{selectAll:"._selectAll",selectCalendar:"._selectCalendar",selectGraph:"._selectGraph",btnConfirm:"._btnConfirm",btnClose:"._btnClose"},events:{"click @ui.btnConfirm":"_onClickConfirm","click @ui.btnClose":"destroy","click @ui.selectAll":"_onClickSelectAll","click @ui.selectCalendar":"_updateSelectAllState","click @ui.selectGraph":"_updateSelectAllState"},_onClickSelectAll:function(){var e=this.getUI("selectAll").prop("checked");this.getUI("selectCalendar").prop("checked",e),this.getUI("selectGraph").prop("checked",e),this._updateConfirmButtonSate()},_updateSelectAllState:function(){var e=this.getUI("selectCalendar").prop("checked"),t=this.getUI("selectGraph").prop("checked");this.getUI("selectAll").prop("checked",e&&t),this._updateConfirmButtonSate()},_updateConfirmButtonSate:function(){var e=this.getUI("selectCalendar").prop("checked"),t=this.getUI("selectGraph").prop("checked");this.getUI("btnConfirm").prop("disabled",!(e||t))},_onClickConfirm:function(){var e=this.getUI("selectAll").prop("checked"),t=this.getUI("selectCalendar").prop("checked"),n=this.getUI("selectGraph").prop("checked"),i=null;e?i=this.getUI("selectAll").val():t?i=this.getUI("selectCalendar").val():n&&(i=this.getUI("selectGraph").val()),this.trigger(l.CAPTURE_START,i),this.destroy()}});return r.EVENT=l,r.buildAsLayer=function(e){var t=new r;return s.open(t),t},r}.call(t,n,t,e))||(e.exports=i)},3511:function(e,t){e.exports='<section class="lyWrap">\n    <div class="lyContent">\n        <header class="modalHeader">\n            <h1 class="title"><%- IM("band_mission.screen_capture_select.title") %></h1>\n        </header>\n        <div class="modalBody">\n            <div class="modalContent gPat16 gPal20 gPar20">\n                <ul class="selectArea">\n                    <% _.each(selectItems, function(item, index) { %>\n                    <li class="selectItem">\n                        <label for="option<%= index %>" class="uCheck -checkbox">\n                            <input type="checkbox" id="option<%= index %>" name="screenCaptureSelect" class="checkInput <%- item.selectorName %>" value="<%- item.key %>">\n                            <span class="checkLabel">\n                                <span class="shape"></span>\n                                <span class="text"><%- item.label %></span>\n                            </span>\n                        </label>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n        </div>\n\n        <footer class="modalFooter">\n            <button type="button" class="uButton -cancel _btnClose"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _btnConfirm" disabled><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},3512:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(4),s=n(0),a=n(16),o=n(3513),l=n(1981),r=n(2116),d=n(782),c=n(2114),h=n(555),u=n(553),p=n(3518),m=n(1116),_=n(9),b=n(554),g=n(53),f=i.View.extend({attributes:{"data-viewname":"DBandMissionMembersStatusView"},className:"gContentCardShadow gPr",template:s.template(o),templateContext:function(){return{sortType:l.SORT_TYPE,canShareMissionConfirmRanking:this._canShareMissionConfirmRanking(),confirmedMembersCount:this.collection.size(),periodType:b.CONFIRM_PERIOD_TYPE}},ui:{missionAttendMemberWrap:"._missionAttendMemberWrap",missionTitleRegion:"._missionTitleRegion",missionHeaderRegion:"._missionHeaderRegion",memberSort:"._memberSort",memberSearchInput:"._memberSearchInput",btnSearch:"._btnSearch",btnPosting:"._btnPosting",periodType:"._periodType",datePickerRegion:"._datePickerRegion",memberListCount:"._memberListCount",memberListTitle:"._memberListTitle"},regions:{missionAttendMemberRegion:"@ui.missionAttendMemberWrap",missionTitleRegion:{el:"@ui.missionTitleRegion",replaceElement:!0},missionHeaderRegion:{el:"@ui.missionHeaderRegion",replaceElement:!0},datePickerRegion:{el:"@ui.datePickerRegion",replaceElement:!0}},events:{"change @ui.memberSort":"_sortMemberList","keyup @ui.memberSearchInput":"_onKeyPressInputSearch","click @ui.btnSearch":"_searchListByName","click @ui.btnPosting":"_openPostingView","change @ui.periodType":function(){this._changePeriodType()}},collectionEvents:{remove:function(){this._updateMemberListCount()}},initialize:function(e){this._bandMissionModel=e.bandMissionModel,this._bandData=e.bandData,this._bandNo=this._bandData.getBandNo(),this._missionId=this._bandMissionModel.getMissionId(),this._selectedPeriodType=this._getPeriodTypeFromURLParams()},onAttach:function(){this._renderTitleView(),this._changePeriodType(this._selectedPeriodType),this._renderMembersListView()},_getPeriodTypeFromURLParams:function(){var e=g.getCurrentRouteInfo().params,t=b.MEMBERS_FILTER_URL_PARAM_NAME;return e&&e[t]&&b.CONFIRM_PERIOD_TYPE[e[t].toUpperCase()]||b.CONFIRM_PERIOD_TYPE.ALL},_openPostingView:function(){var e=null;this.getChildView("datePickerRegion")&&(this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.WEEKLY?e=this._getWeeklyDateValues(this.getChildView("datePickerRegion")):this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.DAILY&&(e=this.getChildView("datePickerRegion").getValue())),p.openAsLayer({bandNo:this._bandNo,missionModel:this._bandMissionModel,bandData:this._bandData,collection:this.collection,selectedPeriodType:this._selectedPeriodType,selectedPeriodDate:e})},_sortMemberList:function(){this._selectedSortType=this.getUI("memberSort").val(),this._setShowMoreArea(),this._fetchMissionConfirmSummaries()},_setShowMoreArea:function(){this.collection.setShowRankingIcon(this._selectedSortType!==l.SORT_TYPE.NEVER_CONFIRMED&&this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.ALL),this.collection.setShowMoreButton(this._selectedSortType===l.SORT_TYPE.NEVER_CONFIRMED&&this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.ALL)},_canShareMissionConfirmRanking:function(){return this._bandData.canShareMissionConfirmRanking()&&!this._bandMissionModel.isUpcomingMission()&&this.collection.size()>0},_updatePostingButton:function(){if(this._canShareMissionConfirmRanking()){var e=this._selectedSortType===l.SORT_TYPE.COUNT_DESC,t=IM("band_mission.posting.ranking");this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.WEEKLY?t=IM("band_mission.posting.weekly"):this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.DAILY&&(t=IM("band_mission.posting.daily")),this.getUI("btnPosting").text(t).toggle(e).prop("disabled",!e)}else this.getUI("btnPosting").hide().prop("disabled",!0)},_onKeyPressInputSearch:function(e){e.keyCode===h.ENTER&&this._searchListByName()},_searchListByName:function(){var e=this.getUI("memberSearchInput").val();""===e&&null===this.collection.getSearchQuery()||e===this.collection.getSearchQuery()||(e?this.collection.updateSearchQuery(e):this.collection.updateSearchQuery(null))},_renderTitleView:function(){this.showChildView("missionTitleRegion",c.buildDBandMissionConfirmMissionView(this._bandMissionModel))},_renderMembersListView:function(){var e=new r({collection:this.collection});this.showChildView("missionAttendMemberRegion",e)},_fetchMissionConfirmSummaries:function(){var e={orderBy:this._selectedSortType,startAt:this._searchStartAt||null,endAt:this._searchEndAt||null};return this.collection.fetchMissionConfirmSummaries(e).always(s.bind((function(){this._updatePostingButton(),this._updateMemberListTitle(),this._updateMemberListCount()}),this))},_updateMemberListCount:function(){var e=this.collection.size();e>999&&(e="999+"),this.getUI("memberListCount").text(e)},_updateMemberListTitle:function(){var e=IM("band_mission.confirmed_members");this._selectedSortType!==l.SORT_TYPE.NEVER_CONFIRMED&&this._selectedPeriodType!==b.CONFIRM_PERIOD_TYPE.DAILY&&this._selectedPeriodType!==b.CONFIRM_PERIOD_TYPE.WEEKLY||(e=IM("web.common.members")),this.getUI("memberListTitle").text(e)},_changePeriodType:function(e){switch(this._selectedPeriodType=e||this.getUI("periodType").val(),this._setShowMoreArea(),e&&this.getUI("periodType").val(e),this._selectedPeriodType){case b.CONFIRM_PERIOD_TYPE.ALL:return void this._resetMemberList();case b.CONFIRM_PERIOD_TYPE.WEEKLY:return void this._renderWeeklyDatePicker();case b.CONFIRM_PERIOD_TYPE.DAILY:this._renderDailyDatePicker()}},_setSearchByDate:function(e,n){if(this._selectedSortType=l.SORT_TYPE.COUNT_DESC,this._searchStartAt=e?e.startOf("day").valueOf():null,this._searchEndAt=n?n.startOf("day").valueOf():null,this.isAttached()){this.getUI("memberSort").val(this._selectedSortType).prop("selected",!0);var i=IM("sort.txt.confirmed"),s=!1;this._selectedPeriodType===b.CONFIRM_PERIOD_TYPE.ALL&&(i=IM("sort.txt.count_desc"),s=!0),this.getUI("memberSort").find("option").each((function(e,n){t(n).prop("value")===l.SORT_TYPE.COUNT_DESC&&t(n).text(i),t(n).prop("value")!==l.SORT_TYPE.COUNT_DESC&&t(n).prop("value")!==l.SORT_TYPE.NEVER_CONFIRMED&&t(n).toggle(s).prop("disabled",!s)}))}},_resetMemberList:function(){this.getRegion("datePickerRegion").empty(),this._setSearchByDate(),this._fetchMissionConfirmSummaries()},_getDatePickerMaxDate:function(){return this._bandMissionModel.isMissionEnded()?this._getMissionEndDateMoment():a.tz(this._bandMissionModel.getBandMissionTimeZoneId()).startOf("day")},_getDatePickerInitDate:function(){var e=this._bandMissionModel.getBandMissionTimeZoneId(),t=this._getMissionStartAtMoment(),n=a.tz(e).startOf("day");return this._bandMissionModel.isMissionEnded()?this._getMissionEndDateMoment():t.diff(n,"day")>0?t:n},_getMissionEndDateMoment:function(){return a.tz(this._bandMissionModel.getBandMissionEndAt(),this._bandMissionModel.getBandMissionTimeZoneId()).startOf("day")},_getMissionStartAtMoment:function(){return a.tz(this._bandMissionModel.getBandMissionStartAt(),this._bandMissionModel.getBandMissionTimeZoneId())},_renderWeeklyDatePicker:function(){var e={date:this._getDatePickerInitDate(),pickerWidth:"200px",useWeekSelect:!0,canTextEdit:!1,dateValidator:this._datePickerValidate()},t=m.buildDDateInputView(e);this.showChildView("datePickerRegion",t),this._updateWeeklyDate(t),this.listenTo(t,m.EVENT.DATE_CHANGED,s.bind((function(){this._updateWeeklyDate(t)}),this))},_updateWeeklyDate:function(e){var t=this._getWeeklyDateValues(e),n=this._bandMissionModel.getBandMissionTimeZoneId(),i=_.format.dateByTimezone(t.firstDateOfWeek.valueOf(),"short_noweekday",n),s=_.format.dateByTimezone(t.endDateOfWeek.valueOf(),"short_noweekday",n);e.setInputText(i+" ~ "+s),this._setSearchByDate(t.firstDateOfWeek,t.endDateOfWeek),this._fetchMissionConfirmSummaries()},_getWeeklyDateValues:function(e){var t=e.getWeeklyValueOfSelectedDate(),n=this._getMissionStartAtMoment(),i=this._getDatePickerMaxDate(),s=a(t.firstDateOfWeek),o=a(t.endDateOfWeek);return s.diff(n,"day")<0&&(s=n),(i.diff(o,"day")<0||o.diff(n,"day")<0)&&(o=i),{firstDateOfWeek:s,endDateOfWeek:o}},_renderDailyDatePicker:function(){var e={date:this._getDatePickerInitDate(),canTextEdit:!1,dateValidator:this._datePickerValidate()},t=m.buildDDateInputView(e);this.showChildView("datePickerRegion",t),this._updateDailyDate(t),this.listenTo(t,m.EVENT.DATE_CHANGED,s.bind((function(){this._updateDailyDate(t)}),this))},_updateDailyDate:function(e){var t=a.tz(e.getValue(),this._bandMissionModel.getBandMissionTimeZoneId());this._setSearchByDate(t,t),this._fetchMissionConfirmSummaries()},_datePickerValidate:function(){var e=this._getMissionStartAtMoment(),t=this._getDatePickerMaxDate();return{isValid:s.bind((function(n){return!(t.diff(n,"days")<0||n.diff(e,"days")<0)}),this),getMinDate:s.bind((function(){return e}),this),getMaxDate:s.bind((function(){return t}),this)}}});return f.buildAsyncBandMissionMembersStatusView=function(e,n){var i=e.getBandCore(),s=i.bandNo,a=u.home(i);return e.canAccessMissionConfirm()?d.fetchBandMission(s,n).then((function(i){return i.isRestrictedBandMission()?(alert(IM("band_mission.restricted")),a.go(),t.Deferred().reject().promise()):function(e,t,n,i){var s=l.build(e,t,n);return new f({bandMissionModel:i,collection:s,bandData:n})}(s,n,e,i)}),(function(){a.go()})):(a.go(),t.Deferred().reject())},f}.call(t,n,t,e))||(e.exports=i)},3513:function(e,t){e.exports='<h2 class="title gSrOnly"><%= IM(\'band_mission.members_status.title\') %></h2>\n<div class="_missionTitleRegion"></div>\n\n<div class="missionContentWrap">\n    <div class="searchWrap gMat19">\n        <div class="uInputSearch">\n            <label class="gSrOnly" for="memberSearch"><%= IM(\'web.bandmember.search_member\') %></label>\n            <input type="text" id="memberSearch" class="_memberSearchInput" placeholder="<%- IM(\'band_member_select.label.name\') %>">\n            <button type="button" class="search _btnSearch"><span class="gSrOnly"><%= IM(\'ui.label.search\') %></span></button>\n            <span class="border"></span>\n        </div>\n    </div>\n\n    <div class="statusLookup flexList -spaceBetween gMat20">\n        <div class="uSelectArea">\n            <div class="uSelect -textType -sizeL -h14 gMat2 gMab9">\n                <select class="_periodType">\n                    <option value="<%= periodType.ALL %>"><%= IM(\'band_mission.member_status.period_type.all\') %></option>\n                    <option value="<%= periodType.WEEKLY %>"><%= IM(\'band_mission.member_status.period_type.weekly\') %></option>\n                    <option value="<%= periodType.DAILY %>"><%= IM(\'band_mission.member_status.period_type.daily\') %></option>\n                </select>\n            </div>\n\n            <div class="_datePickerRegion"></div>\n        </div>\n\n        <% if(canShareMissionConfirmRanking) { %>\n        <div class="buttonBox">\n            <button type="button" role="button" class="uButton -sizeS -confirm2 buttonShare _btnPosting"><%- IM(\'band_mission.posting.ranking\') %></button>\n        </div>\n        <% } %>\n    </div>\n\n    <div class="flexList -spaceBetween -bLine gPab4">\n        <div class="labelTitle gFs13">\n            <span class="_memberListTitle"><%= IM(\'band_mission.confirmed_members\') %></span>\n            <span class="memberCount _memberListCount"><%- confirmedMembersCount %></span>\n        </div>\n        <div class="etc">\n            <div class="uSelect -textType -fontWB -sizeS -h14 -taR">\n                <select class="_memberSort">\n                    <option value="<%= sortType.COUNT_DESC %>"><%= IM(\'sort.txt.count_desc\') %></option>\n                    <option value="<%= sortType.COUNT_ASC %>"><%= IM(\'sort.txt.count_asc\') %></option>\n                    <option value="<%= sortType.CONFIRMED_AT_DESC %>"><%= IM(\'sort.txt.confirmed_at_desc\') %></option>\n                    <option value="<%= sortType.CONFIRMED_AT_ASC %>"><%= IM(\'sort.txt.confirmed_at_asc\') %></option>\n                    <option value="<%= sortType.NEVER_CONFIRMED %>"><%= IM(\'sort.txt.never_confirmed\') %></option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n    <div class="missionAttendMemberWrap _missionAttendMemberWrap"></div>\n</div>\n'},3514:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3515),a=n(2115),o=n(3516),l=n(618),r={NORMAL:"normal",RANK_POSTING:"rank_posting"},d={MEMBER_WITH_DRAWAL_UPDATE_MEMBER:a.EVENT.MEMBER_WITH_DRAWAL_UPDATE_MEMBER},c=t.View.extend({attributes:{"data-viewname":"DBandMissionMembersStatusListItemView"},tagName:"li",className:"tLine flexList",template:i.template(s),templateContext:function(){return{name:this.model.getName(),description:this.model.getDescription(),confirmCount:this.model.getConfirmCount(),latestConfirmDate:this.model.getLatestConfirmDate(),isRenderTypeNormal:this._isRenderTypeNormal(),showConfirmDate:this.model.collection.showConfirmDate()}},ui:{moreOptionsRegion:"._moreOptionsRegion",openBandMissionConfirmView:"._openBandMissionConfirmView",profile:"._profile"},events:{"click @ui.openBandMissionConfirmView":"_openBandMissionConfirmView"},regions:{moreOptionsRegion:{el:"@ui.moreOptionsRegion",replaceElement:!0},profile:{el:"@ui.profile",replaceElement:!0}},modelEvents:{"change:isShow":"_toggleView","change:updateMemberInfo":"render"},initialize:function(e){this._missionId=e.missionId,this._bandData=e.bandData,this._renderType=e.renderType||r.NORMAL},onAttach:function(){this._toggleView(),this._renderProfile(),this.model.collection.canShowRankingIcon()?this._renderRankingIcon():this.model.collection.canShowMoreButton()&&!this.model.getActor().isMyself()&&this._renderMoreOptions()},_isRenderTypeNormal:function(){return this._renderType===r.NORMAL},_renderProfile:function(){var e=this.model.getActor(),t={bandCore:this._bandData.getBandCore(),memberProfile:e.getContentAuthorMemberProfile(),userNoOrMemberKey:e.getUserNo(),role:e.getContentAuthorRole(),size:50};if(this._renderType===r.RANK_POSTING)return i.extend(t,{disableClick:!0,useCORS:!0,lazyLoading:!1}),void this.showChildView("profile",l.buildDProfileImageView(t));this.showChildView("profile",l.buildContentCreatorProfileImageView(t))},_toggleView:function(){this.model.isShow()?this.$el.show():this.$el.hide()},_openBandMissionConfirmView:function(e){e.preventDefault(),this._isRenderTypeNormal()&&o.openBandMissionConfirmStatusLayer(this.model.getBandNo(),this._missionId,this.model.getUserNo())},_renderRankingIcon:function(){var e=this.model.collection.getRanking(this.model.getConfirmCount());e>3||this.getUI("moreOptionsRegion").append('<span class="ranking -top'+e+'"></span>')},_renderMoreOptions:function(){var e=a.build(this.model.getActor(),this._bandData);this.showChildView("moreOptionsRegion",e),this.listenTo(e,a.EVENT.MEMBER_WITH_DRAWAL_UPDATE_MEMBER,i.bind((function(){this.trigger(d.MEMBER_WITH_DRAWAL_UPDATE_MEMBER,this.model)}),this))}});return c.EVENT=d,c.RENDER_TYPE=r,c}.call(t,n,t,e))||(e.exports=i)},3515:function(e,t){e.exports="<span class=\"thumb\">\n    <span class=\"_profile\"></span>\n</span>\n\n<<%= (isRenderTypeNormal) ? 'a href=\"#\" role=\"button\"' : 'div' %> class=\"text gPal12 _openBandMissionConfirmView\">\n    <span class=\"<%-(isRenderTypeNormal) ? 'ellipsis':''%> gFs14 gFw6 gColorBk2 gMat2\"><%- name %></span>\n    <% if (!!description) { %>\n    <span class=\"sub2 <%-(isRenderTypeNormal) ? '-ellipsis':''%> gColorBk4\"><%- description %></span>\n    <% } %>\n    <% if (showConfirmDate && !!latestConfirmDate) { %>\n    <span class=\"sub2 gColorBk2\"><%- IM('last_certification_date_order.txt') %>: <%= latestConfirmDate %></span>\n    <% } %>\n\n    <span class=\"sub2 gColorBk4\"><%= IM('total_certification_days.txt', {days: confirmCount || 0 + ''}) %></span>\n</<%= (isRenderTypeNormal) ? 'a' : 'div' %>>\n\n<span class=\"etc _moreOptionsRegion\"></span>"},3516:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3517),a=n(2112),o=n(2113),l=n(486),r=i.View.extend({tagName:"section",className:"lyWrap",attributes:{"data-viewname":"DBandMissionConfirmStatusLayerView"},template:t.template(s),templateContext:function(){return{title:this._getTitle()}},ui:{content:"._content"},events:{click:function(e){e.target==this.el&&this.destroy()}},regions:{content:{el:"@ui.content",replaceElement:!0}},initialize:function(e){},onRender:function(){this._renderContent()},_getTitle:function(){return this.model.getBandMissionConfirmSummaryModel().getBandMissionConfirmSummaryActor().isMyself()?IM("band_mission.confirm_summary_layer_title"):IM("band_mission.confirm_summary_layer_title2")},_renderContent:function(){this.showChildView("content",o.buildLayerTypeDBandMissionConfirmSummaryView(this.model))}});return r.openBandMissionConfirmStatusLayer=function(e,t,n){var i=a.buildBandMissionConfirmSummaryViewModel(e,t,n).then((function(e){return new r({model:e})}));l.openPromiseView(i,!1,{width:520,height:721})},r}.call(t,n,t,e))||(e.exports=i)},3517:function(e,t){e.exports='\x3c!-- [D] 해더 푸터 고정 -fixed 클래스 추가 --\x3e\n<div class="lyContent -w520">\n    <header class="modalHeader">\n        <h1 class="title"><%- title %></h1>\n    </header>\n\n    <div class="modalBody -spaceNone _content"></div>\n</div>'},3518:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(16),a=n(3519),o=n(486),l=n(1981),r=n(2116),d=n(1126),c=n(540),h=n(26),u=n(554),p=n(153),m=n(9),_=n(17),b=t.View.extend({attributes:{"data-viewname":"DBandMissionShareRankingView"},className:"lyWrap",initialize:function(e){this._bandNo=e.bandNo,this._missionModel=e.missionModel,this._bandData=e.bandData,this._selectedPeriodType=e.selectedPeriodType,this._selectedPeriodDate=e.selectedPeriodDate,this.memberListCollection=l.build(this._bandNo,this._missionModel.getMissionId(),this._bandData),this.memberListCollection.reset(this.collection.slice(0,40))},template:i.template(a),templateContext:function(){return{title:this._getTitle(),maximum:40,missionTitle:this._missionModel.getBandMissionTitle(),missionPeriod:this._missionPeriodByType(),missionShareRankingTitle:this._shareRankingTitle()}},ui:{btnClose:"._btnClose",btnConfirm:"._btnConfirm",missionAttendMemberWrap:"._missionAttendMemberWrap",modalFooter:"._modalFooter",captureArea:"._captureArea",missionSharedTitleBox:"._missionSharedTitleBox"},events:{"click @ui.btnClose":"destroy","click @ui.btnConfirm":"_onClickConfirm"},regions:{missionAttendMemberRegion:"@ui.missionAttendMemberWrap"},onAttach:function(){this._renderMembersListView()},_missionPeriodByType:function(){return this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.WEEKLY?this._getLocalizeFormatDate(this._selectedPeriodDate.firstDateOfWeek)+" ~ "+this._getLocalizeFormatDate(this._selectedPeriodDate.endDateOfWeek):this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.DAILY?this._getLocalizeFormatDate(this._selectedPeriodDate):this._getLocalizeFormatDate(this._missionModel.getBandMissionStartAt(),this._missionModel.getBandMissionTimeZoneId())+" ~ "+this._getLocalizeFormatDate(s().startOf("day"))},_getLocalizeFormatDate:function(e,t){return t?m.format.dateByTimezone(e,"short_noweekday",t):m.format.date(e,"short_noweekday")},_getTitle:function(){return this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.WEEKLY?IM("band_mission.posting.weekly"):this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.DAILY?IM("band_mission.posting.daily"):IM("band_mission.posting.ranking")},_shareRankingTitle:function(){return this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.WEEKLY?IM("band_mission.posting.weekly_share_title"):this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.DAILY?IM("band_mission.posting.daily_share_title"):IM("band_mission.posting.all_share_title")},_renderMembersListView:function(){var e=new r({collection:this.memberListCollection,renderType:r.RENDER_TYPE.RANK_POSTING});this.showChildView("missionAttendMemberRegion",e)},_showHideUploading:function(e){if(e)return this.getUI("modalFooter").find("._uLoading").remove(),void this.getUI("modalFooter").children().show();var t='<p class="uLoading gPat4 gPab4 _uLoading"><img src="'+window.resBaseUrl+'/images/common/loading.gif" width="32" height="32" alt="loading"></p>';this.getUI("modalFooter").children().hide(),this.getUI("modalFooter").append(t)},_onClickConfirm:function(){this._showHideUploading();var e=this.getUI("captureArea"),t=this.getUI("missionSharedTitleBox").innerHeight(),n=this.getUI("missionAttendMemberWrap").css("max-height");this.getUI("missionAttendMemberWrap").css("max-height","none"),e.css({"overflow-y":"auto","max-height":t+parseInt(n)});var s={width:e.width(),height:t+this.getUI("missionAttendMemberWrap").height(),useCORS:!0,logging:!1,scale:1,scrollX:0,scrollY:0};d(e.children().get(0),s).then(i.bind((function(t){e.removeAttr("style"),this.getUI("missionAttendMemberWrap").css("max-height",n);var i=t.toDataURL("image/jpeg",1);this._uploadCaptureImageAndWritePost(i)}),this))},_uploadCaptureImageAndWritePost:function(e){c.uploadDataUriImage(e).then(i.bind((function(e){var t={bandData:this._bandData,photoInfo:e,snippetUrl:this._makeSnippetUrl(),snippetDesc:this._getSnippetDesc()};h.getPostChannel().trigger(h.EVENT.NEW_POST_WITH_SHARE_MISSION_CONFIRM_RANK,t),this.destroy()}),this),i.bind((function(){alert(IM("ui.alert.temporary_error")),this._showHideUploading(!0)}),this))},_makeSnippetUrl:function(){var e={},t=(location.hostname.split("."),_.makeCurrentProtocolAndDomain());return this._selectedPeriodType!==u.CONFIRM_PERIOD_TYPE.WEEKLY&&this._selectedPeriodType!==u.CONFIRM_PERIOD_TYPE.DAILY||(e[u.MEMBERS_FILTER_URL_PARAM_NAME]=this._selectedPeriodType.toLowerCase()),t+p.GROUP_BAND_MISSION_MEMBERS.makeUrl({band_no:this._bandNo,mission_id:this._missionModel.getMissionId()},e)},_getSnippetDesc:function(){return this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.ALL?IM("band_mission.posting.snippet_all_type_desc"):this._selectedPeriodType===u.CONFIRM_PERIOD_TYPE.WEEKLY?IM("band_mission.posting.snippet_weekly_type_desc"):IM("band_mission.posting.snippet_daily_type_desc")}});return b.openAsLayer=function(e){var t=new b({bandNo:e.bandNo,missionModel:e.missionModel,bandData:e.bandData,collection:e.collection,selectedPeriodType:e.selectedPeriodType,selectedPeriodDate:e.selectedPeriodDate});return o.open(t),t},b}.call(t,n,t,e))||(e.exports=i)},3519:function(e,t){e.exports='<div class="lyContent -w380">\n    <header class="header">\n        <h1 class="title"><%- title %></h1>\n    </header>\n\n    <div class="modalBody">\n        <div class="modalContentWrap -spaceNone">\n            <div class="_captureArea">\n                <% //[D] 캡처 영역 처리를 위해 div 꼭 필요함. %>\n                <div>\n                    <div class="missionSharedTitleBox _missionSharedTitleBox">\n                        <h2 class="missionSharedTitle"><%- missionShareRankingTitle %></h2>\n                        <h3 class="missionTitle"><%- missionTitle %></h3>\n                        <div class="missionTerm"><%- missionPeriod %></div>\n                    </div>\n\n                    <div class="missionAttendMemberWrap missionRankingWrap _missionAttendMemberWrap" style="max-height: 390px"></div>\n                </div>\n            </div>\n            <p class="sDesc -tLine gPat10 gMar20 gMal20"><%- IM(\'band_mission.rank_posting_desc\', {max: maximum}) %></p>\n        </div>\n    </div>\n\n    <footer class="modalFooter gMal0 gMar0 _modalFooter">\n        <button type="button" class="uButton -sizeL -cancel _btnClose"><%- IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -sizeL -confirm _btnConfirm"><%- IM(\'web.postwrite.attach.btn.attach\') %></button>\n    </footer>\n</div>'},3520:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(2),s=n(4),a=n(3521),o=n(1601),l=n(930),r=n(583),d=n(154),c=n(1147),h=s.View.extend({tagName:"div",className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DBandMissionParticipatedListView"},template:t.template(a),ui:{goingContent:"._goingContent",endedContent:"._endedContent",loading:"._loading",goingTitle:"._goingTitle",endedTitle:"._endedTitle",emptyContent:"._emptyContent"},regions:{goingContent:{el:"@ui.goingContent",replaceElement:!0},endedContent:{el:"@ui.endedContent",replaceElement:!0},emptyContent:{el:"@ui.emptyContent",replaceElement:!0},loading:{el:"@ui.loading",replaceElement:!0}},initialize:function(e){this._bandNo=e.bandNo,this._collection=new l,this._params={band_no:this._bandNo}},onAttach:function(){this._fetchAndRenderList()},_renderContent:function(){if(this._collection.isEmpty()){var e=c.html(IM("ui.message.empty_conents"),"-h360");this.showChildView("emptyContent",e)}else{var n=this._buildMissionContentView(!1),i=this._buildMissionContentView(!0),s=t.isNull(n),a=t.isNull(i);if(this.getUI("goingTitle").toggle(!s),this.getUI("endedTitle").toggle(!a),!s||!a){s||this.showChildView("goingContent",n),a||this.showChildView("endedContent",i);var l=a?n:i;this.listenTo(l,o.EVENT.SCROLL_BOTTOM,this._fetchAndRenderList)}}},_buildMissionContentView:function(e){var t=this._collection.filter((function(t){return e?t.isMissionEnded():t.isOngoingMission()||t.isUpcomingMission()}));return 0===t.length?null:o.buildDBandMissionListViewForDetail({bandNo:this._bandNo,collection:new l(t)})},_fetchAndRenderList:function(){d.wrapActivePromise(this._fetchParticipatedMissions(),this).then(t.bind((function(){this._renderContent()}),this))},_fetchParticipatedMissions:function(){return this._isNextPageLoading()||t.isEmpty(this._params)?i.Deferred().reject().promise():(this._setNextPageLoading(!0),this._collection.fetchParticipatedMissions(this._params).then(t.bind((function(e){this._params=e}),this)).always(t.bind((function(){this._setNextPageLoading(!1)}),this)))},_isNextPageLoading:function(){return this._loading||!1},_setNextPageLoading:function(e){var t=this.getRegion("loading");this._loading=e,e?t.show(r.buildListBottomMediumLoadingBar()):t.empty()}});return h.DBandMissionParticipatedListView=function(e){return new h({bandNo:e})},h}.call(t,n,t,e))||(e.exports=i)},3521:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%- IM(\'band_mission.confirmed_missions\') %></h1>\n    </header>\n</div>\n\n<h2 class="sSettingTitle _goingTitle" style="display: none"><%= IM("band_mission.mission_list_card.ongoing.title") %></h2>\n<div class="_goingContent"></div>\n\n<h2 class="sSettingTitle _endedTitle" style="display: none"><%= IM("band_mission.ended.title") %></h2>\n<div class="_endedContent"></div>\n<div class="_loading"></div>\n<div class="_emptyContent"></div>'},3522:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3523),a=n(3524),o=n(1047),l=i.View.extend({tagName:"div",className:"",attributes:{"data-viewname":"DScheduleAttachedPostLayoutView"},template:t.template(s),regions:{postListRegion:{el:"._postListRegion",replaceElement:!0}},initialize:function(e){this._bandData=e.bandData,this._scheduleId=e.scheduleId,this._scheduleAttachedPostListCollection=new a(null,{bandNo:this._bandData.getBandNo(),scheduleId:this._scheduleId})},onAttach:function(){this._showScheduleAttachedPostList()},_showScheduleAttachedPostList:function(){this._scheduleAttachedPostListCollection.fetchPostList().then(t.bind((function(){var e=o.buildScheduleAttachedPostListView(this._bandData,this._scheduleAttachedPostListCollection);this.showChildView("postListRegion",e)}),this))}});return l.buildDScheduleAttachedPostLayoutView=function(e,t){return new l({bandData:e,scheduleId:t})},l}.call(t,n,t,e))||(e.exports=i)},3523:function(e,t){e.exports='<div class="uHeaderWrap -bgWhite">\n    <header class="header -flexColumn gPat14 gPab14">\n        <h1 class="title gFs16"><%= IM(\'band.schedule_attached_post.title\') %></h1>\n    </header>\n</div>\n\n<section class="boardList">\n    <div class="_postListRegion"></div>\n</section>'},3524:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(517),a=n(520);return i.Collection.extend({model:s,initialize:function(e,t){this._bandNo=t.bandNo,this._scheduleId=t.scheduleId,this._nextParams={band_no:this._bandNo,schedule_id:this._scheduleId}},fetchPostList:function(){return a.getPostsWithSchedule(this._nextParams).then(t.bind((function(e){this._nextParams=e.next_params,this.set(e.items,{parse:!0})}),this))},fetchNextPostList:function(){if(this.hasMore())return this.fetchPostList()},hasMore:function(){return!!this._nextParams}})}.call(t,n,t,e))||(e.exports=i)},3525:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3526),o=n(155),l=n(538),r=n(153),d=s.View.extend({className:"sSettingBand gContentCardShadow",attributes:{"data-viewname":"DBandMediaDownloadSettingView"},template:i.template(a),templateContext:function(){return this._dataFetched?{desc:this._getDescription(),isMemberMediaDownloadEnabled:this._isMemberMediaDownloadEnabled,dataFetched:this._dataFetched}:{dataFetched:this._dataFetched}},ui:{checkDownloadable:"._checkDownloadable",subTxt:"._subTxt"},events:{"click @ui.checkDownloadable":"_toggleMediaDownloadSetting"},initialize:function(e){this._dataFetched=!1,this._bandNo=e.bandNo},onAttach:function(){this._fetchData().then(i.bind((function(){this.render()}),this),i.bind((function(){r.GROUP_BAND_SETTING.goDForced({band_no:this._bandNo})}),this))},_fetchData:function(){return this._bandData=o.get(this._bandNo),t.when(this._bandData.loadBandData(),l.getBandOption(this._bandNo)).then(i.bind((function(e,n){if(this._bandOptionModel=n,!this._bandOptionModel.isExistAttributeMemberMediaDownloadEnabled())return t.Deferred().reject();this._dataFetched=!0,this._isMemberMediaDownloadEnabled=!!this._bandOptionModel.isMemberMediaDownloadEnabled(),this._isPostCopySupportable=this._bandData.isPostCopySupportable()}),this))},_toggleMediaDownloadSetting:function(){var e=this.getUI("checkDownloadable").prop("checked");l.SETTING.setMemberMediaDownloadEnabled(this._bandNo,e).then(i.bind((function(){this._isMemberMediaDownloadEnabled=e,this.getUI("subTxt").text(this._getDescription())}),this))},_getDescription:function(){return this._isPostCopySupportable?this._isMemberMediaDownloadEnabled?IM("bandsetting.media_download_setting.desc1"):IM("bandsetting.media_download_setting.desc2"):this._isMemberMediaDownloadEnabled?IM("bandsetting.media_download_setting.desc3"):IM("bandsetting.media_download_setting.desc4")}});return d.build=function(e){return new d({bandNo:e})},d}.call(t,n,t,e))||(e.exports=i)},3526:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header">\n        <h1 class="title"><%= IM(\'bandsetting.media_download_permission.title\') %></h1>\n    </header>\n</div>\n\n<% if (!dataFetched) { %>\n<p class="uLoading">\n    <img src="<%=window.resBaseUrl%>/images/common/loading.gif" width="32" height="32" alt="loading">\n</p>\n<% } else { %>\n\n<ul class="sSettingList">\n    <li class="sSettingItem">\n        <div class="itemContent">\n            <label for="checkDownloadable" class="label"><%- IM(\'bandsetting.media_download_permission.download_enabled\') %></label>\n            <span class="subTxt _subTxt"><%- desc %></span>\n        </div>\n        <div class="itemSide">\n            <label for="checkDownloadable" class="uCheck -switch">\n                <input type="checkbox" id="checkDownloadable" class="checkInput _checkDownloadable" <% if (isMemberMediaDownloadEnabled) { %> checked<% } %>>\n                <span class="checkLabel">\n                    <span class="shape"></span>\n                </span>\n            </label>\n        </div>\n    </li>\n</ul>\n\n<div class="guideArea -borderTop gMar22 gMal22 gPat20 gPab20">\n    <p class="guideAreaText -fs12"><%- IM(\'bandsetting.media_download_setting.sub_desc\') %></p>\n</div>\n<% } %>'},3527:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3528),o=n(877),l=n(2044),r=n(583),d=n(9),c=n(26),h=n(154),u=n(553),p=n(1255),m={POSTING:{value:"posting",label:IM("ui.label.add_as_a_new_post")},VIEW_WATCHER:{value:"view_watcher",label:IM("media_viewer.menu.show_video_viewer_list")},REMOVE_LIVE:{value:"remove_live",label:IM("ui.label.delete")}},_=s.View.extend({tagName:"div",attributes:{"data-viewname":"DNotPostedLiveListView"},template:i.template(a),ui:{loading:"._loading",count:"._count",menuBtn:"._menuBtn",menuList:"._menuList",menuLink:"._menuLink"},regions:{loading:{el:"@ui.loading",replaceElement:!0}},events:{"click @ui.menuBtn":"_handleMenuBtnClickEvent","click @ui.menuLink":"_handleMenuLinkClickEvent"},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._loading=!0,this._lives=[],this._limit=0,this._message=""},serializeData:function(){return{loading:this._loading,menus:this._getMenus(),countText:this._getCountText(),message:this._message.replace(/\. /g,".<br>"),lives:this._lives}},onRender:function(){this._renderLoading()},onAttach:function(){this._bandData.canAccessNotPostedLiveList()?(this.listenTo(c.getDGlobalChannel(),c.EVENT.HTML_CLICK,this._hideAllLayer),this._fetchNotPostedLives()):u.home(this._bandData.getBandCore()).go()},onBeforeDetach:function(){this.stopListening(c.getDGlobalChannel())},_setData:function(e){this._limit=e.limit_of_lives||0,this._message=e.message_about_condition||"",this._lives=i.map(e.lives,(function(e){var t=e.start_at,n=e.end_at;return{liveId:e.live_id,title:IM("live.not_posted_live_title",{date:d.format.date(t,"year_month_day")}),startTime:d.format.time(t,"hour_minute"),endTime:d.format.time(n,"hour_minute"),description:e.description}}))},_getCountText:function(){return"("+this._lives.length+"/"+this._limit+")"},_renderLoading:function(){this._loading&&this.showChildView("loading",r.buildAsMediumAreaMiddle())},_getMenus:function(){var e=[];return this._bandData.isPostingPermitted()&&e.push(m.POSTING),this._bandData.canViewVideoWatcher()&&e.push(m.VIEW_WATCHER),e.push(m.REMOVE_LIVE),e},_getLiveWrap:function(e){return t(e.currentTarget).closest("._liveWrap")},_handleMenuBtnClickEvent:function(e){var t=this._getLiveWrap(e).find("._menuList");"none"===t.css("display")&&i.defer((function(){t.css("display","")}))},_handleMenuLinkClickEvent:function(e){var n=this._getLiveWrap(e),i=n.data("liveId"),s=t(e.currentTarget).data("menu");switch(e.preventDefault(),s){case m.POSTING.value:confirm(IM("ui.confirm.add_as_a_new_post"))&&this._createPost(i,n);break;case m.VIEW_WATCHER.value:this._openWatcherList(i);break;case m.REMOVE_LIVE.value:confirm(IM("ui.confirm.delete"))&&this._removeLive(i,n)}},_createPost:function(e,t){var n=i.findWhere(this._lives,{liveId:e}).description,s=l.createLivePost(this._bandData,e,n);h.wrapActivePromise(s,this).then(i.bind((function(){this._removeLiveWrap(e,t)}),this))},_openWatcherList:function(e){p.openAsyncAsLayerForNotPostedLive(this._bandData,e)},_removeLive:function(e,t){var n=o.removeNotPostedLive(this._bandNo,e);h.wrapActivePromise(n,this).then(i.bind((function(){this._removeLiveWrap(e,t)}),this))},_hideAllLayer:function(){this.ui.menuList.css("display","none")},_removeLiveWrap:function(e,t){var n=i.findIndex(this._lives,(function(t){return t.liveId===e}));-1!==n&&(t.remove(),this._lives.splice(n,1),this.ui.count.html(this._getCountText()),0===this._lives.length&&this.render())},_fetchNotPostedLives:function(){o.getNotPostedLives(this._bandNo).then(i.bind((function(e){this._setData(e),this._loading=!1,this.render()}),this))}});return _.buildNotPostedLiveListView=function(e){return new _({bandData:e})},_}.call(t,n,t,e))||(e.exports=i)},3528:function(e,t){e.exports='<% if (loading) { %>\n<div class="_loading" style="display:none"></div>\n<% } else { %>\n<div class="sTemporaryStorage gContentCardShadow">\n    <div class="uHeaderWrap -bLineNone">\n        <header class="header -flexColumn">\n            <h1 class="title"><%- IM(\'live.not_posted_lives\') %><em class="count _count"><%- countText %></em></h1>\n            <p class="desc gMab-8"><%= message %></p>\n        </header>\n    </div>\n    <% if (lives.length > 0) { %>\n    <div class="temporaryStorageManage">\n        <ul class="temporaryStorageList">\n            <% _.each(lives, function(live) { %>\n            <li class="temporaryStorageItem _liveWrap" data-live-id="<%- live.liveId %>">\n                <span class="storageDate"><%- live.title %></span>\n                <span class="storageTime"><%- live.startTime %> ~ <%- live.endTime %></span>\n                <span class="storageIntroText"><%- live.description || IM(\'live.not_posted_lives\') %></span>\n                <% if (menus.length > 0) { %>\n                <div class="option">\n                    <button type="button" class="btnMore _menuBtn"><span class="gSrOnly"><%- IM(\'web.uicomponent.topbar.button.menuopen\') %></span></button>\n                    <div class="lyMenu _menuList" style="min-width:130px;display:none">\n                        <ul>\n                            <% _.each(menus, function(menu) { %>\n                            <li><a href="#" role="button" class="_menuLink" data-menu="<%- menu.value %>"><%- menu.label %></a></li>\n                            <% }); %>\n                        </ul>\n                    </div>\n                </div>\n                <% } %>\n            </li>\n            <% }); %>\n        </ul>\n        <% } %>\n    </div>\n</div>\n<% if (lives.length === 0) { %>\n<div class="uEmpty gContentCardShadow gMat15" style="height:450px">\n    <span class="gFs14 gColorGr3"><%- IM(\'ui.message.empty_conents\') %></span>\n</div>\n<% } %>\n<% } %>'},3529:function(e,t,n){var i=n(2),s=n(0),a=n(4),o=n(3530),l=n(800),r=n(3531),d=n(486),c=n(1146),h=n(3533),u=n(543),p=n(153),m=n(165),_=n(1165),b=a.View.extend({template:s.template(o),templateContext:function(){return{doNotDisturbEnabled:this.model.isDoNotDisturbEnabled(),doNotDisturbDayTypeText:this._getDoNotDisturbDayTypeText(),timeInfoToText:s.bind((function(e){return this._makeTimeInfoToText(e)}),this),needShowDailyInfo:1==this.model.isDoNotDisturbDailyType(),needShowDaysOfWeekInfo:1==this.model.isDoNotDisturbDaysOfWeekType()}},ui:{useDoNotDisturb:"._useDoNotDisturb",setDoNotDisturbDayType:"._setDoNotDisturbDayType",doNotDisturbDayTypeDesc:"._doNotDisturbDayTypeDesc",detailedSettingInfoWrap:"._detailedSettingInfoWrap",detailedSettingBtn:"._detailedSettingBtn",setDoNotDisturbTime:"._setDoNotDisturbTime",timeInfoToText:"._timeInfoToText",timezoneWrap:"._timezoneWrap",btnConfirm:"._btnConfirm"},regions:{timezoneRegion:{el:"@ui.timezoneWrap",replaceElement:!1}},events:{"click @ui.setDoNotDisturbDayType":function(){l.openAsLayer({title:IM("band.setting.do_not_disturb.title"),confirm:IM("ui.label.confirm"),cancel:IM("ui.label.cancel"),radioItems:[{label:u.DO_NOT_DISTURB_INFO.DAILY.LABEL,value:u.DO_NOT_DISTURB_INFO.DAILY.VALUE},{label:u.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.LABEL,value:u.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE}],initialCheckedValue:this.model.getDoNotDisturbDayType(),withoutHiding:!0}).once("modal:confirm",s.bind((function(e){this.model.resetDoNotDisturbDataAsOriginalByType(this.model.getDoNotDisturbDayType()),this.model.setDoNotDisturbDayType(e),this.render()}),this))},"click @ui.useDoNotDisturb":function(){var e=this.ui.useDoNotDisturb.is(":checked");this.model.setDoNotDisturbEnabled(e),this.render()},"click @ui.setDoNotDisturbTime":function(e){var t=e.currentTarget,n=i(t).data("type"),a=s.clone(this.model.findDoNotDisturbDataByType(n));this._openTimeSettingView(a)},"click @ui.btnConfirm":function(){if(this.model.canConfigureDoNotDisturbInfo()){if(!(this.model.isDoNotDisturbEnabled()&&this.model.isDoNotDisturbDaysOfWeekType())||this.model.checkDaysOfWeekInfoIsValid())return this.model.setBandDoNotDisturbInfo(this._bandNo).then(s.bind((function(){p.GROUP_BAND_SETTING.goDForced({band_no:this._bandNo})}),this));alert(IM("do_not_disturb.days_of_week.invalidate.alert"))}else p.GROUP_BAND_SETTING.goDForced({band_no:this._bandNo})}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._timezoneId=e.timezoneId},onAttach:function(){this._bandData.canManageBandDoNotDisturb()||p.GROUP_BAND_HOME.goDForced({band_no:this._bandNo})},onDomRefresh:function(){this._updateDescription(),this._toggleDetailedSettingWrap()},_updateDescription:function(){var e=this._getDoNotDisturbDayTypeText();this.ui.doNotDisturbDayTypeDesc.text(e)},_toggleDetailedSettingWrap:function(){if(this.model.isDoNotDisturbEnabled())return this.ui.detailedSettingInfoWrap.show(),void this._drawTimezoneInput();this.ui.detailedSettingInfoWrap.hide()},_getDoNotDisturbDayTypeText:function(){return this.model.isDoNotDisturbDailyType()?u.DO_NOT_DISTURB_INFO.DAILY.LABEL:u.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.LABEL},_makeTimeInfoToText:function(e){return this.model.isDoNotDisturbDaysOfWeekType()&&!e.enabled?IM("do_not_disturb.each_day.off"):this.model.isDoNotDisturbDaysOfWeekType()&&e.allDay?IM("band.setting.do_not_disturb.day.all_day"):_.getFormattedTimeToString(e.start,e.end)},_openTimeSettingView:function(e){var t=r.buildDDoNotDisturbTimeSettingView({doNotDisturbTimeInfo:e,isEachDaySetting:this.model.isDoNotDisturbDaysOfWeekType()});d.open(t),this.listenTo(t,"change:no-disturb-time",s.bind((function(e){this.model.isDoNotDisturbDailyType()?this.model.setDailyInfo(e):this.model.setDaysOfWeekInfoListAfterUpdateItem(e),this.render()}),this))},_drawTimezoneInput:function(){var e=new c({isShowTimezoneTitle:!1,timezoneId:this.model.getTimezoneId()});this.getRegion("timezoneRegion").show(e),this.listenTo(e,c.EVENT.TIMEZONE_CHANGED,(function(e){var t=m.getTimezone(e);this.model.setTimezoneId(t.id)}))}});b.buildDBandDoNotDisturbSettingView=function(e){var t=h.buildByBandDataInfo(e.getBandDoNotDisturb());return new b({model:t,bandData:e})},e.exports=b},3530:function(e,t){e.exports='<div class="sSettingBand gBoxShadow">\n\n    <div class="uHeaderWrap -h50">\n        <header class="header ">\n            <h1 class="title"><%= IM("band.setting.do_not_disturb.title") %> </h1>\n        </header>\n    </div>\n\n    <h2 class="sSettingTitle -hideTxt"></h2>\n\n    <ul class="sSettingList">\n        <li class="sSettingItem">\n            <div class="itemContent">\n                <label for="useDoNotDisturb" class="label"><%= IM("band.setting.do_not_disturb.title") %> </label>\n                    <span class="subTxt _doNotDisturbDesc"><%= IM("do_not_disturb.on.desc") %></span>\n                </div>\n            <div class="itemSide">\n                <label for="useDoNotDisturb" class="uCheck -switch ">\n                    <input type="checkbox" id="useDoNotDisturb" class="checkInput _useDoNotDisturb" <% if (doNotDisturbEnabled) { %> checked <% } %>>\n                    <span class="checkLabel">\n                        <span class="shape "></span>\n                        <span class="text"></span>\n                    </span>\n                </label>\n            </div>\n        </li>\n    </ul>\n    <div class="sSettingBox _detailedSettingInfoWrap">\n        <h2 class="sSettingTitle -hideTxt"></h2>\n        <ul class="sSettingList">\n            <li class="sSettingItem">\n                <a href="#" class="-flexible -arrowText _setDoNotDisturbDayType">\n                    <div class="itemContent">\n                        <span class="label"><%= IM("band.setting.do_not_disturb.disturb.day_type") %></span>\n                    </div>\n                    <div class="itemSide">\n                        <span class="sideTxt _doNotDisturbDayTypeDesc"><%= doNotDisturbDayTypeText %></span>\n                    </div>\n                </a>\n            </li>\n        </ul>\n\n        <h2 class="sSettingTitle -hideTxt"></h2>\n\n        <ul class="sSettingList ">\n\n        <% if (needShowDailyInfo) { %>\n            <li class="sSettingItem _setDoNotDisturbTime" data-type="<%= dailyInfo.type %>">\n                <a href="#" class="-flexible -arrowText">\n                    <div class="itemContent">\n                        <span class="label"><%= dailyInfo.labelText %></span>\n                        <span class="subTxt _timeInfoToText"><%= timeInfoToText(dailyInfo) %></span>\n                    </div>\n                    <div class="itemSide">\n                        <span class="sideTxt"></span>\n                    </div>\n                </a>\n            </li>\n        <% } %>\n\n        <% if(needShowDaysOfWeekInfo) { %>\n        <% _.each(daysOfWeekInfoList, function(eachDayInfo) { %>\n            <li class="sSettingItem _setDoNotDisturbTime" data-type="<%= eachDayInfo.type %>">\n                <a href="#" class="-flexible -arrowText">\n                    <div class="itemContent">\n                        <span class="label"><%= eachDayInfo.labelText %></span>\n                        <span class="subTxt _timeInfoToText"><%= timeInfoToText(eachDayInfo) %></span>\n                    </div>\n                    <div class="itemSide">\n                        <span class="sideTxt"></span>\n                    </div>\n                </a>\n            </li>\n        <% }); %>\n        <% } %>\n        </ul>\n    </div>\n\n    <% if (doNotDisturbEnabled) { %>\n    <div class="sSettingBox">\n        <h2 class="sSettingTitle -hideTxt"></h2>\n        <ul class="sSettingList">\n            <li class="sSettingItem">\n                <div class="itemContent" style="max-width: 94px;">\n                    <label class="name"><%= IM("web.scheduleedit.timezone_list.title") %></label>\n                </div>\n                <div class="itemSide -wAuto">\n                    <div class="-flexible">\n                        <div class="doNotDisturbTimezone  _timezoneWrap"></div>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <% } %>\n\n    <div class="btnFooter">\n        <button type="button" class="uButton -sizeL -confirm _btnConfirm"><%= IM("ui.label.save") %></button>\n    </div>\n</div>'},3531:function(e,t,n){var i=n(0),s=n(4),a=n(3532),o=n(1314),l=(n(543),n(2)),r=s.View.extend({template:i.template(a),templateContext:function(){return{doNotDisturbTimeInfo:this._doNotDisturbTimeInfo,isEachDaySetting:this._isEachDaySetting}},ui:{confirmBtn:"._confirmBtn",cancelBtn:"._cancelBtn",allDayCheckBox:"._allDayCheckBox",daySetCheckbox:"._daySetCheckbox",dayDetailSettingWrap:"._dayDetailSettingWrap",detailTimeWrap:"._detailTimeWrap",timezoneRegion:"._timezoneRegion"},regions:{startTimeRegion:{el:"._startTimeRegion",replaceElement:!1},endTimeRegion:{el:"._endTimeRegion",replaceElement:!1}},events:{"click @ui.cancelBtn":function(){this.destroy()},"click @ui.confirmBtn":function(){this.trigger("change:no-disturb-time",this._doNotDisturbTimeInfo),this.destroy()},"click @ui.allDayCheckBox":function(e){var t=e.target,n=l(t).prop("checked");n?this.ui.detailTimeWrap.hide():this.ui.detailTimeWrap.show(),this._doNotDisturbTimeInfo.allDay=n},"change @ui.daySetCheckbox":function(e){var t=e.target,n=l(t).is(":checked");n?this.ui.dayDetailSettingWrap.show():this.ui.dayDetailSettingWrap.hide(),this._doNotDisturbTimeInfo.enabled=n}},initialize:function(e){this._doNotDisturbTimeInfo=e.doNotDisturbTimeInfo,this._isEachDaySetting=e.isEachDaySetting},onAttach:function(){this._drawTimeInput(),this._drawWrap()},_drawWrap:function(){this._isEachDaySetting&&!this._doNotDisturbTimeInfo.enabled&&this.ui.dayDetailSettingWrap.hide(),this._isEachDaySetting&&this._doNotDisturbTimeInfo.allDay&&this.ui.detailTimeWrap.hide()},_drawTimeInput:function(){this._startTimeInputView=o.buildTimeInputView({inputTime:this._doNotDisturbTimeInfo.start,minutesInterval:5,readOnlyInput:!1,pickerDirection:o.PICKER_DIRECTION.DOWN,useTimeDelete:!1}),this.getRegion("startTimeRegion").show(this._startTimeInputView),this.listenTo(this._startTimeInputView,o.EVENT.TIME_CHANGED,i.bind((function(e){this._doNotDisturbTimeInfo.start=e.time}),this)),this._endTimeInputView=o.buildTimeInputView({inputTime:this._doNotDisturbTimeInfo.end,minutesInterval:5,readOnlyInput:!1,pickerDirection:o.PICKER_DIRECTION.DOWN,useTimeDelete:!1}),this.getRegion("endTimeRegion").show(this._endTimeInputView),this.listenTo(this._endTimeInputView,o.EVENT.TIME_CHANGED,i.bind((function(e){this._doNotDisturbTimeInfo.end=e.time}),this))}});r.buildDDoNotDisturbTimeSettingView=function(e){return new r(e)},e.exports=r},3532:function(e,t){e.exports='<section class="lyWrap ">\n    <div class="lyContent -w360">\n        <header class="modalHeader">\n            <h1 class="title"><%= IM("band.setting.do_not_disturb.title") %></h1>\n        </header>\n\n        <div class="modalBody">\n            <div class="serviceSelectListWrap gMat20">\n                <div class="modalContentWrap -tSpaceNone">\n                    \x3c!-- 특정 요일 > 설정 ON/OFF 영역 --\x3e\n                    <% if (isEachDaySetting) { %>\n                    <div class="flexList gMat-10">\n                        <div class="text">\n                            <label for="dayType" class="labelTitle gFs14"><%= doNotDisturbTimeInfo.labelText %></label>\n                        </div>\n                        <div class="etc">\n                            <label for="dayType" class="uCheck -switch ">\n                                <input type="checkbox" id="dayType" class="checkInput _daySetCheckbox" <%if (doNotDisturbTimeInfo.enabled) { %> checked <% } %>>\n                                <span class="checkLabel">\n                                    <span class="shape "></span>\n                                    <span class="text"></span>\n                                </span>\n                            </label>\n                        </div>\n                    </div>\n                    <% } %>\n\n                    <div class="etiquetteTimeSetBox _dayDetailSettingWrap">\n                        \x3c!-- 특정 요일 > \'하루 종일\' 옵션 선택 영역 --\x3e\n                        <% if (isEachDaySetting) { %>\n                        <div class="flexList">\n                            <div class="text">\n                                <label for="allDay" class="label gFs14"><%= IM("band.setting.do_not_disturb.day.all_day") %></label>\n                            </div>\n                            <div class="etc">\n                                <span class="uCheck -checkbox -noLabel">\n                                    <input type="checkbox" id="allDay" class="checkInput _allDayCheckBox" <% if (doNotDisturbTimeInfo.allDay) { %> checked <% } %>>\n                                    <span class="checkLabel">\n                                    <span class="shape "></span>\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <% } %>\n\n                        <div class="_detailTimeWrap">\n                            <div class="optionDateTime gMat5">\n                                <div class="flexList -layoutFixed -tbSpaceNone">\n                                    <div class="flexItem">\n                                        <label class="label"><%= IM("time.ui.start") %></label>\n                                    </div>\n\n                                    <div class="flexItem gMal5 ">\n                                        <div class="_startTimeRegion"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="optionDateTime gMat5">\n                                <div class="flexList -layoutFixed -tbSpaceNone">\n                                    <div class="flexItem">\n                                        <label class="label"><%= IM("time.ui.end") %></label>\n                                    </div>\n                                    <div class="flexItem gMal5 _endTimeRegion">\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <footer class="modalFooter gPat19">\n            <button type="button" class="uButton -cancel _cancelBtn"><%= IM("ui.label.cancel") %></button>\n            <button type="button" class="uButton -confirm _confirmBtn"><%= IM("ui.label.confirm") %></button>\n        </footer>\n    </div>\n</section>'},3533:function(e,t,n){var i=n(6),s=n(0),a=n(543),o=n(567),l=n(83),r=n(52),d=n(165),c=i.Model.extend({defaults:function(){return{timezoneId:null,doNotDisturbDayType:null,doNotDisturbEnabled:!1,dailyInfo:null,daysOfWeekInfoList:null}},initialize:function(e){this._originalDoNotDisturbData=e||null},parse:function(e){return{timezoneId:e.timezoneId?e.timezoneId:d.getCurrentTimezoneId(),doNotDisturbEnabled:!!e.enabled&&e.enabled,doNotDisturbDayType:e.type?e.type:a.DO_NOT_DISTURB_INFO.DAILY.VALUE,dailyInfo:e.data?this._convertDailyInfoForView(e.data):this._getDailyDefaultInfo(),daysOfWeekInfoList:e.data?this._convertDaysOfWeekInfoListForView(e.data):this._getDaysOfWeekDefaultInfoList()}},setDoNotDisturbEnabled:function(e){this.set("doNotDisturbEnabled",e)},setTimezoneId:function(e){this.set("timezoneId",e)},setDoNotDisturbDayType:function(e){this.set("doNotDisturbDayType",e)},getTimezoneId:function(){return this.get("timezoneId")},getDoNotDisturbDayType:function(){return this.get("doNotDisturbDayType")},getDaysOfWeekInfoList:function(){return this.get("daysOfWeekInfoList")},findDoNotDisturbDataByType:function(e){return this.isDoNotDisturbDailyType()?this.get("dailyInfo"):s.find(this.get("daysOfWeekInfoList"),(function(t){return t.type==e}))},isDoNotDisturbDaysOfWeekType:function(){return this.getDoNotDisturbDayType()==a.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE},isDoNotDisturbDailyType:function(){return this.getDoNotDisturbDayType()==a.DO_NOT_DISTURB_INFO.DAILY.VALUE},isDoNotDisturbEnabled:function(){return 1==this.get("doNotDisturbEnabled")},setDailyInfo:function(e){this.set("dailyInfo",e)},setDaysOfWeekInfoListAfterUpdateItem:function(e){var t=s.map(this.get("daysOfWeekInfoList"),(function(t){return t.type==e.type?e:t}));this.set("daysOfWeekInfoList",t)},setBandDoNotDisturbInfo:function(e){var t={type:this.getDoNotDisturbDayType(),enabled:this.isDoNotDisturbEnabled(),timezone_id:this.getTimezoneId(),data:this._convertDoNotDisturbDataForAPI()};return l.setBandDoNotDisturbInfo(e,t)},_convertDoNotDisturbDataForAPI:function(){if(!this.isDoNotDisturbEnabled()&&this._originalDoNotDisturbData)return r.decamelizeKeys(this._originalDoNotDisturbData.data);var e=this.get("daysOfWeekInfoList"),t=this.get("dailyInfo"),n=e.concat(t),i=s.map(n,(function(e){return s.omit(e,"labelText")}));return r.decamelizeKeys(i)},_convertDailyInfoForView:function(e){if(e){var t=s.find(e,(function(e){return e.type==a.DO_NOT_DISTURB_INFO.DAILY.VALUE}));return t?{start:t.start,end:t.end,type:t.type,labelText:a.DO_NOT_DISTURB_INFO.DAILY.LABEL}:this._getDailyDefaultInfo()}},_getDailyDefaultInfo:function(){return{start:a.DO_NOT_DISTURB_INFO.DEFAULT_START_AT,end:a.DO_NOT_DISTURB_INFO.DEFAULT_END_AT,type:a.DO_NOT_DISTURB_INFO.DAILY.VALUE,labelText:a.DO_NOT_DISTURB_INFO.DAILY.LABEL}},_convertDaysOfWeekInfoListForView:function(e){if(e){var t=o.makeDayOfWeekListOrderBy(a.DO_NOT_DISTURB_INFO.DEFAULT_START_OF_THE_WEEK);return s.map(t,s.bind((function(t){var n=s.find(e,(function(e){return e.type.toLowerCase()==t._apiValue.toLowerCase()}));return n?{labelText:t.getLocalizedText(),type:n.type.toLowerCase(),enabled:!!n.enabled,allDay:!!n.allDay,start:n.start,end:n.end}:this._getDayOfWeekDefaultInfo(t)}),this))}},_getDaysOfWeekDefaultInfoList:function(){var e=o.makeDayOfWeekListOrderBy(a.DO_NOT_DISTURB_INFO.DEFAULT_START_OF_THE_WEEK);return s.map(e,s.bind((function(e){return this._getDayOfWeekDefaultInfo(e)}),this))},_getDayOfWeekDefaultInfo:function(e){return{labelText:e.getLocalizedText(),type:e._apiValue.toLowerCase(),enabled:!0,allDay:!1,start:a.DO_NOT_DISTURB_INFO.DEFAULT_START_AT,end:a.DO_NOT_DISTURB_INFO.DEFAULT_END_AT}},resetDoNotDisturbDataAsOriginalByType:function(e){var t=this._originalDoNotDisturbData&&this._originalDoNotDisturbData.data;if(e==a.DO_NOT_DISTURB_INFO.DAILY.VALUE){var n=t?this._convertDailyInfoForView(this._originalDoNotDisturbData.data):this._getDailyDefaultInfo();this.set("dailyInfo",n)}if(e==a.DO_NOT_DISTURB_INFO.DAYS_OF_WEEK.VALUE){var i=t?this._convertDaysOfWeekInfoListForView(this._originalDoNotDisturbData.data):this._getDaysOfWeekDefaultInfoList();this.set("daysOfWeekInfoList",i)}},canConfigureDoNotDisturbInfo:function(){return!(!this.isDoNotDisturbEnabled()&&null==this._originalDoNotDisturbData)},checkDaysOfWeekInfoIsValid:function(){return 0!=s.filter(this.getDaysOfWeekInfoList(),(function(e){if(e.enabled)return e})).length}});c.buildByBandDataInfo=function(e){return e=r.camelizeKeys(e),new c(e,{parse:!0})},e.exports=c},3534:function(e,t,n){var i=n(4),s=n(3535),a=n(1565),o=n(495),l=n(487),r=n(3536),d=n(3538),c=n(3546),h=i.View.extend({options:{bandData:void 0},behaviors:[{behaviorClass:o,sceneId:o.SCENE.BAND_ATTACHMENTS},l],className:"sAttachments gBoxShadow",attributes:{"data-viewname":"DBandAttachmentLayoutView"},initialize:function(){this._attachmentType=a.FILE},template:_.template(s),ui:{menus:"._menus",content:"._content"},regions:{menus:{el:"._menus",replaceElement:!0},content:{el:"@ui.content",replaceElement:!0}},childViewEvents:{menuSelected:function(e){this._attachmentType=a.getPostAttachmentType(e),this._renderContent()}},onRender:function(){this.showChildView("menus",r.buildDBandAttachmentScrollMenuView([a.FILE,a.ATTENDANCE_CHECK,a.SIGN_UP,a.POLL,a.TODO,a.BILL_SPLIT])),this._renderContent()},onAttach:function(){this.jplSceneEnter(l.CLASSIFIER.BAND_ATTACHMENTS,{band_no:this.options.bandData.getBandCore().bandNo})},_renderContent:function(){this.showChildView("content",this._getContentView())},_getContentView:function(){return this._attachmentType===a.FILE?d.buildFileListLayoutView({bandData:this.options.bandData}):c.buildDBandAttachmentView({bandData:this.options.bandData,attachmentType:this._attachmentType})}});h.buildBandAttachmentLayoutView=function(e){return new h({bandData:e})},e.exports=h},3535:function(e,t){e.exports='<div class="uHeaderWrap">\n    <header class="header">\n        <h1 class="title"><%-IM("attachments.title") %></h1>\n    </header>\n    <div class="_menus"></div>\n</div>\n\n<div class="_content"></div>'},3536:function(e,t,n){var i=n(2),s=n(4),a=n(3537),o=n(195),l=s.View.extend({className:"snbArea gMat12",attributes:{"data-viewname":"DBandAttachmentScrollMenuView"},template:_.template(a),templateContext:function(){return{menus:this.options.menus}},ui:{btnMenu:"._btnMenu",btnPrev:"._btnPrev",btnNext:"._btnNext",scroll:"._scroll"},events:{"click @ui.btnMenu":function(e){this._highlightMenu(e.target);var t=i(e.target).data("menutype");this.trigger("menuSelected",t)},"click @ui.btnPrev":function(){this._slideArea.prev()},"click @ui.btnNext":function(){this._slideArea.next()}},onRender:function(){this._highlightMenu(this.getUI("btnMenu")[0])},onAttach:function(){this._slideArea=new o(this.getUI("scroll")[0],{scrollX:!0,scrollY:!1,eventPassthrough:!1,momentum:!0,snap:!0,snapSpeed:600,click:!0}),this._slideArea.on("scrollEnd",_.bind(this._renderNexPrevButtonEnable,this)),this._renderNexPrevButtonEnable()},onBeforeDetach:function(){this._slideArea&&(this._slideArea.off(),this._slideArea.destroy(),this._slideArea=null)},_highlightMenu:function(e){this.getUI("btnMenu").removeClass("sf_color -active").filter(e).addClass("sf_color -active")},_renderNexPrevButtonEnable:function(){var e=this._slideArea.pages.length-1,t=this._slideArea.x===this._slideArea.pages[0][0].x,n=this._slideArea.x===this._slideArea.pages[e][0].x;if(this.getUI("btnPrev").toggleClass("-disabled",!!t),this.getUI("btnNext").toggleClass("-disabled",!!n),this.getUI("btnPrev").attr("disabled",!!t),this.getUI("btnNext").attr("disabled",!!n),t&&n)return this.getUI("btnPrev").hide(),void this.getUI("btnNext").hide();this.getUI("btnPrev").show(),this.getUI("btnNext").show()}});l.buildDBandAttachmentScrollMenuView=function(e){return new l({menus:e})},e.exports=l},3537:function(e,t){e.exports='<button type="button" class="navButton -prev gMal-9 _btnPrev"><span class="gSrOnly"><%-IM("ui.label.prev")%></span></button>\n<div class="snbMenuBox _scroll">\n    <ul class="snbMenu">\n        \x3c!-- [D] 현재탭 -active sf_color 클래스 추가 --\x3e\n        <% _.each(menus, function(menu) { %>\n        <li class="snbMenuItem"><button data-menutype="<%-menu.id%>" type="button" class="_btnMenu snbItemButton sf_afterBg"><%-menu.name%></button></li>\n        <% }) %>\n    </ul>\n</div>\n<button type="button" class="navButton -next gMar-9 _btnNext"><span class="gSrOnly"><%-IM("ui.label.next") %></span></button>'},3538:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3539),a=n(2117),o=n(3541),l=n(3543),r=n(583),d=n(154),c=i.View.extend({tagName:"div",className:"collectAttachmentWrap",attributes:{"data-viewname":"DBandAttachmentFileListLayoutView"},template:t.template(s),ui:{search:"._search",content:"._content",emptyWrap:"._emptyWrap",emptyText:"._emptyText",loading:"._loading"},regions:{search:{el:"@ui.search",replaceElement:!0},content:{el:"@ui.content",replaceElement:!0},loading:{el:"@ui.loading",replaceElement:!1}},childViewEvents:{search:function(e){this._query=e,this._renderContentView()}},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo,this._query=null},onRender:function(){this._renderSearchView(),this._renderLoadingView()},onAttach:function(){this._renderContentView()},_renderLoadingView:function(){this.ui.loading.css("display",""),this.showChildView("loading",r.build())},_renderSearchView:function(){var e=a.buildFileSearchInputView();this.showChildView("search",e)},_renderContentView:function(){var e=this.getRegion("content");this.ui.loading.css("display",""),this.ui.emptyWrap.css("display","none"),e.empty(),d.wrapActivePromise(this._loadContentView(),this).then(t.bind((function(t){this.ui.loading.css("display","none"),t?e.show(t):(this.ui.emptyText.html(this._getEmptyText()),this.ui.emptyWrap.css("display",""))}),this))},_getEmptyText:function(){return this._query?IM("web.bandfile.filesearch.result.no_result",{query:t.escape(this._query)}):IM("ui.message.empty_conents")},_loadContentView:function(){return this._query?l.loadFileListSearchResultView({bandData:this._bandData,query:this._query}):o.loadFileListSummaryView({bandData:this._bandData})}});return c.buildFileListLayoutView=function(e){return new c(e)},c}.call(t,n,t,e))||(e.exports=i)},3539:function(e,t){e.exports='<div class="_search" style="display:none"></div>\n\n<div class="_content" style="display:none"></div>\n\n<div class="uEmpty _emptyWrap" style="height:545px;display:none">\n    <p class="uEmptyDesc gColorGr3 _emptyText"></p>\n</div>\n\n<div class="uEmpty _loading" style="height:545px;display:none"></div>'},3540:function(e,t){e.exports='<label class="gSrOnly" for="input_search_<%- viewId %>"><%- placeholder %></label>\n<input type="text" class="_queryInput" id="input_search_<%- viewId %>" placeholder="<%- placeholder %>">\n<button type="button" class="search _searchBtn"><span class="gSrOnly"><%- IM(\'ui.label.search\') %></span></button>\n<span class="border"></span>'},3541:function(e,t,n){var i=n(2),s=n(0),a=n(4),o=n(3542),l=n(1007),r=n(1559),d=n(1281),c=n(1631),h=n(1052),u=n(1635),p=n(154),m=n(590),_=3,b=5,g=a.View.extend({tagName:"div",className:"attachmentArea",attributes:{"data-viewname":"DBandAttachmentFileListSummaryView"},template:s.template(o),ui:{fileBox:"._fileBox",moreLink:"._moreLink",fileInput:"._fileInput",fileList:"._fileList",folderBox:"._folderBox",folderOrder:"._folderOrder",folderCreateBtn:"._folderCreateBtn",folderList:"._folderList"},regions:{fileList:{el:"@ui.fileList",replaceElement:!0},folderList:{el:"@ui.folderList",replaceElement:!0}},events:{"click @ui.fileInput":function(e){m.isContentCreationPunished()&&e.preventDefault()},"change @ui.folderOrder":"_sortFoldersByOrder","click @ui.folderCreateBtn":function(){if(!m.isContentCreationPunished()){var e=h.openFolderCreationModel(this._bandNo);p.wrapActivePromise(e,this).then(s.bind((function(e){h.gotoFolder(this._bandNo,e)}),this))}}},initialize:function(e){this._bandData=e.bandData,this._files=e.files,this._folders=e.folders,this._bandNo=this._bandData.getBandCore().bandNo},serializeData:function(){return{uploadBtn:this._canUploadFile(),moreUrl:h.getFilesUrl(this._bandNo),folderAddBtn:this._canCreateFolder()}},onBeforeRender:function(){this._destroyUploader()},onRender:function(){this._renderFileBox(),this._renderFolderBox(),this._createUploader()},onBeforeDetach:function(){this._destroyUploader()},_canUploadFile:function(){return this._bandData.isPostingPermitted()},_canCreateFolder:function(){return this._bandData.isCreateAlbumPermitted()},_destroyUploader:function(){this._uploader&&(this._uploader.destroy(),this._uploader=null)},_createUploader:function(){this._canUploadFile()&&(this._destroyUploader(),this._uploader=u.createBandFileUploader({element:this.ui.fileInput,inputTitle:IM("file.upload_file"),bandData:this._bandData}),this.listenTo(this._uploader,this._uploader.EVENT.FOLDER_CREATED,(function(e){this._folders.add(e),this._renderFolderBox()})),this.listenTo(this._uploader,this._uploader.EVENT.COMPLETE,(function(e){var t=e.files,n=e.folder,i=h.createFiles(this._bandNo,t,n);p.wrapActivePromise(i,this).then(s.bind((function(){if(n)h.gotoFolder(this._bandNo,n);else{var e=this._files.fetchFiles({bandNo:this._bandNo,limit:this._folders.isEmpty()?b:_});p.wrapActivePromise(e,this).then(s.bind(this._renderFileBox,this))}}),this))})))},_renderFileBox:function(){var e=this.getRegion("fileList"),t=this._files.size();(t>0||this._canUploadFile())&&this.ui.fileBox.css("display",""),0===t||e.hasView()||(this.ui.moreLink.css("display",""),e.show(d.buildFileListView({collection:this._files,bandData:this._bandData})))},_renderFolderBox:function(){var e=this.getRegion("folderList"),t=this._folders.size();(t>0||this._canCreateFolder())&&this.ui.folderBox.css("display",""),0===t||e.hasView()||(this._sortFoldersByOrder(),e.show(c.buildFolderListView({collection:this._folders,bandData:this._bandData})))},_sortFoldersByOrder:function(){switch(this.ui.folderOrder.val()){case"updateDesc":this._folders.sortByUpdateDesc();break;case"nameAsc":this._folders.sortByNameAsc()}}});g.loadFileListSummaryView=function(e){var t=e.bandData,n=t.getBandCore().bandNo,s=l.build(),a=r.build(),o=s.fetchFiles({bandNo:n,limit:b}),d=a.fetchFolders(n);return i.when(o,d).then((function(){var e=s.size(),n=a.size(),i=t.isPostingPermitted(),o=t.isCreateAlbumPermitted();return 0!==e||0!==n||i||o?(n>0&&e>_&&s.remove(s.slice(_)),new g({bandData:t,files:s,folders:a})):null}))},e.exports=g},3542:function(e,t){e.exports='<div class="fileFolderBox _fileBox" style="display:none">\n    <h3 class="fileFolderBoxTitle"><%- IM(\'file.all_files\') %></h3>\n    <a href="<%- moreUrl %>" class="moreButton _moreLink" style="display:none"><%- IM(\'ui.label.view_all\') %></a>\n    <% if (uploadBtn) { %>\n    <div class="uploadButtonBox">\n        <div class="uploadButton _fileInput">\n            <span class="uploadIcon"></span><%- IM(\'file.upload_file\') %>\n            <input type="file" title="<%- IM(\'file.upload_file\') %>" name="attachment" class="inputFile">\n        </div>\n    </div>\n    <% } %>\n\n    <div class="_fileList" style="display:none"></div>\n</div>\n<div class="fileFolderBox _folderBox" style="display:none">\n    <div class="fileFolderHeader">\n        <h3 class="fileFolderBoxTitle"><%- IM(\'file.folders\') %></h3>\n        <div class="searchFilter">\n            <div class="uSelect -textType -h14 -taR">\n                <select class="_folderOrder">\n                    <option value="updateDesc"><%- IM(\'file.folder_order.update\') %></option>\n                    <option value="nameAsc"><%- IM(\'file.folder_order.name\') %></option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n    <% if (folderAddBtn) { %>\n    <div class="uploadButtonBox">\n        <button type="button" class="uploadButton _folderCreateBtn">\n            <div class="folderIcon">\n                <svg class="svgIcon" aria-hidden="true">\n                    <use xlink:href="#ico-folder"></use>\n                </svg>\n            </div>\n            <%- IM(\'file.create_new_folder\') %>\n        </button>\n    </div>\n    <% } %>\n\n    <div class="_folderList" style="display:none"></div>\n</div>'},3543:function(e,t,n){var i=n(2),s=n(0),a=n(4),o=n(3544),l=n(1007),r=n(1559),d=n(1281),c=n(1631),h=n(2118),u=n(512),p=a.View.extend({tagName:"div",className:"attachmentArea",attributes:{"data-viewname":"DBandAttachmentFileListSearchResultView"},template:s.template(o),ui:{count:"._count",folders:"._folders",files:"._files"},regions:{count:{el:"@ui.count",replaceElement:!0},folders:{el:"@ui.folders",replaceElement:!0},files:{el:"@ui.files",replaceElement:!0}},initialize:function(e){this._bandData=e.bandData,this._folders=e.folders,this._files=e.files},onRender:function(){this._renderCountView(),this._renderFolderListView(),this._renderFileListView()},onAttach:function(){this.listenTo(u,"window:scroll:bottom",(function(){this._files.searchMoreFiles()}))},onBeforeDetach:function(){this.stopListening(u)},_renderCountView:function(){var e=h.buildFileSearchCountView({folderCount:this._folders.size(),fileCount:this._files.getTotalFileCount()});this.showChildView("count",e)},_renderFolderListView:function(){this._folders.isEmpty()||this.showChildView("folders",c.buildFolderListView({collection:this._folders,bandData:this._bandData}))},_renderFileListView:function(){this._files.isEmpty()||this.showChildView("files",d.buildFileListView({collection:this._files,bandData:this._bandData}))}});p.loadFileListSearchResultView=function(e){var t=e.bandData,n=e.query,s=t.getBandCore().bandNo,a=r.build(),o=l.build(),d=a.searchFolders(s,n),c=o.searchFiles({bandNo:s,query:n});return i.when(d,c).then((function(){var e=a.size(),n=o.size();return 0===e&&0===n?null:new p({bandData:t,folders:a,files:o})}))},e.exports=p},3544:function(e,t){e.exports='<div class="fileFolderBox">\n    <div class="_count" style="display:none"></div>\n\n    <div class="_folders" style="display:none"></div>\n\n    <div class="_files" style="display:none"></div>\n</div>'},3545:function(e,t){e.exports='<% if (folderCount) { %><span class="statusText"><%- IM(\'file.searched_folders\') %><em class="statusNumber"><%- folderCount %></em></span><% } %><% if (fileCount) { %><span class="statusText"><%- IM(\'file.searched_files\') %><em class="statusNumber"><%- fileCount %></em></span><% } %>'},3546:function(e,t,n){var i=n(4),s=n(3547),a=n(512),o=n(487),l=n(3548),r=n(3549),d=n(3550),c=n(3552),h=n(3554),u=n(3556),p=n(3558),m=i.View.extend({options:{bandData:void 0},behaviors:[{behaviorClass:o}],attributes:{"data-viewname":"DBandAttachmentView"},initialize:function(e){this._attachmentType=e.attachmentType,this._selectionModel=new r({})},template:_.template(s),templateContext:function(){return{canUseSave:this.options.bandData.canGetAllPollVoterAtOnce()}},ui:{search:"._search",btnExcelDownload:"._btnExcelDownload",btnPrint:"._btnPrint",contentWrap:"._contentWrap",empty:"._empty",selecting:"._selecting",tabTitle:"._tabTitle",actionWrap:"._actionWrap",filter:"._filter",uEmptyDesc:"._uEmptyDesc"},regions:{action:{el:"._actionWrap",replaceElement:!0},search:{el:"@ui.search",replaceElement:!0},list:{el:"._list",replaceElement:!0},selecting:{el:"@ui.selecting",replaceElement:!0},filter:{el:"@ui.filter",replaceElement:!0}},onAttach:function(){this._attachmentType.jplClassifier&&this.jplOccur(this._attachmentType.jplClassifier),this._loadItems(),this._renderSearchView(),this._renderFilterView(),this._renderActionView(),this._renderSelectingView(),this.listenTo(a,"window:scroll:bottom",(function(){this._loadNextItems()}))},_loadItems:function(e){this.collection&&this.stopListening(this.collection),(this.collection=l.createBandAttachmentListCollection(this.options.bandData.getBandNo())).refreshBandAttachments(this._attachmentType.apiKey,e),this.listenTo(this.collection,"reset",this._renderContent),this._renderContent()},_loadNextItems:function(){this.collection.fetchNextBandAttachments()},_emptyFilterView:function(){var e=this.getRegion("filter");e.hasView()&&e.empty()},_renderFilterView:function(){this._dBandAttachmentFilterView=p.buildDBandAttachmentFilterView(),this.showChildView("filter",this._dBandAttachmentFilterView),this.listenTo(this.getChildView("filter"),{doSearch:function(e){this._dBandAttachmentSearchView.resetInputValue();var t=this._dBandAttachmentSearchView.getPeriodSearchValue();t&&_.extend(e,t),this._loadItems(e)}})},_renderSearchView:function(){this._dBandAttachmentSearchView=c.buildDBandAttachmentSearchView(this.options.bandData,this._attachmentType),this.showChildView("search",this._dBandAttachmentSearchView),this.listenTo(this.getChildView("search"),{doSearch:function(e){if(!e.period)return this._dBandAttachmentFilterView.resetValue(),void this._loadItems(e);_.extend(e,this._dBandAttachmentFilterView.getValue()),this._loadItems(e)},clearSearchInput:function(){this._loadItems()}})},_renderActionView:function(){this._attachmentType.checkAccessible(this.options.bandData)&&this.showChildView("action",d.buildDBandAttachmentActionView(this._selectionModel))},_renderSelectingView:function(){this.showChildView("selecting",u.buildDBandAttachmentSelectingView(this._selectionModel,this.collection,this._attachmentType,this.options.bandData))},_updateSearchResultView:function(){var e=this._attachmentType.name;if(_.isUndefined(this.collection.getSearchResultCount())||(e=IM("web.postsearch.result_title")+' <em class="count">'+this.collection.getSearchResultCount()+"</em>"),this.getUI("tabTitle").html(e),0===this.collection.length)return this.getUI("contentWrap").hide(),this.getUI("uEmptyDesc").text(this.collection.isSearched()?IM("ui.message.no_search_result"):IM("ui.message.empty_conents")),this.getUI("empty").show(),void this.getRegion("list").empty();this.getUI("contentWrap").show(),this.getUI("empty").hide()},_renderContent:function(){this.collection.isFetching()||(this._updateSearchResultView(),0!==this.collection.length&&this.showChildView("list",new i.CollectionView({tagName:"UL",className:"cAttachment gMat9",childView:h,childViewOptions:_.bind((function(){return{selectedModel:this._selectionModel}}),this),collection:this.collection})))}});m.buildDBandAttachmentView=function(e){return new m(e)},e.exports=m},3547:function(e,t){e.exports='<div class="collectAttachmentWrap">\n    <div class="uInputSearch gMat20 _search" style="display: none;"></div>\n    <div class="_actionWrap" style="display:none;"></div>\n\n    <div class="searchResultWrap">\n        <h2 class="tabTitle gMat16 _tabTitle"></h2>\n        <div class="_filter"></div>\n    </div>\n\n    <div class="attachmentArea _contentWrap">\n        <ul class="_list"></ul>\n    </div>\n</div>\n<div class="uEmpty _empty" style="height:545px">\n    <p class="uEmptyDesc gColorGr3 _uEmptyDesc"></p>\n</div>\n<div class="_selecting"></div>'},3548:function(e,t,n){var i=n(6),s=n(520),a=i.Model.extend({}),o=i.Collection.extend({model:a,initialize:function(e,t){this._bandNo=t.bandNo,this._attachmentType=t.attachmentType,this._nextParams=void 0,this._fetchingPromise=void 0,this._searchResultCount=void 0,this._isSearched=!1},refreshBandAttachments:function(e,t){this._attachmentType=e,this._fetchingPromiseFunc=s.getAttachments,this._isSearched=!1;var n={band_no:this._bandNo,attachment_type:this._attachmentType};t&&t.query&&(this._fetchingPromiseFunc=s.searchAttachments,this._isSearched=!0,n.query=t.query),t&&t.filter&&(this._fetchingPromiseFunc=s.getAttachments,this._isSearched=!0,n.filter=t.filter),t&&t.period&&(this._fetchingPromiseFunc=s.getAttachmentsWithCreatedAt,this._isSearched=!0,n.from=t.period.from,n.to=t.period.to),this._fetchingPromise=this._fetchingPromiseFunc(n).then(_.bind((function(e){this._nextParams=e.paging.next_params,this._searchResultCount=e.total,this._fetchingPromise=void 0,this.reset(e.items)}),this),_.bind((function(){this._fetchingPromise=void 0}),this))},fetchNextBandAttachments:function(){this._nextParams&&(this._fetchingPromise||(this._fetchingPromise=this._fetchingPromiseFunc(this._nextParams).then(_.bind((function(e){this._nextParams=e.paging.next_params,this._fetchingPromise=void 0,this.add(e.items)}),this),_.bind((function(){this._fetchingPromise=void 0}),this))))},isFetching:function(){return!!this._fetchingPromise},getSearchResultCount:function(){return this._searchResultCount},isSearched:function(){return this._isSearched}});o.createBandAttachmentListCollection=function(e){return new o(void 0,{bandNo:e})},e.exports=o},3549:function(e,t,n){var i=n(6).Model.extend({defaults:function(){return{mode:"normal"}},setSelecting:function(e,t){this.set(e,!!t),this._selectedAttachChain().value().length>10&&(this.trigger("invalid:length"),this.set(e,!1))},toggleMode:function(e){this.get("mode")===e?this.set("mode",this.defaults().mode):this.set("mode",e)},_selectedAttachChain:function(){return _.chain(this.pairs()).filter((function(e){return"mode"!==e[0]&&e[1]}))},selectedCount:function(){return this._selectedAttachChain().size().value()},setModeNormal:function(){this.set("mode","normal")},isModeSelecting:function(){return"normal"!==this.get("mode")},unselectAll:function(){var e=this._selectedAttachChain().reduce((function(e,t){return e[t[0]]=!1,e}),{}).value();this.set(e)},clearModel:function(){this.clear(),this.set(this.defaults())}});e.exports=i},3550:function(e,t,n){var i=n(4),s=n(3551),a=i.View.extend({className:"actionButtons -fixed gPat26 gPab10 gMar-22 gMal-22",attributes:{"data-viewname":"DBandAttachmentActionView"},template:_.template(s),ui:{btnExcelDownload:"._btnExcelDownload",btnPrint:"._btnPrint"},events:{"click @ui.btnExcelDownload":function(){this.model.toggleMode("excel_download")},"click @ui.btnPrint":function(){this.model.toggleMode("print")}},modelEvents:{"change:mode":"_renderMode"},onRender:function(){this._renderMode()},_renderMode:function(){"normal"===this.model.get("mode")?(this.getUI("btnExcelDownload").addClass("-disabled"),this.getUI("btnPrint").addClass("-disabled")):"excel_download"===this.model.get("mode")?(this.getUI("btnExcelDownload").removeClass("-disabled"),this.getUI("btnPrint").addClass("-disabled")):(this.getUI("btnExcelDownload").addClass("-disabled"),this.getUI("btnPrint").removeClass("-disabled"))}});a.buildDBandAttachmentActionView=function(e){return new a({model:e})},e.exports=a},3551:function(e,t){e.exports='<div class="action">\n    <div class="item">\n        <div class="btns">\n            <button type="button" class="uButton -text -disabled _btnExcelDownload"><%-IM("ui.label.excel_download") %></button>\n            <button type="button" class="uButton -text -disabled _btnPrint"><%-IM("ui.label.print") %></button>\n        </div>\n    </div>\n</div>\n'},3552:function(e,t,n){var i=n(4),s=n(16),a=n(3553),o=n(1116),l=n(1565),r=i.View.extend({className:"inputSearchWrap gMat20 gMab21",attributes:{"data-viewname":"DBandAttachmentSearchView"},initialize:function(e){this._bandData=e.bandData,this._attachmentType=e.attachmentType,this._previousSearchQueryReset()},template:_.template(a),ui:{searchInput:"._input",searchBtn:"._btnSearch",datePickerWrap:"._datePickerWrap",startDatePicker:"._startDatePicker",endDatePicker:"._endDatePicker",btnToggleDatePicker:"._btnToggleDatePicker",btnSearchPeriod:"._btnSearchPeriod"},regions:{startDatePicker:{el:"@ui.startDatePicker",replaceElement:!0},endDatePicker:{el:"@ui.endDatePicker",replaceElement:!0}},events:{"keyup @ui.searchInput":"_fetchSearchInput","input @ui.searchInput":"_onSearchInputChange","click @ui.searchBtn":"_fetchSearchInput","click @ui.btnToggleDatePicker":"_toggleDatePicker","click @ui.btnSearchPeriod":"_fetchSearchPeriod"},templateContext:function(){var e=IM("web.board.search.placeholder");return this._attachmentType===l.BILL_SPLIT&&(e=IM("ui.label.author_search")),{placeholder:e}},getPeriodSearchValue:function(){return this.getRegion("startDatePicker").hasView()&&this.getRegion("endDatePicker").hasView()?{period:{from:s(this._startDateInputView.getValue()).valueOf(),to:s(this._endDateInputView.getValue()).endOf("day").valueOf()}}:null},resetInputValue:function(){this.getUI("searchInput").val("")},_previousSearchQueryReset:function(){this._previousSearchQuery=void 0},_doSearch:function(e){this.trigger("doSearch",e)},_fetchSearchPeriod:function(){this.resetInputValue(),this._doSearch(this.getPeriodSearchValue())},_fetchSearchInput:function(e){if("SEARCH_ACTIVE"===this._btnMode){if(13===e.which||1===e.which){var t=this.getUI("searchInput").val().trim();t&&this._previousSearchQuery!==t&&(this._previousSearchQuery=t,this._doSearch({query:t}))}}},_changeActivationSearchInputUI:function(){this._btnMode="SEARCH_ACTIVE"},_onSearchInputChange:function(){var e=this.getUI("searchInput").val().trim();if(""===e)return this._previousSearchQuery=void 0,this.getUI("searchInput").val(""),void this.trigger("clearSearchInput");e!==this._previousSearchQuery&&this._changeActivationSearchInputUI()},_toggleDatePicker:function(){var e=this.getUI("datePickerWrap").is(":visible");this.getUI("datePickerWrap").toggle(!e),this._renderStartDatePicker(),this._renderEndDatePicker(),e&&this._doSearch({})},_renderStartDatePicker:function(){if(this.getChildView("startDatePicker"))this.getRegion("startDatePicker").empty();else{var e=s(this._bandData.getSince(),"YYYYMMDD");this._startDateInputView=o.buildDDateInputView({date:s().subtract(1,"months"),canTextEdit:!1,pickerHeight:"38",dateValidator:{isValid:_.bind((function(t){var n=s().startOf("day");t=s(t);return!(n.diff(t,"days")<0||t.diff(e,"days")<0)||(alert(IM("postwrite.attach.poll.alert_invalid_ended_at")),!1)}),this),getMinDate:_.bind((function(){return e}),this),getMaxDate:_.bind((function(){return s()}),this)}}),this.showChildView("startDatePicker",this._startDateInputView),this.listenTo(this._startDateInputView,o.EVENT.DATE_CHANGED,_.bind((function(e){var t=s(e.value),n=s(this._endDateInputView.getValue());t.diff(n,"days")>0&&this._endDateInputView.setValue(t.format("YYYY-MM-DD"))}),this))}},_renderEndDatePicker:function(){this.getChildView("endDatePicker")?this.getRegion("endDatePicker").empty():(this._endDateInputView=o.buildDDateInputView({date:s(),canTextEdit:!1,pickerHeight:"38",dateValidator:{isValid:_.bind((function(e){var t=s().startOf("day"),n=(e=s(e),s(this._startDateInputView.getValue()));return!(e.diff(n,"days")<0||t.diff(e,"days")<0)||(alert(IM("postwrite.attach.poll.alert_invalid_ended_at")),!1)}),this),getMinDate:_.bind((function(){return s(this._startDateInputView.getValue())}),this),getMaxDate:_.bind((function(){return s()}),this)}}),this.showChildView("endDatePicker",this._endDateInputView),this.listenTo(this._endDateInputView,o.EVENT.DATE_CHANGED,_.bind((function(){}),this)))}});r.buildDBandAttachmentSearchView=function(e,t){return new r({bandData:e,attachmentType:t})},e.exports=r},3553:function(e,t){e.exports='<div class="inputWrap">\n    <div class="uInputSearch">\n        <label class="gSrOnly" for="input_search"><%= IM("web.bandfile.filesearch.label") %></label>\n        <input class="_input" type="text" id="input_search" autocomplete="off" placeholder="<%= placeholder %>">\n        <button type="button" class="search _btnSearch"><span class="gSrOnly"><%= IM("ui.label.search") %></span></button>\n        <span class="border"></span>\n    </div>\n\n    <button type="button" class="btnToggleDatePicker _btnToggleDatePicker">\n        <svg class="svgIcon ico-mutiSchedule sf_color">\n            <title><%- IM(\'ui.label.date_pick\') %></title>\n            <use xlink:href="#ico-attach-mutiSchedule-22"></use>\n        </svg>\n    </button>\n</div>\n\n<div class="datePickerWrap _datePickerWrap" style="display: none">\n    <div class="pickerWrap">\n        <div class="_startDatePicker"></div>\n        <span class="dash"></span>\n        <div class="_endDatePicker"></div>\n        <button type="button" class="uButton -active -wAuto -h38 gMal15 _btnSearchPeriod"><%- IM(\'ui.label.search\') %></button>\n    </div>\n\n    <button type="button" class="btnToggleDatePicker _btnToggleDatePicker"><span class="gSrOnly"><%- IM(\'ui.label.close\') %></span></button>\n</div>'},3554:function(e,t,n){var i=n(0),s=n(4),a=n(3555),o=n(9),l=n(153),r=n(523),d=n(578),c=n(1643),h=(n(532),n(13));function u(e){return Number(e).toString()}function p(e,t,n){var i=r.getRemainingTime(e,n);if(i)return i.close?t:IM("todo.label.remaining_time_format_"+i.format,{value:i.value})}var m=s.View.extend({options:{selectedModel:void 0},tagName:"LI",className:"cAttachmentItem",attributes:{"data-viewname":"DBandAttachmentListItemView"},initialize:function(){var e="change:"+this.model.get("attachment_id");this.listenTo(this.options.selectedModel,e,this.onRender),this.listenTo(this.options.selectedModel,"change:mode",this._renderMode)},template:i.template(a),templateContextForAttachment:{poll:function(){var e,t=this.model.get("poll");return e=t.is_open?t.ended_at?p(t.ended_at):t.is_anonymous?IM("post.poll.title.anonymous_poll_in_progress"):IM("web.postlist.poll.label.in_progress"):IM("web.postlist.poll.label.done"),{svgIcon:{id:"ico-attach-vote-22",class:"ico-vote"},text:t.title,subText:IM("web.postlist.poll.txt.poll_count",{pollCount:u(t.count)}),emInSubText:e,downloadable:t.is_vote_visible_to_viewer}},sign_up:function(){var e=this.model.get("sign_up");return{svgIcon:{id:"ico-attach-signup-22",class:"ico-signup"},text:e.title,subText:IM("web.postlist.todo.txt.in_progress",{doneCount:u(e.completed_task_count),taskCount:e.task_count}),emInSubText:p(e.ended_at,IM("attachments.list.value.ended_attachment")),downloadable:!0}},attendance_check:function(){var e=this.model.get("attendance_check"),t=e.checked_attendee_count,n=e.attendee_count,s=(this.model.get("author").me,i.findWhere(e.managers,{user_no:h.getUserData().getUserNo()}),e.is_attendance_visible_to_viewer);return{svgIcon:{id:"ico-attach-attendance-26",class:"ico-attendance"},text:e.title,subText:IM("post.attendance_check.count",{done:u(t),all:n}),emInSubText:c.makeRemainingTimeText({startAt:e.start_at,endedAt:e.ended_at,timeZoneId:e.time_zone_id,closedText:IM("attachments.list.value.ended_attachment")}),downloadable:s}},todo:function(){var e=this.model.get("todo");return{svgIcon:{id:"ico-attach-todo-22",class:"ico-todo"},text:this.model.get("todo").title,subText:IM("web.postlist.todo.txt.in_progress",{doneCount:u(e.number_of_done),taskCount:e.number_of_tasks}),emInSubText:p(e.ended_at,IM("attachments.list.value.ended_attachment")),downloadable:!0}},bill_split:function(){var e=this.model.get("bill_split");return{svgIcon:{id:"ico-attach-nbang-22",class:"ico-nbang"},textEscaped:[d.getCurrencyLabel(e.currency),i.escape(e.total_price),"/",IM("web.postlist.billsplit.txt.member_count",{count:e.member_count})].join(" "),subText:IM("web.postlist.billsplit.txt.paid_member_count",{count:u(e.paid_member_count)}),downloadable:!0}}},templateContext:function(){var e=this.templateContextForAttachment[this.model.get("attachment_type")].call(this);return i.extend({vid:this.cid,createdDate:o.format.date(this.model.get("created_at"),"year_month_day"),emInSubText:void 0},e,{text:e.textEscaped||i.escape(e.text)})},ui:{anchorPost:"._anchorPost",wrapFuncs:"._wrapFuncs",check:"INPUT[name=check]"},events:{"change @ui.check":function(){this.options.selectedModel.setSelecting(this.model.get("attachment_id"),this.getUI("check").prop("checked"))}},onRender:function(){this.getUI("check").prop("checked",!!this.options.selectedModel.get(this.model.get("attachment_id"))),this._renderMode()},_renderMode:function(){"normal"===this.options.selectedModel.get("mode")?(this.getUI("anchorPost").attr("href",l.GROUP_BAND_POST_DETAIL.makeUrl({band_no:this.model.get("band_no"),post_no:this.model.get("post_no")})),this.getUI("wrapFuncs").hide()):(this.getUI("anchorPost").removeAttr("href"),this.getUI("wrapFuncs").show())}});m.buildDBandAttachmentListItemView=function(){return new m},e.exports=m},3555:function(e,t){e.exports='<a class="uFlexItem cAttachmentItemLink _anchorPost">\n    <div class="uCheckBox _wrapFuncs">\n        <% if (downloadable) { %>\n        <label for="uCheck_<%-vid%>" class="uCheck -checkbox">\n            <input type="checkbox" id="uCheck_<%-vid%>" class="checkInput" name="check">\n            <span class="checkLabel">\n                <span class="shape sf_tAfterBg"></span>\n                <span class="text"></span>\n            </span>\n        </label>\n        <% } %>\n    </div>\n\n    <div class="attchmentIcon sf_beforeBg">\n        <svg class="svgIcon <%-svgIcon[\'class\'] %> sf_color" aria-hidden="true">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#<%-svgIcon.id %>"></use>\n        </svg>\n    </div>\n    <div class="body">\n        <span class="text -ellipsis gFw4"><%= text %></span>\n        <span class="subText"><% if (emInSubText) { %><em class="sf_color"><%- emInSubText %></em><% } %> <%- subText %></span>\n        <span class="subText -ellipsis"><span class="creationDate"><%- createdDate %></span><span class="authorName"><%- author.name %></span></span>\n    </div>\n</a>'},3556:function(e,t,n){var i=n(4),s=n(3557),a=n(1564),o=n(553),l=n(513),r=i.View.extend({behaviors:[a],className:"cFixedBottomStatus  -fixed gMal-1",attributes:{"data-viewname":"DBandAttachmentSelectingView"},template:_.template(s),templateContext:function(){return{selectedCount:this.model.selectedCount()}},ui:{btnUnselectAll:"._btnUnselectAll",btnCancel:"._btnCancel",btnConfirm:"._btnConfirm"},events:{"click @ui.btnUnselectAll":function(){this.model.unselectAll()},"click @ui.btnCancel":function(){this.model.setModeNormal()},"click @ui.btnConfirm":function(){this._doSelectionAction(),this.model.clearModel()}},modelEvents:{change:"render","invalid:length":function(){alert(IM("attachments.alert.exceed_selection_count"))}},onRender:function(){this._renderVisible()},_renderVisible:function(){this.$el.toggle(this.model.isModeSelecting())},_doSelectionAction:function(){var e=_.map(this.collection.filter((function(e){return this.model.get(e.get("attachment_id"))}),this),(function(e){return{attachment_id:e.get("attachment_id"),attachment_type:e.get("attachment_type"),post_no:e.get("post_no"),band_no:e.get("band_no")}}));if("excel_download"===this.model.get("mode"))this.startDownload(this.options.attachmentType.id,e,{bandCore:this.options.bandData.getBandCore()});else if(confirm(IM("attachments.confirm.open_print"))){var t=o.attachmentPrint(this.options.bandData.getBandCore(),this.options.attachmentType.urlKey,e).url;l.openWindowXSSSafely(t,"_blank")}}});r.buildDBandAttachmentSelectingView=function(e,t,n,i){return new r({model:e,collection:t,attachmentType:n,bandData:i})},e.exports=r},3557:function(e,t){e.exports='<div class="statusCommentWrap">\n    <span class="statusText"><%=IM("attachments.selection.msg.selected_count", {selectedCount: Number(selectedCount).toString()}).replace(\'<strong>\', \'<strong class="sf_color">\') %></span>\n</div>\n<div class="buttonBox gMal10">\n    <button type="button" class="btnSelectCalendar _btnUnselectAll"><%-IM("deselection") %></button>\n    <button type="button" class="btnClose -active _btnCancel"><%-IM("ui.label.quit")%></button>\n    <% if (selectedCount) { %>\n    <button type="button" class="btnConfirm -active _btnConfirm"><%-IM("ui.label.confirm")%></button>\n    <% } %>\n</div>'},3558:function(e,t,n){var i=n(4),s=n(3559),a={ALL:{KEY:"all",LABEL:IM("attachment.search.filter.all")},participated:{KEY:"participated",LABEL:IM("attachment.search.filter.participated")},NOT_PARTICIPATED:{KEY:"not_participated",LABEL:IM("attachment.search.filter.not_participated")}},o=i.View.extend({className:"searchFilter gMat16",attributes:{"data-viewname":"DBandAttachmentFilterView"},template:_.template(s),templateContext:{searchFilter:a},ui:{searchFilter:"._searchFilter"},events:{"change @ui.searchFilter":"_fetchSearchFilter"},resetValue:function(){this.getUI("searchFilter").val(a.ALL.KEY)},getValue:function(){return{filter:this.getUI("searchFilter").val()}},_fetchSearchFilter:function(){this.trigger("doSearch",this.getValue())}});o.buildDBandAttachmentFilterView=function(){return new o},e.exports=o},3559:function(e,t){e.exports='<div class="uSelect -textType -h14 -taR">\n    <select class="_searchFilter">\n        <% _.each(searchFilter, function(filter) { %>\n        <option value="<%- filter.KEY %>"><%- filter.LABEL %></option>\n        <% }); %>\n    </select>\n</div>\n'},3560:function(e,t,n){var i;void 0===(i=function(e){var t=n(2),i=n(0),s=n(4),a=n(3561),o=n(1007),l=n(3562),r=n(2117),d=n(3564),c=n(3566),h=n(2118),u=n(1281),p=n(1052),m=n(583),_=n(154),b=n(512),g=n(553),f=s.View.extend({tagName:"div",className:"sAttachments gBoxShadow",attributes:{"data-viewname":"DBandAttachmentFolderLayoutView"},template:i.template(a),ui:{folder:"._folder",contentWrap:"._contentWrap",search:"._search",topMenu:"._topMenu",filesWrap:"._filesWrap",fileCount:"._fileCount",fileList:"._fileList",emptyWrap:"._emptyWrap",emptyText:"._emptyText",bottomMenu:"._bottomMenu",loading:"._loading"},regions:{folder:{el:"@ui.folder",replaceElement:!0},search:{el:"@ui.search",replaceElement:!0},topMenu:{el:"@ui.topMenu",replaceElement:!0},fileCount:{el:"@ui.fileCount",replaceElement:!0},fileList:{el:"@ui.fileList",replaceElement:!0},bottomMenu:{el:"@ui.bottomMenu",replaceElement:!0},loading:{el:"@ui.loading",replaceElement:!1}},childViewEvents:{search:function(e){this._query=e,this._orderBy=this._query?null:o.ORDER_BY.CREATED_AT_DESC,this._checkable=!1,this._loadFiles()},orderBy:function(e){this._orderBy=e,this._loadFiles()},uploaded:"_loadFiles"},collectionEvents:{"file-list:checkable":function(e){this._checkable=e,this._toggleBottomMenuView()},"file-list:removed":function(){var e=this.collection.size(),t=this.collection.hasMoreFiles();0!==e||t?(this._toggleFileCount(!0),e<20&&t&&this._loadMoreFiles()):this._toggleFileListView(!1)}},initialize:function(e){this._bandData=e.bandData,this._folderId=e.folderId,this._bandNo=this._bandData.getBandCore().bandNo,this._fetched=!1,this._folder=null,this.collection=o.build(),this._query=null,this._orderBy=o.ORDER_BY.CREATED_AT_DESC,this._checkable=!1,this._checkValidator=i.bind((function(e){return!(e&&this.collection.getCheckedFileCount()>=20)||(alert(IM("file.select_up_to_count",{count:20})),!1)}),this)},onRender:function(){this._toggleLoadingView(!0),this._renderContents()},onAttach:function(){this._fetchContents(),this.listenTo(b,"window:scroll:bottom",this._loadMoreFiles)},onBeforeDetach:function(){this.stopListening(b)},_toggleLoadingView:function(e){var t=this.getRegion("loading");t.hasView()||t.show(m.build()),this.ui.loading.css("display",e?"":"none")},_fetchContents:function(){var e=t.when(this._fetchFolder(),this._fetchFiles());_.wrapActivePromise(e,this).then(i.bind((function(e){this._folder=e,this._fetched=!0,this._renderContents()}),this),i.bind((function(){var e=this._bandData.getBandCore();g.home(e).go()}),this))},_renderContents:function(){this._fetched&&(this._folder&&p.changeFolderDocumentTitle(this._bandData.getBandCore(),this._folder),this._renderFolderView(),this.ui.contentWrap.css("display",""),this._renderSearchView(),this._toggleFileListView(!0),this._toggleLoadingView(!1))},_renderFolderView:function(){var e=l.buildFolderView({bandData:this._bandData,folder:this._folder,files:this.collection});this.showChildView("folder",e)},_renderSearchView:function(){if(!this._folder){var e=r.buildFolderFileSearchInputView();this.showChildView("search",e)}},_toggleFileListView:function(e){var t=this.getRegion("topMenu"),n=this.getRegion("fileList"),i=this.collection.isEmpty();if(!e||i)return t.empty(),n.empty(),this.ui.filesWrap.css("display","none"),this._toggleFileCount(!1),this._toggleBottomMenuView(!1),void this._toggleEmpty(i);t.show(d.buildFileListTopMenuView({bandData:this._bandData,folder:this._folder,collection:this.collection,orderBy:this._orderBy})),this.ui.filesWrap.css("display",""),this._folder&&this.ui.filesWrap.addClass("-attachmentFolder"),this._toggleFileCount(!0),this._toggleBottomMenuView(),n.show(this._buildFileListView())},_buildFileListView:function(){return this._folder?u.buildFolderFileListView({collection:this.collection,bandData:this._bandData,checkable:this._checkable,checkValidator:this._checkValidator}):u.buildFileListView({collection:this.collection,bandData:this._bandData,checkable:this._checkable,checkValidator:this._checkValidator})},_toggleFileCount:function(e){var t=this.getRegion("fileCount");e&&this._query?t.show(h.buildFileSearchCountView({fileCount:this.collection.getTotalFileCount()})):t.empty()},_toggleBottomMenuView:function(e){var t=this.getRegion("bottomMenu");!1!==e&&this._checkable&&!this.collection.isEmpty()?t.show(c.buildFileListBottomMenuView({bandData:this._bandData,collection:this.collection})):t.empty()},_toggleEmpty:function(e){var t="",n="none";e&&(t=this._getEmptyText(),n=""),this.ui.emptyText.html(t),this.ui.emptyWrap.css("display",n)},_getEmptyText:function(){return this._query?IM("web.bandfile.filesearch.result.no_result",{query:i.escape(this._query)}):IM("ui.message.empty_conents")},_loadFiles:function(){this._toggleFileListView(!1),this._toggleEmpty(!1),this._toggleLoadingView(!0),t(window).scrollTop(0),_.wrapActivePromise(this._fetchFiles(),this).then(i.bind((function(){this._toggleFileListView(!0),this._toggleLoadingView(!1)}),this))},_loadMoreFiles:function(){this._query?this.collection.searchMoreFiles():this.collection.fetchMoreFiles()},_fetchFolder:function(){return this._folderId?p.fetchBandFolder(this._bandNo,this._folderId):t.when()},_fetchFiles:function(){return this._query?this.collection.searchFiles({bandNo:this._bandNo,query:this._query}):this._folderId?this.collection.fetchFiles({bandNo:this._bandNo,filter:o.FILTER.FOLDER,folderId:this._folderId,orderBy:this._orderBy}):this.collection.fetchFiles({bandNo:this._bandNo,filter:o.FILTER.ALL,orderBy:this._orderBy})}});return f.buildFolderLayoutView=function(e){return new f(e)},f}.call(t,n,t,e))||(e.exports=i)},3561:function(e,t){e.exports='<div class="_folder" style="display:none"></div>\n\n<div class="collectAttachmentWrap _contentWrap" style="display:none">\n    <div class="fileFolderOptionMenu -fixed gPat7">\n        <div class="_search" style="display:none"></div>\n\n        <div class="_topMenu" style="display:none"></div>\n    </div>\n    <div class="attachmentArea _filesWrap" style="display:none">\n        <div class="fileFolderBox">\n            <div class="_fileCount" style="display:none"></div>\n            <div class="_fileList"></div>\n        </div>\n    </div>\n</div>\n\n<div class="uEmpty -tLine _emptyWrap" style="height:545px;display:none">\n    <p class="uEmptyDesc gColorGr3 _emptyText"></p>\n</div>\n\n<div class="_bottomMenu" style="display:none"></div>\n\n<div class="uEmpty _loading" style="height:545px;display:none"></div>'},3562:function(e,t,n){var i=n(0),s=n(10),a=n(4),o=n(3563),l=n(1052),r=n(1635),d=n(26),c=n(154),h=n(935),u=n(590),p=a.View.extend({tagName:"div",className:"uHeaderWrap -fixed -bLineNone",attributes:{"data-viewname":"DBandAttachmentFolderView"},template:i.template(o),ui:{title:"._title",count:"._count",editBtn:"._editBtn",fileInput:"._fileInput",menuBtn:"._menuBtn",menuWrap:"._menuWrap",urlBtn:"._urlBtn",deleteBtn:"._deleteBtn"},events:{"click @ui.editBtn":function(){this._openFolderNameUpdateModal()},"click @ui.fileInput":function(e){u.isContentCreationPunished()&&e.preventDefault()},"click @ui.menuBtn":"_toggleMenu","click @ui.urlBtn":function(){l.copyFolderUrl(this._bandNo,this._folder)},"click @ui.deleteBtn":function(){var e=l.deleteFolder(this._bandNo,this._folder);c.wrapActivePromise(e,this).then(i.bind((function(){l.gotoAttachmentHome(this._bandNo)}),this))}},collectionEvents:{"file-list:checkable":function(e){this.ui.fileInput.css("display",e?"none":"")},"file-list:removed":function(e){e&&this._addToFileCount(-e)}},initialize:function(e){this._bandData=e.bandData,this._folder=e.folder,this.collection=e.files,this._bandNo=this._bandData.getBandCore().bandNo},serializeData:function(){return{name:this._getFolderName(),count:this._getFileCount(),urlBtn:this._canCopyFolderUrl(),editBtn:this._canEditFolderName(),uploadBtn:this._canUploadFile(),deleteBtn:this._canDeleteFolder()}},onBeforeRender:function(){this._destroyUploader()},onRender:function(){this._createUploader()},onAttach:function(){this.listenTo(d.getDGlobalChannel(),d.EVENT.HTML_CLICK,(function(){this._toggleMenu(!1)}))},onBeforeDetach:function(){this.stopListening(d.getDGlobalChannel()),this._destroyUploader()},_destroyUploader:function(){this._uploader&&(this._uploader.destroy(),this._uploader=null)},_createUploader:function(){this._destroyUploader(),this._uploader=r.createBandFileUploader({element:this.ui.fileInput,inputTitle:IM("file.upload_file"),bandData:this._bandData,uploadOnly:!!this._folder}),this.listenTo(this._uploader,this._uploader.EVENT.COMPLETE,(function(e){var t=e.files,n=this._folder||e.folder,s=l.createFiles(this._bandNo,t,n);c.wrapActivePromise(s,this).then(i.bind((function(e){var t=i.size(e.file_ids);if(t){var s=l.isSameFolder(this._folder,n);this._folder&&!s||this.trigger("uploaded"),s&&this._addToFileCount(t)}}),this))}))},_getFolderName:function(){return this._folder?this._folder.getFolderName():IM("file.all_files")},_getFileCount:function(){return this._folder?s.numberFormat(this._folder.getFolderFileCount()||0):null},_canCopyFolderUrl:function(){return!!this._folder},_canEditFolderName:function(){return!!this._folder&&(this._folder.isMyFolder()||this._bandData.isContentsDeletionPermitted())},_canUploadFile:function(){return this._bandData.isPostingPermitted()},_canDeleteFolder:function(){return!!this._folder&&this._bandData.isContentsDeletionPermitted()},_toggleMenu:function(e){!1!==e&&!0!==e?"none"===this.ui.menuWrap.css("display")&&i.defer(i.bind((function(){this.ui.menuWrap.css("display","")}),this)):this.ui.menuWrap.css("display",e?"":"none")},_updateFolderName:function(e){var t=s.trim(e);if(l.isValidFolderName(t)){var n=l.updateFolderName(this._bandNo,this._folder,t);c.wrapActivePromise(n,this).then(i.bind((function(){this.ui.title.html(i.escape(this._getFolderName()))}),this))}},_openFolderNameUpdateModal:function(){h.openDPromptModalView({title:IM("file.edit_folder_name"),defaultText:this._getFolderName(),maxlength:l.getFolderNameMaxLength(),placeholder:IM("file.folder_name"),validation:i.bind(l.isValidFolderName,this),withoutHiding:!0}).once({"modal:confirm":i.bind((function(e){this._updateFolderName(e)}),this)})},_addToFileCount:function(e){if(this._folder){var t=this._folder.getFolderFileCount()+e;this._folder.setFolderFileCount(Math.max(t,0)),this.ui.count.html(this._getFileCount())}}});p.buildFolderView=function(e){return new p(e)},e.exports=p},3563:function(e,t){e.exports='<header class="header">\n    <h1 class="title -ellipsis">\n        <span class="titleText _title"><%- name %></span> <em class="count sf_color _count"><%- count %></em>\n    </h1>\n\n    <% if (uploadBtn || urlBtn || editBtn || deleteBtn) { %>\n    <div class="btnsWrap">\n        <% if (uploadBtn) { %>\n        <div class="btn uButton sf_tBorderOpacity sf_color _fileInput">\n            <%- IM(\'file.upload_file\') %>\n            <input type="file" title="<%- IM(\'file.upload_file\') %>" name="attachment" class="inputFile">\n        </div>\n        <% } %>\n        <% if (urlBtn || editBtn || deleteBtn) { %>\n        <div class="moreWrap">\n            <button type="button" class="btnMore _menuBtn"><span class="gSrOnly"><%- IM(\'web.uicomponent.topbar.button.menuopen\') %></span></button>\n            <div class="lyMenu _menuWrap" style="display:none">\n                <ul>\n                    <% if (urlBtn) { %>\n                    <li><button class="btnListItem _urlBtn"><%- IM(\'ui.label.copy_url\') %></button></li>\n                    <% } %>\n                    <% if (editBtn) { %>\n                    <li><button class="btnListItem _editBtn"><%- IM(\'file.edit_folder_name\') %></button></li>\n                    <% } %>\n                    <% if (deleteBtn) { %>\n                    <li><button class="btnListItem _deleteBtn"><%- IM(\'file.delete_folder\') %></button></li>\n                    <% } %>\n                </ul>\n            </div>\n        </div>\n        <% } %>\n    </div>\n    <% } %>\n</header>'},3564:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3565),a=n(1007),o=n(1052),l=n(2012),r=n(9),d=n(154),c=n(668),h=n(156),u=[{value:a.ORDER_BY.CREATED_AT_DESC,label:r.message("album_detail.sort.latest_order")},{value:a.ORDER_BY.CREATED_AT_ASC,label:r.message("selection.label.created_at")}],p=i.View.extend({tagName:"div",className:"actionButtons gMar-22 gMal-22",attributes:{"data-viewname":"DBandAttachmentFileListTopMenuView"},template:t.template(s),ui:{orderBy:"._orderBy",checkableOnBtn:"._checkableOnBtn",manageBtnWrap:"._manageBtnWrap",moveBtn:"._moveBtn",deleteBtn:"._deleteBtn"},events:{"change @ui.orderBy":"_changeOrderBy","click @ui.checkableOnBtn":"_onCheckable","click @ui.moveBtn":"_moveFiles","click @ui.deleteBtn":"_deleteFiles"},collectionEvents:{"file-list:checkable":"_toggleManageMode","file-list:checked":"_toggleManageButtons"},initialize:function(e){this._bandData=e.bandData,this._folder=e.folder,this._orderBy=e.orderBy,this._bandNo=this._bandData.getBandCore().bandNo},serializeData:function(){return{viewId:this.cid,orderBys:this._getOrderBys()}},_getOrderBys:function(){return this._orderBy?t.map(u,(function(e){return{value:e.value,label:e.label,selected:e.value===this._orderBy}}),this):null},_changeOrderBy:function(){var e=this.ui.orderBy.val();e!==this._orderBy&&(this._orderBy=e,this.trigger("orderBy",this._orderBy))},_onCheckable:function(){this.collection.enableFileListCheckable()},_offCheckable:function(){this.collection.disableFileListCheckable()},_moveFiles:function(){var e=this.collection.getCheckedFiles();if(e=t.filter(e,(function(e){return!h.isExpiredFile(e.getFileExpiresAt())})),this._bandData.isContentsDeletionPermitted()||(e=t.filter(e,(function(e){return e.isMyFile()}))),0!==e.length){var n=l.openFolderSelectLayer({bandNo:this._bandNo,folder:this._folder||(1===e.length?e[0].getFileFolder():null)});this.listenToOnce(n,"confirm",(function(n){var i=n.folder;if(!o.isSameFolder(this._folder,i)){var s=o.moveFiles(this._bandNo,e,i);d.wrapActivePromise(s,this).then(t.bind((function(n){var s=t.indexBy(n.file_ids),a=t.filter(e,(function(e){return!!s[e.getFileId()]}));c.openSimpleAlert(IM("file.file_move_complete")),this._folder&&this._removeFiles(a),t.each(a,(function(e){e.setFileFolder(i)})),this._offCheckable()}),this))}}))}else c.openSimpleAlert(IM("permission_deny"))},_deleteFiles:function(){var e=this.collection.getCheckedFiles();this._bandData.isContentsDeletionPermitted()||(e=t.filter(e,(function(e){return e.isMyFile()}))),0!==e.length?c.openSimpleConfirm(this._getDeleteTitle()).confirm(t.bind((function(){this._executeDeletingFiles(e)}),this)):c.openSimpleAlert(IM("permission_deny"))},_getDeleteTitle:function(){return this._bandData.isContentsDeletionPermitted()?IM("file.delete_all_selected_files_confirm"):IM("file.only_delete_your_files_confirm")},_executeDeletingFiles:function(e){var n=o.deleteFiles(this._bandNo,e);d.wrapActivePromise(n,this).then(t.bind((function(e){c.openSimpleAlert(IM("file.file_delete_complete")),this._removeFiles(e),this._offCheckable()}),this))},_removeFiles:function(e){this.collection.removeFileList(e)},_toggleManageMode:function(e){this.ui.checkableOnBtn.css("display",e?"none":""),this.ui.manageBtnWrap.css("display",e?"":"none"),this._toggleManageButtons()},_toggleManageButtons:function(){var e=0===this.collection.getCheckedFileCount();this.ui.moveBtn.prop("disabled",e),this.ui.deleteBtn.prop("disabled",e)}});return p.buildFileListTopMenuView=function(e){return new p(e)},p}.call(t,n,t,e))||(e.exports=i)},3565:function(e,t){e.exports='<% if (orderBys) { %>\n<div class="uSelectBox _orderWrap">\n    <div class="uSelect -h20 -textType -sizeS">\n        <label for="sort_<%- viewId %>" class="gSrOnly"><%- IM(\'web.bandlist.order_type.title\') %></label>\n        <select id="sort_<%- viewId %>" class="_orderBy">\n            <% _.each(orderBys, function(item) { %>\n            <option value="<%- item.value %>" <%- item.selected ? \'selected\' : \'\' %>><%- item.label %></option>\n            <% }); %>\n        </select>\n    </div>\n</div>\n<% } %>\n<div class="action">\n    <div class="item">\n        <button type="button" class="uButton -text -manage _checkableOnBtn"><%- IM(\'management\') %></button>\n        <div class="btns _manageBtnWrap" style="display:none">\n            <button type="button" class="uButton -text _moveBtn"><%- IM(\'ui.label.move_to\') %></button>\n            <button type="button" class="uButton -text _deleteBtn"><%- IM(\'ui.label.delete\') %></button>\n        </div>\n    </div>\n</div>'},3566:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(4),s=n(3567),a=i.View.extend({tagName:"div",className:"cFixedBottomStatus -fixed gMal-1",attributes:{"data-viewname":"DBandAttachmentFileListBottomMenuView"},template:t.template(s),ui:{checkedCount:"._checkedCount",checkedClearBtn:"._checkedClearBtn",checkableOffBtn:"._checkableOffBtn"},events:{"click @ui.checkedClearBtn":"_clearChecked","click @ui.checkableOffBtn":"_offCheckable"},collectionEvents:{"file-list:checked":"_renderCount"},initialize:function(e){this._bandData=e.bandData,this._bandNo=this._bandData.getBandCore().bandNo},onRender:function(){this._renderCount()},_renderCount:function(){var e=this.collection.getCheckedFileCount(),t=IM("file.selected_count",{count:e||"0"});this.ui.checkedCount.html(t)},_clearChecked:function(){this.collection.clearFileListChecked()},_offCheckable:function(){this.collection.disableFileListCheckable()}});return a.buildFileListBottomMenuView=function(e){return new a(e)},a}.call(t,n,t,e))||(e.exports=i)},3567:function(e,t){e.exports='<div class="statusCommentWrap">\n    <span class="statusText _checkedCount"></span>\n</div>\n<div class="buttonBox gMal10">\n    <button type="button" class="btnSelectCalendar _checkedClearBtn"><%- IM(\'deselection\') %></button>\n    <button type="button" class="btnClose -active _checkableOffBtn"><%- IM(\'ui.label.quit\') %></button>\n</div>'},3568:function(e,t,n){var i;void 0===(i=function(e){var t=n(786),i=n(1103),s=n(937);return{openContentLayer:function(e){var t=e.contentKey.getContentType();t&&(t.isPost()||t.isPostComment()||t.isPostCommentReply()?this.openPostDetailLayer(e):t.isPhotoComment()||t.isPhotoCommentReply()?this.openImageViewerLayer(e):(t.isSchedule()||t.isScheduleComment()||t.isScheduleCommentReply())&&this.openScheduleDetailLayer(e))},openPostDetailLayer:function(e){var n=e.bandNo,i=e.contentKey,s=i.makeInitCommentIdAndReplyId();t.buildPostDetailAsLayer({bandNo:n,postNo:i.getPostNo(),initCommentId:s.initCommentId,initCommentReplyId:s.initCommentReplyId})},openImageViewerLayer:function(e){var t=e.bandNo,n=e.contentKey,s=e.openerView,a=n.makeInitCommentIdAndReplyId();i.openSingleImageViewer(s,t,n.getPhotoNo(),a.initCommentId,a.initCommentReplyId)},openScheduleDetailLayer:function(e){var t=e.bandNo,n=e.contentKey,i=n.makeInitCommentIdAndReplyId();s.openScheduleDetailLayerView({bandNo:t,scheduleId:n.getScheduleId(),initCommentId:i.initCommentId,initCommentReplyId:i.initCommentReplyId})}}}.call(t,n,t,e))||(e.exports=i)},3569:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3570),a=n(3571),o=n(3573),l=n(493),r=n(52),d=n(155),c=n(26),h=t.View.extend({attributes:{"data-viewname":"DGroupBandMemberGroupView"},className:"sSettingBand gContentCardShadow",template:i.template(s),ui:{memberGroupList:"._memberGroupList",memberGroupListRegionWrap:"._memberGroupListRegionWrap",createMemberGroup:"._createMemberGroup"},events:{"click @ui.createMemberGroup":function(){var e=a.buildLayerView(this._bandNo);this.listenTo(e,"createGroup:resolve",i.bind((function(){this._refreshMemberGroups()}),this))}},regions:{memberGroupList:{el:"@ui.memberGroupList",replacement:!0}},initialize:function(e){this._bandNo=e.bandNo,this._bandData=e.bandData,this._memberGroups=e.memberGroups},templateContext:function(){return{canManageMemberGroups:this._bandData.canManageMemberGroups()}},onAttach:function(){this._showMemberGroupList(),this.listenTo(c.getBandChannel(this._bandNo),c.EVENT.REFRESH_MEMBER_GROUPS,i.bind((function(){this._refreshMemberGroups()}),this))},_showMemberGroupList:function(){this._memberGroupCollection=new p(this._memberGroups),this._dGroupBandMemberGroupCollectionView=new m({collection:this._memberGroupCollection,bandNo:this._bandNo,canManageMemberGroups:this._bandData.canManageMemberGroups()}),this.showChildView("memberGroupList",this._dGroupBandMemberGroupCollectionView),this.listenTo(this._dGroupBandMemberGroupCollectionView,"collectionView:delete_item",i.bind((function(e){this._deleteMemberGroup(e)}),this))},_refreshMemberGroups:function(){l.getMemberGroups(this._bandNo).then(i.bind((function(e){var t=r.camelizeKeys(e.items);this._memberGroupCollection.reset(t)}),this))},_deleteMemberGroup:function(e){l.deleteMemberGroup(this._bandNo,e.get("memberGroupId")).then(i.bind((function(){this._memberGroupCollection.remove(e)}),this))}}),u=Backbone.Model.extend({defaults:function(){return{memberCount:0,memberGroupId:"",name:""}}}),p=Backbone.Collection.extend({model:u}),m=t.CollectionView.extend({tagName:"ul",className:"sSettingList",attributes:{"data-viewname":"DGroupBandMemberGroupCollectionView"},initialize:function(e){this._bandNo=e.bandNo,this._canManageMemberGroups=e.canManageMemberGroups},childView:o,childViewOptions:function(){return{bandNo:this._bandNo,canManageMemberGroups:this._canManageMemberGroups}},childViewEvents:{"itemView:delete_item":function(e){this.trigger("collectionView:delete_item",e)}}});return h.buildAsyncMemberGroup=function(e){return l.getMemberGroups(e.bandNo).then(i.bind((function(t){var n=r.camelizeKeys(t.items),i=d.get(e.bandNo);return i.canManageMemberGroups()||n.length>0?new h({bandNo:e.bandNo,bandData:i,memberGroups:n}):null}),this))},h}.call(t,n,t,e))||(e.exports=i)},3570:function(e,t){e.exports='<div class="uHeaderWrap -h50">\n    <header class="header ">\n        <h1 class="title">\n            <% if(canManageMemberGroups) { %>\n            <%- IM(\'band.member.group.setting\') %>\n            <% } else { %>\n            <%- IM(\'band.member.group.view_group\') %>\n            <% } %>\n        </h1>\n    </header>\n</div>\n\n<div class="_memberGroupList"></div>\n\n<% if(canManageMemberGroups) { %>\n<div class="addButtonArea gMat-1">\n    <button type="button" class="addButton _createMemberGroup">\n        <span class="-iconAddMar6"></span> <%- IM(\'band.member.group.add_group\') %>\n    </button>\n</div>\n<% } %>\n\n<div class="attention -tLine gMal22 gMar22 gPal0 gPar0 gPat12 gPab34">\n    <div class="noticeArea">\n        <% if(canManageMemberGroups) { %>\n        <p class="noticeText"><%- IM(\'band.member.group.please_make_member_group\') %></p>\n        <% } %>\n        <p class="noticeText"><%- IM(\'band.member.group.how_to_mention2\') %></p>\n    </div>\n</div>'},3571:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(486),a=n(3572),o=n(493),l=t.View.extend({attributes:{"data-viewname":"DGroupBandMemberGroupCreateGroup"},tagName:"section",className:"lyWrap",template:i.template(a),ui:{createMemberGroupName:"._createMemberGroupName",btnConfirm:"._btnConfirm",btnCancel:"._btnCancel"},events:{"keydown @ui.createMemberGroupName":"_setMemberGroupNameLimitMaxLength","keyup @ui.createMemberGroupName":function(){this.getUI("createMemberGroupName").val().trim().length>0?(this.getUI("btnConfirm").attr("disabled",!1),this.getUI("btnConfirm").addClass("-confirm").removeClass("-disabled")):(this.getUI("btnConfirm").attr("disabled",!0),this.getUI("btnConfirm").addClass("-disabled").removeClass("-confirm"))},"click @ui.btnConfirm":function(){if(0===this.getUI("createMemberGroupName").val().length)return!1;this._setMemberGroupNameLimitMaxLength(),o.createMemberGroup(this._bandNo,this._createMemberGroupName).then(i.bind((function(){this.trigger("createGroup:resolve"),s.closeTop()}),this))},"click @ui.btnCancel":function(){s.closeTop()}},initialize:function(e){this._bandNo=e.bandNo},_setMemberGroupNameLimitMaxLength:function(){var e=this.getUI("createMemberGroupName");e.val().trim().length>20&&e.val(e.val().trim().substr(0,20)),this._createMemberGroupName=e.val().trim()}});return l.buildLayerView=function(e){var t=new l({bandNo:e});return s.open(t),t},l}.call(t,n,t,e))||(e.exports=i)},3572:function(e,t){e.exports='<div class="lyContent -w360">\n    <header class="header">\n        <h1 class="title"><%- IM(\'band.member.group.add_group\') %></h1>\n    </header>\n    <div class="main">\n        <p class="p"><%- IM(\'band.member.group.please_enter_name\') %></p>\n        <div class="p -tSpace">\n            <div class="uInput">\n                <label class="gSrOnly" for="createMemberGroupName"><%- IM(\'band.member.group.name\') %></label>\n                <input type="text" id="createMemberGroupName" class="_createMemberGroupName" maxlength="20" placeholder="<%- IM(\'band.member.group.name\') %>">\n                <span class="border"></span>\n            </div>\n        </div>\n    </div>\n    <footer class="footer">\n        <button type="button" class="uButton -cancel _btnCancel"><%- IM(\'ui.label.cancel\') %></button>\n        <button type="button" class="uButton -disabled _btnConfirm" disabled="disabled"><%- IM(\'ui.label.confirm\') %></button>\n    </footer>\n</div>'},3573:function(e,t,n){var i;void 0===(i=function(e){var t=n(4),i=n(0),s=n(3574),a=n(1125);return t.View.extend({tagName:"li",className:"sSettingItem",attributes:{"data-viewname":"DGroupBandMemberGroupItemView"},ui:{memberGroupDelete:"._memberGroupDelete"},events:{click:"_openDetailViewAsyncLayer","click @ui.memberGroupDelete":function(){return confirm(IM("band.member.group.are_you_sure_delete")+"\n"+IM("band.member.group.not_leave_a_band"))&&this.trigger("itemView:delete_item",this.model),!1}},initialize:function(e){this._bandNo=e.bandNo,this._canManageMemberGroups=e.canManageMemberGroups},template:i.template(s),templateContext:function(){return{canManageMemberGroups:this._canManageMemberGroups}},_openDetailViewAsyncLayer:function(){a.buildAsyncLayerView(this._bandNo,this.model.get("memberGroupId"))}})}.call(t,n,t,e))||(e.exports=i)},3574:function(e,t){e.exports='<div class="itemContent">\n    <span class="label -moreArrow gDpIb gCursorPointer"><%- name %> (<%- memberCount %>)</span>\n</div>\n<% if(canManageMemberGroups) { %>\n<div class="itemSide">\n    <a href="#" class="uButton -sizeS -alert -reverse _memberGroupDelete"><%- IM(\'ui.label.delete\') %></a>\n</div>\n<% } %>'},3575:function(e,t,n){var i;void 0===(i=function(e){var t=n(0);return n(4).View.extend({tagName:"div",className:"uEmpty gContentCardShadow",attributes:{"data-viewname":"DGroupBandUnauthorizedAccessView",style:"height:547px"},template:t.template('<a href="#" class="_joinBtnArea">\n    <span class="uEmptyIcon -join"></span>\n    <h1 class="uEmptyTitle"><%= IM("board.no_member.hint") %></h1>\n    <p class="uEmptyDesc"><%= IM("board.no_member.hint.post") %></p>\n</a>'),triggers:{"click ._joinBtnArea":"DBandMainLayoutView:startBandJoin"}})}.call(t,n,t,e))||(e.exports=i)},685:function(e,t,n){var i;void 0===(i=function(e){n(0);var t=n(4),i=n(13),s=(n(9),n(157),t.Object.extend({initialize:function(e){this._bandData=e.bandData},canManageLocalBand:function(){return this._bandData.canManageLocalBand()},canRegisterLocalMeetup:function(){return this._bandData.canRegisterLocalMeetup()},canShowLocalBandInfo:function(){return this._bandData.canShowLocalBandInfo()},canShowRegionAndKeyword:function(){i.canAccessBandSearchForGuardianship()},canDiscoverLocalBand:function(){return this._bandData.canDiscoverLocalBand()},canShowUpcomingLocalBandMeetupSchedule:function(){return this._bandData.canShowLocalBandInfo()}}));return s.build=function(e){return new s({bandData:e})},s}.call(t,n,t,e))||(e.exports=i)},930:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(0),s=n(804),a=n(782),o=n(506),l=t.Collection.extend({model:function(e){return new a(e,{parse:!0})},fetchOnGoingMissions:function(e){return this._fetchOnGoingMissionsData(e).then(i.bind((function(e){return this.reset(e),this}),this))},_fetchOnGoingMissionsData:function(e){return s.getOnGoingMissions(e).then((function(t){var n=(new Date).valueOf();return i.map(t,(function(t){return i.extend({band_no:e,confirm_status:t.confirm_status,remind_state:t.remind_state,fetchedAt:n},t.mission)}))}))},fetchEndedMissions:function(e){return s.getEndedMissions({band_no:e}).then(i.bind((function(t){var n=(new Date).valueOf(),s=i.map(t.items,(function(t){return i.extend({band_no:e,fetchedAt:n},t)}));return this.reset(s),this.paging=t.paging,this}),this))},fetchMoreEndedMissions:function(e){return s.getEndedMissions(e).then(i.bind((function(t){var n=(new Date).valueOf(),s=i.map(t.items,(function(t){return i.extend({band_no:e.band_no,fetchedAt:n},t)}));return this.add(s),this.paging=t.paging,this}),this))},fetchNotEndedMissions:function(e){return s.getNotEndedMissions({band_no:e}).then(i.bind((function(t){var n=(new Date).valueOf(),s=i.map(t.items,(function(t){return i.extend({band_no:e,fetchedAt:n},t)}));return this.reset(s),this.paging=t.paging,this}),this))},fetchEndedMissionCount:function(e){return s.getEndedMissionCount(e).then((function(e){return e.ended_mission_count}))},fetchMoreNotEndedMissions:function(e){return s.getNotEndedMissions(e).then(i.bind((function(t){var n=(new Date).valueOf(),s=i.map(t.items,(function(t){return i.extend({band_no:e.band_no,fetchedAt:n},t)}));return this.add(s),this.paging=t.paging,this}),this))},fetchParticipatedMissions:function(e){return s.getParticipatedMissions(e).then(i.bind((function(t){var n=e.band_no,s=Date.now(),a=i.map(t.items,(function(e){return e.band_no=n,e.fetched_at=s,e}));return this.add(a),o.get(t,"paging.next_params")}),this))},fetchMyMissions:function(e,t){return s.getMyMissions(e).then(i.bind((function(n){var s=Date.now(),a=n.items;i.isFinite(t)&&t>0&&(a=i.first(a,t)),i.each(a,(function(t){t.band_no=e,t.fetched_at=s})),this.reset(a)}),this))}});return l.buildBandMissionCollection=function(){return new l},l}.call(t,n,t,e))||(e.exports=i)},939:function(e,t,n){var i;void 0===(i=function(e){var t=n(6),i=n(0),s=n(52),a=n(156),o=n(9),l=n(16);return t.Model.extend({idAttribute:"id",defaults:function(){return{bandNo:"",type:"",isRecruiting:!1,description:"",schoolInfo:"",location:null,keywords:[],keywordsWithKeywordGroups:[],businessRegistrationNo:"",mediaList:[],bandFiles:[],shortcut:null}},parse:function(e){return{}},setAttributes:function(e){var t=s.camelizeKeys(e);this.set(i.extend(this.defaults(),t))},getBandNo:function(){return this.get("band")},getBandType:function(){return this.get("type")},isRecruiting:function(){return this.get("isRecruiting")},getBandDescription:function(){return this.get("description")},getBandSchoolInfo:function(){return this.get("schoolInfo")},getBandLocation:function(){return this.get("location")},getBandKeywords:function(){return this.get("keywords")},getBandKeywordsWithKeywordGroups:function(){return this.get("keywordsWithKeywordGroups")},getBandBusinessRegistrationNo:function(){return this.get("businessRegistrationNo")},getBandMediaList:function(){return this.get("mediaList")},_getBandIntroFiles:function(){return this.get("bandFiles")},getBandIntroFilesDescription:function(){return this._getBandIntroFiles().description?this.get("bandFiles").description:""},getBandFiles:function(){return i.map(this._getBandIntroFiles().fileList,(function(e){return{fileId:e.fileId,fileName:e.fileName,fileSizeNumber:e.fileSize,fileSize:a.toStringFileSize(e.fileSize),updatedAt:o.format.date(l(e.updatedAt),"year_month_day"),fileTypeIcon:a.getFileType("","",e.fileName)}}))},getBandDropboxFiles:function(){return i.map(this._getBandIntroFiles().dropboxList,(function(e){return{link:e.link,name:e.name,fileSizeNumber:e.size,size:a.toStringFileSize(e.size),order:e.order,fileTypeIcon:a.getFileType("","",e.name)}}))},setBandKeywords:function(e){this.set("keywords",e)},setBandKeywordsWithKeywordGroups:function(e){this.set("keywordsWithKeywordGroups",e)},removeSelectedKeywordInfo:function(e){console.log(e)},setBandLocation:function(e){this.set("location",e)},getBandShortcutUrl:function(){return this.get("shortcut")},setBandShortcutUrl:function(e){this.set("shortcut",e)},canShowGroupBandIntro:function(){return!(i.isEmpty(this.getBandDescription())&&i.isEmpty(this.getBandMediaList())&&i.isEmpty(this.getBandFiles())&&i.isEmpty(this.getBandDropboxFiles())&&i.isEmpty(this.getBandShortcutUrl())&&i.isEmpty(this.getBandSchoolInfo())&&i.isEmpty(this.getBandKeywords())&&i.isEmpty(this.getBandLocation())&&i.isEmpty(this.getBandBusinessRegistrationNo()))}})}.call(t,n,t,e))||(e.exports=i)},941:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(52),a=n(158),o=(IM("bandsetting.band_type_join_setting.txt.public_band"),IM("web.bandsetting.bandtype.txt.public_band_description"),IM("bandsetting.band_type_join_setting.txt.closed_band"),IM("web.bandsetting.bandtype.txt.closed_band_description"),IM("bandsetting.band_type_join_setting.txt.secret_band"),IM("web.bandsetting.bandtype.txt.secret_band_description"),i.Model.extend({parse:function(e){return{bandCore:(e=s.camelizeKeys(e)).bandCore,description:e.description,memberCount:e.memberCount,leaderName:e.leaderName,needAdAgreement:e.needAdAgreement}},getSplitBandDescription:function(){var e=null,n=this.get("description");if(n){if(n=(n=a.nl2br(t.escape(n))).replace(/(<br>)+/g,"<br>"),t.isEqual(n,"<br>"))return e;e=a.splitForTruncate(n,4,45)}return e}}));return o.buildBandPreviewModelFromBandData=function(e){return new o({bandCore:e.getBandCore(),description:e.getDescription(),memberCount:e.getMemberCount(),leaderName:e.getLeaderName(),needAdAgreement:e.getNeedAdAgreement()},{parse:!0})},o}.call(t,n,t,e))||(e.exports=i)},942:function(e,t,n){var i;void 0===(i=function(e){var t=n(0),i=n(6),s=n(1017),a=i.Collection.extend({model:s,initialize:function(e,t){this._updated=!1,this.listenTo(this,"update reset",(function(e,t){this._updated=!0}))},comparator:function(e){return e.get("order")},isUpdated:function(){return this._updated},toJSONForSave:function(){var e=this.groupBy((function(e){return e.get("isDropboxFile")?"dropboxFiles":"bandFiles"}));return{file_list:t.map(e.bandFiles,(function(e){return e.toJSONForSave()})),dropbox_list:t.map(e.dropboxFiles,(function(e){return e.toJSONForSave()}))}}});return a.buildFromBandIntroFiles=function(e,n){var i=[];return t.each(e,(function(e){e.isDropboxFile=!1,i.push(e)}),this),t.each(n,(function(e){e.isDropboxFile=!0,i.push(e)}),this),new a(i,{parse:!0})},a}.call(t,n,t,e))||(e.exports=i)}}]);